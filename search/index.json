[{"content":"æˆ‘ä»¬æœ‰æ—¶å€™ä¼šéœ€è¦ä¸´æ—¶åˆ›å»ºä¸€äº›æ–‡ä»¶ï¼Œåœ¨Linuxä¸­æˆ‘ä»¬ä¸€èˆ¬åœ¨/tmpç›®å½•ä¸‹æ¥åˆ›å»ºï¼ŒDebian / PVE é»˜è®¤ä¸ä¼šå°†/tmpç›®å½•æŒ‚è½½åˆ°å†…å­˜ä¸­ã€‚å¯ä»¥å…ˆè¾“å…¥å‘½ä»¤æ£€æŸ¥ä¸€ä¸‹ï¼š\n1 df -h å¦‚æœä¸Šé¢çš„å‘½ä»¤æ²¡æœ‰è¾“å‡ºç±»ä¼¼ä¸‹é¢è¿™æ ·çš„å†…å®¹ï¼Œé‚£ä¹ˆå°±è¯´æ˜/tmpä¸æ˜¯æŒ‚è½½åœ¨å†…å­˜ä¸­çš„ã€‚\n1 tmpfs 31G 4.6M 31G 1% /tmp æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æŒ‚è½½/tmp/åˆ°å†…å­˜ä¸­ï¼Œè¿™æ ·å¦‚æœä¸´æ—¶æ–‡ä»¶ç”¨å¾—å¤šï¼Œå¯ä»¥å‡å°‘ç£ç›˜å†™å…¥é‡ï¼Œå¹¶æå‡IOã€‚ä»¥rootè¿è¡Œä¸‹é¢çš„å‘½ä»¤å³å¯ã€‚\n1 2 cp /usr/share/systemd/tmp.mount /etc/systemd/system systemctl enable --now tmp.mount ç„¶åæ£€æŸ¥ä¸€ä¸‹ï¼š\n1 df -h ","date":"2023-11-28T00:00:00+08:00","image":"https://evine.win/p/debian-pve-mount-tmp-in-ram/pve-poster_hu73cac004b61f9f0535175084b6c5473f_45414_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/debian-pve-mount-tmp-in-ram/","title":"Debian / PVE åœ¨å†…å­˜ä¸­æŒ‚è½½ /tmp"},{"content":" å…³é”®è¯ï¼šçˆ±å¿« IPv4 / IPv6 ACL / é˜²ç«å¢™ ç«¯å£è½¬å‘ è®¾ç½® å®‰å…¨\nç›¸å…³æ¦‚å¿µ å¼•ç”¨è‡ªçˆ±å¿«å¸®åŠ©æ–‡æ¡£ï¼Œä¸å®Œå…¨ç†è§£ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå¯ä»¥åœ¨å®è·µä¸­åŠ æ·±æ¦‚å¿µç†è§£ã€‚\nåè®®æ ˆï¼šæ”¯æŒé€‰æ‹©IPV4æˆ–IPV6ï¼Œåœ¨çˆ±å¿«è·¯ç”±3.7.0åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒã€‚ åè®®ï¼šè¿™æ¡ACLè§„åˆ™æ‰€èµ°çš„åè®®çš„ç±»å‹ã€‚ åŠ¨ä½œï¼šå…è®¸æˆ–é˜»æ–­ï¼› æ–¹å‘ï¼š è¿›æˆ–è½¬å‘ï¼› [è¿›]ï¼šå†…ç½‘æˆ–å¤–ç½‘è¿›è·¯ç”±ã€‚ [è½¬å‘]ï¼šè·¯ç”±æ¥æ”¶åˆ°å†…ç½‘æˆ–å¤–ç½‘æ•°æ®ç„¶åæŠŠæ•°æ®è¿›è¡Œè½¬å‘åŠ¨ä½œã€‚ è¿æ¥æ–¹å‘åŒ¹é…: [åŸå§‹æ–¹å‘]ï¼šåŒ¹é…ä¸»åŠ¨å‘èµ·æ–¹å‘èµ·è®¿é—®æ—¶çš„æŠ¥æ–‡ã€‚ [åº”ç­”æ–¹å‘]ï¼šåŒ¹é…è¢«è®¿é—®æ–¹åº”ç­”æ—¶çš„æŠ¥æ–‡ã€‚ æºåœ°å€ï¼šè½¬å‘ä¸è¿›åŠ¨ä½œçš„èµ·å§‹åœ°å€ã€‚ ç›®çš„åœ°å€ï¼šè½¬å‘ä¸è¿›åŠ¨ä½œçš„ç»“æŸåœ°å€ã€‚ æºç«¯å£ï¼šå…è®¸æˆ–é˜»æ–­çš„èµ·å§‹ç«¯å£ã€‚ ç›®çš„ç«¯å£ï¼šç‰¹å®šç›®æ ‡çš„ç«¯å£ã€‚ è¿›æ¥å£ï¼šæ•°æ®æ¥æºå£ã€‚ å‡ºæ¥å£ï¼šç›®çš„å‡ºå£ã€‚ IPv4ä¸IPv6çš„ä¸åŒ IPv4åœ¨çˆ±å¿«ç³»ç»Ÿä¸­è®¾ç½®äº†ç«¯å£è½¬å‘ä»¥åï¼Œè¢«è½¬å‘çš„ç«¯å£é€šè¿‡ä»»ä½•å…¬ç½‘IPéƒ½èƒ½è®¿é—®ï¼Œä¸å¤ªå®‰å…¨ï¼Œä½†æ€»å¾—æ¥è¯´åªé™åˆ¶åœ¨è½¬å‘çš„ç«¯å£èŒƒå›´å†…ã€‚\nè€ŒIPv6ä¸å­˜åœ¨ç«¯å£è½¬å‘çš„æ¦‚å¿µï¼Œåªè¦åœ¨çˆ±å¿«ç³»ç»Ÿä¸­å¯ç”¨äº†IPv6ï¼Œé‚£ä¹ˆå†…ç½‘çš„è®¾å¤‡éƒ½æœ‰å…¨çƒå”¯ä¸€çš„IPv6åœ°å€ï¼Œä¸éœ€è¦ä»€ä¹ˆè®¾ç½®å°±èƒ½ä»å…¬ç½‘è®¿é—®ã€‚è€Œçˆ±å¿«é»˜è®¤å°±æ²¡æœ‰å¯ç”¨IPv6é˜²ç«å¢™ï¼Œæ„æ€å°±æ˜¯æœ‰IPv6åœ°å€çš„è®¾å¤‡æ˜¯å‡ ä¹å®Œå…¨æš´éœ²åœ¨å…¬ç½‘ç¯å¢ƒä¸­çš„ï¼Œæä¸å®‰å…¨ã€‚\nå½“ç„¶ï¼ŒISPå¤§æ¦‚ç‡å°æ‰äº†ä¸€äº›å¸¸è§çš„ç«¯å£ã€‚\nIPv4çš„ACL/é˜²ç«å¢™è®¾ç½® IPv4è¦è®¾ç½®ACL/é˜²ç«å¢™ï¼Œç”±äºNATçš„å­˜åœ¨ï¼Œåªéœ€è¦é’ˆå¯¹è®¾ç½®äº†ç«¯å£è½¬å‘/UPNP/DMZçš„ç«¯å£/è®¾å¤‡æ¥è®¾ç½®ã€‚å¯ä»¥å‚è€ƒè¿™ç¯‡æ•™ç¨‹ ï¼Œå¯ä»¥é™åˆ¶SSH/WEBUI/RDPçš„è®¿é—®æ¥æºIPï¼Œæé«˜å®‰å…¨æ€§ã€‚\næ³¨æ„ï¼Œå¦‚è¦è®¾ç½®ACLï¼Œè¦å…ˆè®¾ç½®å¥½ç«¯å£è½¬å‘ï¼Œç„¶ååªé’ˆå¯¹éœ€è¦æé«˜å®‰å…¨æ€§çš„è½¬å‘ç«¯å£æ¥è®¾ç½®ACLï¼ˆBT/PTè½¯ä»¶IPv4çš„ç›‘å¬ç«¯å£åªè½¬å‘ä¸è®¾ç½®ACLï¼‰ã€‚\nIPv6çš„ACL/é˜²ç«å¢™è®¾ç½® ACLä¸­å…è®¸çš„ä¼˜å…ˆçº§é«˜äºé˜»æ–­ã€‚\nçˆ±å¿«åœ¨3.7.0æ–°å¢äº†IPv6 ACL/é˜²ç«å¢™çš„åŠŸèƒ½ï¼Œç”±æ­¤ç»ˆäºå¯ä»¥æ”¾å¿ƒçš„å¼€å¯IPv6äº†ã€‚çˆ±å¿«3.7.7æ–°å¢äº†IPv6åˆ†ç»„å’ŒMACåˆ†ç»„åŠŸèƒ½ï¼Œä¸è¿‡è¿˜æœ‰BUGï¼Œåœ¨3.7.8ç»ˆäºç¨³å®šäº†ï¼Œå¯ä»¥å¯¼å…¥åˆ†ç»„äº†ç®€åŒ–è®¾ç½®äº†ã€‚\nå¯¼å…¥IPv6åˆ†ç»„ ä¸‹è½½ ipv6group.csv ï¼Œç„¶ååœ¨çˆ±å¿« â€œç½‘ç»œè®¾ç½® -\u0026gt; ç»ˆç«¯åˆ†ç»„è®¾ç½® -\u0026gt; IPv6åˆ†ç»„â€ å¤„å¯¼å…¥ã€‚å¦‚æœä¸‹è½½ä¸ä¸‹æ¥ï¼Œå¯ä»¥å‰å¾€æˆ‘æ”¾åœ¨Githubä¸Šçš„ä»“åº“ https://github.com/devome/files/tree/master/zxipv6wry cloneåä½¿ç”¨ï¼Œåœ¨è¯¥ä»“åº“ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥æŸ¥é˜…ä¸­å›½å®Œæ•´çš„IPv6æ•°æ®åŠåˆ†çœæ•°æ®ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºçˆ±å¿«åˆ†ç»„åç§°çš„å­—æ•°æœ‰é™åˆ¶ï¼Œæ‰€ä»¥â€œè”é€šâ€åŒ…å«â€œè”é€šâ€å’Œâ€œç½‘é€šâ€ï¼Œâ€œç§»åŠ¨â€åŒ…å«â€œç§»åŠ¨â€å’Œâ€œé“é€šâ€ï¼Œâ€œé¹åšå£«â€åŒ…å«â€œé¹åšå£«â€å’Œâ€œé•¿åŸå®½å¸¦â€ã€‚è¿˜æœ‰éƒ¨åˆ†IPv6æ•°æ®æš‚ä¸æ¸…æ¥šå…¶åˆ†é…åˆ°ä»€ä¹ˆçœä»½ï¼Œæ‰€ä»¥å½’ç±»ä¸ºâ€œæœªçŸ¥çœä»½â€ï¼Œè¯·åœ¨é€‰æ‹©æ¥æºIPv6åˆ†ç»„æ—¶æ ¹æ®ä½ çš„å®é™…éœ€è¦è¿›è¡Œé€‰æ‹©ã€‚\nè®¾ç½®MACåˆ†ç»„ çˆ±å¿«3.7.7ä¹Ÿæ–°å¢äº†MACåˆ†ç»„åŠŸèƒ½ï¼Œå¦‚æœä½ æƒ³è®¾ç½®çš„è®¾å¤‡çš„IPv6åœ°å€åç¼€éƒ¨åˆ†ä¸å›ºå®šï¼Œå¯ä»¥é€šè¿‡MACæ¥æ”¾è¡ŒIPv6æµé‡ï¼Œè¿™æ—¶ï¼Œä½ éœ€è¦å°†åé¢éœ€è¦è®¾ç½®çš„è®¾ç½®çš„MACåœ°å€æ ¹æ®éœ€è¦å½¢æˆä¸€ä¸ªæˆ–å¤šä¸ªåˆ†ç»„ï¼Œè¯·è‡ªè¡Œåœ¨çˆ±å¿« â€œç½‘ç»œè®¾ç½® -\u0026gt; ç»ˆç«¯åˆ†ç»„è®¾ç½® -\u0026gt; MACåˆ†ç»„â€ å¤„è®¾ç½®ã€‚\nACLè§„åˆ™ é»˜è®¤è§„åˆ™ æ³¨ï¼šç¬¬ä¸€æ¡é˜»æ–­è§„åˆ™çš„è¿æ¥æ–¹å‘ä¸ºåŸå§‹æ–¹å‘ï¼Œç¬¬äºŒæ¡å…è®¸è§„åˆ™çš„è¿æ¥æ–¹å‘ä¸ºå…³é—­ã€‚å¹¶ä¸”ç”±äºç›®å‰çˆ±å¿«çš„IPv6 ACLè¿˜æ— æ³•é’ˆå¯¹æ€§çš„æ‰“å¼€æŒ‡å®šæœ¬åœ°è®¾å¤‡çš„ICMPåè®®ï¼Œæ‰€ä»¥è¿™æ ·æ“ä½œä»¥åä¼šé»˜è®¤ç¦æ­¢ä»å…¬ç½‘pingæœ¬åœ°çš„IPv6åœ°å€ã€‚çˆ±å¿«é»˜è®¤å…è®¸ï¼Œæ‰€ä»¥ä¸Šå›¾ä¸­ç¬¬äºŒæ¡è§„åˆ™ä¸è®¾ç½®ä¹Ÿå¯ä»¥ã€‚\nç„¶åå†å¯¹æœ‰å®‰å…¨æ€§è¦æ±‚çš„ç«¯å£/IPæ¥é’ˆå¯¹æ€§çš„å¼€æ”¾æƒé™ã€‚ä»¥ä¸‹ä¸¾å‡ ç§æƒ…å†µï¼š\nWEBUI/HTTPS/HTTP/SSH/RDPç­‰ å‡å¦‚8080,20000,30000-30004è¿™å‡ ä¸ªç«¯å£éƒ½æ˜¯åŒä¸€å°è®¾å¤‡ä¸Šè¿è¡Œçš„WEBUI/SSH/RDPæ§åˆ¶ç«¯å£ï¼Œåªå…è®¸ä½ æ‰€åœ¨çœä»½ç”µä¿¡å’Œè”é€šçš„IPv6åœ°å€è®¿é—®ã€‚è¿™ä¸ªè®¾å¤‡æœ‰ä¸¤ä¸ªIPv6åœ°å€ï¼ˆæ¯”å¦‚ä¸€ä¸ªæ˜¯DHCPv6åˆ†é…çš„ï¼Œä¸€ä¸ªæ˜¯è®¾å¤‡è‡ªå·±é€šè¿‡EUI-64è‡ªè¡Œè®¾ç½®çš„ï¼‰ï¼Œåˆ†åˆ«ä¸ºï¼š\n1 2 2400:d0a0:38ba:abde:abbb:c1f:fea5:6c4c/64 2400:d0a0:38ba:abde::add/64 è®¾ç½®æ–¹å¼æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ç§æ˜¯â€œåç¼€åŒ¹é…â€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆæ³¨ï¼šåç¼€å¼/è´Ÿæ©ç å†™æ³•æ˜¯ä¸€ä¸ªå…¨0çš„ä½ä¸²ï¼Œåé¢è·Ÿç€ä¸€ä¸ªå…¨1çš„ä½ä¸²ï¼Œè¡¨ç¤ºåœ°å€ä¸­ä¸å˜çš„éƒ¨åˆ†ã€‚ï¼‰ï¼š\nå¦ä¸€ç§å½¢å¼æ˜¯ â€œMACåŒ¹é…â€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå®é™…ä¸Šæ ¹æ®ä¸‹é¢çš„è¯´æ˜ï¼Œè¿™ç§å¤–ç½‘è®¿é—®å†…ç½‘çš„MACåŒ¹é…è¿‡æ»¤æ˜¯æ— æ³•ç”Ÿæ•ˆçš„ï¼Œå»ºè®®åªå¯¹å†…ç½‘è®¿é—®å¤–ç½‘ä½¿ç”¨MACåœ°å€åŒ¹é…è¿‡æ»¤ï¼‰ï¼š\né‡è¦æç¤º\næ ¹æ® çˆ±å¿«å®˜æ–¹äººå‘˜çš„è¯´æ˜ï¼šIPv6å¤–ç½‘ä¸»åŠ¨è®¿é—®å†…ç½‘ï¼Œæ— æ³•åšç›®çš„macåŒ¹é…ï¼Œåªèƒ½åšåç¼€åŒ¹é…ä¹Ÿå°±æ˜¯IPv6åœ°å€åŒ¹é…ã€‚å› ä¸ºå¤–ç½‘ä¸»åŠ¨è®¿é—®çš„ï¼Œå†…ç½‘çš„æ­¤ç»ˆç«¯IPv6åœ°å€å¯¹åº”çš„macåœ°å€ï¼Œæ— æ³•ç«‹é©¬æ‹¿åˆ°ï¼ˆè¿™ä¸ªå°±æ¶‰åŠå†…æ ¸çš„å‘åŒ…ç»†èŠ‚äº†ï¼‰ã€‚å¦‚æœæ˜¯å†…ç½‘ä¸»åŠ¨å‘å¤–è®¿é—®ï¼Œæºä¸»æœºå¯¹åº”çš„macåœ°å€è·¯ç”±èƒ½ç¬¬ä¸€æ—¶é—´å°±èƒ½æ‹¿åˆ°ã€‚\nBT/PTçš„ç›‘å¬ç«¯å£ å‡å¦‚33333,44444è¿™ä¸¤ä¸ªç«¯å£æ˜¯BT/PTä¸‹è½½è½¯ä»¶çš„ä¸‹è½½ç›‘å¬ç«¯å£ï¼Œç”±äºä¸Šé¢æœ€å¼€å§‹æ·»åŠ çš„é»˜è®¤è§„åˆ™é˜»æ–­äº†å…¶ä»–å…¬ç½‘IPv6è®¿é—®æœ¬åœ°ï¼Œç°åœ¨éœ€è¦å°†33333,44444åœ¨IPv6ä¸Šæš´éœ²å‡ºå»ã€‚å‡å¦‚ä¸‹è½½è½¯ä»¶çš„IPv6åœ°å€æ˜¯ï¼š\n1 2400:d0a0:38ba:abde:42:aff:fe00:fc/64 åŒä¸Šæ–‡æ‰€è¿°ï¼Œæœ‰ä¸¤ç§å½¢å¼ï¼Œå…¶ä¸€ä¸ºåç¼€åŒ¹é…ï¼ˆä¸‹å›¾ä»…ç¤ºæ„äº†tcpåè®®ï¼Œä¸€èˆ¬BT/PTéœ€è¦åŒæ—¶ç›‘å¬tcpå’Œudpåè®®ï¼Œè€Œçˆ±å¿«ç›®å‰ä¸èƒ½åŒæ—¶è®¾ç½®tcp+udpï¼Œåªèƒ½åˆ†æˆä¸¤æ¡è§„åˆ™ï¼Œè¯·è‡ªè¡Œå†å¢åŠ ä¸€ä¸ªudpçš„è§„åˆ™ï¼‰ï¼š\nå…¶äºŒä¸ºMACåŒ¹é…ï¼ˆä¸‹å›¾ä»…ç¤ºæ„äº†tcpåè®®ï¼Œä¸€èˆ¬BT/PTéœ€è¦åŒæ—¶ç›‘å¬tcpå’Œudpåè®®ï¼Œè€Œçˆ±å¿«ç›®å‰ä¸èƒ½åŒæ—¶è®¾ç½®tcp+udpï¼Œåªèƒ½åˆ†æˆä¸¤æ¡è§„åˆ™ï¼Œè¯·è‡ªè¡Œå†å¢åŠ ä¸€ä¸ªudpçš„è§„åˆ™ï¼‰ï¼š\nå®Œå…¨æš´éœ²æŸå°è®¾å¤‡ å› ä¸ºæŸäº›åŸå› ï¼ˆæ¯”å¦‚PCDNï¼‰ï¼Œå‡å¦‚éœ€è¦å°†æŸäº›IPv6å®Œå…¨æš´éœ²åœ¨å…¬ç½‘ä¸­ï¼Œé‚£ä¹ˆå¯ä»¥æŒ‰ç…§ä¸Šæ–‡ä¸­ â€œåç¼€åŒ¹é…â€ æˆ–è€… â€œMACåŒ¹é…â€ è¿›è¡Œè®¾ç½®å³å¯ï¼Œå”¯ä¸€çš„ä¸åŒç‚¹æ˜¯åè®®é€‰æ‹©â€œä»»æ„â€œï¼Œæºåœ°å€ç•™ç©ºï¼Œè¡¨ç¤ºå…¨éƒ¨å…è®¸å…¨éƒ¨æºåœ°å€çš„å…¨éƒ¨åè®®ã€‚\nè§„åˆ™éªŒè¯ å¦å¤–æ‰¾å°å…¬ç½‘æœºå™¨ï¼ˆä¸åœ¨æœ¬åœ°ç½‘ç»œä¸­çš„ï¼Œç”¨æ‰‹æœºèœ‚çªç½‘ä¸´æ—¶å¼€ä¸ªçƒ­ç‚¹ä¹Ÿè¡Œï¼‰ï¼Œå®‰è£…å¥½nmapï¼ˆlinuxç›´æ¥ä»ä»“åº“ä¸­å®‰è£…ï¼Œwindowsçš„åœ¨ è¿™é‡Œï¼‰ï¼Œæ¯”å¦‚æ£€æµ‹IPv6çš„æŸç«¯å£å¼€æ”¾æƒ…å†µè¿è¡Œä¸‹é¢å‘½ä»¤å³å¯ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 ## æ£€æµ‹IPv6æŸç«¯å£çš„å¼€æ”¾æƒ…å†µ nmap -6 \u0026lt;IPv6åœ°å€æˆ–èƒ½è§£æIPv6çš„åŸŸå\u0026gt; -p \u0026lt;ç«¯å£\u0026gt; -Pn ## ä¸¾ä¾‹ nmap -6 2400:d0a0:38ba:abde:abbb:c1f:fea5:6c4c -p 8080,20000,30000-30004 -Pn ## è¾“å‡º Starting Nmap 7.93 ( https://nmap.org ) at 2023-04-08 20:40 CST Nmap scan report for 2400:d0a0:38ba:abde:abbb:c1f:fea5:6c4c Host is up (0.016s latency). PORT STATE SERVICE 8080/tcp open unknown 20000/tcp filtered unknown 30000/tcp filtered unknown 30001/tcp filtered unknown 30002/tcp open unknown 30003/tcp open unknown 30004/tcp open unknown å‡å¦‚è¦æ£€æµ‹IPv4çš„ç«¯å£å¼€æ”¾æƒ…å†µï¼ŒæŠŠå‘½ä»¤ä¸­çš„-6æ›´æ¢ä¸º-4å³å¯ã€‚\nstateçŠ¶æ€è¯´æ˜ï¼š\nopen: ç›®æ ‡å¯è¾¾å¹¶ä¸”ç«¯å£å·²å¼€æ”¾ï¼› closed: ç›®æ ‡å¯è¾¾ä½†ç«¯å£æ²¡æœ‰æ‰“å¼€ï¼Œä¸€èˆ¬æ˜¯æ²¡æœ‰æœåŠ¡è¿è¡Œåœ¨è¿™ä¸ªç«¯å£ä¸Šï¼› fitered: ç›®æ ‡ä¸å¯è¾¾ï¼Œä¹Ÿå°±æ˜¯è¢«ACL/é˜²ç«å¢™é˜»æ–­äº†ã€‚ ä½ å¯ä»¥å¯ç”¨/åœç”¨çˆ±å¿«ç³»ç»Ÿä¸­å¯¹åº”çš„ACLè§„åˆ™åï¼Œè¿è¡Œå‘½ä»¤æ£€æµ‹ç«¯å£æ˜¯å¦å¯è¿æ¥ã€‚\n","date":"2023-11-27T00:00:00+08:00","image":"https://evine.win/p/ikuai-set-ipv6-acl-2/pic1_hucc47260a9bbf21ba621002cdab8a4a01_35548_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/ikuai-set-ipv6-acl-2/","title":"çˆ±å¿« IPv6 ACL/é˜²ç«å¢™è®¾ç½®ï¼ˆçˆ±å¿« 3.7.8+ï¼‰"},{"content":"å…³äºsystemd æœ¬ç³»åˆ—å…¨éƒ¨æœåŠ¡éƒ½ä½¿ç”¨ systemd æ¥å¯åŠ¨å’Œç®¡ç†ï¼Œåœ¨ç³»åˆ—ä¸­å¹¶æœªè¿‡å¤šçš„è¯´æ˜è¿™äº›æœåŠ¡å¦‚ä½•å¯åŠ¨ã€å¼€å¯è‡ªå¯ã€é‡å¯ã€é‡è½½ã€åœæ­¢ã€æŸ¥çœ‹æ—¥å¿—ã€ç­›é€‰æ—¥å¿—ç­‰ç­‰ã€‚å…³äº systemdï¼Œé˜®ä¸€å³°å¤§ä½¬æœ‰è¯¦ç»†çš„æ•™ç¨‹ï¼šSystemd å…¥é—¨æ•™ç¨‹ï¼Œè¯¥æ–‡è¯¦ç»†çš„ä»‹ç»äº† systemctl åŠ journalctl ç›¸å…³å‘½ä»¤çš„ä½¿ç”¨æ–¹æ³•ã€‚\nå…³äºç£ç›˜å ç”¨ æ•´å¥—ç³»ç»Ÿé…ç½®ä¸‹æ¥ï¼Œåˆå§‹çš„ç£ç›˜å ç”¨ä¸åˆ°2Gã€‚ä»é•¿è¿œæ¥çœ‹ï¼Œåªè¦ä¸ä¼šæœ‰éœ€è¦å ç”¨å¤§é‡ç£ç›˜ç©ºé—´çš„åº”ç”¨ç¨‹åºï¼Œ16åº”è¯¥æ˜¯ç»°ç»°æœ‰ä½™ã€‚\nå…³äºå†…å­˜ å®‰è£…å®Œè¿™ä¸€ç³»åˆ—å†…å®¹ï¼Œå®é™…ä¸Šå†…å­˜ä½¿ç”¨å¹¶æ²¡æœ‰å¢åŠ å¤šå°‘ï¼Œæ‰ 340MiB å·¦å³ã€‚æ³¨æ„ buffer å’Œ cache æ˜¯å¯ä»¥é€šè¿‡è°ƒæ•´å‚æ•°é™ä½çš„ï¼Œè¿™ä¸ªå ç”¨ä¸ç®—çœŸæ­£çš„å ç”¨ã€‚ buffer å’Œ cache åè€Œæ˜¯å¯¹ç³»ç»Ÿè¿è¡Œæœ‰å¥½å¤„çš„ï¼Œåœ¨å†…å­˜è¶³å¤Ÿçš„å‰æä¸‹ï¼Œä¸å»ºè®®æ¸…é™¤å®ƒä»¬ã€‚å¦‚æœå†…å­˜çœŸçš„ä¸å¤Ÿï¼Œä½ å¯ä»¥æŒ‰ç…§ è¿™ä¸ªé“¾æ¥ æ¥é™åˆ¶å®ƒä»¬ã€‚\nå¦‚æœæƒ³è¦è¿›ä¸€æ­¥é™ä½å†…å­˜ä½¿ç”¨ï¼Œå¯ä»¥è‡ªè¡ŒåŠ¨æ€ç¼–è¯‘å‰é¢æ‰€ä½¿ç”¨åˆ°çš„å…¨éƒ¨è½¯ä»¶åŒ…ï¼Œå†ä½¿ç”¨ upx æ¥æ·±åº¦å‹ç¼©ï¼Œè¿™æ ·å¤„ç†åèƒ½è®©å†…å­˜æ¶ˆè€—å†å°ä¸€äº›ï¼Œèƒ½ç¼©å‡åˆ° 300MiB ä»¥ä¸‹ã€‚ä¸è¿‡æ³¨æ„ unblocknem ä¸èƒ½è¿™æ ·æ“ä½œï¼Œå¦‚æœæƒ³è¦å‡å°å®ƒçš„å†…å­˜å ç”¨ï¼Œè¯·æŒ‰ç…§ å®˜æ–¹ä»“åº“ å®‰è£… nodejs åä½¿ç”¨æºç è¿è¡Œï¼Œå¹¶è°ƒæ•´ unblocknem.service ä¸­çš„ ExecStartã€‚\nå…³äºDNS æˆ‘ä»¬åœ¨ æœ¬ç³»åˆ—ç¬¬ï¼ˆä¸‰ï¼‰ç¯‡ ä½¿ç”¨äº† adguardhome mosdns å’Œ clash æ¥å®ç°è‡ªå»ºDNSæœåŠ¡ï¼Œåœ¨ adguardhome å’Œ mosdns ä¸­éƒ½å­˜åœ¨åå¤‡ï¼Œä¸¤çº§åå¤‡ä¿è¯å±€åŸŸç½‘ä¸­çš„è®¾å¤‡è®¿é—®ä¸­å›½å¤§é™†çš„æœåŠ¡ä¸ä¼šå› ä¸º clash çš„ä»£ç†èŠ‚ç‚¹å‡ºé—®é¢˜ï¼Œè€Œå¯¼è‡´æ— æ³•è®¿é—®ã€‚æˆ‘æƒ³è¿™ç‚¹å¯¹å®¶äººçš„ä½¿ç”¨æ¯”è¾ƒé‡è¦ï¼Œä»–ä»¬å¤§å¤šæ•°éƒ½åªéœ€è¦èƒ½å¤Ÿè®¿é—®ä¸­å›½å¤§é™†æœ‰æœåŠ¡å°±å¯ä»¥äº†ï¼Œä»–ä»¬ä¸ä¼šå†é—¹ç€è¯´â€œåˆä¸Šä¸äº†ç½‘äº†ï¼Œä½ å’‹æçš„å˜›â€ã€‚\nåœ¨ OpenWRT ä¸­é»˜è®¤æ˜¯ä¼šå®‰è£… dnsmasq çš„ï¼Œè®¸å¤šåŒ…éƒ½ä¼šæ“ä½œ dnsmasq ï¼Œè¿™å¯èƒ½ä¹Ÿæ˜¯å¯¼è‡´è§£æä¸åˆ°DNSçš„åŸå› ã€‚ ä½¿ç”¨ Debian æ²¡æœ‰æ­¤çƒ¦æ¼ï¼Œå› ä¸ºå‹æ ¹æ²¡æœ‰å®‰è£… dnsmasqã€‚\nå…³äºç½‘ç»œæ•…éšœ æˆ‘ä»¬å°† nftables è§„åˆ™ç»‘å®šåˆ° clash å¯åŠ¨ä¹‹åæ‰æ‰§è¡Œï¼Œåœ¨ æœ¬ç³»åˆ—ç¬¬ï¼ˆå››ï¼‰ç¯‡ æˆ‘ä»¬æ˜¯ä»¥ ExecStartPost æ¥è®© nftables è§„åˆ™åœ¨ clash å¯åŠ¨ä¹‹åæ‰æ‰§è¡Œçš„ã€‚å¦‚æœ clash æ²¡å¯åŠ¨å¥½ï¼Œ nftables è§„åˆ™ä¹Ÿå°±ä¸ä¼šæ‰§è¡Œï¼Œå‡å¦‚è¿™ä¸ªæ—¶å€™ adguardhome å’Œ mosdns éƒ½å¯åŠ¨å¥½äº†ï¼Œç”±äº mosdns æ— æ³•ä½¿ç”¨ clash çš„DNSæœåŠ¡ï¼Œå®ƒä¼šå…¨éƒ¨åˆ‡æ¢åˆ°åå¤‡ä¹Ÿå°±æ˜¯å›½å†…å…¬å…±DNSæœåŠ¡å™¨å»è§£æï¼Œè¿™ä¸ä¼šå½±å“å®¶äººçš„ä¸Šç½‘ä½“éªŒã€‚å¦ä¸€æ–¹é¢ï¼Œå‡å¦‚ clash å¯åŠ¨å¥½äº†ï¼Œ nftables è§„åˆ™ä¹Ÿåˆ›å»ºå¥½äº†ï¼Œå¯æ˜¯ clash çš„ä»£ç†èŠ‚ç‚¹å…¨éƒ¨æ•…éšœäº†ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œç”±äºæˆ‘ä»¬æœ‰ç»•è¿‡ä¸­å›½å¤§é™†IPçš„ nftables è§„åˆ™ï¼Œä»ç„¶ä¸ä¼šå½±å“æˆ‘ä»¬ä½¿ç”¨å¢ƒå†…æœåŠ¡ã€‚å³ä½¿å†æç«¯ä¸€ç‚¹ï¼Œè¿ nftables ä¹Ÿåäº†ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä½¿ç”¨ nftables è„šæœ¬æ¥ç”Ÿæˆçš„ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ shell å‘½ä»¤ä¸€å¥ä¸€å¥è¾“å…¥çš„ï¼Œæ‰€ä»¥åªä¼šæ•´ä¸ª mynftables.nft è„šæœ¬ä¸­çš„è§„åˆ™å…¨åœ¨æˆ–è€…å…¨ä¸åœ¨ï¼ˆæœ‰ä»»ä½•ä¸€å¥å‡ºé”™å°±ä¼šå…¨ä¸åœ¨ï¼‰ï¼Œé‚£ä¹ˆå…¨ä¸åœ¨å°±æ„å‘³ç€æ²¡æœ‰ä»»ä½• nftables è§„åˆ™ï¼Œæ—è·¯ç”±è¿™æ—¶é™¤äº†DNSï¼Œå°±æ˜¯ä¸€ä¸ªçº¯ç²¹çš„ IPv4 è½¬å‘å™¨ï¼Œæ›´ä¸ä¼šå¹²æ‰°ç½‘ç»œçš„è¿è¡Œï¼ˆåªä¼šå½±å“ç‰¹æ®ŠæœåŠ¡è€Œå·²ï¼‰ã€‚\nåœ¨ OpenWRT ä¸­è®¸å¤šåŒ…éƒ½ä¼šæ“ä½œ iptbales æˆ–è€… nftablesï¼Œå®ƒä»¬ä¹‹é—´å¯èƒ½å¹¶æ²¡æœ‰å¾ˆå¥½çš„åè°ƒä¸é…åˆï¼Œæ¯•ç«Ÿåˆ†å±ä¸åŒçš„äººå¼€å‘ã€‚å¹¶ä¸”å¤šæ•°éƒ½æ˜¯ä»¥ä¸€å¥ä¸€å¥çš„ shell å‘½ä»¤æ¥å¢åŠ çš„è§„åˆ™ï¼Œå¾ˆæœ‰å¯èƒ½æœ‰äº›è¯­å¥ç”Ÿæ•ˆäº†ï¼Œæœ‰äº›è¯­å¥æ²¡æœ‰ç”Ÿæ•ˆï¼Œç„¶åå¯¼è‡´ç½‘ç»œæ•…éšœã€‚ç°åœ¨æˆ‘ä»¬å…¨éƒ¨è‡ªå†™ nftables è§„åˆ™ï¼Œé€»è¾‘æ¸…æ¥šï¼Œå¹¶ä¸”åªä¼šéšç€ clash çš„å¯åŠ¨è€Œå¯åŠ¨ï¼Œè€Œä¸æ˜¯è„±ç¦» clash è‡ªå·±å•ç‹¬å¯åŠ¨ï¼Œå¹¶ä¸”ç›´æ¥é‡‡ç”¨ nftables è„šæœ¬è€Œé shell è„šæœ¬ï¼Œè¿™æ ·å°±èƒ½é¿å…ä¸€äº›ç½‘ç»œæ•…éšœé—®é¢˜ã€‚\nå…³äºIPv6 æ‰€é…ç½®çš„æ—è·¯ç”±åªä½œä¸ºäº†IPv4çš„ç½‘å…³ï¼Œä¸ä½œä¸ºIPv6çš„ç½‘å…³ä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼Œä¸€æ˜¯IPv6ä»£ç†å¹¶æœªæ™®åŠï¼ŒäºŒæ˜¯æƒ³è¦æ—è·¯ç”±æˆä¸ºIPv6ç½‘å…³å¼‚å¸¸å¤æ‚ã€‚ä¸è¿‡ï¼Œä»ç„¶ä¿ç•™äº†ä¸­å›½å¤§é™†ç½‘å€çš„IPv6è®¿é—®çš„èƒ½åŠ›ã€‚å±€åŸŸç½‘ä¸­å¯¹å…¬ç½‘è½¬å‘çš„æœåŠ¡ä¹Ÿæ˜¯å¯ä»¥æä¾›IPv6è®¿é—®çš„ï¼Œè¿™ç‚¹å¹¶ä¸å½±å“ã€‚åœ¨éæ—è·¯ç”±æ‰€åœ¨çš„å­ç½‘ä¸­ï¼ŒIPv4/IPv6åŒæ ˆéƒ½æ˜¯é»˜è®¤å¯ç”¨çš„çŠ¶æ€ã€‚\nå…³äºè½¯ä»¶åŒ… å›½å†…çš„ç”¨æˆ·ä½¿ç”¨ OpenWRT ä¸€èˆ¬æ˜¯ä½¿ç”¨ LEDEï¼Œå¦‚æœæ˜¯è‡ªå·±ç¼–è¯‘çš„è¯ï¼Œé¢å¯¹ç¹å¤šçš„é€‰é¡¹æ— ä»ä¸‹æ‰‹ï¼Œç”¨åˆ«äººçš„ é«˜å¤§å…¨ åˆè€æ˜¯é…ç½®ä¸å¥½ï¼Œè€Œä¸”è¿˜é¢ä¸´ä¸å¤ªå¥½å‡çº§çš„é—®é¢˜ã€‚ä¸€äº›æ—§çš„è½¯ä»¶åŒ…æƒ³è¦æ›´æ–°ï¼Œéƒ½è¦å…ˆæ›´æ–°å›ºä»¶çš„ç¼–è¯‘ä¾èµ–ä»“åº“ã€‚\nè€Œä½¿ç”¨ Debian çš„è¯ï¼Œå®ƒè‡ªå¸¦çš„ä»“åº“æ˜¯æåº¦ç¨³å®šçš„ï¼Œè‡ªå·±æƒ³è¦é¢å¤–å®‰è£…çš„ä¸€äº›è½¯ä»¶åŒ…ï¼ŒåŸºäºè¿™ä¸ªç¨³å®šçš„ç¯å¢ƒï¼Œè¿è¡Œä¹Ÿæ›´ç¨³å®šï¼Œè€Œä¸”é¢å¤–å®‰è£…çš„è½¯ä»¶åŒ…å¯ä»¥ä¿æŒè¿½æ–°ã€‚è¿™æ ·åŸºç¡€ç¯å¢ƒç¨³å®šï¼Œéƒ¨åˆ†ç‰¹æ®Šè½¯ä»¶è¿½æ–°ï¼Œè®©ä½“éªŒæ›´åŠ å®Œç¾ã€‚\nåœ¨ æœ¬ç³»åˆ—ç¬¬ï¼ˆäºŒï¼‰ç¯‡ ä¸­è¿˜æåŠäº†ä¸€äº›å…¶ä»–çš„è½¯ä»¶åŒ…ï¼Œè¿™äº›éƒ½æ˜¯ç®€å•åœ°åº”ç”¨ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œæœç´¢å…¶å¸®åŠ©æ–‡æ¡£ã€‚\nå…³äºæœ¬ç³»åˆ—æä¾›çš„è„šæœ¬ å¦‚æœä½ ç›¸å¯¹äºæˆ‘çš„æ”¹åŠ¨è¾ƒå¤šï¼Œä½ å°±å¯èƒ½ä¸èƒ½ç›´æ¥ä½¿ç”¨æœ¬ç³»åˆ—æä¾›çš„ shell è„šæœ¬ã€‚å¦‚æ¶‰åŠåˆ°æ”¹åŠ¨ï¼Œå¯èƒ½éœ€è¦ä½ è‡ªè¡Œä¿®æ”¹ç›¸å…³è„šæœ¬å†…å®¹ï¼Œä»¥é€‚åº”ä½ çš„ç¯å¢ƒã€‚è‹¥å› æ­¤è„šæœ¬å‡ºç°é”™è¯¯ï¼Œæœ¬äººæ— æ³•æä¾›è¿‡å¤šçš„å»ºè®®ï¼Œå¯èƒ½éœ€è¦ä½ è‡ªè¡Œæ’æ•…ã€‚\nç³»åˆ— ä¸€ã€å­ç½‘åˆ’åˆ†åŠç½‘ç»œæ‹“æ‰‘è®¾è®¡ã€çˆ±å¿«ä¸Šçš„è®¾ç½®\näºŒã€å®‰è£…Debianã€åˆå§‹ç½‘ç»œé…ç½®ã€å¿…è¦è½¯ä»¶å®‰è£…\nä¸‰ã€AdGuardHomeã€mosdnsã€clashåœ¨DNSçš„å…³ç³»ï¼Œä»¥åŠAdGuardHomeã€mosdnsçš„å®‰è£…å’Œé…ç½®\nå››ã€clashé€æ˜ä»£ç†(Tproxy)çš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„IPè§„åˆ™å’Œnftablesè§„åˆ™\näº”ã€UnblockNeteaseMusicçš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„çš„nftablesè§„åˆ™ã€å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨\nå…­ã€subconverterçš„å®‰è£…å’Œé…ç½®\nä¸ƒã€é…ç½®nginxä¸ºæ–‡ä»¶æœåŠ¡å™¨ã€è‡ªåŠ¨æ›´æ–°clashè®¢é˜…ã€è‡ªåŠ¨ç”Ÿæˆéœ€è¦çš„æ–‡ä»¶\nå…«ã€é…ç½®æ—è·¯ç”±çš„SNMPDæœåŠ¡ã€é…ç½®ä¸»è·¯ç”±çš„è·¨ä¸‰å±‚åº”ç”¨\nä¹ã€ç›‘æµ‹é™Œç”Ÿè®¾å¤‡\nåã€å¿«é€Ÿç®€å•çš„å®‰è£…å’Œæ›´æ–°è½¯ä»¶åŒ…\nåä¸€ã€DNSã€ç½‘ç»œæ•…éšœç­‰çš„æ€»ç»“ï¼Œä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹\n","date":"2023-10-22T07:00:00+08:00","image":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E5%8D%81%E4%B8%80/ram_huef3c692eae64eb585ab4ff7890b397a3_413344_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E5%8D%81%E4%B8%80/","title":"æˆ‘çš„å®¶åº­ç½‘ç»œè®¾è®¡æ€è·¯ï¼Œå¼€å¯debiançš„æ—è·¯ç”±ä¹‹è·¯ï¼ˆåä¸€ï¼‰"},{"content":"å‰è¨€ è¿™å·²ç»æ˜¯ è¿™ä¸ªç³»åˆ— çš„ç¬¬åç¯‡äº†ï¼Œæˆ‘ä»¬å°†å‰æ–‡è¦ç”¨åˆ°çš„ä»Githubä¸‹è½½çš„å„ä¸ªè½¯ä»¶åŒ…ï¼Œå®ç°æ›´å®¹æ˜“çš„æ›´æ–°å’Œå®‰è£…ã€‚\nè„šæœ¬ æˆ‘é»˜è®¤ä½ å·²ç»æŒ‰ç…§ å‰æ–‡ï¼ˆäºŒï¼‰ å®‰è£…å¥½å„ç§å¿…è¦çš„è½¯ä»¶åŒ…äº†ã€‚æ–°å»º /usr/local/bin/update-pkgs.sh å†…å®¹å¦‚ä¸‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 #!/usr/bin/env bash pkgs=( adguardhome cidr_merger clash mosdns nali subconverter trzsz unblocknem ) declare -A adguardhome adguardhome[cmd]=\u0026#39;adguardhome\u0026#39; adguardhome[reponame]=\u0026#39;AdguardTeam/AdGuardHome\u0026#39; adguardhome[dlname]=\u0026#39;AdGuardHome_linux_amd64.tar.gz\u0026#39; adguardhome[decomp]=\u0026#39;tar --no-same-owner -xf \u0026#34;$dlname\u0026#34; --strip-components 2 --directory=.\u0026#39; adguardhome[install]=\u0026#39;install -ps AdGuardHome /usr/local/bin/${cmd}\u0026#39; adguardhome[install_post]=\u0026#39;systemctl restart ${cmd}.service\u0026#39; adguardhome[local_ver]=\u0026#39;${cmd} --version 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A cidr_merger cidr_merger[cmd]=\u0026#39;cidr-merger\u0026#39; cidr_merger[reponame]=\u0026#39;zhanhb/${cmd}\u0026#39; cidr_merger[dlname]=\u0026#39;${cmd}-linux-amd64\u0026#39; cidr_merger[install]=\u0026#39;install -ps \u0026#34;${dlname}\u0026#34; /usr/local/bin/${cmd}\u0026#39; cidr_merger[local_ver]=\u0026#39;${cmd} -v |\u0026amp; grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A clash clash[cmd]=\u0026#39;clash\u0026#39; clash[reponame]=\u0026#39;MetaCubeX/Clash.Meta\u0026#39; clash[dlname]=\u0026#39;${cmd}.meta-linux-amd64-v${remote_ver}.gz\u0026#39; # è¿™ä¸€è¡Œé»˜è®¤ä¸‹è½½çš„æ˜¯ AMD64 v3 æ¶æ„çš„åŒ…ï¼Œå¦‚è‹¥ä¸æ”¯æŒï¼Œå¯ä»¥ä¸‹è½½åç§°ä¸­å¸¦ cgo æˆ–è€… compatible çš„ï¼Œè¯´æ˜ï¼šhttps://github.com/MetaCubeX/Clash.Meta/wiki/FAQ clash[decomp]=\u0026#39;gzip -d $dlname\u0026#39; clash[install]=\u0026#39;install -ps clash.meta-linux-amd64-v${remote_ver} /usr/local/bin/${cmd}\u0026#39; clash[install_post]=\u0026#39;systemctl restart ${cmd}.service\u0026#39; clash[local_ver]=\u0026#39;${cmd} -v 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34; | head -1\u0026#39; declare -A mosdns mosdns[cmd]=\u0026#39;mosdns\u0026#39; mosdns[reponame]=\u0026#39;IrineSistiana/$cmd\u0026#39; mosdns[dlname]=\u0026#39;${cmd}-linux-amd64.zip\u0026#39; mosdns[decomp]=\u0026#39;unzip -oqq $dlname -d .\u0026#39; mosdns[install]=\u0026#39;install -ps ${cmd} /usr/local/bin/${cmd}\u0026#39; mosdns[install_post]=\u0026#39;systemctl restart ${cmd}.service\u0026#39; mosdns[local_ver]=\u0026#39;${cmd} version 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A nali nali[cmd]=\u0026#39;nali\u0026#39; nali[reponame]=\u0026#39;zu1k/${cmd}\u0026#39; nali[dlname]=\u0026#39;${cmd}-linux-amd64-v${remote_ver}.gz\u0026#39; nali[decomp]=\u0026#39;gzip -d $dlname\u0026#39; nali[install]=\u0026#39;install -ps ${cmd}-linux-amd64-v${remote_ver} /usr/local/bin/${cmd}\u0026#39; nali[local_ver]=\u0026#39;${cmd} -v 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A subconverter subconverter[cmd]=\u0026#39;subconverter\u0026#39; subconverter[reponame]=\u0026#39;tindy2013/${cmd}\u0026#39; subconverter[dlname]=\u0026#39;${cmd}_linux64.tar.gz\u0026#39; subconverter[decomp]=\u0026#39;tar --no-same-owner -xf \u0026#34;$dlname\u0026#34; --strip-components 1 --directory=.\u0026#39; subconverter[install]=\u0026#39;install -ps ${cmd} /usr/local/bin/${cmd}; rm -rf $cmd $dlname; cp -afr * /var/lib/$cmd/\u0026#39; subconverter[install_post]=\u0026#39;systemctl restart ${cmd}.service\u0026#39; subconverter[local_ver]=\u0026#39;curl -sS http://127.0.0.1:25500/version 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A trzsz trzsz[cmd]=\u0026#39;trzsz\u0026#39; trzsz[reponame]=\u0026#39;${cmd}/${cmd}-go\u0026#39; trzsz[dlname]=\u0026#39;${cmd}_${remote_ver}_linux_x86_64.tar.gz\u0026#39; trzsz[decomp]=\u0026#39;tar --no-same-owner -xf \u0026#34;$dlname\u0026#34; --strip-components 1 --directory=.\u0026#39; trzsz[install]=\u0026#39;install -ps trz /usr/local/bin/trz; install -ps tsz /usr/local/bin/tsz; install -ps $cmd /usr/local/bin/$cmd\u0026#39; trzsz[local_ver]=\u0026#39;${cmd} -v 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A unblocknem unblocknem[cmd]=\u0026#39;unblocknem\u0026#39; unblocknem[reponame]=\u0026#39;UnblockNeteaseMusic/server\u0026#39; unblocknem[dlname]=\u0026#39;unblockneteasemusic-linux-x64\u0026#39; unblocknem[install]=\u0026#39;install -p $dlname /usr/local/bin/$cmd\u0026#39; unblocknem[install_post]=\u0026#39;systemctl restart ${cmd}.service\u0026#39; unblocknem[local_ver]=\u0026#39;${cmd} -v 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; ## å®‰è£…è½¯ä»¶ update_pkgs() { for pkg in ${pkgs[@]}; do eval cmd=\\${$pkg[cmd]} eval reponame_ori=\\${$pkg[reponame]} eval reponame=$reponame_ori eval dlname_ori=\\${$pkg[dlname]} eval dlurl_ori=\\${$pkg[dlurl]} eval decomp=\\${$pkg[decomp]} eval install=\\${$pkg[install]} eval install_post=\\${$pkg[install_post]} eval local_ver_ori=\\${$pkg[local_ver]} echo \u0026#34;======== æ›´æ–° $pkg ========\u0026#34; workdir=\u0026#34;/tmp/software/$pkg\u0026#34; [[ ! -d \u0026#34;$workdir\u0026#34; ]] \u0026amp;\u0026amp; mkdir -p \u0026#34;$workdir\u0026#34; rm -rf \u0026#34;$workdir\u0026#34;/* \u0026amp;\u0026gt;/dev/null cd \u0026#34;$workdir\u0026#34; remote_ver=$(curl -sS https://api.github.com/repos/${reponame}/releases/latest 2\u0026gt;/dev/null | jq -r .tag_name | sed \u0026#39;s|v||\u0026#39; | grep -v \u0026#34;null\u0026#34;) local_ver=$(eval $local_ver_ori) if [[ -n $remote_ver \u0026amp;\u0026amp; $remote_ver != $local_ver ]]; then eval dlname=$dlname_ori eval dlurl=$dlurl_ori if [[ -z $dlurl ]]; then dlurl=\u0026#34;https://github.com/${reponame}/releases/download/v${remote_ver}/${dlname}\u0026#34; fi if [[ -n $local_ver ]]; then echo \u0026#34;\u0026gt;\u0026gt; å³å°†ä» $local_ver å‡çº§è‡³ $remote_ver ...\u0026#34; else echo \u0026#34;\u0026gt;\u0026gt; æœªæ£€æµ‹åˆ°æœ¬åœ°ç‰ˆæœ¬ï¼Œå³å°†å®‰è£… $remote_ver ç‰ˆæœ¬...\u0026#34; fi echo \u0026#34;\u0026gt;\u0026gt; å¼€å§‹ä¸‹è½½ï¼š$dlurl ...\u0026#34; echo \u0026#34;\u0026gt;\u0026gt; ä¸´æ—¶ä¿å­˜è‡³ï¼š$workdir/${dlname} ...\u0026#34; echo -n \u0026#34;\u0026gt;\u0026gt; ä¸‹è½½è¿›åº¦ï¼š\u0026#34; if wget -q --progress=bar:dot --show-progress -O \u0026#34;${dlname}\u0026#34; \u0026#34;$dlurl\u0026#34;; then if [[ -n $decomp ]]; then echo \u0026#34;\u0026gt;\u0026gt; ä¸´æ—¶è§£å‹è‡³ï¼š$workdir ...\u0026#34; eval $decomp fi echo \u0026#34;\u0026gt;\u0026gt; æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š$install ...\u0026#34; if eval $install; then if [[ -n $install_post ]]; then echo \u0026#34;\u0026gt;\u0026gt; æ‰§è¡Œå®‰è£…åé’©å­ï¼š$install_post ...\u0026#34; if ! eval $install_post; then echo \u0026#34;\u0026gt;\u0026gt; å®‰è£…åé’©å­æ‰§è¡Œå¤±è´¥ï¼Œè¯·æ£€æŸ¥å‘½ä»¤æ˜¯å¦æ­£ç¡®...\u0026#34; fi fi else echo \u0026#34;\u0026gt;\u0026gt; å®‰è£…å¤±è´¥ï¼Œè¯·æ£€æŸ¥å‘½ä»¤æ˜¯å¦æ­£ç¡®...\u0026#34; fi else echo \u0026#34;\u0026gt;\u0026gt; ä¸‹è½½å¤±è´¥ï¼š$dlurl\u0026#34; fi elif [[ -n $remote_ver \u0026amp;\u0026amp; $remote_ver == $local_ver ]]; then echo \u0026#34;\u0026gt;\u0026gt; æœ¬åœ°ç‰ˆæœ¬å·²ç»æ˜¯æœ€æ–°ç‰ˆæœ¬ $remote_ver ï¼Œæ— éœ€æ›´æ–°...\u0026#34; else echo \u0026#34;\u0026gt;\u0026gt; æœªè·å–åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œæ— æ³•æ›´æ–°ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåŸå› ...\u0026#34; fi if [[ -n $(ls $workdir) ]]; then echo \u0026#34;\u0026gt;\u0026gt; åˆ é™¤ä¸´æ—¶æ–‡ä»¶ï¼š$workdir/* ...\u0026#34; rm -rf \u0026#34;$workdir\u0026#34;/* \u0026amp;\u0026gt;/dev/null fi echo done } ## ä¸­æ­¢æ—¶åˆ é™¤ä¸´æ—¶æ–‡ä»¶ finish() { rm -rf /tmp/software \u0026amp;\u0026gt;/dev/null } ## æ‰§è¡Œä¸»å‡½æ•° main() { trap finish EXIT if [[ -n \u0026#34;$@\u0026#34; ]]; then pkgs=( $@ ) fi update_pkgs } main \u0026#34;$@\u0026#34; ä¸ºå®ƒå¢åŠ å¯æ‰§è¡Œæƒé™ï¼š\n1 chmod +x /usr/local/bin/update-pkgs.sh ä½¿ç”¨ 1 2 update-pkgs.sh # æ›´æ–°æˆ–å®‰è£… pkgs æ•°ç»„ä¸­çš„å…¨éƒ¨è½¯ä»¶åŒ… update-pkgs.sh clash nali # æŒ‡å®šæ›´æ–°æˆ–å®‰è£…æ‰€è¾“å…¥çš„è½¯ä»¶åŒ… å»ºè®®è¿˜æ˜¯ä¸è¦å°†å…¶åŠ å…¥å®šæ—¶ä»»åŠ¡æ¥è‡ªåŠ¨æ›´æ–°ã€‚\nå¦‚æœè€æ˜¯è·å–ä¸åˆ° Github ä¸Šçš„æœ€æ–°ç‰ˆæœ¬å·ï¼Œå¯ä»¥å°è¯•å°†è·å–ç‰ˆæœ¬å·é‚£ä¸€è¡Œæ”¹æˆä¸‹é¢è¿™æ ·ï¼Œå…¶ä¸­çš„ $GITHUB_TOKEN ä¸ºä½ è‡ªå·±ç”³è¯·çš„ Github Tokenï¼ˆå®˜æ–¹è¯´æ˜ï¼‰ã€‚\n1 remote_ver=$(curl -H \u0026#34;Authorization: Bearer $GITHUB_TOKEN\u0026#34; -sS https://api.github.com/repos/${reponame}/releases/latest 2\u0026gt;/dev/null | jq -r .tag_name | sed \u0026#39;s|v||\u0026#39; | grep -v \u0026#34;null\u0026#34;) è¯´æ˜ å…¨éƒ¨çš„è½¯ä»¶åŒ…éœ€è¦å®šä¹‰åœ¨æ•°ç»„ pkgs ä¸­ï¼Œå¹¶ä»¥æ¯ä¸ªè½¯ä»¶åŒ…å®šä¹‰ä¸€ç»„æ•°ç»„ã€‚æ•°ç»„ä¸­çš„é”®åï¼ˆä¸èƒ½ä½¿ç”¨ - ï¼‰ä¾æ¬¡å«ä¹‰ä¸ºï¼š cmdï¼šå¦‚æœåé¢çš„å˜é‡è¦ç”¨åˆ°ï¼Œå°±éœ€è¦å®šä¹‰ï¼Œè½¯ä»¶åŒ…çš„å‘½ä»¤åã€‚ reponameï¼šGithubä¸Šçš„ä»“åº“åã€‚ remote_verï¼šè¿™ä¸ªé”®æ— éœ€ä½ æ¥å®šä¹‰ï¼Œè€Œæ˜¯ç”±è„šæœ¬æ ¹æ® reponame å»è·å–çš„Githubä¸Šçš„æœ€æ–°ç¨³å®šç‰ˆæœ¬å·ã€‚ dlnameï¼šè¦ä¸‹è½½çš„è½¯ä»¶åŒ…åœ¨Githubä¸ŠReleaseçš„åç§°ï¼Œå¯å¼•ç”¨å‰é¢çš„é”®ã€‚ dlurlï¼šå¦‚æœä¸å®šä¹‰è¿™ä¸ªé”®ï¼Œå°±é‡‡ç”¨ https://github.com/${reponame}/releases/download/v${remote_ver}/${dlname}ï¼Œå¦‚æœå®šä¹‰äº†å°±ç”¨æ‰€å®šä¹‰çš„ã€‚å¯å¼•ç”¨å‰é¢çš„é”®ã€‚ decompï¼šå¦‚æœä¸‹è½½çš„æ–‡ä»¶æ˜¯å‹ç¼©åŒ…ï¼Œå¦‚ä½•è§£å‹å®ƒï¼Œå¯ä»¥å¼•ç”¨å‰é¢çš„å˜é‡ï¼Œå¦‚ä¸éœ€è¦è§£å‹å¯ä¸å®šä¹‰ã€‚å¯å¼•ç”¨å‰é¢çš„é”®ã€‚ installï¼šå¦‚ä½•å®‰è£…è½¯ä»¶åŒ…ã€‚å¯å¼•ç”¨å‰é¢çš„é”®ã€‚ intall_postï¼šå®‰è£…åå¦‚æœéœ€è¦é‡å¯ä»€ä¹ˆæœåŠ¡ï¼Œå¯ä»¥å®šä¹‰å®ƒå¦‚ä½•é‡å¯ã€‚å¯ä¸å®šä¹‰ã€‚å¯å¼•ç”¨å‰é¢çš„é”®ã€‚ local_verï¼šå¦‚ä½•è·å–æœ¬åœ°è½¯ä»¶åŒ…çš„ç‰ˆæœ¬å·ã€‚å¯å¼•ç”¨å‰é¢çš„é”®ã€‚ æ•°ç»„ä¸­å’Œé”®çš„å€¼å¦‚æœéœ€è¦ä½¿ç”¨å˜é‡å¼•ç”¨ï¼Œå¦‚æœæœ€å¤–å±‚ç”¨å•å¼•å·ï¼Œåœ¨ $ å‰é¢æ— éœ€è½¬ä¹‰ï¼Œå¦‚æœæœ€å¤–å±‚ç”¨åŒå¼•å·ï¼Œåœ¨ $ å‰é¢è¯·æ·»åŠ  \\ è½¬ä¹‰ã€‚\nå¦‚æœåé¢çš„å¼•ç”¨äº†å‰é¢çš„ï¼Œé‚£ä¹ˆå‰é¢çš„å¿…é¡»å®šä¹‰ã€‚\nå…¶ä»–Githubä¸Šçš„è½¯ä»¶åŒ…ï¼Œä½ å¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼å®šä¹‰åœ¨è„šæœ¬ä¸­ï¼Œä»¥å®ç°è‡ªåŠ¨å®‰è£…æˆ–æ›´æ–°ã€‚\nå…¶ä»– æ¯”å¦‚æˆ‘è¿˜ç”¨åˆ°å¦å¤–ä¸€ç»„è½¯ä»¶åŒ…ï¼Œå°±æ˜¯è¿™æ ·å­çš„ï¼Œä½ å¯èƒ½æ³¨æ„åˆ°ä¸åŒè½¯ä»¶åŒ…å®šä¹‰çš„é”®ä¸å¤ªä¸€æ ·ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 pkgs=( act aliyunpan baidupcs cidr_merger ctop gitea influx_cli nali realtek_r8125_dkms tokei timemachine trzsz ) declare -A act act[cmd]=\u0026#39;act\u0026#39; act[reponame]=\u0026#39;nektos/${cmd}\u0026#39; act[dlname]=\u0026#39;${cmd}_Linux_x86_64.tar.gz\u0026#39; act[decomp]=\u0026#39;tar --no-same-owner -xf \u0026#34;$dlname\u0026#34; --directory=.\u0026#39; act[install]=\u0026#39;install -ps ${cmd} /usr/local/bin/${cmd}\u0026#39; act[local_ver]=\u0026#39;${cmd} --version 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A aliyunpan aliyunpan[cmd]=\u0026#39;aliyunpan\u0026#39; aliyunpan[reponame]=\u0026#39;tickstep/${cmd}\u0026#39; aliyunpan[dlname]=\u0026#39;${cmd}-v${remote_ver}-linux-amd64.zip\u0026#39; aliyunpan[decomp]=\u0026#39;unzip -oqq ${dlname} -d .\u0026#39; aliyunpan[install]=\u0026#39;install -ps \u0026#34;${cmd}-v${remote_ver}-linux-amd64/${cmd}\u0026#34; /usr/local/bin/${cmd}\u0026#39; aliyunpan[local_ver]=\u0026#39;${cmd} -v 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A baidupcs baidupcs[cmd]=\u0026#39;baidupcs\u0026#39; baidupcs[reponame]=\u0026#39;qjfoidnh/BaiduPCS-Go\u0026#39; baidupcs[dlname]=\u0026#39;BaiduPCS-Go-v${remote_ver}-linux-amd64.zip\u0026#39; baidupcs[decomp]=\u0026#39;unzip -oqq ${dlname} -d .\u0026#39; baidupcs[install]=\u0026#39;install -ps \u0026#34;${cmd}-v${remote_ver}-linux-amd64/BaiduPCS-Go\u0026#34; /usr/local/bin/${cmd}\u0026#39; baidupcs[local_ver]=\u0026#39;${cmd} -v 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A cidr_merger cidr_merger[cmd]=\u0026#39;cidr-merger\u0026#39; cidr_merger[reponame]=\u0026#39;zhanhb/${cmd}\u0026#39; cidr_merger[dlname]=\u0026#39;${cmd}-linux-amd64\u0026#39; cidr_merger[install]=\u0026#39;install -ps \u0026#34;${dlname}\u0026#34; /usr/local/bin/${cmd}\u0026#39; cidr_merger[local_ver]=\u0026#39;${cmd} -v 2\u0026gt;\u0026amp;1 | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A ctop ctop[cmd]=\u0026#39;ctop\u0026#39; ctop[reponame]=\u0026#39;bcicen/${cmd}\u0026#39; ctop[dlname]=\u0026#39;${cmd}-${remote_ver}-linux-amd64\u0026#39; ctop[install]=\u0026#39;install -ps \u0026#34;${dlname}\u0026#34; /usr/local/bin/${cmd}\u0026#39; ctop[local_ver]=\u0026#39;${cmd} -v 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34; | head -1\u0026#39; declare -A evsieve evsieve[cmd]=\u0026#39;evsieve\u0026#39; evsieve[reponame]=\u0026#39;KarsMulder/${cmd}\u0026#39; evsieve[dlname]=\u0026#39;${cmd}\u0026#39; evsieve[dlurl]=\u0026#39;https://raw.githubusercontent.com/devome/files/master/${cmd}/${cmd}\u0026#39; evsieve[install]=\u0026#39;install -ps \u0026#34;${dlname}\u0026#34; /usr/local/bin/${cmd}\u0026#39; evsieve[install_post]=\u0026#39;systemctl restart ${cmd}.service\u0026#39; evsieve[local_ver]=\u0026#39;${cmd} --version 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A gitea gitea[cmd]=\u0026#39;gitea\u0026#39; gitea[reponame]=\u0026#39;go-${cmd}/${cmd}\u0026#39; gitea[dlname]=\u0026#39;${cmd}-${remote_ver}-linux-amd64\u0026#39; gitea[install]=\u0026#39;install -ps ${cmd}-${remote_ver}-linux-amd64 /usr/local/bin/${cmd}\u0026#39; gitea[install_post]=\u0026#39;systemctl restart ${cmd}.service\u0026#39; gitea[local_ver]=\u0026#39;${cmd} -v 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34; | head -1\u0026#39; declare -A influx_cli influx_cli[reponame]=\u0026#39;influxdata/influx-cli\u0026#39; influx_cli[dlname]=\u0026#39;influxdb2-client-${remote_ver}-amd64.deb\u0026#39; influx_cli[dlurl]=\u0026#39;https://dl.influxdata.com/influxdb/releases/${dlname}\u0026#39; influx_cli[install]=\u0026#39;dpkg -i \u0026#34;${dlname}\u0026#34;\u0026#39; influx_cli[local_ver]=\u0026#39;LC_ALL=C apt list --installed 2\u0026gt;/dev/null | grep -P \u0026#34;influxdb2-cli/.+installed,local\u0026#34; | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A nali nali[cmd]=\u0026#39;nali\u0026#39; nali[reponame]=\u0026#39;zu1k/${cmd}\u0026#39; nali[dlname]=\u0026#39;${cmd}-linux-amd64-v${remote_ver}.gz\u0026#39; nali[decomp]=\u0026#39;gzip -d $dlname\u0026#39; nali[install]=\u0026#39;install -ps ${cmd}-linux-amd64-v${remote_ver} /usr/local/bin/${cmd}\u0026#39; nali[local_ver]=\u0026#39;${cmd} -v | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A realtek_r8125_dkms realtek_r8125_dkms[reponame]=\u0026#39;devome/realtek-r8125-dkms\u0026#39; realtek_r8125_dkms[dlname]=\u0026#39;realtek-r8125-dkms_${remote_ver}_amd64.deb\u0026#39; realtek_r8125_dkms[install]=\u0026#39;dpkg -i \u0026#34;${dlname}\u0026#34;\u0026#39; realtek_r8125_dkms[local_ver]=\u0026#34;LC_ALL=C apt list --installed 2\u0026gt;/dev/null | grep -P \u0026#39;realtek-r8125-dkms/.+installed,local\u0026#39; | awk \u0026#39;{print \\$2}\u0026#39;\u0026#34; declare -A tokei tokei[cmd]=\u0026#39;tokei\u0026#39; tokei[reponame]=\u0026#39;XAMPPRocky/${cmd}\u0026#39; tokei[dlname]=\u0026#39;${cmd}-x86_64-unknown-linux-gnu.tar.gz\u0026#39; tokei[decomp]=\u0026#39;tar --no-same-owner -xf \u0026#34;$dlname\u0026#34; --directory=.\u0026#39; tokei[install]=\u0026#39;install -ps ${cmd} /usr/local/bin/${cmd}\u0026#39; tokei[local_ver]=\u0026#34;\\${cmd} -V 2\u0026gt;/dev/null | awk \u0026#39;{print \\$2}\u0026#39;\u0026#34; declare -A timemachine timemachine[cmd]=\u0026#39;timemachine\u0026#39; timemachine[reponame]=\u0026#39;cytopia/linux-${cmd}\u0026#39; timemachine[dlname]=\u0026#39;v${remote_ver}.tar.gz\u0026#39; timemachine[dlurl]=\u0026#39;https://github.com/${reponame}/archive/refs/tags/${dlname}\u0026#39; timemachine[decomp]=\u0026#39;tar --no-same-owner -xf \u0026#34;$dlname\u0026#34; --strip-components 1 --directory=.\u0026#39; timemachine[install]=\u0026#39;make install\u0026#39; timemachine[local_ver]=\u0026#39;${cmd} -V 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; declare -A trzsz trzsz[cmd]=\u0026#39;trzsz\u0026#39; trzsz[reponame]=\u0026#39;${cmd}/${cmd}-go\u0026#39; trzsz[dlname]=\u0026#39;${cmd}_${remote_ver}_linux_x86_64.tar.gz\u0026#39; trzsz[decomp]=\u0026#39;tar --no-same-owner -xf \u0026#34;$dlname\u0026#34; --strip-components 1 --directory=.\u0026#39; trzsz[install]=\u0026#39;install -ps trz /usr/local/bin/trz; install tsz -ps /usr/local/bin/tsz; install -ps $cmd /usr/local/bin/$cmd\u0026#39; trzsz[local_ver]=\u0026#39;${cmd} -v 2\u0026gt;/dev/null | grep -oP \u0026#34;(\\d+\\.){2}\\d+\u0026#34;\u0026#39; ç³»åˆ— ä¸€ã€å­ç½‘åˆ’åˆ†åŠç½‘ç»œæ‹“æ‰‘è®¾è®¡ã€çˆ±å¿«ä¸Šçš„è®¾ç½®\näºŒã€å®‰è£…Debianã€åˆå§‹ç½‘ç»œé…ç½®ã€å¿…è¦è½¯ä»¶å®‰è£…\nä¸‰ã€AdGuardHomeã€mosdnsã€clashåœ¨DNSçš„å…³ç³»ï¼Œä»¥åŠAdGuardHomeã€mosdnsçš„å®‰è£…å’Œé…ç½®\nå››ã€clashé€æ˜ä»£ç†(Tproxy)çš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„IPè§„åˆ™å’Œnftablesè§„åˆ™\näº”ã€UnblockNeteaseMusicçš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„çš„nftablesè§„åˆ™ã€å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨\nå…­ã€subconverterçš„å®‰è£…å’Œé…ç½®\nä¸ƒã€é…ç½®nginxä¸ºæ–‡ä»¶æœåŠ¡å™¨ã€è‡ªåŠ¨æ›´æ–°clashè®¢é˜…ã€è‡ªåŠ¨ç”Ÿæˆéœ€è¦çš„æ–‡ä»¶\nå…«ã€é…ç½®æ—è·¯ç”±çš„SNMPDæœåŠ¡ã€é…ç½®ä¸»è·¯ç”±çš„è·¨ä¸‰å±‚åº”ç”¨\nä¹ã€ç›‘æµ‹é™Œç”Ÿè®¾å¤‡\nåã€å¿«é€Ÿç®€å•çš„å®‰è£…å’Œæ›´æ–°è½¯ä»¶åŒ…\nåä¸€ã€DNSã€ç½‘ç»œæ•…éšœç­‰çš„æ€»ç»“ï¼Œä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹\n","date":"2023-10-22T06:00:00+08:00","image":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E5%8D%81/cover_hu6a5bd56cca743251e7bcb3ac30b37337_44366_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E5%8D%81/","title":"æˆ‘çš„å®¶åº­ç½‘ç»œè®¾è®¡æ€è·¯ï¼Œå¼€å¯debiançš„æ—è·¯ç”±ä¹‹è·¯ï¼ˆåï¼‰"},{"content":"å‰è¨€ OpenWRT æœ‰ä¸¤ä¸ªæ’ä»¶ï¼šluci-app-serverchanã€luci-app-pushbotï¼Œå¯ä»¥ç›‘æµ‹é™Œç”Ÿè®¾å¤‡ä¸Šçº¿ã€‚å½“ç„¶å®ƒä»¬è¿˜æœ‰äº›å…¶ä»–åŠŸèƒ½ï¼Œä½†æˆ‘ä»¬åªå…³å¿ƒâ€œç›‘æµ‹é™Œç”Ÿè®¾å¤‡ä¸Šçº¿â€è¿™ä¸€ç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ’ä»¶å°±å¤ªè‡ƒè‚¿äº†ã€‚å¹¶ä¸”å®ƒä»¬è¿˜ä¸èƒ½ç›‘æµ‹éæ—è·¯ç”±æ‰€åœ¨ç½‘æ®µï¼Œè€Œæˆ‘å´å°†é™Œç”Ÿè®¾å¤‡æ”¾åœ¨äº† 10.0.1.0/24 ä¸­ï¼Œå’Œæ—è·¯ç”±ä¸åœ¨åŒä¸€ç½‘æ®µã€‚æ‰€ä»¥æˆ‘ä»¬ç®€å•çš„æ”¹é€ ä¸€ä¸‹ã€‚\nå®‰è£…å’Œé…ç½® æˆ‘é»˜è®¤ä½ å·²ç»æŒ‰ç…§ å‰æ–‡ï¼ˆäºŒï¼‰ å®‰è£…å¥½äº† arp-scan äº†ã€‚æ–°å»º /usr/local/bin/arp.sh å†…å®¹å¦‚ä¸‹ï¼Œè¯·è‡ªè¡Œåœ¨çˆ±å¿«ä¸­é™åˆ¶é™Œç”Ÿè®¾å¤‡æ‰€èƒ½ä½¿ç”¨çš„IPï¼ˆå‚è§ å‰æ–‡ï¼ˆä¸€ï¼‰ï¼Œç”¨å‡MACé¢„ç•™å¥½å¯ä¿¡ä»»è®¾å¤‡çš„IPä½ç½®ï¼‰ï¼Œå¹¶å¡«å…¥ä¸‹é¢çš„ arplist å˜é‡ä¸­ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #!/usr/bin/env bash ## è¦ç›‘æµ‹çš„ç½‘æ®µï¼Œå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ï¼Œä¹Ÿå¯ä»¥å†™æˆ 10.0.0.0/24è¿™æ ·ï¼Œè¯·åœ¨çˆ±å¿«ä¸­ä¸ºé™Œç”Ÿè®¾å¤‡æŒ‡å®šç½‘æ®µï¼Œå¯ä¿¡ä»»è®¾å¤‡ä¸è¦ä½¿ç”¨è¯¥ç½‘æ®µçš„IP arplist=\u0026#34;10.0.1.101-10.0.1.110\u0026#34; arpinfo=$(echo \u0026#34;$arplist\u0026#34; | arp-scan -gxf-) if [[ -n \u0026#34;$arpinfo\u0026#34; \u0026amp;\u0026amp; \u0026#34;$arpinfo\u0026#34; != \u0026#34;$(cat /tmp/arp.txt 2\u0026gt;/dev/null)\u0026#34; ]]; then content=$(echo \u0026#34;$arpinfo\u0026#34; | perl -pe \u0026#39;{s|^|- |; s|\\t| |g; s|\\n|\\\\n\\\\n|g}\u0026#39;) echo \u0026#34;æœ‰æ–°çš„ç»ˆç«¯è¿æ¥åˆ°äº†ç½‘ç»œï¼š\u0026#34;$arpinfo # notify.sh \u0026#34;æœ‰æ–°çš„ç»ˆç«¯è¿æ¥åˆ°äº†ç½‘ç»œ\u0026#34; \u0026#34;$content\u0026#34; \u0026amp;\u0026gt;/dev/null # å¦‚æœéœ€è¦å‘é€é€šçŸ¥è¯·è§£é™¤æ³¨é‡Š echo \u0026#34;$arpinfo\u0026#34; \u0026gt; /tmp/arp.txt elif [[ -z \u0026#34;$arpinfo\u0026#34; \u0026amp;\u0026amp; -f /tmp/arp.txt ]]; then rm /tmp/arp.txt fi exit 0 ä¸ºå…¶å¢åŠ å¯æ‰§è¡Œæƒé™ï¼š\n1 chmod +x /usr/local/bin/arp.sh å¦‚æœä½ éœ€è¦å‘é€é€šçŸ¥ï¼Œè§£é™¤ä¸Šè¿°è„šæœ¬ç¬¬10è¡Œæ³¨é‡Šçš„åŒæ—¶ï¼Œåœ¨ç¬¬4è¡Œä¹‹åæ ¹æ®ä¸‹è¡¨é€‰ç”¨é€šçŸ¥æ¸ é“çš„å˜é‡å¹¶èµ‹å€¼ã€‚\nåºå· å˜é‡å è¯´æ˜ 1 TG_USER_ID é€šçŸ¥æ¸ é“telegramï¼Œå¦‚éœ€ä½¿ç”¨éœ€è¦å’Œ TG_BOT_TOKEN åŒæ—¶èµ‹å€¼ï¼Œç§èŠ @getuseridbot è·å–ã€‚ 2 TG_BOT_TOKEN é€šçŸ¥æ¸ é“telegramï¼Œå¦‚éœ€ä½¿ç”¨éœ€è¦å’Œ TG_USER_ID åŒæ—¶èµ‹å€¼ï¼Œç§èŠ @BotFather è·å–ã€‚ 3 TG_PROXY_ADDRESS ç»™TGæœºå™¨äººå‘é€æ¶ˆæ¯çš„ä»£ç†åœ°å€ï¼Œå½“è®¾ç½®äº†TG_USER_IDå’ŒTG_BOT_TOKENåå¯ä»¥è®¾ç½®æ­¤å€¼ï¼Œå½¢å¦‚ï¼šhttp://192.168.1.1:7890ï¼Œä¹Ÿå¯ä»¥ä¸è®¾ç½®ã€‚ 4 TG_PROXY_USER ç»™TGæœºå™¨äººå‘é€æ¶ˆæ¯çš„ä»£ç†çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå½“è®¾ç½®äº†TG_PROXY_ADDRESSåå¯ä»¥è®¾ç½®æ­¤å€¼ï¼Œæ ¼å¼ä¸ºï¼š\u0026lt;ç”¨æˆ·å\u0026gt;:\u0026lt;å¯†ç \u0026gt;ï¼Œå½¢å¦‚ï¼šadmin:passwordï¼Œå¦‚æ²¡æœ‰å¯ä¸è®¾ç½®ã€‚ 5 DD_BOT_TOKEN é€šçŸ¥æ¸ é“é’‰é’‰ï¼Œå¦‚éœ€ä½¿ç”¨éœ€è¦å’Œ DD_BOT_SECRET åŒæ—¶èµ‹å€¼ï¼Œæœºå™¨äººè®¾ç½®ä¸­webhooké“¾æ¥access_token=åé¢çš„å­—ç¬¦ä¸²ï¼ˆä¸å«=ä»¥åŠ=ä¹‹å‰çš„å­—ç¬¦ï¼‰ã€‚ 6 DD_BOT_SECRET é€šçŸ¥æ¸ é“é’‰é’‰ï¼Œå¦‚éœ€ä½¿ç”¨éœ€è¦å’Œ DD_BOT_TOKEN åŒæ—¶èµ‹å€¼ï¼Œæœºå™¨äººè®¾ç½®ä¸­åªå¯ç”¨åŠ ç­¾ï¼ŒåŠ ç­¾çš„ç§˜é’¥ï¼Œå½¢å¦‚ï¼šSEC1234567890abcdefgã€‚ 7 IYUU_TOKEN é€šçŸ¥æ¸ é“çˆ±è¯­é£é£ï¼Œé€šè¿‡ è¿™é‡Œ è·å–ï¼Œçˆ±è¯­é£é£çš„TOKENã€‚ 8 SCKEY é€šçŸ¥æ¸ é“ServerChanï¼Œé€šè¿‡ è¿™é‡Œ è·å–ã€‚ 9 PUSHPLUS_TOKEN é€šçŸ¥æ¸ é“PUSH PLUSï¼Œå¡«å…¥å…¶tokenï¼Œè¯¦è§ è¿™é‡Œã€‚ 10 WORK_WECHAT_BOT_KEY é€šçŸ¥æ¸ é“ä¼ä¸šå¾®ä¿¡ç¾¤æœºå™¨äººï¼Œå¡«å…¥æœºå™¨äººè®¾ç½®webhooké“¾æ¥ä¸­key=åé¢çš„å­—ç¬¦ä¸²ï¼Œä¸å«key=ã€‚ 11 GOTIFY_URL é€šçŸ¥æ¸ é“Gotifyï¼Œå¡«å…¥å…¶é€šçŸ¥ç½‘å€ï¼Œéœ€è¦å’ŒGOTIFY_APP_TOKENåŒæ—¶èµ‹å€¼ã€‚ 12 GOTIFY_APP_TOKEN é€šçŸ¥æ¸ é“Gotifyï¼Œå¡«å…¥å…¶TOKENï¼Œéœ€è¦å’ŒGOTIFY_URLåŒæ—¶èµ‹å€¼ã€‚ 13 GOTIFY_PRIORITY é€šçŸ¥æ¸ é“Gotifyï¼Œå‘é€æ¶ˆæ¯çš„ä¼˜å…ˆçº§ã€‚ åŒæ—¶ä¸‹è½½ notify.sh ä¿å­˜ä¸º /usr/local/bin/notify.sh ï¼Œå¹¶ä¸ºå…¶å¢åŠ å¯æ‰§è¡Œæƒé™ï¼š\n1 chmod +x /usr/local/bin/notify.sh æœ‰è®¸å¤šè®¾å¤‡æ— æ³•è¢« arp-scan è¯†åˆ«å‡ºæ¥åˆ¶é€ å•†ï¼Œå¯ä»¥ç¼–è¾‘ /etc/arp-scan/mac-vendor.txtï¼Œæ‰‹åŠ¨å¢åŠ å®ƒä»¬çš„åˆ¶é€ å•†ï¼Œå½¢å¼å¦‚ä¸‹ï¼ˆMACåœ°å€ä»…æ”¯æŒå°å†™å­—æ¯ï¼Œä¸æ”¯æŒå¤§å†™å­—æ¯ï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 02:42:0a Docker MacVLAN Network 1a:5d:23 ShenZhen Sirivision Communication Technology Co., Ltd. 6e:1c:d5 Huawei Technologies Co., Ltd. 0e:2a:7c:3a:ff:2f QEMU Virtual Machine 1a:38:df:16:2f:fe QEMU Virtual Machine 42:c9:47:6c:bf:d1 QEMU Virtual Machine 46:ee:ec:94:f0:4e QEMU Virtual Machine 54:a7:fb:1a:cc:d3 QEMU Virtual Machine 92:97:84:9b:24:c0 QEMU Virtual Machine 96:52:cc:f2:98:34 QEMU Virtual Machine 9a:6b:93:51:37:92 QEMU Virtual Machine ae:0f:0a:58:0e:47 QEMU Virtual Machine ae:85:36:a9:4b:f0 QEMU Virtual Machine b2:56:a4:68:f8:f5 QEMU Virtual Machine c6:80:e3:62:af:3a QEMU Virtual Machine ee:d7:ce:c1:85:7c QEMU Virtual Machine f6:c7:8b:c9:07:31 QEMU Virtual Machine ç„¶åä½ å†è¿è¡Œ echo \u0026quot;10.0.0.0/22\u0026quot; | arp-scan -xgf- å°±å¯ä»¥è¯†åˆ«å‡ºæ¥äº†ã€‚\nè¿è¡Œ æ–¹å¼ä¸€ï¼šå®šæ—¶ä»»åŠ¡ è¾“å…¥ crontab -e ï¼Œåœ¨ å‰æ–‡ï¼ˆä¸ƒï¼‰ åˆ›å»ºçš„å®šæ—¶ä»»åŠ¡ä¹‹ååŠ å…¥ä¸€æ¡ï¼š\n1 * * * * * arp.sh \u0026gt;\u0026gt; /tmp/arp.log æœªæ¥æƒ³æŸ¥çœ‹æœ‰å“ªäº›é™Œç”Ÿè®¾å¤‡æ¥å…¥ï¼Œæ³¨æ„é‡å¯åè¯¥æ–‡ä»¶ä¼šæ¶ˆå¤±ï¼Œè¯·åŠæ—¶æŸ¥çœ‹ã€‚\n1 cat /tmp/arp.log æ–¹å¼äºŒï¼šsystemd æ–°å»ºè„šæœ¬ /usr/local/bin/run-arp.shï¼Œå†…å®¹å¦‚ä¸‹ï¼Œå¹¶å¢åŠ å¯æ‰§è¡Œæƒé™ chmod +x /usr/local/bin/run-arp.sh\n1 2 3 4 while :; do arp.sh sleep 60 done æ–°å»º /etc/systemd/system/arp.serviceï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 [Unit] Description = Detect unknown clients. After = network.target [Service] Environment = PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin Type = simple Restart = always ExecStart = run-arp.sh RestartSec = 60 StartLimitInterval = 0 [Install] WantedBy = multi-user.target ç„¶åå¯ç”¨å®ƒå³å¯ï¼š\n1 systemctl enable --now arp.service æœªæ¥æƒ³æŸ¥çœ‹æœ‰å“ªäº›é™Œç”Ÿè®¾å¤‡æ¥å…¥ï¼š\n1 journalctl -u arp.service ç³»åˆ— ä¸€ã€å­ç½‘åˆ’åˆ†åŠç½‘ç»œæ‹“æ‰‘è®¾è®¡ã€çˆ±å¿«ä¸Šçš„è®¾ç½®\näºŒã€å®‰è£…Debianã€åˆå§‹ç½‘ç»œé…ç½®ã€å¿…è¦è½¯ä»¶å®‰è£…\nä¸‰ã€AdGuardHomeã€mosdnsã€clashåœ¨DNSçš„å…³ç³»ï¼Œä»¥åŠAdGuardHomeã€mosdnsçš„å®‰è£…å’Œé…ç½®\nå››ã€clashé€æ˜ä»£ç†(Tproxy)çš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„IPè§„åˆ™å’Œnftablesè§„åˆ™\näº”ã€UnblockNeteaseMusicçš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„çš„nftablesè§„åˆ™ã€å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨\nå…­ã€subconverterçš„å®‰è£…å’Œé…ç½®\nä¸ƒã€é…ç½®nginxä¸ºæ–‡ä»¶æœåŠ¡å™¨ã€è‡ªåŠ¨æ›´æ–°clashè®¢é˜…ã€è‡ªåŠ¨ç”Ÿæˆéœ€è¦çš„æ–‡ä»¶\nå…«ã€é…ç½®æ—è·¯ç”±çš„SNMPDæœåŠ¡ã€é…ç½®ä¸»è·¯ç”±çš„è·¨ä¸‰å±‚åº”ç”¨\nä¹ã€ç›‘æµ‹é™Œç”Ÿè®¾å¤‡\nåã€å¿«é€Ÿç®€å•çš„å®‰è£…å’Œæ›´æ–°è½¯ä»¶åŒ…\nåä¸€ã€DNSã€ç½‘ç»œæ•…éšœç­‰çš„æ€»ç»“ï¼Œä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹\n","date":"2023-10-22T05:00:00+08:00","image":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E4%B9%9D/arp-scan_hu574dba91de5fa709b097f092f38ffb07_437319_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E4%B9%9D/","title":"æˆ‘çš„å®¶åº­ç½‘ç»œè®¾è®¡æ€è·¯ï¼Œå¼€å¯debiançš„æ—è·¯ç”±ä¹‹è·¯ï¼ˆä¹ï¼‰"},{"content":"å‰è¨€ åœ¨ å‰æ–‡ï¼ˆä¸€ï¼‰ ä¸­æˆ‘ä»¬æåˆ°äº†ä¼šå­˜åœ¨ â€œç½‘å…³ä¸ºæ—è·¯ç”±çš„è®¾å¤‡åœ¨çˆ±å¿«çš„ç»ˆç«¯ç›‘æ§ä¸­å…¨éƒ¨æ˜¾ç¤ºä¸ºæ—è·¯ç”±â€ è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©è·¨ä¸‰å±‚åº”ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nDebianæ—è·¯ç”±å®‰è£…å’Œé…ç½® æˆ‘é»˜è®¤ä½ å·²ç»æŒ‰ç…§ å‰æ–‡ï¼ˆäºŒï¼‰ å®‰è£…å¥½äº† snmpd äº†ã€‚æ‰“å¼€ /etc/snmp/snmpd.confï¼Œè¿›è¡Œä»¥ä¸‹å†…å®¹çš„ä¿®æ”¹ã€‚\næ‰¾åˆ°ä»¥ä¸‹å†…å®¹ï¼š\n1 #agentaddress 127.0.0.1,[::1] ä¿®æ”¹ä¸ºï¼ˆæˆ‘ä»¬åªç›‘å¬IPv4ï¼‰ï¼š\n1 agentaddress 10.0.0.2 æ‰¾åˆ°ä»¥ä¸‹å†…å®¹ï¼š\n1 2 view systemonly included .1.3.6.1.2.1.1 view systemonly included .1.3.6.1.2.1.25.1 ä¿®æ”¹ä¸ºï¼š\n1 view systemonly included .1 æˆ‘ä»¬æ—è·¯ç”±çš„ snmpd æœåŠ¡æœ¬èº«åªè¿è¡Œåœ¨å±€åŸŸç½‘ä¸­ï¼Œæ‰€ä»¥æŠŠå…¨éƒ¨ snmpd çš„å…¨éƒ¨ç›‘æ§èŠ‚ç‚¹æ‰“å¼€ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚æœ€åé‡å¯ä¸€ä¸‹æœåŠ¡ï¼š\n1 systemctl restart snmpd.service çˆ±å¿«ä¸»è·¯ç”±é…ç½® è¿›å…¥çˆ±å¿«ç®¡ç†ç•Œé¢ä¸­çš„ â€œé«˜çº§åº”ç”¨ -\u0026gt; è·¨ä¸‰å±‚åº”ç”¨â€ï¼Œç„¶åæ·»åŠ ä¸€æ¡ä¿¡æ¯å¦‚ä¸‹ï¼Œä¿å­˜åä»¥æ—è·¯ç”±ä¸ºç½‘å…³çš„è®¾å¤‡ä¿¡æ¯å°±æ­£å¸¸æ˜¾ç¤ºäº†ã€‚\nç³»åˆ— ä¸€ã€å­ç½‘åˆ’åˆ†åŠç½‘ç»œæ‹“æ‰‘è®¾è®¡ã€çˆ±å¿«ä¸Šçš„è®¾ç½®\näºŒã€å®‰è£…Debianã€åˆå§‹ç½‘ç»œé…ç½®ã€å¿…è¦è½¯ä»¶å®‰è£…\nä¸‰ã€AdGuardHomeã€mosdnsã€clashåœ¨DNSçš„å…³ç³»ï¼Œä»¥åŠAdGuardHomeã€mosdnsçš„å®‰è£…å’Œé…ç½®\nå››ã€clashé€æ˜ä»£ç†(Tproxy)çš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„IPè§„åˆ™å’Œnftablesè§„åˆ™\näº”ã€UnblockNeteaseMusicçš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„çš„nftablesè§„åˆ™ã€å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨\nå…­ã€subconverterçš„å®‰è£…å’Œé…ç½®\nä¸ƒã€é…ç½®nginxä¸ºæ–‡ä»¶æœåŠ¡å™¨ã€è‡ªåŠ¨æ›´æ–°clashè®¢é˜…ã€è‡ªåŠ¨ç”Ÿæˆéœ€è¦çš„æ–‡ä»¶\nå…«ã€é…ç½®æ—è·¯ç”±çš„SNMPDæœåŠ¡ã€é…ç½®ä¸»è·¯ç”±çš„è·¨ä¸‰å±‚åº”ç”¨\nä¹ã€ç›‘æµ‹é™Œç”Ÿè®¾å¤‡\nåã€å¿«é€Ÿç®€å•çš„å®‰è£…å’Œæ›´æ–°è½¯ä»¶åŒ…\nåä¸€ã€DNSã€ç½‘ç»œæ•…éšœç­‰çš„æ€»ç»“ï¼Œä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹\n","date":"2023-10-22T04:00:00+08:00","image":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E5%85%AB/snmp-client_hu51d4af1eeefa67a1188add7d16f39c36_65107_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E5%85%AB/","title":"æˆ‘çš„å®¶åº­ç½‘ç»œè®¾è®¡æ€è·¯ï¼Œå¼€å¯debiançš„æ—è·¯ç”±ä¹‹è·¯ï¼ˆå…«ï¼‰"},{"content":"æ–‡ä»¶å‡†å¤‡ nginx æˆ‘é»˜è®¤ä½ å·²ç»æŒ‰ç…§ å‰æ–‡ï¼ˆäºŒï¼‰ å®‰è£…å¥½äº† nginx äº†ã€‚æ–°å»º /etc/nginx/conf.d/private.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 server { listen 80; server_name 10.0.0.2; charset \u0026#39;utf-8\u0026#39;; root /var/www/html; location / { if ($request_filename ~* ^((.*?\\.(txt|yaml|yml|md|acl|rule|list|ini|xml|conf|vcf|manifest|sig|buildinfo|json))|LICENCE|Packages|sha256sums)$){ more_set_headers \u0026#39;Content-Type: text/plain; charset=utf-8\u0026#39;; } autoindex on; # ç´¢å¼• autoindex_exact_size on; # æ˜¾ç¤ºæ–‡ä»¶å¤§å° autoindex_localtime on; # æ˜¾ç¤ºæ–‡ä»¶æ—¶é—´ } } å¦‚æœ nginx å·²ç»å¯åŠ¨èµ·æ¥äº†ï¼Œé‚£ä¹ˆé‡æ–°è¯»å–ä¸‹ï¼šnginx -s reloadï¼›å¦‚æœ nginx è¿˜æ²¡æœ‰å¯åŠ¨ï¼Œé‚£ä¹ˆå°±å¯åŠ¨å®ƒï¼š systemctl restart nginx.serviceã€‚\nç„¶åï¼Œæ”¾åœ¨ /var/www/html ä¸‹é¢çš„æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ç½‘å€ http://10.0.0.2/XXXXX æ¥ä¸‹è½½ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åé¢åˆ›å»ºçš„ /var/www/html/config_template.yaml å’Œ /var/www/html/convert_rule.ini ç­‰ç­‰æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ç½‘å€ http://10.0.0.2/config_template.yaml http://10.0.0.2/convert_rule.ini æ¥ä¸‹è½½ã€‚\nclashé…ç½®æ¨¡æ¿ ä¸º clash è®¢é˜…åˆ¶ä½œé€‚åˆä½ è‡ªå·±çš„æ¨¡æ¿ï¼Œæ ¹æ® clash meta wikiï¼Œè‡ªè¡Œåˆ›å»º /var/www/html/config_template.yamlã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 --- port: 7890 socks-port: 7891 mixed-port: 7893 tproxy-port: 7895 routing-mark: 666 allow-lan: true bind-address: \u0026#34;*\u0026#34; mode: rule log-level: info ipv6: false find-process-mode: \u0026#39;off\u0026#39; external-controller: 0.0.0.0:9090 secret: Evine9@OPENCLASH external-ui: ui external-ui-name: xd external-ui-url: \u0026#34;https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip\u0026#34; unified-delay: true tcp-concurrent: true authentication: - \u0026#34;Evine:ABCDEFGHIJK\u0026#34; experimental: sniff-tls-sni: true geodata-mode: true geodata-loader: standard geox-url: geoip: \u0026#34;https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat\u0026#34; geosite: \u0026#34;https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat\u0026#34; mmdb: \u0026#34;https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb\u0026#34; profile: tracing: true store-selected: true store-fake-ip: true sniffer: enable: true # å—…æ¢å™¨å¼€å…³ï¼Œå¼€å¯åå¯¹ redir-host ç±»å‹è¯†åˆ«çš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢ï¼ŒåŒ…å«Tunã€Redirå’ŒTProxyæˆ–DNSä¸ºredir-host # force-dns-mapping: false parse-pure-ip: true # å¯¹æ‰€æœ‰æœªè·å–åˆ°åŸŸåçš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢ override-destination: true # æ˜¯å¦ä½¿ç”¨å—…æ¢ç»“æœä½œä¸ºå®é™…è®¿é—®,é»˜è®¤ trueï¼Œå…¨å±€é…ç½®,ä¼˜å…ˆçº§ä½äº sniffer.sniff å®é™…é…ç½® # sniff: # TLS é»˜è®¤å¦‚æœä¸é…ç½® ports é»˜è®¤å—…æ¢ 443 # TLS: # ports: [443, 8443] # HTTP: # éœ€è¦å—…æ¢çš„ç«¯å£, é»˜è®¤å—…æ¢ 80 # ports: [80, 8080-8880] # override-destination: true # å¯è¦†ç›– sniffer.override-destination dns: enable: true ipv6: false listen: 0.0.0.0:7874 use-hosts: true enhanced-mode: redir-host default-nameserver: - 10.0.0.1 - 101.226.4.6 - 114.114.114.114 - 116.228.111.118 - 223.5.5.5 nameserver: - 10.0.0.1 - 101.226.4.6 - 114.114.114.114 - 116.228.111.118 - 223.5.5.5 fallback: - \u0026#39;https://dns.cloudflare.com/dns-query\u0026#39; - \u0026#39;tls://dns.google:853\u0026#39; - \u0026#39;https://1.1.1.1/dns-query\u0026#39; - \u0026#39;tls://1.1.1.1:853\u0026#39; - \u0026#39;tls://8.8.8.8:853\u0026#39; - \u0026#39;https://public.dns.iij.jp/dns-query\u0026#39; - \u0026#39;https://jp.tiar.app/dns-query\u0026#39; - \u0026#39;https://jp.tiarap.org/dns-query\u0026#39; - \u0026#39;tls://jp.tiar.app\u0026#39; - \u0026#39;tls://dot.tiar.app\u0026#39; fallback-filter: geoip: true geoip-code: CN geosite: - gfw ipcidr: - 0.0.0.0/8 - 10.0.0.0/8 - 100.64.0.0/10 - 127.0.0.0/8 - 169.254.0.0/16 - 172.16.0.0/12 - 192.0.0.0/24 - 192.0.2.0/24 - 192.88.99.0/24 - 192.168.0.0/16 - 198.18.0.0/15 - 198.51.100.0/24 - 203.0.113.0/24 - 224.0.0.0/4 - 240.0.0.0/4 - 255.255.255.255/32 domain: - \u0026#34;+.google.com\u0026#34; - \u0026#34;+.facebook.com\u0026#34; - \u0026#34;+.youtube.com\u0026#34; - \u0026#34;+.githubusercontent.com\u0026#34; - \u0026#34;+.googlevideo.com\u0026#34; - \u0026#34;+.msftconnecttest.com\u0026#34; - \u0026#34;+.msftncsi.com\u0026#34; fake-ip-filter: - \u0026#34;+.*\u0026#34; subconverterè½¬æ¢é…ç½® åˆ¶ä½œè‡ªå·±çš„ subconverter è½¬æ¢é…ç½®ï¼Œæ–°å»º /var/www/html/convert_rule.ini ï¼Œè¯¦ç»†çš„æ ¼å¼è§ subconverterå¤–éƒ¨é…ç½®ï¼Œåœ¨ è¿™é‡Œ æœ‰å¤§é‡çš„å‚è€ƒæ–‡ä»¶ã€‚\nä¸‹é¢æ˜¯æˆ‘çš„ /var/www/html/convert_rule.iniï¼Œä¸è¦ç…§æŠ„ï¼ŒæŠ„äº†ä¹Ÿç”¨ä¸äº†ã€‚è¿˜æ˜¯éœ€è¦æŒ‰ç…§ä¸Šä¸€æ®µæåŠçš„ææ–™è‡ªè¡Œå‡†å¤‡é€‚åˆè‡ªå·±çš„ã€‚æ³¨æ„åˆ°æˆ‘ä»¬è‡ªå·±å½¢æˆäº† ruleset=ğŸ¶ ç½‘æ˜“éŸ³ä¹,http://10.0.0.2/clash/neteasemusic.listï¼Œç”¨ (^(?!.*ç½‘æ˜“).*) åœ¨å¸¸è§„èŠ‚ç‚¹ä¸­æ’é™¤äº†æˆ‘ä»¬è‡ªå»ºçš„ UnblockNeteaseMusic èŠ‚ç‚¹ï¼Œä»¥åŠè®¾ç½®äº†ä¸“é—¨çš„åˆ†ç»„ custom_proxy_group=ğŸ¶ ç½‘æ˜“éŸ³ä¹ï¼Œè¿™éƒ½æ˜¯ä¸ºè§£é”ç½‘æ˜“äº‘éŸ³ä¹æœåŠ¡çš„ã€‚å¦å¤–ï¼Œè¿˜è¦æ³¨æ„åˆ°æˆ‘ä»¬åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨ clash_rule_base=http://10.0.0.2/config_template.yaml æ¥å¼•ç”¨äº†å‰ä¸€æ­¥åˆ›å»ºçš„ clash é…ç½®æ¨¡æ¿ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 [custom] ;è®¾ç½®è§„åˆ™æ ‡å¿—ä½ ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list ruleset=âš“ PTç«™ç‚¹,http://10.0.0.2/pt.list ruleset=ğŸ—º ç›´è¿ç½‘ç«™,http://10.0.0.2/direct.list ruleset=ğŸŒ å¼ºåˆ¶ä»£ç†,http://10.0.0.2/proxy.list ruleset=ğŸ“¢ è°·æ­ŒFCM,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleFCM.list ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/SteamCN.list ruleset=â“‚ï¸ å¾®è½¯äº‘ç›˜,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/OneDrive.list ruleset=â“‚ï¸ å¾®è½¯æœåŠ¡,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Microsoft.list ruleset=ğŸ è‹¹æœæœåŠ¡,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list ruleset=ğŸ“² ç”µæŠ¥æ¶ˆæ¯,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Telegram.list ruleset=ğŸ’¬ OpenAi,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/OpenAi.list ruleset=ğŸ¶ ç½‘æ˜“éŸ³ä¹,http://10.0.0.2/neteasemusic.list ruleset=ğŸ® æ¸¸æˆå¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Epic.list ruleset=ğŸ® æ¸¸æˆå¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Origin.list ruleset=ğŸ® æ¸¸æˆå¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Sony.list ruleset=ğŸ® æ¸¸æˆå¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Steam.list ruleset=ğŸ® æ¸¸æˆå¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Nintendo.list ruleset=ğŸ“¹ æ²¹ç®¡è§†é¢‘,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list ruleset=ğŸ“º å“”å“©å“”å“©,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/BilibiliHMT.list ruleset=ğŸ“º å“”å“©å“”å“©,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Bilibili.list ruleset=ğŸŒ å›½å†…åª’ä½“,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaMedia.list ruleset=ğŸŒ å›½å¤–åª’ä½“,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyMedia.list ruleset=ğŸš€ èŠ‚ç‚¹é€‰æ‹©,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list ruleset=ğŸ¯ å…¨çƒç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list ruleset=ğŸ¯ å…¨çƒç›´è¿,[]GEOIP,CN ruleset=ğŸŸ æ¼ç½‘ä¹‹é±¼,[]FINAL ;è®¾ç½®è§„åˆ™æ ‡å¿—ä½ ;è®¾ç½®åˆ†ç»„æ ‡å¿—ä½ custom_proxy_group=ğŸš€ èŠ‚ç‚¹é€‰æ‹©`select`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ”¯ æ•…éšœè½¬ç§»`[]ğŸ”® è´Ÿè½½å‡è¡¡`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT custom_proxy_group=ğŸš€ æ‰‹åŠ¨åˆ‡æ¢`select`(^(?!.*ç½‘æ˜“).*) custom_proxy_group=â™»ï¸ è‡ªåŠ¨é€‰æ‹©`url-test`(^(?!.*ç½‘æ˜“).*)`https://cp.cloudflare.com/generate_204`180,,10 custom_proxy_group=ğŸ”¯ æ•…éšœè½¬ç§»`fallback`(^(?!.*ç½‘æ˜“).*)`https://cp.cloudflare.com/generate_204`180,,10 custom_proxy_group=ğŸ”® è´Ÿè½½å‡è¡¡`load-balance`(^(?!.*ç½‘æ˜“).*)`https://cp.cloudflare.com/generate_204`180,,10 custom_proxy_group=âš“ PTç«™ç‚¹`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT custom_proxy_group=ğŸ—º ç›´è¿ç½‘ç«™`select`[]DIRECT`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢ custom_proxy_group=ğŸŒ å¼ºåˆ¶ä»£ç†`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT custom_proxy_group=ğŸ“² ç”µæŠ¥æ¶ˆæ¯`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT custom_proxy_group=ğŸ’¬ OpenAi`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT custom_proxy_group=ğŸ“¹ æ²¹ç®¡è§†é¢‘`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT custom_proxy_group=ğŸ“º å“”å“©å“”å“©`select`[]ğŸ¯ å…¨çƒç›´è¿`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ custom_proxy_group=ğŸŒ å›½å¤–åª’ä½“`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT custom_proxy_group=ğŸŒ å›½å†…åª’ä½“`select`[]DIRECT`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢ custom_proxy_group=ğŸ“¢ è°·æ­ŒFCM`select`[]DIRECT`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢ custom_proxy_group=â“‚ï¸ å¾®è½¯äº‘ç›˜`select`[]DIRECT`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢ custom_proxy_group=â“‚ï¸ å¾®è½¯æœåŠ¡`select`[]DIRECT`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢ custom_proxy_group=ğŸ è‹¹æœæœåŠ¡`select`[]DIRECT`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢ custom_proxy_group=ğŸ® æ¸¸æˆå¹³å°`select`[]DIRECT`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢ custom_proxy_group=ğŸ¶ ç½‘æ˜“éŸ³ä¹`select`ç½‘æ˜“`[]DIRECT custom_proxy_group=ğŸ¯ å…¨çƒç›´è¿`select`[]DIRECT`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹© custom_proxy_group=ğŸŸ æ¼ç½‘ä¹‹é±¼`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]DIRECT`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢ custom_proxy_group=ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`url-test`(^(?!.*10x).*(æ¸¯|HK|Hong Kong))`https://cp.cloudflare.com/generate_204`180,,10 custom_proxy_group=ğŸ´â€â˜ ï¸ é™¤é¦™æ¸¯å¤–`url-test`(^(?!.*(æ‡’äºº|é¦™æ¸¯|ç½‘æ˜“)).*)`https://cp.cloudflare.com/generate_204`180,,10 custom_proxy_group=ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`url-test`(^(?!.*10x).*(æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|[^-]æ—¥|JP|Japan))`https://cp.cloudflare.com/generate_204`180,,10 custom_proxy_group=ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`url-test`(ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States)`https://cp.cloudflare.com/generate_204`180,,10 custom_proxy_group=ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`url-test`(å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan)`https://cp.cloudflare.com/generate_204`180,,10 custom_proxy_group=ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`url-test`(^(?!.*10x).*(æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore))`https://cp.cloudflare.com/generate_204`180,,10 custom_proxy_group=ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`url-test`(KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“)`https://cp.cloudflare.com/generate_204`180,,10 custom_proxy_group=ğŸ´â€â˜ ï¸ å…¶ä»–èŠ‚ç‚¹`url-test`(^(?!.*(æ‡’äºº|é¦™æ¸¯|å°æ¹¾|æ–°åŠ å¡|éŸ©å›½|ç¾å›½|æ—¥æœ¬|ç½‘æ˜“)).*)`https://cp.cloudflare.com/generate_204`180,,10 ;è®¾ç½®åˆ†ç»„æ ‡å¿—ä½ enable_rule_generator=true overwrite_original_rules=true clash_rule_base=http://10.0.0.2/config_template.yaml ;Options for renaming nodes rename=å°å°¼@å°åº¦å°¼è¥¿äºš rename=æ¾³æ´²@æ¾³å¤§åˆ©äºš rename=è¿ªæ‹œ@é˜¿è”é…‹ ;Options for adding emojis add_emoji=true remove_old_emoji=true ;emoji=(æµé‡|æ—¶é—´|åº”æ€¥),ğŸ³ï¸â€ğŸŒˆ emoji=é¦™æ¸¯,ğŸ‡­ğŸ‡° emoji=æ¾³é—¨,ğŸ‡²ğŸ‡´ emoji=å°æ¹¾,ğŸ‡¨ğŸ‡³ emoji=æ—¥æœ¬,ğŸ‡¯ğŸ‡µ emoji=éŸ©å›½,ğŸ‡°ğŸ‡· emoji=ç¾å›½,ğŸ‡ºğŸ‡¸ emoji=è‹±å›½,ğŸ‡¬ğŸ‡§ emoji=æ³°å›½,ğŸ‡¹ğŸ‡­ emoji=æ³•å›½,ğŸ‡«ğŸ‡· emoji=å¾·å›½,ğŸ‡©ğŸ‡ª emoji=å·´è¥¿,ğŸ‡§ğŸ‡· emoji=(^(?!.*å°¼).*å°åº¦),ğŸ‡®ğŸ‡³ emoji=è·å…°,ğŸ‡³ğŸ‡± emoji=å—é,ğŸ‡¿ğŸ‡¦ emoji=æ™ºåˆ©,ğŸ‡¨ğŸ‡± emoji=ä¸¹éº¦,ğŸ‡©ğŸ‡° emoji=ä¼Šæœ—,ğŸ‡®ğŸ‡· emoji=è¶Šå—,ğŸ‡»ğŸ‡³ emoji=ç‘å£«,ğŸ‡¨ğŸ‡­ emoji=æ·å…‹,ğŸ‡¨ğŸ‡¿ emoji=èŠ¬å…°,ğŸ‡«ğŸ‡® emoji=æŒªå¨,ğŸ‡²ğŸ‡½ emoji=ç‘å…¸,ğŸ‡¸ğŸ‡ª emoji=æ–°åŠ å¡,ğŸ‡¸ğŸ‡¬ emoji=ä¿„ç½—æ–¯,ğŸ‡·ğŸ‡º emoji=é˜¿æ ¹å»·,ğŸ‡¦ğŸ‡· emoji=åœŸè€³å…¶,ğŸ‡¹ğŸ‡· emoji=è²å¾‹å®¾,ğŸ‡µğŸ‡­ emoji=æ¯”åˆ©æ—¶,ğŸ‡§ğŸ‡ª emoji=å¢æ£®å ¡,ğŸ‡±ğŸ‡º emoji=é˜¿è”é…‹,ğŸ‡¦ğŸ‡ª emoji=åŠ æ‹¿å¤§,ğŸ‡¨ğŸ‡¦ emoji=æ„å¤§åˆ©,ğŸ‡®ğŸ‡¹ emoji=çˆ±å°”å…°,ğŸ‡®ğŸ‡ª emoji=å¥¥åœ°åˆ©,ğŸ‡¦ğŸ‡¹ emoji=å­ŸåŠ æ‹‰,ğŸ‡§ğŸ‡© emoji=æŸ¬åŸ”å¯¨,ğŸ‡°ğŸ‡­ emoji=å“ˆè¨å…‹,ğŸ‡°ğŸ‡¿ emoji=å¢¨è¥¿å“¥,ğŸ‡²ğŸ‡½ emoji=æ–°è¥¿å…°,ğŸ‡³ğŸ‡¿ emoji=è‘¡è„ç‰™,ğŸ‡µğŸ‡¹ emoji=è¥¿ç­ç‰™,ğŸ‡ªğŸ‡¸ emoji=ä¹Œå…‹å…°,ğŸ‡ºğŸ‡¦ emoji=ç½—é©¬å°¼äºš,ğŸ‡·ğŸ‡´ emoji=å·´åŸºæ–¯å¦,ğŸ‡µğŸ‡° emoji=é©¬æ¥è¥¿äºš,ğŸ‡²ğŸ‡¾ emoji=(æ¾³æ´²|æ¾³å¤§åˆ©äºš),ğŸ‡¦ğŸ‡º emoji=(å°å°¼|å°åº¦å°¼è¥¿äºš),ğŸ‡®ğŸ‡© emoji=æ‡’äºº,ğŸ¦¥ emoji=ç½‘æ˜“,ğŸ¶ ;ç”¨äºåŒ…å«æˆ–æ’é™¤èŠ‚ç‚¹å…³é”®è¯çš„é€‰é¡¹ ä¼šè¦†ç›– ä¸»ç¨‹åºç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶ é‡Œçš„å†…å®¹ ;include_remarks= exclude_remarks=è¶Šå—|å—é|åˆ°æœŸ|æµé‡|é‡ç½® ;åœ¨ header é‡Œçš„åŠ å…¥æµé‡ä¿¡æ¯ append_sub_userinfo=true ç½‘æ˜“äº‘éŸ³ä¹åŸŸåä¸IPè§„åˆ™ åœ¨ subconverterè½¬æ¢é…ç½® ä¸­ï¼Œæˆ‘ä»¬å¼•ç”¨äº† http://10.0.0.2/neteasemusic.listï¼Œç°åœ¨æˆ‘ä»¬å¯¹å®ƒåˆå§‹åŒ–ã€‚æ–°å»º /var/www/html/neteasemusic.listï¼Œå†…å®¹å¦‚ä¸‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¼šç”¨è„šæœ¬è‡ªåŠ¨æ›´æ–°å®ƒã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 DOMAIN-SUFFIX,music.163.com DOMAIN-SUFFIX,music.163.com.163jiasu.com IP-CIDR,39.105.63.80/32,no-resolve IP-CIDR,39.105.175.128/32,no-resolve IP-CIDR,45.127.129.53/32,no-resolve IP-CIDR,47.100.127.239/32,no-resolve IP-CIDR,59.111.19.33/32,no-resolve IP-CIDR,59.111.19.99/32,no-resolve IP-CIDR,59.111.160.195/32,no-resolve IP-CIDR,112.47.51.30/32,no-resolve IP-CIDR,114.80.149.72/30,no-resolve IP-CIDR,115.238.119.67/32,no-resolve IP-CIDR,115.238.119.68/31,no-resolve IP-CIDR,118.24.63.156/32,no-resolve IP-CIDR,121.228.190.68/30,no-resolve IP-CIDR,122.225.83.106/32,no-resolve IP-CIDR,122.225.83.109/32,no-resolve IP-CIDR,122.225.83.110/32,no-resolve IP-CIDR,180.163.200.96/30,no-resolve IP-CIDR,182.92.170.253/32,no-resolve IP-CIDR,183.134.34.248/31,no-resolve IP-CIDR,183.136.182.18/31,no-resolve IP-CIDR,183.136.182.20/32,no-resolve IP-CIDR,193.112.159.225/32,no-resolve ç½‘æ˜“äº‘éŸ³ä¹çš„ä»£ç†é…ç½® åœ¨ å‰æ–‡ï¼ˆäº”ï¼‰ ä¸­æˆ‘ä»¬æ‰‹åŠ¨è®¾ç½®äº†ç½‘æ˜“äº‘éŸ³ä¹çš„ä»£ç†ï¼Œç°åœ¨æˆ‘ä»¬ä¸ºæ¥ä¸‹æ¥çš„è‡ªåŠ¨è®¢é˜…åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼š/var/www/html/neteasemusic.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 proxies: - name: \u0026#34;ğŸ¶ ç½‘æ˜“ä»£ç†\u0026#34; server: 10.0.0.2 port: 8080 type: http å·¥å…·å‡†å¤‡ åé¢çš„è„šæœ¬ä¸­è¿˜è¦ç”¨åˆ°ä¸¤ä¸ªå·¥å…·ã€‚ä¸‹è½½ v2dat ä¿å­˜ä¸º /usr/local/bin/v2datï¼Œä¸‹è½½ cidr-merger ä¿å­˜ä¸º /usr/local/bin/cidr-mergerã€‚\nç„¶åä¸ºå®ƒä»¬å¢åŠ å¯æ‰§è¡Œæƒé™ï¼š\n1 chmod +x /usr/local/bin/{v2dat,cidr-merger} æ„Ÿè°¢ä»¥ä¸‹ä»“åº“ï¼š\nhttps://github.com/urlesistiana/v2dat\nhttps://github.com/zhanhb/cidr-merger\nhttps://github.com/sbwml/luci-app-mosdns\nè‡ªåŠ¨è„šæœ¬ ä¸ºäº†è‡ªåŠ¨å¤‡ä»½æ—§çš„è®¢é˜…æ–‡ä»¶ï¼Œé˜²æ­¢å‡ºé”™ï¼Œæˆ‘ä»¬ä½¿ç”¨å°† /var/lib/clash/config.yaml è½¯è¿æ¥åˆ° /var/lib/clash/config/subscribes_name1.yamlï¼ˆ subscribes_name1 ç”±ä½ è‡ªè¡Œå®šä¹‰ï¼Œè¯·å’Œä¸‹æ–‡çš„è„šæœ¬ä¸­çš„å‘½åä¿æŒä¸€è‡´ï¼‰ã€‚åç»­è„šæœ¬ä¸­ä¼šè‡ªåŠ¨åˆ é™¤è¶…è¿‡30å¤©çš„æ—§è®¢é˜…ã€‚\n1 2 3 4 cd /var/lib/clash mkdir config cp config.yaml config/subscribes_name1.yaml ln -sf config/subscribes_name1.yaml config.yaml å¦‚æœæœªæ¥éœ€è¦åœ¨å¤šä»½è®¢é˜…ä¸­åˆ‡æ¢ï¼Œç›´æ¥æ›´æ–°è½¯è¿æ¥å³å¯ï¼š\n1 2 cd /var/lib/clash ln -sf config/subscribes_name2.yaml config.yaml ç„¶åæ–°å»ºä¸€ä¸ªæ–‡ä»¶ /usr/local/bin/update-config.sh å¦‚ä¸‹ï¼Œå¹¶æŒ‰ç…§æ³¨é‡Šä¿®æ”¹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 #!/usr/bin/env bash ## è®¢é˜…ç›¸å…³ä¿¡æ¯ï¼Œsubscribes_nameå’Œsubscribes_urlä¸€ä¸€å¯¹åº”ï¼Œå¦‚æœæƒ³è¦åˆå¹¶å¤šä¸ªè®¢é˜…ä¸ºä¸€ä»½ï¼Œä½¿ç”¨ | åˆ†éš”ï¼Œæ¯”å¦‚ç¤ºä¾‹ä¸­ç¬¬3ä¸ªã€‚åŒæ—¶è¿™ä¸¤ä¸ªæ•°ç»„çš„å…ƒç´ ä¸ªæ•°å¿…é¡»ä¸€è‡´ã€‚ subscribes_name=( subscribes_name1.yaml subscribes_name2.yaml subscribes_merge.yaml ) subscribes_url=( \u0026#34;https://api.clashsubscribes.icu/clashudp/1111/125adfqeradf/\u0026#34; \u0026#34;https://v3.clashsubscribes.xyz/api/v1/client/subscribe?token=abcdefjagadfqaer456\u0026#34; \u0026#34;https://api.clashsubscribes.icu/clashudp/1111/125adfqeradf/|https://v3.clashsubscribes.xyz/api/v1/client/subscribe?token=abcdefjagadfqaer456\u0026#34; ) ## è®¢é˜…è®¾ç½® subconverter_target=\u0026#34;clash\u0026#34; # è½¬æ¢ç›®æ ‡ subconverter_url=\u0026#34;http://10.0.0.2:25500/sub\u0026#34; # subconvererçš„apiæ¥å£ subconverter_nem=\u0026#34;http://10.0.0.2/neteasemusic.yaml\u0026#34; # å‰é¢ç”Ÿæˆçš„neteasemusic.yamlçš„ä¸‹è½½ç½‘å€ subconverter_rule=\u0026#34;http://10.0.0.2/convert_rule.ini\u0026#34; # å‰é¢ç”Ÿæˆçš„convert_rule.iniçš„ä¸‹è½½ç½‘å€ ## è·¯å¾„ dir_clash_work=\u0026#34;/var/lib/clash\u0026#34; # clashçš„å·¥ä½œè·¯å¾„ dir_xd=$dir_clash_work/ui/xd # clashçš„XDé¢æ¿ç›¸å…³æ–‡ä»¶çš„ä¿å­˜ç›®å½• dir_mosdns_geodata=\u0026#34;/var/lib/mosdns/geodata\u0026#34; # mosdnsç”¨åˆ°çš„geodataç›¸å…³æ•°æ®çš„ä¿å­˜ç›®å½•ï¼Œåœ¨mosdnsé…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ list_nem=\u0026#34;/var/www/html/neteasemusic.list\u0026#34; # neteasemusic.listçš„è·¯å¾„ nem_address=nem_address.nft # å‰æ–‡ä¸­åœ¨/var/lib/clashä¸‹çš„clashéœ€è¦ç”¨åˆ°çš„ç½‘æ˜“äº‘éŸ³ä¹IPåœ°å€ï¼ŒæœåŠ¡clashçš„nftablesè§„åˆ™ç”¨ geoip4_cn=geoip4_cn.nft # å‰æ–‡ä¸­åœ¨/var/lib/clashä¸‹çš„clashéœ€è¦ç”¨åˆ°çš„ä¸­å›½å¤§é™†IPåœ°å€ï¼ŒæœåŠ¡clashçš„nftablesè§„åˆ™ç”¨ ############ ä»¥ä¸‹å†…å®¹å»ºè®®ä¸è¦ä¿®æ”¹ ############ ## geodataç›¸å…³ geodata=( geoip.dat geosite.dat ) geodata_url=( https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat ) geodata_txt=( \u0026#39;geoip_cn.txt\u0026#39; \u0026#39;geosite_cn.txt\u0026#39; \u0026#39;geosite_geolocation-!cn.txt\u0026#39; ) ## è®¢é˜…ç›¸å…³ä¿¡æ¯ subscribes_current=$(readlink $dir_clash_work/config.yaml) # å½“å‰æ‰€ä½¿ç”¨çš„é…ç½®ï¼Œæ˜¯ä¸ªè½¯è¿æ¥ ## æ˜¯å¦é‡å¯çš„æ ‡è®° mark_mosdns_restart=no mark_clash_restart=no ## åœ¨clashå·¥ä½œç›®å½•ä¸‹è¿è¡Œæœ¬è„šæœ¬ cd \u0026#34;$dir_clash_work\u0026#34; ## urlè½¬æ¢ urlencode() { while read -n1 v; do case $v in [a-zA-Z0-9.~_-]) printf \u0026#34;%s\u0026#34; \u0026#34;$v\u0026#34;;; *) printf \u0026#34;%%%02X\u0026#34; \u0026#34;\u0026#39;$v\u0026#34;;; esac done printf \u0026#39;\\n\u0026#39; } ## è®¡ç®—sha256 gen_sha256sum() { local file=\u0026#34;$1\u0026#34; local sha if [[ -f \u0026#34;$file\u0026#34; ]]; then sha=$(sha256sum \u0026#34;$file\u0026#34; | awk \u0026#39;{print $1}\u0026#39;) elif [[ \u0026#34;$file\u0026#34; == \u0026#34;http\u0026#34;* ]]; then sha=$(curl -fsSL \u0026#34;$file\u0026#34; 2\u0026gt;/dev/null | awk \u0026#39;{print $1}\u0026#39;) fi if [[ -n $sha ]]; then echo $sha fi } ## æ›´æ–°geodataå’Œnftablesè§„åˆ™ update_geodata() { local i txt local tmp_geodir=/tmp/geodata local mmdb=country.mmdb if [[ ! -d $tmp_geodir ]]; then mkdir $tmp_geodir fi ## æ›´æ–° country.mmdb echo \u0026#34;å¼€å§‹æ›´æ–° $mmdb ...\u0026#34; if wget -q --progress=bar:dot --show-progress -O \u0026#34;$tmp_geodir/$mmdb\u0026#34; https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/$mmdb; then if [[ $(gen_sha256sum \u0026#34;$mmdb\u0026#34;) != $(gen_sha256sum \u0026#34;$tmp_geodir/$mmdb\u0026#34;) ]]; then cp -f \u0026#34;$tmp_geodir/$mmdb\u0026#34; \u0026#34;$mmdb\u0026#34; echo \u0026#34;æ›´æ–°æ•°æ® $mmdb æˆåŠŸ...\u0026#34; else echo \u0026#34;$mmdb æ— å˜åŒ–ï¼Œä¸æ›´æ–°...\u0026#34; fi else echo \u0026#34;æ›´æ–°æ•°æ® $mmdb å¤±è´¥...\u0026#34; fi ## æ›´æ–° geodata for ((i=0; i\u0026lt;${#geodata[@]}; i++)); do local sha256sum_new=$(gen_sha256sum \u0026#34;${geodata_url[i]}.sha256sum\u0026#34;) echo \u0026#34;å¼€å§‹æ›´æ–° ${geodata[i]} ...\u0026#34; if [[ -n \u0026#34;$sha256sum_new\u0026#34; \u0026amp;\u0026amp; \u0026#34;$sha256sum_new\u0026#34; != $(gen_sha256sum ${geodata[i]}) ]]; then if wget -q --progress=bar:dot --show-progress -O \u0026#34;$tmp_geodir/${geodata[i]}\u0026#34; \u0026#34;${geodata_url[i]}\u0026#34;; then if [[ \u0026#34;$sha256sum_new\u0026#34; == $(gen_sha256sum \u0026#34;$tmp_geodir/${geodata[i]}\u0026#34;) ]]; then cp -f \u0026#34;$tmp_geodir/${geodata[i]}\u0026#34; \u0026#34;${geodata[i]}\u0026#34; echo \u0026#34;æ›´æ–°æ•°æ® ${geodata[i]} æˆåŠŸ...\u0026#34; mark_clash_restart=yes # é‡å¯clash fi else echo \u0026#34;æ›´æ–°æ•°æ® ${geodata[i]} å¤±è´¥...\u0026#34; fi else echo \u0026#34;${geodata[i]} æ— å˜åŒ–ï¼Œä¸æ›´æ–°...\u0026#34; fi done ## è§£åŒ…geodata if [[ $mark_clash_restart == yes ]]; then echo \u0026#34;geo æ•°æ®æœ‰å˜åŒ–ï¼Œå¼€å§‹é‡æ–°ç”Ÿæˆç›¸å…³æ–‡ä»¶...\u0026#34; ## ä¸ºmosdnsé‡æ–°ç”Ÿæˆgeoip_cn.txtï¼Œgeosite_cn.txtï¼Œgeosite_geolocation-!cn.txt echo \u0026#34;å¼€å§‹è§£åŒ… geoip.dat åˆ°ä¸´æ—¶ç›®å½• $tmp_geodir...\u0026#34; v2dat unpack geoip -o \u0026#34;$tmp_geodir\u0026#34; -f cn geoip.dat echo \u0026#34;å¼€å§‹è§£åŒ… geosite.dat åˆ°ä¸´æ—¶ç›®å½• $tmp_geodir...\u0026#34; v2dat unpack geosite -o \u0026#34;$tmp_geodir\u0026#34; -f cn -f \u0026#39;geolocation-!cn\u0026#39; geosite.dat for txt in ${geodata_txt[@]}; do if [[ $(gen_sha256sum \u0026#34;$dir_mosdns_geodata/$txt\u0026#34;) != $(gen_sha256sum \u0026#34;$tmp_geodir/$txt\u0026#34;) ]]; then echo \u0026#34;æ£€æµ‹åˆ° $txt å†…å®¹æœ‰å˜åŒ–ï¼Œä» $tmp_geodir/$txt å¤åˆ¶åˆ° $dir_mosdns_geodata/$txt ...\u0026#34; cp -f \u0026#34;$tmp_geodir/$txt\u0026#34; \u0026#34;$dir_mosdns_geodata/$txt\u0026#34; mark_mosdns_restart=yes else echo \u0026#34;$txt å†…å®¹æ— å˜åŒ–ï¼Œä¸æ›´æ–°...\u0026#34; fi done ## ä¸ºclashé‡æ–°ç”Ÿæˆgeoip4_cn.nft echo \u0026#34;define geoip4_cn = {\u0026#34; \u0026gt; $tmp_geodir/$geoip4_cn cat \u0026#34;$tmp_geodir\u0026#34;/geoip_cn.txt | sed \u0026#39;/:/d\u0026#39; | perl -pe \u0026#34;{s|^| |; s|$|,|}\u0026#34; \u0026gt;\u0026gt; \u0026#34;$tmp_geodir\u0026#34;/$geoip4_cn echo \u0026#34;}\u0026#34; \u0026gt;\u0026gt; \u0026#34;$tmp_geodir\u0026#34;/$geoip4_cn if [[ -n $(grep -oP \u0026#34;(\\d{1,3}\\.){3}\\d{1,3}\u0026#34; \u0026#34;$tmp_geodir\u0026#34;/$geoip4_cn) \u0026amp;\u0026amp; $(gen_sha256sum $geoip4_cn) != $(gen_sha256sum \u0026#34;$tmp_geodir/$geoip4_cn\u0026#34;) ]]; then cp -f \u0026#34;$tmp_geodir\u0026#34;/$geoip4_cn $geoip4_cn echo \u0026#34;æ›´æ–°æ•°æ® $geoip4_cn æˆåŠŸ...\u0026#34; fi else echo \u0026#34;geo æ•°æ®æ— å˜åŒ–ï¼Œæ— éœ€è§£åŒ… ${geodata_txt[@]}ï¼Œæ— éœ€æ›´æ–° $geoip4_cn ...\u0026#34; fi ## ä¸ºclashé‡æ–°ç”Ÿæˆnem_address.nftå’Œneteasemusic.list local domain_nem=\u0026#34;music.163.com,interface.music.163.com,interface3.music.163.com,apm.music.163.com,apm3.music.163.com,clientlog.music.163.com,clientlog3.music.163.com\u0026#34; local nemip=$(wget --timeout=5 -qO- \u0026#34;http://httpdns.n.netease.com/httpdns/v2/d?domain=$domain_nem\u0026#34; | jq -r .data[].ip | grep -v null | jq -r .[] | cidr-merger --range) nemip=$( (cat $nem_address | grep -oP \u0026#34;(\\d{1,3}\\.){3}\\d{1,3}(-(\\d{1,3}\\.){3}\\d{1,3})?\u0026#34;; cat $list_nem | grep -oP \u0026#34;(\\d{1,3}\\.){3}\\d{1,3}/\\d+\u0026#34;; echo \u0026#34;$nemip\u0026#34;) | cidr-merger --range) if [[ -n \u0026#34;$nemip\u0026#34; ]]; then echo \u0026#34;define nem_address = {\u0026#34; \u0026gt; $tmp_geodir/$nem_address echo \u0026#34;$nemip\u0026#34; | perl -pe \u0026#34;{s|^| |; s|$|,|}\u0026#34; \u0026gt;\u0026gt; \u0026#34;$tmp_geodir\u0026#34;/$nem_address echo \u0026#34;}\u0026#34; \u0026gt;\u0026gt; \u0026#34;$tmp_geodir\u0026#34;/$nem_address if [[ -n $(grep -oP \u0026#34;(\\d{1,3}\\.){3}\\d{1,3}\u0026#34; \u0026#34;$tmp_geodir\u0026#34;/$nem_address) \u0026amp;\u0026amp; $(gen_sha256sum $nem_address) != $(gen_sha256sum \u0026#34;$tmp_geodir/$nem_address\u0026#34;) ]]; then cp -f \u0026#34;$tmp_geodir\u0026#34;/$nem_address $nem_address echo \u0026#34;æ›´æ–°æ•°æ® $nem_address æˆåŠŸ...\u0026#34; mark_clash_restart=yes # é‡å¯clash else echo \u0026#34;$nem_address å†…å®¹æ— å˜åŒ–ï¼Œä¸æ›´æ–°...\u0026#34; fi fi cp -f $list_nem \u0026#34;$tmp_geodir/${list_nem##*/}\u0026#34; sed -i \u0026#34;/IP-CIDR/d\u0026#34; \u0026#34;$tmp_geodir/${list_nem##*/}\u0026#34; echo \u0026#34;$nemip\u0026#34; | cidr-merger -s | perl -pe \u0026#34;{s|^|IP-CIDR,|; s|$|,no-resolve|}\u0026#34; \u0026gt;\u0026gt; \u0026#34;$tmp_geodir/${list_nem##*/}\u0026#34; if [[ $(gen_sha256sum \u0026#34;$tmp_geodir/${list_nem##*/}\u0026#34;) != $(gen_sha256sum \u0026#34;$list_nem\u0026#34;) ]]; then cp -f \u0026#34;$tmp_geodir/${list_nem##*/}\u0026#34; $list_nem echo \u0026#34;æ›´æ–°æ•°æ® ${list_nem##*/} æˆåŠŸ...\u0026#34; else echo \u0026#34;${list_nem##*/} å†…å®¹æ— å˜åŒ–ï¼Œä¸æ›´æ–°...\u0026#34; fi } ## æ£€æµ‹proxies:å’Œproxy-groups:ä¹‹é—´çš„è¡Œå·®ï¼Œ$1: æ–‡ä»¶è·¯å¾„ diff_detect() { local yaml=\u0026#34;$1\u0026#34; local line1=$(grep -nP \u0026#34;^proxies:\u0026#34; $yaml | awk -F: \u0026#39;{print $1}\u0026#39;) local line2=$(grep -nP \u0026#34;^proxy-groups:\u0026#34; $yaml | awk -F: \u0026#39;{print $1}\u0026#39;) local diff=$(( $line2 - $line1 )) 2\u0026gt;/dev/null if [[ -n $diff ]]; then echo $diff else echo 0 fi } ## æ›´æ–°è®¢é˜… update_subscribes() { ## æ›´æ–°è®¢é˜… local i sha256sum_old sha256sum_new url config local dir_tmpsubscribes=/tmp/clash if [[ ! -d $dir_tmpsubscribes ]]; then mkdir $dir_tmpsubscribes fi for ((i=0; i\u0026lt;${#subscribes_name[@]}; i++)); do echo \u0026#34;å¼€å§‹æ›´æ–°è®¢é˜… ${subscribes_name[i]} ...\u0026#34; url=$(echo -n \u0026#34;${subscribes_url[i]}|${subconverter_nem}\u0026#34; | urlencode) config=$(echo -n ${subconverter_rule} | urlencode) subscribes_tmpconfig=\u0026#34;$dir_tmpsubscribes/${subscribes_name[i]}\u0026#34; if wget -q -O \u0026#34;$subscribes_tmpconfig\u0026#34; \u0026#34;${subconverter_url}?target=${subconverter_target}\u0026amp;url=${url}\u0026amp;config=${config}\u0026#34;; then sha256sum_old=$(gen_sha256sum \u0026#34;config/${subscribes_name[i]}\u0026#34;) sha256sum_new=$(gen_sha256sum \u0026#34;$subscribes_tmpconfig\u0026#34;) if [[ $(diff_detect \u0026#34;$subscribes_tmpconfig\u0026#34;) -gt 2 \u0026amp;\u0026amp; $sha256sum_old != $sha256sum_new ]]; then if clash -t -d . -f \u0026#34;$subscribes_tmpconfig\u0026#34;; then cp -a \u0026#34;config/${subscribes_name[i]}\u0026#34; \u0026#34;config/${subscribes_name[i]}.$(date +\u0026#39;%s\u0026#39;)\u0026#34; cp -f \u0026#34;$subscribes_tmpconfig\u0026#34; \u0026#34;config/${subscribes_name[i]}\u0026#34; echo \u0026#34;æ›´æ–°è®¢é˜… ${subscribes_name[i]} æˆåŠŸ...\u0026#34; if [[ \u0026#34;config/${subscribes_name[i]}\u0026#34; == \u0026#34;$subscribes_current\u0026#34; ]]; then mark_clash_restart=yes # é‡å¯clash fi else echo \u0026#34;è®¢é˜… ${subscribes_name[i]} æ ¡éªŒå¤±è´¥ï¼Œä¸æ›´æ–°...\u0026#34; fi else echo \u0026#34;è®¢é˜… ${subscribes_name[i]} æ— å˜åŒ–ï¼Œä¸æ›´æ–°...\u0026#34; fi else echo \u0026#34;è®¢é˜… ${subscribes_name[i]} ä¸‹è½½å¤±è´¥...\u0026#34; fi done ## åˆ é™¤è¶…è¿‡30å¤©çš„æ—§è®¢é˜… for yaml in $(ls config/*.yaml.*); do if [[ $(( $(date +%s) - ${yaml##*.} )) -gt 2592000 ]]; then rm -v \u0026#34;$yaml\u0026#34; fi done } ## æ›´æ–°clashçš„XDé¢æ¿ update_xd() { if [[ ! -d ${dir_xd} ]]; then mkdir -p ${dir_xd} fi cd ${dir_xd} echo \u0026#34;å¼€å§‹æ›´æ–° clash é¢æ¿ XD ...\u0026#34; if [[ -n $(ls) \u0026amp;\u0026amp; ! -d .git ]] || [[ -z $(ls) ]]; then rm -rf * .* \u0026amp;\u0026gt;/dev/null git clone -b gh-pages --depth 1 https://github.com/MetaCubeX/metacubexd . elif [[ -n $(ls) \u0026amp;\u0026amp; -d .git ]]; then git fetch git reset origin/gh-pages --hard git pull fi } ## é‡å¯æœåŠ¡ restart_service() { if [[ $mark_clash_restart == yes ]]; then systemctl restart clash.service # ä¹Ÿå¯ä»¥æ”¹æˆé‡æ–°åŠ è½½é…ç½®è€Œéé‡å¯ï¼šcurl -Ss -H \u0026#34;Authorization: Bearer YOUR_CLASH_SECRET\u0026#34; -X PUT -d \u0026#39;{\u0026#34;path\u0026#34;: \u0026#34;/var/lib/clash/config.yaml\u0026#34;}\u0026#39; \u0026#34;http://127.0.0.1:9090/configs?force=true\u0026#34; echo \u0026#34;é‡å¯ clash.service\u0026#34; fi if [[ $mark_mosdns_restart == yes ]]; then systemctl restart mosdns.service echo \u0026#34;é‡å¯ mosdns.service\u0026#34; fi } ## ä¸­æ­¢æ—¶åˆ é™¤ä¸´æ—¶æ–‡ä»¶ finish() { rm -rf /tmp/{clash,geodata} \u0026amp;\u0026gt;/dev/null } ## è°ƒç”¨å’Œå‡½æ•° main() { trap finish EXIT update_geodata update_subscribes update_xd restart_service } main \u0026#34;$@\u0026#34; ä¸ºå…¶å¢åŠ å¯æ‰§è¡Œæƒé™ï¼š\n1 chmod +x /usr/local/bin/update-config.sh ç„¶åè¿è¡Œä¸€ä¸‹ï¼š\n1 update-config.sh å¦‚æœæœ‰æŠ¥é”™ï¼Œè¯·åœ¨æŠ¥é”™å‰è¡Œæ·»åŠ  set +xï¼Œåœ¨åè¡Œæ·»åŠ  set -x åï¼Œå†æ¬¡è¿è¡Œï¼Œæ ¹æ®è¾“å‡ºä¿¡æ¯è‡ªè¡Œæ’æ•…ã€‚è¿™éœ€è¦ä½ æœ‰ä¸€ç‚¹ç‚¹çš„ shell çŸ¥è¯†ã€‚\nå»ºè®®å°† update-config.sh åŠ å…¥å®šæ—¶ä»»åŠ¡ï¼Œè¯·è‡ªè¡Œè°ƒæ•´ä¸‹æ‰§è¡Œæ—¶é—´ï¼š\n1 echo -e \u0026#34;SHELL=/bin/bash\\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\\n19 1 * * * update-config.sh \u0026gt;/dev/null\u0026#34; | crontab - æœ€å è„šæœ¬è¿è¡Œæ²¡é—®é¢˜åï¼Œæ›´æ–°å®Œå…¨éƒ¨æ‰€éœ€æ–‡ä»¶ï¼Œé‚£ä¹ˆå†å›è¿‡å¤´å»æŠŠå‰é¢æ²¡æœ‰å¯åŠ¨çš„æœåŠ¡å…¨éƒ¨å¯åŠ¨èµ·æ¥å§ã€‚è‡³æ­¤ï¼ŒåŸºæœ¬çš„ç§‘å­¦ä¸Šç½‘æœåŠ¡å·²é…ç½®å®Œæ¯•ï¼Œåœ¨ æœ¬ç³»åˆ— æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­ï¼Œå°†ç»§ç»­é…ç½®å…¶ä»–æœåŠ¡ã€‚\nç³»åˆ— ä¸€ã€å­ç½‘åˆ’åˆ†åŠç½‘ç»œæ‹“æ‰‘è®¾è®¡ã€çˆ±å¿«ä¸Šçš„è®¾ç½®\näºŒã€å®‰è£…Debianã€åˆå§‹ç½‘ç»œé…ç½®ã€å¿…è¦è½¯ä»¶å®‰è£…\nä¸‰ã€AdGuardHomeã€mosdnsã€clashåœ¨DNSçš„å…³ç³»ï¼Œä»¥åŠAdGuardHomeã€mosdnsçš„å®‰è£…å’Œé…ç½®\nå››ã€clashé€æ˜ä»£ç†(Tproxy)çš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„IPè§„åˆ™å’Œnftablesè§„åˆ™\näº”ã€UnblockNeteaseMusicçš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„çš„nftablesè§„åˆ™ã€å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨\nå…­ã€subconverterçš„å®‰è£…å’Œé…ç½®\nä¸ƒã€é…ç½®nginxä¸ºæ–‡ä»¶æœåŠ¡å™¨ã€è‡ªåŠ¨æ›´æ–°clashè®¢é˜…ã€è‡ªåŠ¨ç”Ÿæˆéœ€è¦çš„æ–‡ä»¶\nå…«ã€é…ç½®æ—è·¯ç”±çš„SNMPDæœåŠ¡ã€é…ç½®ä¸»è·¯ç”±çš„è·¨ä¸‰å±‚åº”ç”¨\nä¹ã€ç›‘æµ‹é™Œç”Ÿè®¾å¤‡\nåã€å¿«é€Ÿç®€å•çš„å®‰è£…å’Œæ›´æ–°è½¯ä»¶åŒ…\nåä¸€ã€DNSã€ç½‘ç»œæ•…éšœç­‰çš„æ€»ç»“ï¼Œä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹\n","date":"2023-10-22T03:00:00+08:00","image":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E4%B8%83/cover_hu6a5bd56cca743251e7bcb3ac30b37337_44366_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E4%B8%83/","title":"æˆ‘çš„å®¶åº­ç½‘ç»œè®¾è®¡æ€è·¯ï¼Œå¼€å¯debiançš„æ—è·¯ç”±ä¹‹è·¯ï¼ˆä¸ƒï¼‰"},{"content":"å‰è¨€ clash éœ€è¦ç”¨åˆ°è®¢é˜…è½¬æ¢ï¼Œç›´æ¥ç”¨ç½‘ä¸Šçš„æœåŠ¡è‚¯å®šä¸å¤ªå®‰å…¨ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿˜éœ€è¦è‡ªåŠ¨åœ¨é…ç½®æ–‡ä»¶ä¸­æ’å…¥æœ¬åœ°è‡ªå»ºçš„ UnblockNeteaseMusic ä»£ç†æœåŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡å–è‡ªå»ºæ ¼å¼è½¬æ¢æœåŠ¡ã€‚\nä¸‹è½½ä¸å®‰è£… æˆ‘é»˜è®¤ä½ å·²ç»æŒ‰ç…§ å‰æ–‡ï¼ˆäºŒï¼‰ å®‰è£…å¥½äº†å¿…è¦çš„è½¯ä»¶äº†ã€‚ä»¥ä¸‹ä¸ºrootç”¨æˆ·è¿è¡Œçš„å‘½ä»¤ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ## æ£€æŸ¥æœ€æ–°ç¨³å®šç‰ˆçš„ç‰ˆæœ¬å·ï¼Œå¦‚æœè·å–ä¸åˆ°è¯·æ£€æŸ¥ç½‘ç»œ remote_ver=$(curl -sS https://api.github.com/repos/tindy2013/subconverter/releases/latest | jq -r .tag_name | sed \u0026#39;s|v||\u0026#39; | grep -v \u0026#34;null\u0026#34;); echo $remote_ver ## ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆï¼ˆå‰ä¸€å¥æœ‰è¾“å‡ºè¿™ä¸€å¥æ‰èƒ½æ­£å¸¸æ‰§è¡Œï¼‰ mkdir /tmp/subconverter cd /tmp/subconverter wget -q --progress=bar:dot --show-progress -O \u0026#34;subconverter_linux64.tar.gz\u0026#34; \u0026#34;https://github.com/tindy2013/subconverter/releases/download/v${remote_ver}/subconverter_linux64.tar.gz\u0026#34; ## è§£å‹ tar --no-same-owner -xf \u0026#34;subconverter_linux64.tar.gz\u0026#34; --strip-components 1 --directory=. ## å®‰è£… mkdir -p /var/lib/subconverter install -ps subconverter /usr/local/bin/subconverter rm -rf subconverter subconverter_linux64.tar.gz cp -afr * /var/lib/subconverter/ åˆ›å»ºæœåŠ¡ subconverter.service åˆ›å»ºæ–‡ä»¶ /etc/systemd/system/subconverter.serviceï¼Œå†…å®¹å¦‚ä¸‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 [Unit] Description = Utility to convert between various subscription format. After = network.target [Service] Environment = PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin Type = simple Restart = always WorkingDirectory = /var/lib/subconverter ExecStart = subconverter [Install] WantedBy = multi-user.target å¦‚æœä¸æƒ³ä»¥rootç”¨æˆ·è¿è¡Œ subconverter ï¼Œå¯ä»¥è‡ªè¡Œåˆ›å»ºç”¨æˆ· subconverter å’Œç”¨æˆ·ç»„ subconverter ï¼Œç„¶ååœ¨ /etc/systemd/system/subconverter.service çš„ [Service] å•å…ƒä¸‹å¢åŠ ä¸‹é¢ä¸¤è¡Œï¼ŒåŒæ—¶ä¿®æ”¹ /var/lib/subconverter åŠå…¶å­æ–‡ä»¶ä¸ºè¯¥æ™®é€šç”¨æˆ·æ‰€æœ‰ã€‚ï¼ˆåç»­çš„è„šæœ¬éƒ½æ˜¯ä»¥rootç”¨æˆ·ä¸ºè¿è¡Œç”¨æˆ·è¿›è¡Œçš„ï¼Œå¦‚æœè¦æŠŠ subconverter æœåŠ¡è°ƒæ•´ä¸ºæ™®é€šç”¨æˆ·è¿è¡Œï¼Œè¯·è‡ªè¡Œä¿®æ”¹è„šæœ¬ï¼‰ã€‚\n1 2 User = subconverter Group = subconverter subconverterçš„é…ç½®æ–‡ä»¶ å¦‚æœæƒ³è¦è‡ªå®šä¹‰ï¼Œå¯ä»¥å°† /var/lib/subconverter/pref.example.toml å¤åˆ¶ä¸€ä»½ä¸º /var/lib/subconverter/pref.tomlï¼Œç„¶åç¼–è¾‘å¤åˆ¶åçš„æ–‡ä»¶å³å¯ï¼Œå…·ä½“å¯å‚è€ƒ å®˜æ–¹READMEã€‚\nå¯ç”¨æœåŠ¡ å®Œå…¨é…ç½®å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® /etc/systemd/system/subconverter.service ä¸ºå¼€å¯è‡ªåŠ¨å¯åŠ¨ï¼Œå¹¶ç«‹å³å¯åŠ¨èµ·æ¥ã€‚\n1 systemctl enable --now subconverter.service åç»­å¦‚æƒ³æŸ¥çœ‹æ—¥å¿—ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨Debianè‡ªå¸¦çš„å·¥å…·æ¥æŸ¥çœ‹ï¼š\n1 journalctl -efu subconverter.service å¦‚æœæƒ³è¦é‡å¯ï¼š\n1 systemctl restart subconverter.service ç³»åˆ— ä¸€ã€å­ç½‘åˆ’åˆ†åŠç½‘ç»œæ‹“æ‰‘è®¾è®¡ã€çˆ±å¿«ä¸Šçš„è®¾ç½®\näºŒã€å®‰è£…Debianã€åˆå§‹ç½‘ç»œé…ç½®ã€å¿…è¦è½¯ä»¶å®‰è£…\nä¸‰ã€AdGuardHomeã€mosdnsã€clashåœ¨DNSçš„å…³ç³»ï¼Œä»¥åŠAdGuardHomeã€mosdnsçš„å®‰è£…å’Œé…ç½®\nå››ã€clashé€æ˜ä»£ç†(Tproxy)çš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„IPè§„åˆ™å’Œnftablesè§„åˆ™\näº”ã€UnblockNeteaseMusicçš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„çš„nftablesè§„åˆ™ã€å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨\nå…­ã€subconverterçš„å®‰è£…å’Œé…ç½®\nä¸ƒã€é…ç½®nginxä¸ºæ–‡ä»¶æœåŠ¡å™¨ã€è‡ªåŠ¨æ›´æ–°clashè®¢é˜…ã€è‡ªåŠ¨ç”Ÿæˆéœ€è¦çš„æ–‡ä»¶\nå…«ã€é…ç½®æ—è·¯ç”±çš„SNMPDæœåŠ¡ã€é…ç½®ä¸»è·¯ç”±çš„è·¨ä¸‰å±‚åº”ç”¨\nä¹ã€ç›‘æµ‹é™Œç”Ÿè®¾å¤‡\nåã€å¿«é€Ÿç®€å•çš„å®‰è£…å’Œæ›´æ–°è½¯ä»¶åŒ…\nåä¸€ã€DNSã€ç½‘ç»œæ•…éšœç­‰çš„æ€»ç»“ï¼Œä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹\n","date":"2023-10-22T02:00:00+08:00","image":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E5%85%AD/cover_hu6a5bd56cca743251e7bcb3ac30b37337_44366_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E5%85%AD/","title":"æˆ‘çš„å®¶åº­ç½‘ç»œè®¾è®¡æ€è·¯ï¼Œå¼€å¯debiançš„æ—è·¯ç”±ä¹‹è·¯ï¼ˆå…­ï¼‰"},{"content":"å‰è¨€ æˆ‘ä»¬ç»§ç»­è¶çƒ­æ‰“é“ï¼Œå°†UnblockNeteaseMusicä¹Ÿä¸€èµ·éƒ¨ç½²äº†ï¼Œå› ä¸ºå®ƒä¹Ÿè¦ç”¨åˆ° nftables æ¥å®ç°ã€‚\nä¸‹è½½ä¸å®‰è£… unblockneteasemusic è¿™ä¸ªåç§°å¤ªé•¿äº†ï¼Œæˆ‘ä»¬æŠŠå®ƒæ›´åä¸º unblocknemã€‚æˆ‘é»˜è®¤ä½ å·²ç»æŒ‰ç…§ å‰æ–‡ï¼ˆäºŒï¼‰ å®‰è£…å¥½äº†å¿…è¦çš„è½¯ä»¶äº†ã€‚ä»¥ä¸‹ä¸ºrootç”¨æˆ·è¿è¡Œçš„å‘½ä»¤ã€‚\n1 2 3 4 5 6 7 8 9 ## æ£€æŸ¥æœ€æ–°ç¨³å®šç‰ˆçš„ç‰ˆæœ¬å·ï¼Œå¦‚æœè·å–ä¸åˆ°è¯·æ£€æŸ¥ç½‘ç»œ remote_ver=$(curl -sS https://api.github.com/repos/UnblockNeteaseMusic/server/releases/latest | jq -r .tag_name | sed \u0026#39;s|v||\u0026#39; | grep -v \u0026#34;null\u0026#34;); echo $remote_ver ## ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆï¼ˆå‰ä¸€å¥æœ‰è¾“å‡ºè¿™ä¸€å¥æ‰èƒ½æ­£å¸¸æ‰§è¡Œï¼‰ cd /tmp wget -q --progress=bar:dot --show-progress -O \u0026#34;unblockneteasemusic-linux-x64\u0026#34; \u0026#34;https://github.com/UnblockNeteaseMusic/server/releases/download/v${remote_ver}/unblockneteasemusic-linux-x64\u0026#34; ## å®‰è£… install -p unblockneteasemusic-linux-x64 /usr/local/bin/unblocknem åˆ›å»ºæœåŠ¡ unblocknem.service åˆ›å»ºå·¥ä½œç›®å½•/var/lib/unblocknemã€‚\n1 mkdir -p /var/lib/unblocknem åˆ›å»ºæ–‡ä»¶ /etc/systemd/system/unblocknem.serviceï¼Œå†…å®¹å¦‚ä¸‹ã€‚è¿™æ—¶ clash çš„é…ç½®æ–‡ä»¶ä¸º /var/lib/unblocknem/unblocknem.envã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 [Unit] Description = Revive unavailable songs for Netease Cloud Music (Refactored \u0026amp; Enhanced version). Wants = network-online.target clash.service After = network-online.target [Service] Type = simple Restart = always EnvironmentFile = -/var/lib/unblocknem/unblocknem.env WorkingDirectory = /var/lib/unblocknem ExecStart = /usr/local/bin/unblocknem RestartSec = 10 StartLimitInterval = 0 [Install] WantedBy = multi-user.target å¦‚æœä½ æ¯”è¾ƒè®²ç©¶Linuxå“²å­¦ï¼Œå¯ä»¥æŠŠ EnvironmentFile æ”¹æˆä¸‹é¢è¿™æ ·ï¼Œè¿™æ—¶ unblocknem çš„é…ç½®æ–‡ä»¶ä¸º /etc/default/unblocknemã€‚\n1 EnvironmentFile = -/etc/default/unblocknem å¦‚æœä¸æƒ³ä»¥rootç”¨æˆ·è¿è¡Œ unblocknem ï¼Œå¯ä»¥è‡ªè¡Œåˆ›å»ºç”¨æˆ· unblocknem å’Œç”¨æˆ·ç»„ unblocknem ï¼Œç„¶ååœ¨ /etc/systemd/system/unblocknem.service çš„ [Service] å•å…ƒä¸‹å¢åŠ ä¸‹é¢ä¸¤è¡Œï¼ŒåŒæ—¶ä¿®æ”¹ /var/lib/unblocknem åŠå…¶å­æ–‡ä»¶ä¸ºè¯¥æ™®é€šç”¨æˆ·æ‰€æœ‰ã€‚ï¼ˆåç»­çš„è„šæœ¬éƒ½æ˜¯ä»¥rootç”¨æˆ·ä¸ºè¿è¡Œç”¨æˆ·è¿›è¡Œçš„ï¼Œå¦‚æœè¦æŠŠ unblocknem æœåŠ¡è°ƒæ•´ä¸ºæ™®é€šç”¨æˆ·è¿è¡Œï¼Œè¯·è‡ªè¡Œä¿®æ”¹è„šæœ¬ï¼‰ã€‚\n1 2 User = unblocknem Group = unblocknem å®‰è£…ä¾èµ– åœ¨ å‰æ–‡ï¼ˆäºŒï¼‰ æˆ‘ä»¬å·²ç»å®‰è£…äº†UnblockNeteaseMusicçš„ä¸€ä¸ªä¾èµ–é¡¹ï¼š yt-dlpï¼Œåœ¨å®é™…è¿è¡Œä¸­ï¼Œéƒ¨åˆ†æƒ…å†µä¸‹è¿˜éœ€è¦å¦å¤–ä¸€ä¸ªä¾èµ–ï¼šphantomjsã€‚è¿™ä¸ªè½¯ä»¶å·²ç»å¤šå¹´æ²¡æœ‰æ›´æ–°è¿‡äº†ã€‚\n1 2 3 4 cd /tmp wget -q --progress=bar:dot --show-progress -O phantomjs-2.1.1-linux-x86_64.tar.bz2 https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.1.1-linux-x86_64.tar.bz2 tar --no-same-owner -xf phantomjs-2.1.1-linux-x86_64.tar.bz2 # éœ€è¦å®‰è£…bzip2æ‰èƒ½è§£å‹ install -p phantomjs-2.1.1-linux-x86_64/bin/phantomjs /usr/local/bin/phantomjs unblocknem çš„é…ç½®æ–‡ä»¶ æ²¡æœ‰é…ç½®æ–‡ä»¶ï¼Œ unblocknem ä¹Ÿæ˜¯å¯ä»¥ä»¥é»˜è®¤é…ç½®å¯åŠ¨çš„ã€‚å¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥æ–°å»º /var/lib/unblocknem/unblocknem.env æˆ– /etc/default/unblocknemï¼Œå†…å®¹å¦‚ä¸‹ï¼Œè¯·æ³¨æ„æŒ‰ç…§æ³¨é‡Šä¿®æ”¹ã€‚å…¨éƒ¨ç¯å¢ƒå˜é‡è¯¦è§ å®˜æ–¹READMEã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 # å…¨éƒ¨ç¯å¢ƒå˜é‡è¯¦è§ï¼šhttps://github.com/UnblockNeteaseMusic/server # æ¿€æ´»æ— æŸéŸ³è´¨è·å– ENABLE_FLAC=true # æ¿€æ´»æœ¬åœ°é»‘èƒ¶ VIPï¼Œå¯é€‰å€¼ï¼štrueï¼ˆç­‰åŒäº CVIPï¼‰ã€cvip å’Œ svip ENABLE_LOCAL_VIP=svip # ä»…å¯¹è¿™äº› UID æ¿€æ´»æœ¬åœ°é»‘èƒ¶ VIPï¼Œé»˜è®¤ä¸ºå¯¹å…¨éƒ¨ç”¨æˆ·ç”Ÿæ•ˆ # LOCAL_VIP_UID=123456789,1234,123456 # æ¿€æ´»æ•…éšœçš„ Netease HTTPDNS æŸ¥è¯¢ï¼ˆä¸å»ºè®®ï¼‰ # ENABLE_HTTPDNS=true # å±è”½åº”ç”¨å†…éƒ¨åˆ†å¹¿å‘Š BLOCK_ADS=true # ç¦ç”¨æ›´æ–°æ£€æµ‹ DISABLE_UPGRADE_CHECK=true # æ¿€æ´»å¼€å‘æ¨¡å¼ã€‚éœ€è¦è‡ªå·±ç”¨ yarn å®‰è£…ä¾èµ– (dependencies) # DEVELOPMENT=true # ä¸¥æ ¼æŒ‰ç…§é…ç½®éŸ³æºçš„é¡ºåºè¿›è¡ŒæŸ¥è¯¢ # FOLLOW_SOURCE_ORDER=true # è¾“å‡ºæœºå™¨å¯è¯»çš„ JSON è®°å½•æ ¼å¼ # JSON_LOG=true # åœç”¨ cache # NO_CACHE=true # å…è®¸çš„æœ€ä½æºéŸ³è´¨ï¼Œå°äºè¯¥å€¼å°†è¢«æ›¿æ¢ # MIN_BR=320000 # é€‰æ‹©æ‰€æœ‰éŸ³æºä¸­çš„æœ€é«˜ç ç‡æ›¿æ¢éŸ³é¢‘ SELECT_MAX_BR=true # æ—¥å¿—è¾“å‡ºç­‰çº§ã€‚è¯·è§ã€ˆæ—¥å¿—ç­‰çº§ã€‰éƒ¨åˆ† # LOG_LEVEL=debug # ä» Pino ç«¯è®¾ç½®æ—¥å¿—è¾“å‡ºçš„æ–‡ä»¶ä½ç½®ã€‚ä¹Ÿå¯ä»¥ç”¨ *sh çš„è¾“å‡ºé‡å¯¼å‘åŠŸèƒ½ (node app.js \u0026gt;\u0026gt; app.log) ä»£æ›¿ # LOG_FILE=app.log # JOOX éŸ³æºçš„ wmid å’Œ session_key cookie # JOOX_COOKIE=\u0026#34;wmid=\u0026lt;your_wmid\u0026gt;; session_key=\u0026lt;your_session_key\u0026gt;\u0026#34; # å’ªå’•éŸ³æºçš„ aversionid cookie # MIGU_COOKIE=\u0026#34;\u0026lt;your_aversionid\u0026gt;\u0026#34; # QQ éŸ³æºçš„ uin å’Œ qm_keyst cookie # QQ_COOKIE=\u0026#34;uin=123456789; qm_keyst=Q_H_L_6hTegBdoCzFj6bcUUpuhkOP11234ChsOkfKiOdvcIOFKiQQf4oGjykQ\u0026#34; # Youtube éŸ³æºçš„ Data API v3 Key # YOUTUBE_KEY=\u0026#34;Adjeuskn12xdEvQfLHnvfC12386QAApcOt5Kh1g\u0026#34; # è‡ªå®šä¹‰è¯ä¹¦æ–‡ä»¶ SIGN_CERT=\u0026#34;/var/lib/unblocknem/server.crt\u0026#34; # è‡ªå®šä¹‰å¯†é’¥æ–‡ä»¶ SIGN_KEY=\u0026#34;/var/lib/unblocknem/server.key\u0026#34; # åœ¨å…¶ä»–éŸ³æºæœç´¢æ­Œæ›²æ—¶æºå¸¦ä¸“è¾‘åç§°ï¼ˆé»˜è®¤æœç´¢æ¡ä»¶ æ­Œæ›²å - æ­Œæ‰‹ï¼Œå¯ç”¨åæœç´¢æ¡ä»¶ æ­Œæ›²å - æ­Œæ‰‹ ä¸“è¾‘å # SEARCH_ALBUM=true ç”Ÿæˆè‡ªå·±çš„è¯ä¹¦ 1 2 3 cd /var/lib/unblocknem wget https://raw.githubusercontent.com/UnblockNeteaseMusic/server/enhanced/generate-cert.sh env TYPE=\u0026#34;RSA\u0026#34; ISSUENAME=\u0026#34;Your Name\u0026#34; bash generate-cert.sh è„šæœ¬ä¼šåœ¨ /var/lib/unblocknem ç›®å½•ä¸‹ç”Ÿæˆè¿™äº›æ–‡ä»¶ã€‚å¦‚æœä½ ä¸ä»¥rootç”¨æˆ·æ¥å¯åŠ¨ unblocknemï¼Œåˆ™è¯·æ³¨æ„ä¿®æ”¹å®ƒä»¬çš„æ‰€æœ‰è€…ã€‚\n1 2 3 4 5 6 7 /var/lib/unblocknem â”œâ”€â”€ ca.crt â”œâ”€â”€ ca.key â”œâ”€â”€ ca.srl â”œâ”€â”€ server.crt â”œâ”€â”€ server.csr â””â”€â”€ server.key è°ƒæ•´ nftables è§„åˆ™ åœ¨ å‰æ–‡ï¼ˆå››ï¼‰ ä¸­æˆ‘ä»¬ä¸º clash åˆ›å»ºäº†ä¸€äº› nftables è§„åˆ™ï¼Œç°åœ¨æˆ‘ä»¬å¤šäº† unblocknemï¼Œå®ƒä¹Ÿéœ€è¦ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è°ƒæ•´ä¸€ä¸‹ å‰æ–‡ï¼ˆå››ï¼‰ ä¸­çš„ /usr/local/bin/mynftables.nftï¼Œè°ƒæ•´ä¸ºä¸‹é¢è¿™ä¸ªæ ·å­ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 #!/usr/sbin/nft -f ## æ¸…ç©ºæ—§è§„åˆ™ flush ruleset ## åªå¤„ç†æŒ‡å®šç½‘å¡çš„æµé‡ï¼Œè¦å’Œipè§„åˆ™ä¸­çš„æ¥å£æ“æŒä¸€è‡´ define interface = ens18 ## clashçš„é€æ˜ä»£ç†ç«¯å£ define tproxy_port = 7895 ## clashæ‰“çš„æ ‡è®°ï¼ˆrouting-markï¼‰ define clash_mark = 666 ## å¸¸è§„æµé‡æ ‡è®°ï¼Œip ruleä¸­åŠ çš„æ ‡è®°ï¼Œè¦å’Œipè§„åˆ™ä¸­ä¿æŒä¸€è‡´ï¼Œå¯¹åº” \u0026#34;ip rule add fwmark 1 lookup 100\u0026#34; ä¸­çš„ \u0026#34;1\u0026#34; define default_mark = 1 ## æœ¬æœºè¿è¡Œäº†æœåŠ¡å¹¶ä¸”éœ€è¦åœ¨å…¬ç½‘ä¸Šè®¿é—®çš„tcpç«¯å£ï¼ˆæœ¬æœºå¼€æ”¾åœ¨å…¬ç½‘ä¸Šçš„ç«¯å£ï¼‰ï¼Œä»…æœ¬åœ°å±€åŸŸç½‘è®¿é—®çš„æœåŠ¡ç«¯å£å¯ä¸ç”¨åœ¨æ­¤å˜é‡ä¸­ï¼Œä»¥åŠè§’é€—å·åˆ†éš” define local_tcp_port = { 2222, # sshï¼ŒæŒ‰éœ€è®¾ç½® 8080-8088 # nginx webuiï¼ŒæŒ‰éœ€è®¾ç½® } ## è¦ç»•è¿‡çš„å±€åŸŸç½‘å†…tcpæµé‡ç»ç”±æœ¬æœºè®¿é—®çš„ç›®æ ‡ç«¯å£ï¼Œä¹Ÿå°±æ˜¯å…è®¸å±€åŸŸç½‘å†…å…¶ä»–ä¸»æœºä¸»åŠ¨è®¾ç½®DNSæœåŠ¡å™¨ä¸ºå…¶ä»–æœåŠ¡å™¨ï¼Œè€Œéæ—è·¯ç”± define lan_2_dport_tcp = { 53 # dnsæŸ¥è¯¢ } ## è¦ç»•è¿‡çš„å±€åŸŸç½‘å†…udpæµé‡ç»ç”±æœ¬æœºè®¿é—®çš„ç›®æ ‡ç«¯å£ï¼Œä¹Ÿå°±æ˜¯å…è®¸å±€åŸŸç½‘å†…å…¶ä»–ä¸»æœºä¸»åŠ¨è®¾ç½®DNSæœåŠ¡å™¨ä¸ºå…¶ä»–æœåŠ¡å™¨ï¼Œè€Œéæ—è·¯ç”±ï¼›å¦å¤–ä¹Ÿå…è®¸å±€åŸŸç½‘å†…å…¶ä»–ä¸»æœºè®¿é—®è¿œç¨‹çš„NTPæœåŠ¡å™¨ define lan_2_dport_udp = { 53, # dnsæŸ¥è¯¢ 123 # ntpç«¯å£ } ## ä¿ç•™ipåœ°å€ define private_address = { 127.0.0.0/8, 100.64.0.0/10, 169.254.0.0/16, 224.0.0.0/4, 240.0.0.0/4, 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 } ## å¤§é™†ipåœ°å€ include \u0026#34;/var/lib/clash/geoip4_cn.nft\u0026#34; ## ç½‘æ˜“äº‘éŸ³ä¹ipåœ°å€ include \u0026#34;/var/lib/clash/nem_address.nft\u0026#34; table ip clash { ## ä¿ç•™ipv4é›†åˆ set private_address_set { type ipv4_addr flags interval elements = $private_address } ## ç½‘æ˜“äº‘éŸ³ä¹ipv4é›†åˆ set nem_address_set { type ipv4_addr flags interval elements = $nem_address } ## å¤§é™†ipv4é›†åˆ set geoip4_cn_set { type ipv4_addr flags interval elements = $geoip4_cn } ## preroutingé“¾ chain prerouting { type filter hook prerouting priority filter; policy accept; ip protocol { tcp, udp } socket transparent 1 meta mark set $default_mark accept # ç»•è¿‡å·²ç»å»ºç«‹çš„è¿æ¥ meta mark $default_mark goto clash_tproxy # å·²ç»æ‰“ä¸Šdefault_markæ ‡è®°çš„å±äºæœ¬æœºæµé‡è½¬è¿‡æ¥çš„ï¼Œç›´æ¥è¿›å…¥é€æ˜ä»£ç† fib daddr type { local, broadcast, anycast, multicast } accept # ç»•è¿‡æœ¬åœ°ã€å•æ’­ã€ç»„æ’­ã€å¤šæ’­åœ°å€ tcp dport $lan_2_dport_tcp accept # ç»•è¿‡ç»ç”±æœ¬æœºåˆ°ç›®æ ‡ç«¯å£çš„tcpæµé‡ udp dport $lan_2_dport_udp accept # ç»•è¿‡ç»ç”±æœ¬åœ°åˆ°ç›®æ ‡ç«¯å£çš„udpæµé‡ ip daddr @private_address_set accept # ç»•è¿‡ç›®æ ‡åœ°å€ä¸ºä¿ç•™ipçš„åœ°å€ ip daddr @nem_address_set goto clash_tproxy # å°†ç½‘æ˜“äº‘éŸ³ä¹çš„æµé‡è½¬å‘åˆ°é€æ˜ä»£ç† ip daddr @geoip4_cn_set accept # ç»•è¿‡ç›®æ ‡åœ°å€ä¸ºå¤§é™†ipçš„åœ°å€ # ip protocol udp accept # ç»•è¿‡å…¨éƒ¨udpæµé‡ï¼ˆudpä¸è¿›è¡Œé€æ˜ä»£ç†ï¼‰ goto clash_tproxy # å…¶ä»–æµé‡é€æ˜ä»£ç†åˆ°clash } ## é€æ˜ä»£ç† chain clash_tproxy { ip protocol { tcp, udp } tproxy to :$tproxy_port meta mark set $default_mark } ## outputé“¾ chain output { type route hook output priority filter; policy accept; oifname != $interface accept # ç»•è¿‡æœ¬æœºå†…éƒ¨é€šä¿¡çš„æµé‡ï¼ˆæ¥å£loï¼‰ meta mark $clash_mark accept # ç»•è¿‡æœ¬æœºclashå‘å‡ºçš„æµé‡ fib daddr type { local, broadcast, anycast, multicast } accept # ç»•è¿‡æœ¬åœ°ã€å•æ’­ã€ç»„æ’­ã€å¤šæ’­åœ°å€ udp dport { 53, 123 } accept # ç»•è¿‡æœ¬æœºdnsæŸ¥è¯¢ã€NTPæµé‡ tcp sport $local_tcp_port accept # ç»•è¿‡æœ¬åœ°è¿è¡Œäº†æœåŠ¡çš„tcpç«¯å£ï¼Œå¦‚æœå¹¶ä¸éœ€è¦ä»å…¬ç½‘è®¿é—®è¿™äº›ç«¯å£ï¼Œå¯ä»¥æ³¨é‡Šæ‰æœ¬è¡Œ ip daddr @private_address_set accept # ç»•è¿‡ç›®æ ‡åœ°å€ä¸ºä¿ç•™ipçš„åœ°å€ ip daddr @geoip4_cn_set accept # ç»•è¿‡ç›®æ ‡åœ°å€ä¸ºå¤§é™†ipçš„åœ°å€ ip protocol { tcp, udp } meta mark set $default_mark # å…¶ä»–æµé‡é‡è·¯ç”±åˆ°prerouting } } æ³¨æ„åˆ°æˆ‘ä»¬åœ¨ç¬¬51è¡Œå¤šå¼•ç”¨äº†ä¸€ä¸ªæ–‡ä»¶ /var/lib/clash/nem_address.nft ï¼ˆå¯å…ˆä¸‹è½½è¿™ä¸ªå¹¶éæœ€æ–°çš„æ–‡ä»¶åˆ°æŒ‡å®šä½ç½®æ¥å°†å°±ä¸€ä¸‹ï¼šnem_address.nftï¼Œæˆ‘ä»¬å°†åœ¨ æœ¬ç³»åˆ—ç¬¬ï¼ˆä¸ƒï¼‰ç¯‡ ç”¨å®šæ—¶ä»»åŠ¡æ¥è‡ªåŠ¨æ›´æ–°è¿™ä¸ªæ–‡ä»¶ï¼‰ï¼Œåœ¨ç¬¬63-67è¡Œå¤šå½¢æˆäº†ä¸€ä¸ªé›†åˆ nem_address_setï¼Œåœ¨ç¬¬85è¡Œæ’å…¥äº†ä¸€è¡Œè§„åˆ™ ip daddr @nem_address_set goto clash_tproxyï¼Œè¿™æ¡è§„åˆ™æ’å…¥åœ¨ ip daddr @geoip4_cn_set accept ä¹‹å‰ï¼Œè¡¨ç¤ºè™½ç„¶ç½‘æ˜“äº‘éŸ³ä¹IPæ˜¯ä¸­å›½å¤§é™†IPï¼Œä½†è¦åœ¨ç›´æ¥æ¥æ”¶å‰è½¬åˆ°é€æ˜ä»£ç†å¹¶åœæ­¢åç»­è§„åˆ™ã€‚ç°åœ¨çš„ prerouting é“¾å†…å®¹æœ‰ç‚¹å¤šï¼Œå…¶å®å¯ä»¥ä¸€æ‹†ä¸ºä¸‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 ## preroutingé“¾ chain prerouting { type filter hook prerouting priority filter; policy accept; fib daddr type { local, broadcast, anycast, multicast } accept # ç»•è¿‡æœ¬åœ°ã€å•æ’­ã€ç»„æ’­ã€å¤šæ’­åœ°å€ tcp dport $lan_2_dport_tcp accept # ç»•è¿‡ç»ç”±æœ¬æœºåˆ°ç›®æ ‡ç«¯å£çš„tcpæµé‡ udp dport $lan_2_dport_udp accept # ç»•è¿‡ç»ç”±æœ¬åœ°åˆ°ç›®æ ‡ç«¯å£çš„udpæµé‡ ip daddr @private_address_set accept # ç»•è¿‡ç›®æ ‡åœ°å€ä¸ºä¿ç•™ipçš„åœ°å€ ip daddr @geoip4_cn_set accept # ç»•è¿‡ç›®æ ‡åœ°å€ä¸ºå¤§é™†ipçš„åœ°å€ # ip protocol udp accept # ç»•è¿‡å…¨éƒ¨udpæµé‡ï¼ˆudpä¸è¿›è¡Œé€æ˜ä»£ç†ï¼‰ goto clash_tproxy # å…¶ä»–æµé‡é€æ˜ä»£ç†åˆ°clash } ## preroutingé“¾ç»•è¿‡å·²ç»å»ºç«‹çš„è¿æ¥ï¼Œå·²ç»æ‰“ä¸Šdefault_markæ ‡è®°çš„å±äºæœ¬æœºæµé‡è½¬è¿‡æ¥çš„ï¼Œç›´æ¥è¿›å…¥é€æ˜ä»£ç† chain divert { type filter hook prerouting priority mangle; policy accept; ip protocol { tcp, udp } socket transparent 1 meta mark set $default_mark accept meta mark $default_mark goto clash_tproxy } ## å±€åŸŸç½‘ä¸­è®¿é—®ç½‘æ˜“äº‘éŸ³ä¹çš„æµé‡ï¼Œç¬¬ä¸€æ¬¡å…¨éƒ¨è¿›è¡Œé€æ˜ä»£ç†ï¼Œä¼˜å…ˆçº§éœ€è¦æ¯”ç»•è¿‡å¤§é™†ipå…ˆæ‰§è¡Œï¼ˆmangleä¸º-150ï¼Œfilterä¸º0ï¼‰ chain neteasemusic { type filter hook prerouting priority dstnat; policy accept; ip daddr @nem_address_set goto clash_tproxy } ä¸€æ‹†ä¸ºä¸‰åï¼Œæ–°çš„ divert é“¾çš„ä¼˜å…ˆçº§ä¸º mangle ï¼ˆ-150ï¼‰ï¼Œæ–°çš„neteasemusic é“¾çš„ä¼˜å…ˆçº§ä¸º dstnat (-100)ï¼Œè€Œæ–°çš„ prerouting é“¾åˆ™ä»æ˜¯ filter ï¼ˆ0ï¼‰ï¼Œæ•°å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œæ‰€ä»¥ ip daddr @nem_address_set goto clash_tproxy è¿™æ¡è§„åˆ™ä»ç„¶æ—©äº ip daddr @geoip4_cn_set accept æ‰§è¡Œã€‚è¿™æ ·ä¹Ÿå¯ä»¥è®©ç½‘æ˜“äº‘éŸ³ä¹IPåœ¨è¢«ç›´æ¥æ¥æ”¶å‰å°±è½¬åˆ°é€æ˜ä»£ç†å»ã€‚\nunblocknem å·¥ä½œåœ¨åº”ç”¨å±‚ï¼Œclash è½¬ç»™å®ƒåï¼Œå®ƒå‡ºæ¥çš„æµé‡ä¼šç»ç”± output é“¾ä¸­çš„ ip daddr @geoip4_cn_set accept ç›´æ¥å‡ºå»ï¼Œä¸ä¼šå½¢æˆç¯è·¯ï¼ˆoutput é“¾å¹¶æ²¡æœ‰å†åŠ«æŒè¿™éƒ¨åˆ†æµé‡ï¼‰ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ä¸Šè¿°è§„åˆ™åªèƒ½ä»£ç†å±€åŸŸç½‘ä¸­é™¤æ—è·¯ç”±ä»¥å¤–å…¶ä»–è®¾å¤‡ï¼ˆä»¥æ—è·¯ç”±ä¸ºç½‘å…³çš„ï¼‰çš„ç½‘æ˜“äº‘éŸ³ä¹æµé‡ï¼Œä¸èƒ½ä»£ç†æ—è·¯ç”±è‡ªå·±çš„ç½‘æ˜“äº‘éŸ³ä¹æµé‡ã€‚\nè°ƒæ•´ clash é…ç½®æ–‡ä»¶ æˆ‘ä»¬åç»­å°†åœ¨ æœ¬ç³»åˆ—ç¬¬ï¼ˆä¸ƒï¼‰ç¯‡ ç”¨å®šæ—¶ä»»åŠ¡æ¥è‡ªåŠ¨åœ¨ clash çš„é…ç½®ä¸­è‡ªåŠ¨æ’å…¥ä¸‹é¢è¿™äº›å†…å®¹ã€‚\nåœ¨ clash çš„é…ç½®æ–‡ä»¶ä¸­ proxies: éƒ¨åˆ†æ–°å¢ï¼š\n1 2 3 4 - name: ğŸ¶ ç½‘æ˜“ä»£ç† server: 10.0.0.2 port: 8080 type: http proxy-groups: éƒ¨åˆ†æ–°å¢ï¼š\n1 2 3 4 5 - name: ğŸ¶ ç½‘æ˜“éŸ³ä¹ type: select proxies: - ğŸ¶ ç½‘æ˜“ä»£ç† - DIRECT rules: éƒ¨åˆ†æ–°å¢ï¼ˆå„åœ°IPå¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å°†åœ¨ æœ¬ç³»åˆ—ç¬¬ï¼ˆä¸ƒï¼‰ç¯‡ ç”¨å®šæ—¶ä»»åŠ¡æ¥è‡ªåŠ¨ç”Ÿæˆå®ƒï¼Œå°†å…¶åˆ·æ–°ä¸ºä½ æœ¬åœ°çš„è§£æIPï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 - DOMAIN-SUFFIX,music.163.com,ğŸ¶ ç½‘æ˜“éŸ³ä¹ - DOMAIN-SUFFIX,music.163.com.163jiasu.com,ğŸ¶ ç½‘æ˜“éŸ³ä¹ - IP-CIDR,39.105.63.80/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,39.105.175.128/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,45.127.129.53/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,47.100.127.239/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,59.111.19.33/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,59.111.19.99/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,59.111.160.195/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,112.47.51.30/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,114.80.149.72/30,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,115.238.119.67/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,115.238.119.68/31,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,118.24.63.156/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,121.228.190.68/30,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,122.225.83.106/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,122.225.83.109/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,122.225.83.110/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,180.163.200.96/30,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,182.92.170.253/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,183.134.34.248/31,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,183.136.182.18/31,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,183.136.182.20/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve - IP-CIDR,193.112.159.225/32,ğŸ¶ ç½‘æ˜“éŸ³ä¹,no-resolve ç½‘æ˜“äº‘éŸ³ä¹IPåªå…è®¸è§£æIPv4 å› ä¸ºæˆ‘ä»¬çš„é€æ˜ä»£ç†åªä»£ç† IPv4 æµé‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½è®©ç½‘æ˜“äº‘éŸ³ä¹å®¢æˆ·ç«¯è§£æå‡º IPv6 åœ°å€ã€‚æœ‰å¥½å‡ ç§æ–¹å¼å¯ä»¥å®ç°ï¼Œæ—¢å¯ä»¥åœ¨ mosdns ä¸­å®ç°ï¼Œä¹Ÿå¯ä»¥åœ¨ adguardhome ä¸­å®ç°ï¼Œä½†åè€…æœ‰ webui è¦æ–¹ä¾¿äº›ï¼Œå¹¶ä¸” adguardhome æ˜¯ç¬¬ä¸€çº§ï¼Œå®ƒæœ‰å¯èƒ½ä¼šåˆ‡æ¢åˆ°åå¤‡æœåŠ¡å™¨è€Œä¸å‘ mosdns å‘èµ·è¯·æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±é€‰åè€…å§ã€‚\nåœ¨ adguardhome ä¸­å®ç°ä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼Œå…¶ä¸€æ˜¯å°† â€œè®¾ç½® -\u0026gt; DNSè®¾ç½® -\u0026gt; ä¸Šæ¸¸DNSæœåŠ¡å™¨â€ è®¾ç½®ä¸ºä¸‹é¢è¿™æ ·ï¼ˆè¿™ç§æ–¹å¼ä¸ä¼šè®¡å…¥â€œè¢«æ‹¦æˆªåŸŸåâ€ä¸­ï¼Œä½†æ˜¯å¦‚è‹¥ adguardhome åœ¨ clash é‡åˆ°æ•…éšœä¼šåˆ‡æ¢åˆ°åå¤‡ï¼Œå¯¹åå¤‡æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼‰ï¼Œç›´æ¥å°†ç½‘æ˜“äº‘éŸ³ä¹çš„è§£æå‘åˆ° clash å»è§£æï¼Œå› ä¸ºæˆ‘ä»¬å…³é—­äº† clash çš„DNSæ¨¡å—çš„ IPv6 è§£æã€‚\n1 2 127.0.0.1:5335 [/music.163.com/music.ntes53.netease.com/music.163.com.163jiasu.com/music.163.com.bsclink.cn/uz99.v.bsclink.cn/]127.0.0.1:7874 å…¶äºŒæ˜¯åœ¨ â€œè¿‡æ»¤å™¨ -\u0026gt; è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™â€ ä¸­æ·»åŠ è§„åˆ™å¦‚ä¸‹ï¼ˆè¿™ç§æ–¹å¼ä¼šè®¡å…¥â€œè¢«æ‹¦æˆªåŸŸåâ€ä¸­ï¼Œä½†æ˜¯å¯¹åŒ…æ‹¬åå¤‡åœ¨å†…çš„å…¨éƒ¨ä¸Šæ¸¸DNSæœåŠ¡å™¨éƒ½æœ‰æ•ˆï¼‰ã€‚\n1 2 3 4 5 ||music.163.com^$dnstype=AAAA ||music.ntes53.netease.com^$dnstype=AAAA ||music.163.com.163jiasu.com^$dnstype=AAAA ||music.163.com.bsclink.cn^$dnstype=AAAA ||uz99.v.bsclink.cn^$dnstype=AAAA åªèƒ½ä¿è¯ç›®å‰æœ‰æ•ˆã€‚ä¸Šè¿°ä¸¤ç§æ–¹å¼ï¼Œéƒ½ç”±äº CNAME åŸŸåçš„å­˜åœ¨ï¼Œå…‰å¤„ç† music.163.com å’Œ music.163.com.163jiasu.com ä¸è¡Œï¼Œè¿˜è¦å¤„ç†å®ƒä»¬èƒŒåçš„ CNAME åŸŸåã€‚å¯èƒ½æœ‰æœ›åœ¨æœªæ¥å¾—ä»¥æ”¹è¿›ï¼Œè¯¦è§ Hosts-Blocklists#dnstypeã€‚\nå¯ç”¨æœåŠ¡ å®Œå…¨é…ç½®å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® /etc/systemd/system/unblocknem.service ä¸ºå¼€å¯è‡ªåŠ¨å¯åŠ¨ï¼Œå¹¶ç«‹å³å¯åŠ¨èµ·æ¥ã€‚å¦‚æœè¿™ä¸ªæ—¶å€™ clash è¿˜æ²¡æœ‰å¯åŠ¨èµ·æ¥ï¼Œé‚£ä¹ˆ unblocknem æœåŠ¡å°±è¿˜ä¸å¯ç”¨ã€‚éƒ½å¯åŠ¨å¥½åï¼Œunblocknem å°†ä¼šç›‘å¬åœ¨ 8080 å’Œ 8081 ç«¯å£ä¸Šã€‚\n1 systemctl enable --now unblocknem.service åç»­å¦‚æƒ³æŸ¥çœ‹æ—¥å¿—ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨Debianè‡ªå¸¦çš„å·¥å…·æ¥æŸ¥çœ‹ï¼š\n1 journalctl -efu unblocknem.service å¦‚æœæƒ³è¦é‡å¯ï¼š\n1 systemctl restart unblocknem.service å®¢æˆ·ç«¯ å®‰å“ç³»ç»Ÿä¸æ”¯æŒã€‚\nWindows å®‰è£…ç½‘æ˜“äº‘éŸ³ä¹å®¢æˆ·ç«¯åï¼Œåˆ›å»ºä¸€ä¸ªå¿«æ·æ–¹å¼ï¼Œç„¶ååœ¨è¯¥å¿«æ·æ–¹å¼çš„å±æ€§ä¸­çš„â€œç›®æ ‡â€å¢åŠ  --ignore-certificate-errorsï¼Œæ³¨æ„æœ‰ä¸ªç©ºæ ¼ã€‚\nArchLinuxç³» å°†åˆšåˆšç”Ÿæˆçš„ /var/lib/unblocknem/ca.crt ä¸‹è½½ä¸‹æ¥ï¼Œç„¶åè¿è¡Œï¼š\n1 sudo trust anchor --store ca.crt åœ¨å¯åŠ¨å‘½ä»¤è¡Œåé¢æ·»åŠ  --ignore-certificate-errorsï¼Œç„¶åå¯åŠ¨å³å¯ã€‚\nDebianç³» å°†åˆšåˆšç”Ÿæˆçš„ /var/lib/unblocknem/ca.crt ä¸‹è½½ä¸‹æ¥ï¼Œæ”¾åœ¨ /usr/local/share/ca-certificates ä¸‹ï¼Œç„¶åè¿è¡Œï¼š\n1 sudo update-ca-certificates åœ¨å¯åŠ¨å‘½ä»¤è¡Œåé¢æ·»åŠ  --ignore-certificate-errorsï¼Œç„¶åå¯åŠ¨å³å¯ã€‚\næœ€å æ‰“å¼€ clash çš„ webuiï¼šhttp://10.0.0.2:9090/ui/xd/#/proxies ï¼Œé€‰æ‹© ç½‘æ˜“éŸ³ä¹ ä¸º ç½‘æ˜“ä»£ç†ï¼›ä½ å†æ‰“å¼€ç½‘æ˜“äº‘éŸ³ä¹å®¢æˆ·ç«¯åï¼Œåœ¨ http://10.0.0.2:9090/ui/xd/#/conns å°±èƒ½çœ‹åˆ°è®¸å¤šè¿æ¥éƒ½æ¥ç®¡åˆ° UnblockNeteaseMusic äº†ã€‚\nä» unblocknem.service çš„æ—¥å¿—ä¸­ä¹Ÿèƒ½çœ‹åˆ°å®ƒçš„ä½œç”¨ï¼Œè¿™äº›ç°è‰²æ­Œæ›²éƒ½è¢«æ¥ç®¡äº†ã€‚\nç³»åˆ— ä¸€ã€å­ç½‘åˆ’åˆ†åŠç½‘ç»œæ‹“æ‰‘è®¾è®¡ã€çˆ±å¿«ä¸Šçš„è®¾ç½®\näºŒã€å®‰è£…Debianã€åˆå§‹ç½‘ç»œé…ç½®ã€å¿…è¦è½¯ä»¶å®‰è£…\nä¸‰ã€AdGuardHomeã€mosdnsã€clashåœ¨DNSçš„å…³ç³»ï¼Œä»¥åŠAdGuardHomeã€mosdnsçš„å®‰è£…å’Œé…ç½®\nå››ã€clashé€æ˜ä»£ç†(Tproxy)çš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„IPè§„åˆ™å’Œnftablesè§„åˆ™\näº”ã€UnblockNeteaseMusicçš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„çš„nftablesè§„åˆ™ã€å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨\nå…­ã€subconverterçš„å®‰è£…å’Œé…ç½®\nä¸ƒã€é…ç½®nginxä¸ºæ–‡ä»¶æœåŠ¡å™¨ã€è‡ªåŠ¨æ›´æ–°clashè®¢é˜…ã€è‡ªåŠ¨ç”Ÿæˆéœ€è¦çš„æ–‡ä»¶\nå…«ã€é…ç½®æ—è·¯ç”±çš„SNMPDæœåŠ¡ã€é…ç½®ä¸»è·¯ç”±çš„è·¨ä¸‰å±‚åº”ç”¨\nä¹ã€ç›‘æµ‹é™Œç”Ÿè®¾å¤‡\nåã€å¿«é€Ÿç®€å•çš„å®‰è£…å’Œæ›´æ–°è½¯ä»¶åŒ…\nåä¸€ã€DNSã€ç½‘ç»œæ•…éšœç­‰çš„æ€»ç»“ï¼Œä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹\n","date":"2023-10-22T01:00:00+08:00","image":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E4%BA%94/nem2_hua626112c0e4470a9588945448e9e4001_62327_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E4%BA%94/","title":"æˆ‘çš„å®¶åº­ç½‘ç»œè®¾è®¡æ€è·¯ï¼Œå¼€å¯debiançš„æ—è·¯ç”±ä¹‹è·¯ï¼ˆäº”ï¼‰"},{"content":"å‰è¨€ ä½¿ç”¨clashå®ç°é€æ˜ä»£ç†æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ redirectï¼Œä»…æ”¯æŒTCPæµé‡ï¼Œå¦ä¸€ç§æ˜¯ tproxyï¼Œæ”¯æŒTCPå’ŒUDPæµé‡ã€‚ä¸ºäº†èƒ½ä»£ç†UDPæµé‡ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰ç”¨ tproxy çš„æ–¹å¼æ¥å®ç°ã€‚\nå·¥ä½œæµ nftables çš„å·¥ä½œæµè¯¦è§ Netfilter hooksã€‚å…·ä½“Netfilterçš„äº”ä¸ªé“¾ prerouting input forward output postrouting æ˜¯ä»€ä¹ˆå…³ç³»ï¼Œä»¥åŠæµå‘ï¼Œè¯·å‚è€ƒè¯¥é“¾æ¥æ¥åŠ æ·±ç†è§£ã€‚å…¨éƒ¨çš„æ–‡æ¡£å¯ä»¥æŸ¥é˜…æœ¬æ–‡ä¸‹æ–¹ å‚è€ƒèµ„æ–™ çš„1å’Œ2ã€‚\næ³¨æ„ï¼Œåœ¨æ—è·¯ç”±è‡ªèº«ä¸­è¿è¡Œçš„ç¨‹åºéƒ½å·¥ä½œåœ¨åº”ç”¨å±‚ï¼Œè€Œ tproxy åªèƒ½å·¥ä½œåœ¨ prerouting é“¾ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬è¦æƒ³é€æ˜ä»£ç†æ—è·¯ç”±è‡ªå·±äº§ç”Ÿçš„æµé‡ï¼Œè¦é€šè¿‡è®¾ç½®IPè§„åˆ™è®©è¿™éƒ¨åˆ†æµé‡åœ¨è¿›å…¥ output é“¾æ—¶ï¼Œå°†éœ€è¦ä»£ç†çš„æµé‡è½¬å›åˆ° prerouting é“¾ã€‚è¿™å°±éœ€è¦é IPè§„åˆ™æ¥å®ç°ã€‚\nä¸‹è½½ä¸å®‰è£… åœ¨ clash å’Œ clash-meta (ç°åœ¨å«mihomo)ä¸­ï¼Œæˆ‘é€‰ç”¨åè€…æ¥ä½¿ç”¨ï¼ˆå‰è€…å·²ç»åˆ åº“äº†ï¼‰ã€‚æˆ‘é»˜è®¤ä½ å·²ç»æŒ‰ç…§ å‰æ–‡ï¼ˆäºŒï¼‰ å®‰è£…å¥½äº†å¿…è¦çš„è½¯ä»¶äº†ã€‚ä»¥ä¸‹ä¸ºrootç”¨æˆ·è¿è¡Œçš„å‘½ä»¤ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 ## æ£€æŸ¥æœ€æ–°ç¨³å®šç‰ˆçš„ç‰ˆæœ¬å·ï¼Œå¦‚æœè·å–ä¸åˆ°è¯·æ£€æŸ¥ç½‘ç»œ remote_ver=$(curl -sS https://api.github.com/repos/MetaCubeX/mihomo/releases/latest | jq -r .tag_name | sed \u0026#39;s|v||\u0026#39; | grep -v \u0026#34;null\u0026#34;); echo $remote_ver ## ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆï¼ˆå‰ä¸€å¥æœ‰è¾“å‡ºè¿™ä¸€å¥æ‰èƒ½æ­£å¸¸æ‰§è¡Œï¼‰ cd /tmp wget -q --progress=bar:dot --show-progress -O \u0026#34;mihomo-linux-amd64-v${remote_ver}.gz\u0026#34; \u0026#34;https://github.com/MetaCubeX/mihomo/releases/download/v${remote_ver}/mihomo-linux-amd64-v${remote_ver}.gz\u0026#34; ## è§£å‹ gzip -d \u0026#34;mihomo-linux-amd64-v${remote_ver}.gz\u0026#34; ## å®‰è£… install -ps mihomo-linux-amd64-v${remote_ver} /usr/local/bin/clash ä¸Šè¿° wget è¿™ä¸€è¡Œé»˜è®¤ä¸‹è½½çš„æ˜¯ AMD64 v3 æ¶æ„çš„åŒ…ï¼Œä½ å¯ä»¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æ”¯æŒã€‚å¦‚è‹¥ä¸æ”¯æŒï¼Œå¯ä»¥ä¸‹è½½åç§°ä¸­å¸¦ cgo æˆ–è€… compatible çš„ç‰ˆæœ¬ï¼Œè¯´æ˜ åœ¨æ­¤ã€‚\n1 /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2 --help | grep supported å¦‚è‹¥æ”¯æŒ AMD64 v3 æ¶æ„ï¼Œè¾“å‡ºå°†ä¼šæ˜¯ä¸‹é¢è¿™æ ·çš„ã€‚\n1 2 3 4 5 x86-64-v3 (supported, searched) x86-64-v2 (supported, searched) x86_64 (AT_PLATFORM; supported, searched) tls (supported, searched) x86_64 (supported, searched) åˆ›å»ºæœåŠ¡ clash.service åˆ›å»ºå·¥ä½œç›®å½•/var/lib/clashã€‚\n1 mkdir -p /var/lib/clash åˆ›å»ºæ–‡ä»¶ /etc/systemd/system/clash.serviceï¼Œå†…å®¹å¦‚ä¸‹ã€‚è¯·æ³¨æ„å°† ens18 ä¿®æ”¹ä¸ºä½ çš„ç½‘å¡åã€‚è¿™æ—¶ clash çš„é…ç½®æ–‡ä»¶ä¸º /var/lib/clash/config.yamlã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 [Unit] Description = Clash-Meta tproxy daemon. Wants = network-online.target subconverter.service After = network-online.target [Service] Environment = PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin Type = simple Restart = always LimitNPROC = 500 LimitNOFILE = 1000000 ExecStartPre = sleep 1s ExecStart = clash -d /var/lib/clash ExecStartPost = ip route add local default dev ens18 table 100 ; ip rule add fwmark 1 lookup 100 ; mynftables.nft ExecStop = nft flush ruleset ; ip route del local default dev ens18 table 100 ; ip rule del fwmark 1 lookup 100 [Install] WantedBy = multi-user.target å¦‚æœä½ æ¯”è¾ƒè®²ç©¶Linuxå“²å­¦ï¼Œå¯ä»¥æŠŠ ExecStart æ”¹æˆä¸‹é¢è¿™æ ·ï¼Œè¿™æ—¶ clash çš„é…ç½®æ–‡ä»¶ä¸º /etc/clash/config.yamlã€‚\n1 ExecStart = clash -d /var/lib/clash -f /etc/clash/config.yaml å¦‚æœä¸æƒ³ä»¥rootç”¨æˆ·è¿è¡Œ clash ï¼Œå¯ä»¥è‡ªè¡Œåˆ›å»ºç”¨æˆ· clash å’Œç”¨æˆ·ç»„ clash ï¼Œç„¶ååœ¨ /etc/systemd/system/clash.service çš„ [Service] å•å…ƒä¸‹å¢åŠ ä¸‹é¢å‡ è¡Œï¼ŒåŒæ—¶ä¿®æ”¹ /var/lib/clash ä¸ºè¯¥æ™®é€šç”¨æˆ·æ‰€æœ‰ï¼ˆåç»­çš„è„šæœ¬éƒ½æ˜¯ä»¥rootç”¨æˆ·ä¸ºè¿è¡Œç”¨æˆ·è¿›è¡Œçš„ï¼Œå¦‚æœè¦æŠŠ clash æœåŠ¡è°ƒæ•´ä¸ºæ™®é€šç”¨æˆ·è¿è¡Œï¼Œè¯·è‡ªè¡Œä¿®æ”¹è„šæœ¬ï¼‰ã€‚\n1 2 3 4 User = clash Group = clash CapabilityBoundingSet = CAP_NET_ADMIN CAP_NET_RAW CAP_NET_BIND_SERVICE AmbientCapabilities = CAP_NET_ADMIN CAP_NET_RAW CAP_NET_BIND_SERVICE mynftables.nft æ³¨æ„åˆ°æˆ‘ä»¬åœ¨ /etc/systemd/system/clash.service çš„ ExecStartPost è¡Œæœ‰æ‰§è¡Œ mynftables.nftã€‚ç°åœ¨ï¼Œæ–°å»º /usr/local/bin/mynftables.nftï¼Œå†…å®¹å¦‚ä¸‹ã€‚è¯·æ³¨æ„æŒ‰ç…§æ³¨é‡Šä¿®æ”¹ï¼Œåˆ›å»ºå¥½åä»¥å‘½ä»¤ chmod +x /usr/local/bin/mynftables.nft ä¸ºå®ƒå¢åŠ å¯æ‰§è¡Œæƒé™ã€‚è¯¥æ–‡ä»¶ä¼šå¼•ç”¨åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶ /var/lib/clash/geoip4_cn.nftï¼Œä½ å¯ä»¥å…ˆä¸‹è½½è¿™å¹¶éæ˜¯æœ€æ–°çš„æ–‡ä»¶ï¼Œå…ˆä¿å­˜åˆ°è¯¥ä½ç½®ï¼šgeoip4_cn.nftï¼Œæˆ‘ä»¬å°†åœ¨ æœ¬ç³»åˆ—ç¬¬ï¼ˆä¸ƒï¼‰ç¯‡ ç”¨å®šæ—¶ä»»åŠ¡æ¥è‡ªåŠ¨æ›´æ–°ã€‚\nå¦‚æœä½ çš„ä»£ç†ä¸æ”¯æŒä»£ç† UDP æµé‡ï¼Œå¯ä»¥é€‰æ‹©è§£é™¤ ip protocol udp accept è¡Œçš„æ³¨é‡Šã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 #!/usr/sbin/nft -f ## æ¸…ç©ºæ—§è§„åˆ™ flush ruleset ## åªå¤„ç†æŒ‡å®šç½‘å¡çš„æµé‡ï¼Œè¦å’Œipè§„åˆ™ä¸­çš„æ¥å£æ“æŒä¸€è‡´ define interface = ens18 ## clashçš„é€æ˜ä»£ç†ç«¯å£ define tproxy_port = 7895 ## clashæ‰“çš„æ ‡è®°ï¼ˆrouting-markï¼‰ define clash_mark = 666 ## å¸¸è§„æµé‡æ ‡è®°ï¼Œip ruleä¸­åŠ çš„æ ‡è®°ï¼Œè¦å’Œipè§„åˆ™ä¸­ä¿æŒä¸€è‡´ï¼Œå¯¹åº” \u0026#34;ip rule add fwmark 1 lookup 100\u0026#34; ä¸­çš„ \u0026#34;1\u0026#34; define default_mark = 1 ## æœ¬æœºè¿è¡Œäº†æœåŠ¡å¹¶ä¸”éœ€è¦åœ¨å…¬ç½‘ä¸Šè®¿é—®çš„tcpç«¯å£ï¼ˆæœ¬æœºå¼€æ”¾åœ¨å…¬ç½‘ä¸Šçš„ç«¯å£ï¼‰ï¼Œä»…æœ¬åœ°å±€åŸŸç½‘è®¿é—®çš„æœåŠ¡ç«¯å£å¯ä¸ç”¨åœ¨æ­¤å˜é‡ä¸­ï¼Œä»¥åŠè§’é€—å·åˆ†éš” define local_tcp_port = { 2222, # sshï¼ŒæŒ‰éœ€è®¾ç½® 8080-8088 # nginx webuiï¼ŒæŒ‰éœ€è®¾ç½® } ## è¦ç»•è¿‡çš„å±€åŸŸç½‘å†…tcpæµé‡ç»ç”±æœ¬æœºè®¿é—®çš„ç›®æ ‡ç«¯å£ï¼Œä¹Ÿå°±æ˜¯å…è®¸å±€åŸŸç½‘å†…å…¶ä»–ä¸»æœºä¸»åŠ¨è®¾ç½®DNSæœåŠ¡å™¨ä¸ºå…¶ä»–æœåŠ¡å™¨ï¼Œè€Œéæ—è·¯ç”± define lan_2_dport_tcp = { 53 # dnsæŸ¥è¯¢ } ## è¦ç»•è¿‡çš„å±€åŸŸç½‘å†…udpæµé‡ç»ç”±æœ¬æœºè®¿é—®çš„ç›®æ ‡ç«¯å£ï¼Œä¹Ÿå°±æ˜¯å…è®¸å±€åŸŸç½‘å†…å…¶ä»–ä¸»æœºä¸»åŠ¨è®¾ç½®DNSæœåŠ¡å™¨ä¸ºå…¶ä»–æœåŠ¡å™¨ï¼Œè€Œéæ—è·¯ç”±ï¼›å¦å¤–ä¹Ÿå…è®¸å±€åŸŸç½‘å†…å…¶ä»–ä¸»æœºè®¿é—®è¿œç¨‹çš„NTPæœåŠ¡å™¨ define lan_2_dport_udp = { 53, # dnsæŸ¥è¯¢ 123 # ntpç«¯å£ } ## ä¿ç•™ipåœ°å€ define private_address = { 127.0.0.0/8, 100.64.0.0/10, 169.254.0.0/16, 224.0.0.0/4, 240.0.0.0/4, 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 } ## å¤§é™†ipåœ°å€ include \u0026#34;/var/lib/clash/geoip4_cn.nft\u0026#34; table ip clash { ## ä¿ç•™ipv4é›†åˆ set private_address_set { type ipv4_addr flags interval elements = $private_address } ## å¤§é™†ipv4é›†åˆ set geoip4_cn_set { type ipv4_addr flags interval elements = $geoip4_cn } ## preroutingé“¾ chain prerouting { type filter hook prerouting priority filter; policy accept; ip protocol { tcp, udp } socket transparent 1 meta mark set $default_mark accept # ç»•è¿‡å·²ç»å»ºç«‹çš„è¿æ¥ meta mark $default_mark goto clash_tproxy # å·²ç»æ‰“ä¸Šdefault_markæ ‡è®°çš„å±äºæœ¬æœºæµé‡è½¬è¿‡æ¥çš„ï¼Œç›´æ¥è¿›å…¥é€æ˜ä»£ç† fib daddr type { local, broadcast, anycast, multicast } accept # ç»•è¿‡æœ¬åœ°ã€å•æ’­ã€ç»„æ’­ã€å¤šæ’­åœ°å€ tcp dport $lan_2_dport_tcp accept # ç»•è¿‡ç»ç”±æœ¬æœºåˆ°ç›®æ ‡ç«¯å£çš„tcpæµé‡ udp dport $lan_2_dport_udp accept # ç»•è¿‡ç»ç”±æœ¬åœ°åˆ°ç›®æ ‡ç«¯å£çš„udpæµé‡ ip daddr @private_address_set accept # ç»•è¿‡ç›®æ ‡åœ°å€ä¸ºä¿ç•™ipçš„åœ°å€ ip daddr @geoip4_cn_set accept # ç»•è¿‡ç›®æ ‡åœ°å€ä¸ºå¤§é™†ipçš„åœ°å€ # ip protocol udp accept # ç»•è¿‡å…¨éƒ¨udpæµé‡ï¼ˆudpä¸è¿›è¡Œé€æ˜ä»£ç†ï¼‰ goto clash_tproxy # å…¶ä»–æµé‡é€æ˜ä»£ç†åˆ°clash } ## é€æ˜ä»£ç† chain clash_tproxy { ip protocol { tcp, udp } tproxy to :$tproxy_port meta mark set $default_mark } ## outputé“¾ chain output { type route hook output priority filter; policy accept; oifname != $interface accept # ç»•è¿‡æœ¬æœºå†…éƒ¨é€šä¿¡çš„æµé‡ï¼ˆæ¥å£loï¼‰ meta mark $clash_mark accept # ç»•è¿‡æœ¬æœºclashå‘å‡ºçš„æµé‡ fib daddr type { local, broadcast, anycast, multicast } accept # ç»•è¿‡æœ¬åœ°ã€å•æ’­ã€ç»„æ’­ã€å¤šæ’­åœ°å€ udp dport { 53, 123 } accept # ç»•è¿‡æœ¬æœºdnsæŸ¥è¯¢ã€NTPæµé‡ tcp sport $local_tcp_port accept # ç»•è¿‡æœ¬åœ°è¿è¡Œäº†æœåŠ¡çš„tcpç«¯å£ï¼Œå¦‚æœå¹¶ä¸éœ€è¦ä»å…¬ç½‘è®¿é—®è¿™äº›ç«¯å£ï¼Œå¯ä»¥æ³¨é‡Šæ‰æœ¬è¡Œ ip daddr @private_address_set accept # ç»•è¿‡ç›®æ ‡åœ°å€ä¸ºä¿ç•™ipçš„åœ°å€ ip daddr @geoip4_cn_set accept # ç»•è¿‡ç›®æ ‡åœ°å€ä¸ºå¤§é™†ipçš„åœ°å€ ip protocol { tcp, udp } meta mark set $default_mark # å…¶ä»–æµé‡é‡è·¯ç”±åˆ°prerouting } } clashé…ç½®æ–‡ä»¶ æš‚æ—¶å…ˆæŒ‰ç…§ä¸‹é¢çš„å½¢å¼å½¢æˆ clash çš„é…ç½®æ–‡ä»¶ /var/lib/clash/config.yaml æˆ–è€… /etc/clash/config.yamlï¼Œæˆ‘ä»¬å°†åœ¨ æœ¬ç³»åˆ—ç¬¬ï¼ˆä¸ƒï¼‰ç¯‡ ç”¨å®šæ—¶ä»»åŠ¡æ¥è‡ªåŠ¨æ›´æ–°è®¢é˜…ã€‚æˆ‘åªå¯¹å…³é”®ä¿¡æ¯è¿›è¡Œäº†æ³¨é‡Šï¼Œæœªæ³¨é‡Šçš„å†…å®¹ä½ éƒ½å¯ä»¥è‡ªè¡ŒæŒ‰ç…§ å®˜æ–¹WIKI è¿›è¡Œè®¾ç½®ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 port: 7890 socks-port: 7891 mixed-port: 7893 tproxy-port: 7895 # å’Œmynftables.nftä¸­çš„tproxy_portä¿æŒä¸€è‡´ routing-mark: 666 # å’Œmynftables.nftä¸­çš„clash_markä¿æŒä¸€è‡´ allow-lan: true bind-address: \u0026#34;*\u0026#34; mode: rule log-level: info ipv6: false # ä¸è¿›è¡ŒIPv6æµé‡ä»£ç† find-process-mode: off external-controller: 0.0.0.0:9090 secret: # ç™»é™†uiçš„å¯†ç  external-ui: ui external-ui-name: xd external-ui-url: https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip unified-delay: true tcp-concurrent: true experimental: sniff-tls-sni: true geodata-mode: true geodata-loader: standard geox-url: geoip: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat geosite: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat mmdb: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb profile: tracing: true store-selected: true store-fake-ip: true sniffer: enable: true parse-pure-ip: true override-destination: true dns: enable: true ipv6: false # ç¦æ­¢DNSè§£æIPv6 listen: 0.0.0.0:7874 # DNSç›‘å¬ç«¯å£ use-hosts: true enhanced-mode: redir-host default-nameserver: # å»ºè®®ä¿®æ”¹ä¸ºä½ æœ€è¿‘çš„DNSæœåŠ¡å™¨ - 10.0.0.1 - 101.226.4.6 - 114.114.114.114 - 116.228.111.118 - 223.5.5.5 nameserver: # å»ºè®®ä¿®æ”¹ä¸ºä½ æœ€è¿‘çš„DNSæœåŠ¡å™¨ - 10.0.0.1 - 101.226.4.6 - 114.114.114.114 - 116.228.111.118 - 223.5.5.5 fallback: - https://dns.cloudflare.com/dns-query - tls://dns.google:853 - https://1.1.1.1/dns-query - tls://1.1.1.1:853 - tls://8.8.8.8:853 - https://public.dns.iij.jp/dns-query - https://jp.tiar.app/dns-query - https://jp.tiarap.org/dns-query - tls://jp.tiar.app - tls://dot.tiar.app fallback-filter: geoip: true geoip-code: CN geosite: - gfw ipcidr: - 0.0.0.0/8 - 10.0.0.0/8 - 100.64.0.0/10 - 127.0.0.0/8 - 169.254.0.0/16 - 172.16.0.0/12 - 192.0.0.0/24 - 192.0.2.0/24 - 192.88.99.0/24 - 192.168.0.0/16 - 198.18.0.0/15 - 198.51.100.0/24 - 203.0.113.0/24 - 224.0.0.0/4 - 240.0.0.0/4 - 255.255.255.255/32 domain: - +.google.com - +.facebook.com fake-ip-filter: - +.* proxies: # ä»¥ä¸‹ä¸ºä½ çš„ä»£ç†èŠ‚ç‚¹ã€åˆ†ç»„åŠä»£ç†è§„åˆ™ proxy-groups: rules: clashå…¶ä»–ç›¸å…³æ–‡ä»¶ clash è¿˜éœ€è¦ä¸€äº›é…å¥—æ–‡ä»¶ï¼Œåœ¨å¯åŠ¨å‰å…ˆä¸‹è½½ä¸‹æ¥ã€‚æˆ‘ä»¬å°†åœ¨ æœ¬ç³»åˆ—ç¬¬ï¼ˆä¸ƒï¼‰ç¯‡ ç”¨å®šæ—¶ä»»åŠ¡æ¥è‡ªåŠ¨æ›´æ–°è¿™äº›æ–‡ä»¶ã€‚\n1 2 3 4 5 6 7 8 9 10 cd /var/lib/clash wget -q --progress=bar:dot --show-progress -O country.mmdb https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country.mmdb wget -q --progress=bar:dot --show-progress -O geosite.dat https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat wget -q --progress=bar:dot --show-progress -O geoip.dat https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat mkdir -p ui cd ui wget -q --progress=bar:dot --show-progress -O xd.zip https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip unzip -oqq xd.zip mv metacubexd-gh-pages xd å¯ç”¨æœåŠ¡ å®Œå…¨é…ç½®å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® /etc/systemd/system/clash.service ä¸ºå¼€å¯è‡ªåŠ¨å¯åŠ¨ï¼Œå¹¶ç«‹å³å¯åŠ¨èµ·æ¥ã€‚\n1 systemctl enable --now clash.service åç»­å¦‚æƒ³æŸ¥çœ‹æ—¥å¿—ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨Debianè‡ªå¸¦çš„å·¥å…·æ¥æŸ¥çœ‹ï¼š\n1 journalctl -efu clash.service å¦‚æœæƒ³è¦é‡å¯ï¼š\n1 systemctl restart clash.service æŸ¥çœ‹å½“å‰çš„ nftables è§„åˆ™ï¼Œå¦‚æœä¸ºç©ºå¯ä»¥æ‰‹åŠ¨è¾“å…¥ mynftables.nft ä»¥æŸ¥çœ‹é”™è¯¯ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œè¯·è‡ªè¡Œæ ¹æ®è¾“å‡ºæ’æ•…ã€‚\n1 nft list ruleset æ‰§è¡Œé€»è¾‘ å¤§è‡´åœ¨ mynftables.nft è¿™ä¸ªæ–‡ä»¶çš„æ³¨é‡Šä¹Ÿè§£é‡Šè¿‡æ¯å¥çš„ä½œç”¨äº†ï¼Œè¿™é‡Œå†æŠä¸€ä¸‹ã€‚\nå¯¹ç…§ç€é¢˜å›¾ï¼Œå±€åŸŸç½‘ä¸­çš„å…¶ä»–å®¢æˆ·ç«¯çš„æµé‡åœ¨é€šè¿‡æ—è·¯ç”±æ—¶ï¼Œè¿›å…¥ nftables çš„ prerouting é“¾ï¼Œç„¶ååˆ¤æ–­ç¬¬69-76è¡Œçš„è§„åˆ™ï¼Œå¦‚æœè§„åˆ™åŒ¹é…å°±ä»¥ accept ç›´æ¥æ”¶å—å¹¶å‘å¾€ç›®çš„åœ°ï¼Œä¸ä¼šå†è½¬åˆ° clashï¼›å¦‚æœå…¨éƒ½ä¸åŒ¹é…ï¼Œä¼šåœ¨æœ€ååŒ¹é…ä¸Š goto clash_tproxyï¼Œä¹Ÿå°±æ˜¯è¿›å…¥ ip protocol { tcp, udp } tproxy to :$tproxy_port meta mark set $default_mark è¿™å¥ï¼Œè¿™å¥å°†ä¼šæŠŠæµé‡è½¬åˆ° clashã€‚éœ€è¦æä¸€å¥çš„æ˜¯ç¬¬70è¡Œçš„è§„åˆ™æ˜¯é’ˆå¯¹ä»æœ¬æœº output é“¾å‘è¿‡æ¥çš„æµé‡çš„ï¼Œæ²¡æœ‰ç¬¬70è¡Œï¼Œè¿™éƒ¨åˆ†æµé‡åŒæ ·ä¼šåœ¨æœ€ååŒ¹é…åˆ°ç¬¬77è¡Œçš„ goto clash_tproxyã€‚\nç»è¿‡ clash ä»£ç†åï¼Œæµé‡ä¼šè¢«æ‰“ä¸Šæ ‡è®° clash_markï¼Œä¹Ÿå°±æ˜¯ç¬¬13è¡Œå®šä¹‰çš„ 666ï¼Œclash å·¥ä½œåœ¨é¢˜å›¾ä¸­çš„åº”ç”¨å±‚ï¼Œç»è¿‡ clash å¤„ç†è¿‡çš„æµé‡ä¼šåœ¨ output é“¾ä¸­è¢«ç¬¬89è¡Œç›´æ¥æ¥æ”¶å¹¶å‘å¾€ç›®çš„åœ°ï¼Œä¸ä¼šå†ä¸€æ¬¡è¿›è¡Œä»£ç†ï¼Œè¿™æ ·å°±é˜²æ­¢äº†æµé‡ä¸€ç›´åœ¨èµ°ç¯è·¯çš„é—®é¢˜ã€‚\næœ¬æœºäº§ç”Ÿçš„æµé‡ç±»ä¼¼ï¼Œå®ƒä»¬ä¼šåœ¨ output é“¾ä¸­å…ˆåŒ¹é…ç¬¬88-94è¡Œï¼Œå¦‚æœåŒ¹é…å°±ç›´æ¥æ¥æ”¶å¹¶å‘å¾€ç›®çš„åœ°äº†ï¼Œè€Œå‰©ä½™æ²¡æœ‰åŒ¹é…åˆ°çš„ä¼šåœ¨ç¬¬95è¡Œè¢«æ‰“ä¸Š $default_markï¼Œä¹Ÿå°±æ˜¯åœ¨ç¬¬16è¡Œå®šä¹‰çš„ 1ï¼Œè¿™ä¸ªæ ‡è®°å’Œä¸Šæ–¹åˆ›å»ºçš„ clash.service ä¸­ fwmark 1 çš„ 1 ä¸€è‡´ã€‚è¢«æ‰“ä¸Šè¿™ä¸ªæ ‡è®°çš„æµé‡ä¼šæŒ‰ç…§ clash.service å®šä¹‰çš„ ip route å’Œ ip ruleï¼Œé‡è·¯ç”±è¿›å…¥ prerouting é“¾ï¼Œç„¶åæ ¹æ®è§„åˆ™ç¡®å®šæ˜¯ç›´æ¥æ¥æ”¶è¿˜æ˜¯è½¬å‘ clashã€‚\nè‡³äº forward è½¬å‘é“¾ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰è®¾ç½®å®ƒï¼Œé‚£ä¹ˆè½¬å‘çš„é»˜è®¤ policy å°±æ˜¯ acceptï¼Œå°†ç›´æ¥å…¨éƒ¨æ¥å—ã€‚æˆ‘å·²ç»åœ¨ å‰æ–‡ï¼ˆä¸€ï¼‰ ä¸­æåŠäº†æˆ‘åªåœ¨ä¸»è·¯ç”±çˆ±å¿«ä¸Šè®¾ç½®é˜²ç«å¢™ï¼šIPv4ã€IPv6ï¼Œæ—è·¯ç”±å¯¹è¿™ç±»æµé‡ç›´æ¥è½¬å‘ï¼Œä¸å†è¿‡æ»¤ã€‚æ‰€ä»¥ï¼Œé’ˆå¯¹è¿è¡Œåœ¨æˆ‘NAS 10.0.0.11 ä¸Šçš„æœåŠ¡ä»¥åŠå…¶ä»–ä¼—å¤šè¿è¡Œåœ¨ Docker MacVLAN ç½‘ç»œä¸Šçš„å®¹å™¨ï¼Œæˆ‘ç›´æ¥ä»ä¸»è·¯ç”±çˆ±å¿«è½¬å‘ç«¯å£åˆ°å®ƒä»¬å³å¯ï¼Œæ— éœ€å†ç»è¿‡æ—è·¯ç”±é¢å¤–ä¸­è½¬ã€‚\nå‚è€ƒèµ„æ–™ nftables wiki\nnft Man Page\nclash nftables é€æ˜ä»£ç†ï¼ˆTPROXYï¼‰\nProject X é€æ˜ä»£ç†ï¼ˆTProxyï¼‰é…ç½®æ•™ç¨‹\nç³»åˆ— ä¸€ã€å­ç½‘åˆ’åˆ†åŠç½‘ç»œæ‹“æ‰‘è®¾è®¡ã€çˆ±å¿«ä¸Šçš„è®¾ç½®\näºŒã€å®‰è£…Debianã€åˆå§‹ç½‘ç»œé…ç½®ã€å¿…è¦è½¯ä»¶å®‰è£…\nä¸‰ã€AdGuardHomeã€mosdnsã€clashåœ¨DNSçš„å…³ç³»ï¼Œä»¥åŠAdGuardHomeã€mosdnsçš„å®‰è£…å’Œé…ç½®\nå››ã€clashé€æ˜ä»£ç†(Tproxy)çš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„IPè§„åˆ™å’Œnftablesè§„åˆ™\näº”ã€UnblockNeteaseMusicçš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„çš„nftablesè§„åˆ™ã€å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨\nå…­ã€subconverterçš„å®‰è£…å’Œé…ç½®\nä¸ƒã€é…ç½®nginxä¸ºæ–‡ä»¶æœåŠ¡å™¨ã€è‡ªåŠ¨æ›´æ–°clashè®¢é˜…ã€è‡ªåŠ¨ç”Ÿæˆéœ€è¦çš„æ–‡ä»¶\nå…«ã€é…ç½®æ—è·¯ç”±çš„SNMPDæœåŠ¡ã€é…ç½®ä¸»è·¯ç”±çš„è·¨ä¸‰å±‚åº”ç”¨\nä¹ã€ç›‘æµ‹é™Œç”Ÿè®¾å¤‡\nåã€å¿«é€Ÿç®€å•çš„å®‰è£…å’Œæ›´æ–°è½¯ä»¶åŒ…\nåä¸€ã€DNSã€ç½‘ç»œæ•…éšœç­‰çš„æ€»ç»“ï¼Œä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹\n","date":"2023-10-21T14:00:00+08:00","image":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E5%9B%9B/nf-hooks_hu88789eb5a0253449c69e203685dbd166_85259_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E5%9B%9B/","title":"æˆ‘çš„å®¶åº­ç½‘ç»œè®¾è®¡æ€è·¯ï¼Œå¼€å¯debiançš„æ—è·¯ç”±ä¹‹è·¯ï¼ˆå››ï¼‰"},{"content":"å‰è¨€ åœ¨ å‰æ–‡ï¼ˆä¸€ï¼‰ ä¸­æˆ‘æåŠäº†æˆ‘çš„ç›®æ ‡æ˜¯åœ¨10.0.0.0/24è¿™ä¸ªæ—è·¯ç”±æ‰€åœ¨çš„å­ç½‘ä¸­å®ç°å›½å†…ç½‘ç«™IPv4/IPv6åŒæ ˆè§£æå¹¶å¯æ­£å¸¸è®¿é—®ï¼Œå›½å¤–ç½‘ç«™ä»…è§£æIPv4åœ°å€å¹¶è¿›è¡Œç§‘å­¦ä¸Šç½‘ï¼Œé‚£ä¹ˆä»…å‡­Clashå¾ˆéš¾å®ç°ï¼ˆå…¶ä»–çš„ä»£ç†è½¯ä»¶æˆ‘ä¹Ÿä¸ä»‹ç»äº†ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©mosdnsæ¥å®ç°ï¼ˆå…¶ä»–çš„smartdnsã€corednsæˆ‘å°±ä¸ä»‹ç»äº†ï¼‰ã€‚åˆä¸ºäº†èƒ½å¤Ÿæ›´åŠ æ–¹ä¾¿çš„ä¸ºç”µè§†æœºå±è”½å¹¿å‘Šã€è‡ªå®šä¹‰å­ç½‘ä¸­è®¾å¤‡è§£æä¸ºç§ç½‘IPv4åœ°å€å’Œå…¬ç½‘IPv6åœ°å€è¿™ç§å½¢å¼çš„åŒæ ˆã€é˜²æ­¢ä»£ç†æœ‰æ•…éšœéœ€è¦åå¤‡DNSç­‰ç­‰åŠŸèƒ½ï¼Œæˆ‘ç»§ç»­åœ¨mosdnså‰åŠ ä¸€å±‚adguardhomeï¼Œä»¥æ–¹ä¾¿çš„å®ç°ã€‚\né€»è¾‘å›¾ è¯´æ˜ ç”±äºæˆ‘åœ¨ å‰æ–‡ï¼ˆäºŒï¼‰ ä¸­å¹¶æ²¡æœ‰å®‰è£… dnsmasqï¼Œ53 ç«¯å£ä¸Šå¹¶æ²¡æœ‰è¿è¡Œä»»ä½•æœåŠ¡ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥è®© adguardhome ç›´æ¥ç›‘å¬åœ¨ 53 ç«¯å£ã€‚åœ¨ å‰æ–‡ï¼ˆäºŒï¼‰ ä¸­æˆ‘å·²ç»è®¾ç½®äº†æ—è·¯ç”±è‡ªèº«çš„DNSæœåŠ¡å™¨ä¸º 127.0.0.1ã€‚åœ¨ å‰æ–‡ï¼ˆä¸€ï¼‰ ä¸­æˆ‘ä»¬ä¹Ÿè®¾ç½®å¥½äº† 10.0.0.0/24 æ•´ä¸ªç½‘æ®µçš„DNSæœåŠ¡å™¨ä¸ºæ—è·¯ç”±çš„IP 10.0.0.2ã€‚\nå½“å®¢æˆ·ç«¯éœ€è¦è§£æDNSæ—¶ï¼Œç›‘å¬åœ¨ 53 ç«¯å£ä¸Šçš„ adguardhome ä¼šè½¬å‘ç»™å…¶ä¸Šæ¸¸ mosdnsï¼Œç„¶å mosdns æ ¹æ®è®¾ç½®æ¥è¿›è¡Œåˆ†æµï¼Œä¸­å›½å¤§é™†éƒ¨åˆ†ä½¿ç”¨å›½å†…çš„å…¬å…±DNSæœåŠ¡å™¨è¿›è¡Œè§£æï¼Œä¿ç•™IPv4/IPv6åŒæ ˆç»“æœï¼Œéä¸­å›½å¤§é™†éƒ¨åˆ†ç»§ç»­è½¬å‘ç»™ä¸Šæ¸¸ clash ï¼Œç”± clash é€šè¿‡ä»£ç†å‘å›½å¤–å…¬å…±DNSæœåŠ¡å™¨è¿›è¡Œè§£æï¼Œclash ä¸­çš„DNSæ¨¡å—è®¾ç½®å…³é—­IPv6è§£æï¼Œè¿™æ ·å›½å¤–éƒ¨åˆ†åªä¼šè¿”å›IPv4çš„ç»“æœã€‚\nè€Œå½“ mosdns å‡ºç°æ•…éšœæ—¶ï¼ˆmosdnsæœ¬èº«ä¹Ÿä¼šæœ‰ä¸€ä¸ªåå¤‡ï¼Œé˜²æ­¢clashå‡ºç°æ•…éšœï¼Œä¹Ÿå°±æ˜¯è¯´ä¼šæœ‰ä¸¤å±‚åå¤‡ï¼‰ï¼Œadguardhome åˆ™ç›´æ¥å‘å›½å†…å…¬å…±DNSæœåŠ¡å™¨è¯·æ±‚è§£æï¼Œåšåˆ°ä¸å½±å“å±€åŸŸç½‘çš„ç½‘ç»œã€‚\nAdGuardHomeçš„å®‰è£…å’Œé…ç½® ä¸‹è½½å®‰è£… æˆ‘é»˜è®¤ä½ å·²ç»æŒ‰ç…§ å‰æ–‡ï¼ˆäºŒï¼‰ å®‰è£…å¥½äº†å¿…è¦çš„è½¯ä»¶äº†ã€‚ä»¥ä¸‹ä¸ºrootç”¨æˆ·è¿è¡Œçš„å‘½ä»¤ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 ## æ£€æŸ¥æœ€æ–°ç¨³å®šç‰ˆçš„ç‰ˆæœ¬å·ï¼Œå¦‚æœè·å–ä¸åˆ°è¯·æ£€æŸ¥ç½‘ç»œ remote_ver=$(curl -sS https://api.github.com/repos/AdguardTeam/AdGuardHome/releases/latest | jq -r .tag_name | sed \u0026#39;s|v||\u0026#39; | grep -v \u0026#34;null\u0026#34;); echo $remote_ver ## ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆï¼ˆå‰ä¸€å¥æœ‰è¾“å‡ºè¿™ä¸€å¥æ‰èƒ½æ­£å¸¸æ‰§è¡Œï¼‰ cd /tmp wget -q --progress=bar:dot --show-progress -O \u0026#34;AdGuardHome_linux_amd64.tar.gz\u0026#34; \u0026#34;https://github.com/AdguardTeam/AdGuardHome/releases/download/v${remote_ver}/AdGuardHome_linux_amd64.tar.gz\u0026#34; ## è§£å‹ tar --no-same-owner -xf \u0026#34;AdGuardHome_linux_amd64.tar.gz\u0026#34; --strip-components 2 --directory=. ## å®‰è£… install -ps AdGuardHome /usr/local/bin/adguardhome åˆ›å»ºæœåŠ¡ åˆ›å»ºå·¥ä½œç›®å½•/var/lib/adguardhomeã€‚\n1 mkdir -p /var/lib/adguardhome åˆ›å»º /etc/systemd/system/adguardhome.service å¦‚ä¸‹ï¼Œè¿™æ—¶é…ç½®æ–‡ä»¶ä¸º /var/lib/adguardhome/AdGuardHome.yamlã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [Unit] Description = Network-wide ads \u0026amp; trackers blocking DNS server. Wants = network-online.target mosdns.service After = network-online.target mosdns.service [Service] Type = simple Restart = always StartLimitInterval = 5 StartLimitBurst = 10 ExecStart = /usr/local/bin/adguardhome -w /var/lib/adguardhome RestartSec = 10 [Install] WantedBy = multi-user.target å¦‚æœä½ æ¯”è¾ƒè®²ç©¶Linuxå“²å­¦ï¼Œå¯ä»¥æŠŠExecStartæ”¹æˆä¸‹é¢è¿™æ ·ï¼Œè¿™æ—¶é…ç½®æ–‡ä»¶ä¸º /etc/adguardhome/config.yamlã€‚\n1 ExecStart = /usr/local/bin/adguardhome -w /var/lib/adguardhome -c /etc/adguardhome/config.yaml å¦‚æœä¸æƒ³ä»¥rootç”¨æˆ·è¿è¡Œ adguardhome ï¼Œå¯ä»¥è‡ªè¡Œåˆ›å»ºç”¨æˆ· adguardhome å’Œç”¨æˆ·ç»„ adguardhome ï¼Œç„¶ååœ¨ /etc/systemd/system/adguardhome.service çš„ [Service] å•å…ƒä¸‹å¢åŠ ä¸‹é¢å‡ è¡Œï¼ŒåŒæ—¶ä¿®æ”¹ /var/lib/adguardhome ä¸ºè¯¥æ™®é€šç”¨æˆ·æ‰€æœ‰ï¼ˆåç»­çš„è„šæœ¬éƒ½æ˜¯ä»¥rootç”¨æˆ·ä¸ºè¿è¡Œç”¨æˆ·è¿›è¡Œçš„ï¼Œå¦‚æœè¦æŠŠ adguardhome æœåŠ¡è°ƒæ•´ä¸ºæ™®é€šç”¨æˆ·è¿è¡Œï¼Œè¯·è‡ªè¡Œä¿®æ”¹è„šæœ¬ï¼‰ã€‚\n1 2 3 4 User = adguardhome Group = adguardhome CapabilityBoundingSet = CAP_NET_BIND_SERVICE # æˆ‘ä»¬éœ€è¦ç›‘å¬ç‰¹æƒç«¯å£53 AmbientCapabilities = CAP_NET_BIND_SERVICE # æˆ‘ä»¬éœ€è¦ç›‘å¬ç‰¹æƒç«¯å£53 adguardhome è‡ªèº«çš„å‘½ä»¤è¡Œæ˜¯æ”¯æŒè‡ªåŠ¨åˆ›å»º /etc/systemd/system/adguardhome.service çš„ï¼Œä½†ä¸ªäººä¸æ˜¯å¾ˆå»ºè®®ç›´æ¥ä½¿ç”¨ adguardhome æœ¬èº«æ‰€æ”¯æŒçš„å‘½ä»¤æ¥å®Œæˆä¸Šè¿°å·¥ä½œï¼Œä»¥ä¸‹ä»…ä¾›å‚è€ƒã€‚\n1 2 3 adguardhome -s install -w /var/lib/adguardhome # éœ€è¦è‡ªè¡Œåˆ›å»ºç›®å½•var/lib/adguardhome # æˆ–è€… adguardhome -s install -w /var/lib/adguardhome -c /etc/adguardhome/config.yaml # éœ€è¦è‡ªè¡Œåˆ›å»ºç›®å½•/etc/adguardhomeå’Œ/var/lib/adguardhome åˆå§‹åŒ– å…ˆå¼€ä¸€ä¸ªç»ˆç«¯è¾“å…¥adguardhomeï¼Œç„¶åæµè§ˆå™¨æ‰“å¼€ http://10.0.0.2:3000 å¹¶æŒ‰ä¸‹å›¾è®¾ç½®ã€‚\né…ç½® DNSè®¾ç½® ä¸Šæ¸¸DNSæœåŠ¡å™¨è®¾ç½®ä¸ºmosdnsçš„ç›‘å¬ç«¯å£ã€‚\nåå¤‡DNSæœåŠ¡å™¨å¡«å†™å…¬å…±DNSæœåŠ¡å™¨ï¼Œå¯ä»¥é™„åŠ ä¸Šä½ çš„ISPå½“åœ°çš„DNSæœåŠ¡å™¨ï¼Œå¦‚æœä¸»è·¯ç”±è®¾ç½®äº†DNSçš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥åŠ ä¸Šï¼Œå½“mosdnså‡ºç°æ•…éšœæ—¶ï¼Œadguardhomeä¼šè½¬ä¸ºä½¿ç”¨åå¤‡DNSæœåŠ¡å™¨æ¥è¿›è¡Œè§£æã€‚è¿™æ ·ã€‚å³ä½¿mosdnsæˆ–è€…clashå‡ºç°æ•…éšœæ—¶ï¼Œä¹Ÿä¸å½±å“adguardhomeä¸ºå±€åŸŸç½‘æä¾›DNSæœåŠ¡ã€‚\næˆ‘ä»¬åªåœ¨å±€åŸŸç½‘ä¸­ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸é™åˆ¶æŸ¥è¯¢æµé‡ã€‚\nå¼€å¯ä¹è§‚ç¼“å­˜å¯ä»¥æ›´å¿«çš„å“åº”ï¼Œä½†æœ‰äº›æ—¶å€™å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ï¼Œå¯ä»¥è§†æƒ…å†µå¼€å…³ã€‚\nDNSé‡å†™ å¦‚æœä½ å·²ç»ä½¿ç”¨DDNSå°†ä½ çš„åŸŸåè§£æäº†IPv4å’ŒIPv6ï¼Œåˆ™å¯ä»¥åœ¨AdGuardHomeçš„DNSé‡å†™æ¨¡å—ä¸­æŒ‰ä¸‹å›¾è¿™æ ·è®¾ç½®ï¼Œè®¾ç½®åå±€åŸŸç½‘ä¸­çš„è®¾å¤‡åœ¨è§£ææ—¶ï¼Œå¯ä»¥è§£æç§ç½‘IPv4åœ°å€å’Œå…¬ç½‘IPv6åœ°å€ï¼Œåšåˆ°åœ¨å±€åŸŸç½‘ä¸­ç…§æ ·ä½¿ç”¨å’Œå…¬ç½‘ä¸­ä¸€æ ·çš„åŸŸåè®¿é—®ã€‚\nä¸€ä¸ªè‰¯å¥½çš„ä¹ æƒ¯æ˜¯é’ˆå¯¹å±€åŸŸç½‘ä¸­æ¯ä¸€ä¸ªè¿è¡Œç€éœ€è¦è¢«è®¿é—®çš„æœåŠ¡çš„IPï¼Œéƒ½é€šè¿‡ adguardhome åŠ«æŒå…¶åŸŸåï¼Œåšåˆ°ä¸åŒIPä¸åŒå­åŸŸåã€‚åªè¦è®¾ç½®å¥½DDNSçš„å­åŸŸåä»¥åŠä¸»è·¯ç”±çˆ±å¿«çš„ç«¯å£è½¬å‘ï¼Œå°±å¯ä»¥åšåˆ°åœ¨å±€åŸŸç½‘ç¯å¢ƒä¸­å’Œåœ¨å…¬ç½‘ç¯å¢ƒä¸­ï¼Œä½¿ç”¨ç›¸åŒçš„åŸŸåå»è®¿é—®åŒä¸€ä¸ªæœåŠ¡ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 ## è§£ænasçš„ipï¼Œæˆ‘çš„nasåŒç½‘å¡ï¼Œå‡é…ç½®äº†IP $ nslookup nas.evine.win Server: 10.0.0.2 Address: 10.0.0.2#53 Non-authoritative answer: Name: nas.evine.win Address: 10.0.0.11 Name: nas.evine.win Address: 10.0.0.12 Name: nas.evine.win Address: 240e:â– â– â– â– :â– â– â– â– :â– â– â– â– :â– â– â– :â– â– â– â– :â– â– â– â– :1ee Name: nas.evine.win Address: 240e:â– â– â– â– :â– â– â– â– :â– â– â– â– :â– â– â– :â– â– â– â– :â– â– â– â– :6c4c ## è§£æåˆ›å»ºåœ¨10.0.1.0/24ç½‘æ®µdocker macvlanä¸Šçš„qbittorrentå®¹å™¨çš„ip $ nslookup qb.evine.win Server: 10.0.0.2 Address: 10.0.0.2#53 Non-authoritative answer: Name: qb.evine.win Address: 10.0.1.2 Name: qb.evine.win Address: 240e:â– â– â– â– :â– â– â– â– :â– â– â– â– :â– â– â– :â– â– â– â– :â– â– â– â– :102 åœ¨å®Œå…¨é…ç½®å¥½æ—è·¯ç”±åï¼Œä½ å°±å¯ä»¥å®ç°ä¸Šè¿°è¿™æ ·çš„åŸŸåè§£æã€‚è¿™æ ·çš„è¯ï¼Œåƒæ‰‹æœºã€ç¬”è®°æœ¬ç”µè„‘è¿™ç§ä¼šé¢‘ç¹è¿›å‡ºå±€åŸŸç½‘çš„è®¾å¤‡ï¼Œå¯ä»¥åœ¨å±€åŸŸç½‘å’Œå…¬ç½‘ä¸­ä½¿ç”¨ä¸€æ ·çš„åŸŸåå»è®¿é—®å„é¡¹æœåŠ¡ï¼Œè€Œä¸ç”¨åœ¨å…¬ç½‘ç”¨åŸŸåè®¿é—®ï¼Œåœ¨å±€åŸŸç½‘å¾—æ¢æˆIPè®¿é—®è¿™ç§å½¢å¼ã€‚\nå¯ç”¨æœåŠ¡ å®Œå…¨é…ç½®å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® /etc/systemd/system/adguardhome.service ä¸ºå¼€å¯è‡ªåŠ¨å¯åŠ¨ï¼Œå¹¶ç«‹å³å¯åŠ¨èµ·æ¥ï¼ˆè¿™æ—¶ä¸Šæ¸¸mosdnså°šæœªé…ç½®ï¼Œä¼šç›´æ¥è·³è½¬åˆ°å¤‡ç”¨DNSæœåŠ¡å™¨å»ï¼Œä½ å¯ä»¥ç­‰åç»­é…ç½®å®Œå¥½ä»¥åå†æ¥å¯åŠ¨å®ƒï¼‰ã€‚\n1 systemctl enable --now adguardhome.service åç»­å¦‚æƒ³æŸ¥çœ‹æ—¥å¿—ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨Debianè‡ªå¸¦çš„å·¥å…·æ¥æŸ¥çœ‹ï¼š\n1 journalctl -efu adguardhome.service å¦‚æœæƒ³è¦é‡å¯ï¼š\n1 systemctl restart adguardhome.service mosdnsçš„å®‰è£…å’Œé…ç½® ä¸‹è½½å®‰è£… æˆ‘é»˜è®¤ä½ å·²ç»æŒ‰ç…§ å‰æ–‡ï¼ˆäºŒï¼‰ å®‰è£…å¥½äº†å¿…è¦çš„è½¯ä»¶äº†ã€‚ä»¥ä¸‹ä¸ºrootç”¨æˆ·è¿è¡Œçš„å‘½ä»¤ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 ## æ£€æŸ¥æœ€æ–°ç¨³å®šç‰ˆçš„ç‰ˆæœ¬å·ï¼Œå¦‚æœè·å–ä¸åˆ°è¯·æ£€æŸ¥ç½‘ç»œ remote_ver=$(curl -sS https://api.github.com/repos/IrineSistiana/mosdns/releases/latest | jq -r .tag_name | sed \u0026#39;s|v||\u0026#39; | grep -v \u0026#34;null\u0026#34;); echo $remote_ver ## ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆï¼ˆå‰ä¸€å¥æœ‰è¾“å‡ºè¿™ä¸€å¥æ‰èƒ½æ­£å¸¸æ‰§è¡Œï¼‰ cd /tmp wget -q --progress=bar:dot --show-progress -O \u0026#34;mosdns-linux-amd64.zip\u0026#34; \u0026#34;https://github.com/IrineSistiana/mosdns/releases/download/v${remote_ver}/mosdns-linux-amd64.zip\u0026#34; ## è§£å‹ unzip -oqq mosdns-linux-amd64.zip -d . ## å®‰è£… install -ps mosdns /usr/local/bin/mosdns åˆ›å»ºæœåŠ¡ åˆ›å»ºå·¥ä½œç›®å½•/var/lib/mosdnsã€‚\n1 mkdir -p /var/lib/mosdns åˆ›å»º /etc/systemd/system/mosdns.service å¦‚ä¸‹ï¼Œè¿™æ—¶é…ç½®æ–‡ä»¶ä¸º /var/lib/mosdns/config.yamlã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [Unit] Description = A DNS forwarder. Wants = network-online.target clash.service After = network-online.target clash.service [Service] StartLimitInterval = 5 StartLimitBurst = 10 WorkingDirectory = /var/lib/mosdns ExecStart = /usr/local/bin/mosdns start Restart = always RestartSec = 10 [Install] WantedBy = multi-user.target å¦‚æœä½ æ¯”è¾ƒè®²ç©¶Linuxå“²å­¦ï¼Œå¯ä»¥æŠŠ ExecStart æ”¹æˆä¸‹é¢è¿™æ ·ï¼Œè¿™æ—¶é…ç½®æ–‡ä»¶ä¸º /etc/mosdns/config.yamlã€‚\n1 ExecStart = /usr/local/bin/mosdns start -c /etc/mosdns/config.yaml å¦‚æœä¸æƒ³ä»¥rootç”¨æˆ·è¿è¡Œ mosdnsï¼Œå¯ä»¥è‡ªè¡Œåˆ›å»ºç”¨æˆ· mosdns å’Œç”¨æˆ·ç»„ mosdnsï¼Œç„¶ååœ¨ /etc/systemd/system/mosdns.service çš„ [Service] å•å…ƒä¸‹å¢åŠ ä¸¤è¡Œï¼ŒåŒæ—¶ä¿®æ”¹ /var/lib/mosdns ä¸ºè¯¥æ™®é€šç”¨æˆ·æ‰€æœ‰ï¼ˆåç»­çš„è„šæœ¬éƒ½æ˜¯ä»¥rootç”¨æˆ·ä¸ºè¿è¡Œç”¨æˆ·è¿›è¡Œçš„ï¼Œå¦‚æœè¦æŠŠ mosdns æœåŠ¡è°ƒæ•´ä¸ºæ™®é€šç”¨æˆ·è¿è¡Œï¼Œè¯·è‡ªè¡Œä¿®æ”¹è„šæœ¬ï¼‰ã€‚\n1 2 User = mosdns Group = mosdns åŒæ ·çš„ï¼Œmosdns è‡ªèº«çš„å‘½ä»¤è¡Œä¹Ÿæ”¯æŒè‡ªåŠ¨åˆ›å»º /etc/systemd/system/mosdns.service çš„ï¼Œä½†ä¸ªäººä¸æ˜¯å¾ˆå»ºè®®ç›´æ¥ä½¿ç”¨ mosdns æœ¬èº«æ‰€æ”¯æŒçš„å‘½ä»¤æ¥å®Œæˆä¸Šè¿°å·¥ä½œï¼Œä»¥ä¸‹ä»…ä¾›å‚è€ƒã€‚\n1 2 3 mosdns service install -d /var/lib/mosdns # éœ€è¦è‡ªè¡Œåˆ›å»ºç›®å½•var/lib/mosdns # æˆ–è€…æŒ‡å®šé…ç½®æ–‡ä»¶ä¸º/etc/mosdns/config.yaml mosdns service install -d /var/lib/mosdns -c /etc/mosdns/config.yaml # éœ€è¦è‡ªè¡Œåˆ›å»ºç›®å½•/etc/mosdnså’Œ/var/lib/mosdns é…ç½® luci-app-mosdns æä¾›çš„ é»˜è®¤é…ç½® å·²ç»æ˜¯ä¸€ä»½éå¸¸å¥½çš„é…ç½®äº†ï¼Œæˆ‘ä»¬ç¨å¾®æ”¹æ”¹å°±èƒ½ç”¨äº†ã€‚è€ƒè™‘åˆ°æˆ‘å·²ç»ä½¿ç”¨ adguardhome æ¥å±è”½å¹¿å‘Šï¼Œä»¥åŠç”¨æ¥è§£ææœ¬åœ°å±€åŸŸç½‘å†…çš„ç§æœ‰IPäº†ï¼Œæ‰€ä»¥åœ¨ mosdns ä¸­æˆ‘ä»¬è¿™å¯èˆå¼ƒè¿™ä¸€éƒ¨åˆ†é…ç½®å†…å®¹ã€‚\nç¨åŠ ä¿®æ”¹åçš„é…ç½®æ–‡ä»¶è§ mosdnsé…ç½®ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œä¼šå¼•ç”¨åˆ°ä»¥ä¸‹æ–‡ä»¶ã€‚å…¶ä¸­ rule æ–‡ä»¶å¤¹ä¸‹çš„å‡ ä»½æ–‡ä»¶å¯ä»¥å‚è€ƒ luci-app-mosdnsçš„é…ç½®ã€‚è‡³äº geodata ä¸‹é¢çš„æ–‡ä»¶ï¼Œä½ å¯ä»¥å…ˆä¸‹è½½è¿™å‡ ä¸ªå¹¶éæ˜¯æœ€æ–°çš„æ–‡ä»¶ï¼Œå…ˆä¿å­˜åˆ°è¯¥ç›®å½•ä¸‹ï¼šgeoip_cn.txtã€geosite_cn.txtã€geosite_geolocation-!cn.txtï¼Œæˆ‘ä»¬å°†åœ¨ æœ¬ç³»åˆ—ç¬¬ï¼ˆä¸ƒï¼‰ç¯‡ ç”¨å®šæ—¶ä»»åŠ¡ç³»ç»Ÿæ¥å®šæ—¶æ›´æ–°ã€‚\n1 2 3 4 5 6 7 8 9 10 /var/lib/mosdns â”œâ”€â”€ geodata â”‚ â”œâ”€â”€ geoip_cn.txt # ä¸­å›½å¤§é™†IP â”‚ â”œâ”€â”€ geosite_cn.txt # ä¸­å›½å¤§é™†ç½‘å€ â”‚ â””â”€â”€ geosite_geolocation-!cn.txt # éä¸­å›½å¤§é™†ç½‘å€ â””â”€â”€ rule â”œâ”€â”€ ddnslist.txt # ä½ çš„DDNSä¸»åŸŸå â”œâ”€â”€ greylist.txt # ä¼˜å…ˆé€šè¿‡clashä»£ç†è·å–DNSè§£æçš„åŸŸå â”œâ”€â”€ local-ptr.txt # ptrè®°å½• â””â”€â”€ whitelist.txt # ä¼˜å…ˆé€šè¿‡ä¸­å›½å¤§é™†DNSæœåŠ¡å™¨è·å–è§£æçš„åŸŸå åœ¨é…ç½®ä¸­ï¼Œç”±äº fallback è¿™ä¸ªåå¤‡ tag çš„å­˜åœ¨ï¼Œä¹Ÿèƒ½ä¿éšœclashåœ¨å‡ºç°æ•…éšœæ—¶ï¼Œä½¿ç”¨å›½å†…DNSæœåŠ¡å™¨è¿›è¡Œè§£æã€‚è¿™ä¸€ç‚¹ï¼Œå†åŠ ä¸Š adguardhome æœ¬èº«ä¹Ÿè®¾ç½®äº†åå¤‡èŠ‚ç‚¹ï¼Œä¸¤å±‚ä¿éšœä¸å› clashæœåŠ¡æ•…éšœè€Œå½±å“DNSçš„è§£æã€‚\nä½ ä¹Ÿå¯ä»¥å‚è€ƒ mosdns wiki æ¥è¿›è¡Œæ›´åŠ å®šåˆ¶åŒ–çš„é…ç½®ã€‚\nå¯ç”¨æœåŠ¡ å®Œå…¨é…ç½®å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® /etc/systemd/system/mosdns.service ä¸ºå¼€å¯è‡ªåŠ¨å¯åŠ¨ï¼Œå¹¶ç«‹å³å¯åŠ¨èµ·æ¥ï¼ˆè¿™æ—¶ä¸Šæ¸¸clashå°šæœªé…ç½®ï¼Œä½ å¯ä»¥ç­‰åç»­é…ç½®å®Œå¥½ä»¥åå†æ¥å¯åŠ¨å®ƒï¼‰ã€‚\n1 systemctl enable --now mosdns.service åç»­å¦‚æƒ³æŸ¥çœ‹æ—¥å¿—ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨Debianè‡ªå¸¦çš„å·¥å…·æ¥æŸ¥çœ‹ï¼š\n1 journalctl -efu mosdns.service å¦‚æœæƒ³è¦é‡å¯ï¼š\n1 systemctl restart mosdns.service clash ç”±äºclashä¸ä»…ä»…åªæ¶‰åŠDNSæœåŠ¡ï¼Œè¿˜æ¶‰åŠåˆ°ä»£ç†ã€nftablesã€IPè§„åˆ™ç›¸å…³å†…å®¹ï¼Œæˆ‘ä»¬å°†åœ¨æ¥ä¸‹æ¥çš„å•ç¯‡ æœ¬ç³»åˆ—ç¬¬ï¼ˆå››ï¼‰ç¯‡ ä¸­è¯¦ç»†è¯¦è§£ã€‚\nç³»åˆ— ä¸€ã€å­ç½‘åˆ’åˆ†åŠç½‘ç»œæ‹“æ‰‘è®¾è®¡ã€çˆ±å¿«ä¸Šçš„è®¾ç½®\näºŒã€å®‰è£…Debianã€åˆå§‹ç½‘ç»œé…ç½®ã€å¿…è¦è½¯ä»¶å®‰è£…\nä¸‰ã€AdGuardHomeã€mosdnsã€clashåœ¨DNSçš„å…³ç³»ï¼Œä»¥åŠAdGuardHomeã€mosdnsçš„å®‰è£…å’Œé…ç½®\nå››ã€clashé€æ˜ä»£ç†(Tproxy)çš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„IPè§„åˆ™å’Œnftablesè§„åˆ™\näº”ã€UnblockNeteaseMusicçš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„çš„nftablesè§„åˆ™ã€å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨\nå…­ã€subconverterçš„å®‰è£…å’Œé…ç½®\nä¸ƒã€é…ç½®nginxä¸ºæ–‡ä»¶æœåŠ¡å™¨ã€è‡ªåŠ¨æ›´æ–°clashè®¢é˜…ã€è‡ªåŠ¨ç”Ÿæˆéœ€è¦çš„æ–‡ä»¶\nå…«ã€é…ç½®æ—è·¯ç”±çš„SNMPDæœåŠ¡ã€é…ç½®ä¸»è·¯ç”±çš„è·¨ä¸‰å±‚åº”ç”¨\nä¹ã€ç›‘æµ‹é™Œç”Ÿè®¾å¤‡\nåã€å¿«é€Ÿç®€å•çš„å®‰è£…å’Œæ›´æ–°è½¯ä»¶åŒ…\nåä¸€ã€DNSã€ç½‘ç»œæ•…éšœç­‰çš„æ€»ç»“ï¼Œä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹\n","date":"2023-10-21T13:00:00+08:00","image":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E4%B8%89/DNS_hu2e0e1a7a45ea46d8799fa74fe7f087e1_104181_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E4%B8%89/","title":"æˆ‘çš„å®¶åº­ç½‘ç»œè®¾è®¡æ€è·¯ï¼Œå¼€å¯debiançš„æ—è·¯ç”±ä¹‹è·¯ï¼ˆä¸‰ï¼‰"},{"content":"å®‰è£… å®‰è£…Debiançš„è¯¦ç»†è¿‡ç¨‹æˆ‘å°±ä¸æäº†ï¼Œç½‘ä¸Šçš„æ•™ç¨‹å¾ˆå¤šï¼Œæˆ‘åªæä¸€éƒ¨åˆ†å†…å®¹ã€‚å¦‚æœå¯¹å…¶ä»–å®‰è£…å†…å®¹çœŸæœ‰éœ€è¦ï¼Œå¯ä»¥åœ¨æœ¬æ–‡ä¸‹æ–¹è¯„è®ºåŒºæå‡ºã€‚\nä¸»æœºåå’ŒåŸŸå åœ¨é…ç½®ä¸»æœºåå’ŒåŸŸåæ—¶ï¼Œå¯ä»¥è€ƒè™‘è®¾ç½®ä¸ºä½ çš„DDNSåŸŸåçš„ä¸‰çº§åŸŸåä¸‹ï¼Œè¯¦è§ä¸‹é¢ä¸¤å›¾ï¼Œåç»­å°±å¯ä»¥ä½¿ç”¨gate.evine.comæ¥è®¿é—®æ—è·¯ç”±ã€‚\nå®‰è£…å“ªäº›å†…å®¹ ä»…å®‰è£…æ ¸å¿ƒç³»ç»Ÿå’ŒSSHæœåŠ¡ç«¯ï¼Œä¸è¦å®‰è£…å…¶ä»–ä¸œè¥¿ï¼Œè¿â€œæ ‡å‡†ç³»ç»Ÿå·¥å…·â€éƒ½ä¸éœ€è¦é€‰æ‹©ã€‚\né¦–æ¬¡å®‰è£…å é¦–æ¬¡å®‰è£…å®Œæˆåè¿›å…¥ç³»ç»Ÿï¼Œç³»ç»Ÿè¿›ç¨‹åªæœ‰è¿™äº›ï¼ˆè¯·æ‰‹åŠ¨å®‰è£…htopï¼šapt install htopï¼‰ï¼Œéå¸¸æ¸…çˆ½ã€‚ä¸‹å›¾æ˜¯è™šæ‹Ÿæœºå®‰è£…çš„ï¼Œå¹¶ä¸”åˆ›å»ºæ—¶å¯ç”¨äº†qemu-guest-agentï¼Œæ‰€ä»¥é¢å¤–æœ‰ä¸ªqemu-gaè¿›ç¨‹ï¼Œç‰©ç†æœºå®‰è£…ç”šè‡³è¿è¿™ä¸ªè¿›ç¨‹éƒ½æ²¡æœ‰ã€‚åœ¨æˆ‘ä»¬è¿˜æ²¡æœ‰é…ç½®å…¶ä»–æœåŠ¡æ—¶ï¼Œå†…å­˜ä¹Ÿåªå ç”¨äº†120Må·¦å³ï¼Œä¹Ÿå¹¶æ²¡æœ‰æ¯”OpenWRTå¤šå¤šå°‘ã€‚\né…ç½® SSHD å¦‚æœä½ æƒ³ä»¥rootç”¨æˆ·è¿›è¡Œsshç™»é™†ï¼Œå¯ä»¥å°†/etc/ssh/sshd_configä¸­çš„#PermitRootLogin prohibit-passwordä¿®æ”¹ä¸ºPermitRootLogin yesï¼Œå¦‚æœè¦ä¿®æ”¹sshç«¯å£ï¼Œå¯ä»¥å°†#Port 22ä¿®æ”¹ä¸ºPort 2222ï¼ˆ2222ç«¯å£ä»…ä¸ºç¤ºä¾‹ï¼‰ã€‚æœ€åé‡å¯ä¸€ä¸‹sshdæœåŠ¡systemctl restart sshd.serviceã€‚\nä½ ä¹Ÿå¯ä»¥å…³é—­å¯†ç ç™»é™†ä»…å…è®¸ç§é’¥ç™»é™†ï¼Œå°†#PasswordAuthentication yesä¿®æ”¹ä¸ºPasswordAuthentication noå³å¯ï¼Œä¸è¿‡åœ¨å…³é—­å‰è¯·å…ˆä»¥700æƒé™åˆ›å»ºå¥½$HOME/.sshæ–‡ä»¶å¤¹ï¼Œä»¥600æƒé™ä¸Šä¼ å…¬é’¥$HOME/.ssh/authorized_keysï¼Œå¹¶åœ¨å…¶ä»–åœ°æ–¹ä¿å­˜å¥½ç§é’¥ã€‚\né…ç½®ç½‘ç»œ è¾“å…¥ nano /etc/network/interfacesï¼Œç¼–è¾‘ä¸ºä»¥ä¸‹å†…å®¹ï¼Œç¼–è¾‘å¥½åä»¥ Ctrl+X é€€å‡ºã€‚è¯´æ˜ï¼š\nå…¶ä¸­çš„ ens18 æ˜¯æˆ‘çš„ç½‘å¡åï¼Œå¯ä»¥è¾“å…¥ ip a è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹åˆ°ã€‚\nIPv4åœ°å€è¿›è¡Œé™æ€é…ç½® inet staticï¼Œè®¾ç½®è‡ªèº«çš„IPå’Œæ©ç ä¸º 10.0.0.2/24ï¼Œç½‘å…³ä¸º 10.0.0.1ï¼Œåç»­æˆ‘è¿˜å°†ä»¥adguardhomeå’Œmosdnsåœ¨æ—è·¯ç”±ä¸­è‡ªå»ºDNSæœåŠ¡ï¼Œæ‰€ä»¥è®¾ç½®é»˜è®¤DNSæœåŠ¡å™¨ä¸º 127.0.0.1ã€‚ä¸è¿‡ä¸‹é¢çš„ç¤ºä¾‹æ˜¯æœ€ç»ˆçš„çŠ¶æ€ï¼Œæˆ‘ä»¬åœ¨é…ç½®æ—è·¯ç”±è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç§‘å­¦ä¸Šç½‘ç¯å¢ƒï¼Œæ‰€ä»¥åœ¨å®Œå…¨é…ç½®å¥½æ—è·¯ç”±ä»¥å‰ï¼Œç½‘å…³ gateway å’Œé»˜è®¤DNSæœåŠ¡å™¨ dns-nameservers å»ºè®®å…ˆæš‚æ—¶è®¾ç½®ä¸ºå±€åŸŸç½‘ä¸­å¦ä¸€å°å¯ä»¥å®ç°ç§‘å­¦ä¸Šç½‘çš„OpenWRTï¼Œåœ¨å®Œå…¨é…ç½®å¥½åå†æ”¹æˆä¸‹é¢è¿™æ ·ã€‚\nIPv6åœ°å€é‡‡ç”¨DHCPv6å½¢å¼ï¼Œé…ç½®ä¸º inet6 dhcpï¼Œè¿™ä»…ä»…è¡¨ç¤ºæ—è·¯ç”±è‡ªèº«å¯ä»¥ä»ä¸»è·¯ç”±çˆ±å¿«å¤„è·å–IPv6åœ°å€ï¼Œå¹¶ä¸ä»£è¡¨å®ƒå°†ä½œä¸ºIPv6ç½‘å…³ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # This file describes the network interfaces available on your system # and how to activate them. For more information, see interfaces(5). source /etc/network/interfaces.d/* # The loopback network interface auto lo iface lo inet loopback # The primary network interface # allow-hotplug ens18 auto ens18 iface ens18 inet static address 10.0.0.2/24 network 10.0.0.0 broadcast 10.0.0.255 gateway 10.0.0.1 dns-nameservers 127.0.0.1 iface ens18 inet6 dhcp ä¿å­˜å¥½è¯¥æ–‡ä»¶åï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤é‡å¯ç½‘ç»œæœåŠ¡ï¼š\n1 systemctl restart networking.service ç„¶åä½ å°±ä¼šå‘ç°ç³»ç»Ÿå¯åŠ¨äº†DHCPv6å®¢æˆ·ç«¯ä»¥è·å–IPv6åœ°å€ã€‚ä¸è¿‡è™½ç„¶é…ç½®äº†é™æ€IPv4åœ°å€ï¼Œä½†éœ€è¦åœ¨é‡å¯ç³»ç»Ÿä»¥åï¼Œdhclient -4è¿™ä¸ªç”¨æ¥è·å–DHCPv4åœ°å€çš„è¿›ç¨‹æ‰ä¼šæ¶ˆå¤±ã€‚\næŸ¥çœ‹IPï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 ip a ## è¾“å‡ºå¯è§ipå·²ç»æ˜¯æ‰€è®¾ç½®çš„äº† 1: lo: \u0026lt;LOOPBACK,UP,LOWER_UP\u0026gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host noprefixroute valid_lft forever preferred_lft forever 2: ens18: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc mq state UP group default qlen 1000 link/ether 0e:â– â– :â– â– :â– â– :â– â– :â– â–  brd ff:ff:ff:ff:ff:ff altname enp0s18 inet 10.0.0.2/24 brd 10.0.0.255 scope global ens18 valid_lft forever preferred_lft forever inet6 240e:â– â– â– :â– â– â– â– :â– â– â– â– ::dfc/128 scope global dynamic valid_lft 5242sec preferred_lft 5242sec inet6 240e:â– â– â– :â– â– â– â– :â– â– â– â– :â– â– â– :â– â– â– â– :â– â– â– â– :ff2f/64 scope global dynamic mngtmpaddr valid_lft 215432sec preferred_lft 129032sec inet6 fe80::â– â– â– :â– â– â– â– :â– â– â– â– :ff2f/64 scope link valid_lft forever preferred_lft forever é…ç½®ç½‘å…³åŠŸèƒ½ ç”±äºæˆ‘ä»…å°†æ—è·¯ç”±ä½œä¸ºIPv4çš„ç½‘å…³ï¼ŒIPv6ç½‘å…³ä»ç„¶ä¸ºä¸»è·¯ç”±çˆ±å¿«ï¼Œæ‰€ä»¥åªéœ€è¦é…ç½®IPv4çš„è½¬å‘ã€‚\n1 2 echo \u0026#34;net.ipv4.ip_forward = 1\u0026#34; \u0026gt;\u0026gt; /etc/sysctl.conf sysctl -p å®‰è£…ä¸€äº›åç»­å¿…è¦çš„è½¯ä»¶ åç»­æˆ‘ä»¬ä¼šç”¨åˆ°ä¸€äº›è½¯ä»¶åŒ…ï¼Œåœ¨è¿™é‡Œå¯ä»¥å…ˆå®‰è£…å¥½ã€‚å¦‚æœä½ æš‚æ—¶ä¸æƒ³å¢åŠ ç³»ç»Ÿä½“ç§¯ï¼Œä¹Ÿå¯ä»¥æ ¹æ®ä¸‹æ–¹çš„æ³¨é‡Šé€‰æ‹©æ€§çš„å®‰è£…ï¼Œæˆ–è€…åœ¨åç»­é…ç½®æ—è·¯ç”±çš„è¿‡ç¨‹ä¸­æ ¹æ®éœ€è¦å†è¿›è¡Œå®‰è£…ã€‚\nä½ å¯ä»¥å…ˆå°†æºæ›´æ”¹ä¸ºå›½å†…æºåå†å®‰è£…ä¸‹é¢çš„åŒ…ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 apt update ## åç»­ä¼šç”¨åˆ°çš„ apt install -y --no-install-recommends \\ arp-scan `# arpæ‰«æç”¨çš„ï¼Œåç»­ç›‘æµ‹å¤–æ¥é™Œç”Ÿè®¾å¤‡ä¼šç”¨åˆ°` \\ bind9-dnsutils `# dnså·¥å…·` \\ binutils `# äºŒè¿›åˆ¶æ–‡ä»¶å¤„ç†å·¥å…·ï¼Œåœ¨æœ¬ç³»ç»Ÿæœ€åçš„è„šæœ¬æ±‡æ€»ä¸­ä¼šç”¨åˆ°` \\ bzip2 `# è§£å‹bz2` \\ curl `# ä¸‹è½½å·¥å…·` \\ git `# ä»githubä¸‹è½½ä¸œè¥¿` \\ htop `# ç›‘æµ‹è¿›ç¨‹` \\ jq `# åç»­åœ¨å„ç§è„šæœ¬ä¸­ã€å‘½ä»¤ä¸­è§£æjsonä¼šç”¨åˆ°` \\ lsof `# åç»­ç›‘æµ‹æ‰“å¼€çš„TCP/UDPç«¯å£ä¼šç”¨åˆ°` \\ nginx `# åç»­é…ç½®æ–‡ä»¶æœåŠ¡å™¨ä¼šç”¨åˆ°` \\ libnginx-mod-http-headers-more-filter `# nginxçš„ä¸€ä¸ªæ¨¡å—ï¼Œåç»­å¦‚æœç”¨ä¸åˆ°å¯ä»¥ä¸å®‰è£…` \\ openssh-server `# å®‰è£…Debianæ—¶åº”è¯¥å·²ç»å®‰è£…å¥½äº†` \\ snmpd `# è§£å†³çˆ±å¿«æŸ¥åˆ°ä¸åˆ°ä»¥æ—è·¯ç”±ä¸ºç½‘å…³çš„è®¾å¤‡ä¿¡æ¯çš„é—®é¢˜` \\ sudo `# å¦‚æœä¸æ˜¯rootç”¨æˆ·ç™»é™†çš„è¯ï¼Œéœ€è¦è¿™ä¸ª` \\ unzip `# è§£å‹zip` \\ wget `# ä¸‹è½½å·¥å…·` \\ xz-utils `# è§£å‹xz` \\ yt-dlp `# youtubeä¸‹è½½å·¥å…·ï¼Œunblockneteasemusicçš„ä¾èµ–é¡¹` ## ä¸€äº›å¥½ç”¨çš„å·¥å…·ï¼ŒæŒ‰éœ€å®‰è£… apt install -y --no-install-recommends \\ duf `# ç¾è§‚çš„ç£ç›˜ä½¿ç”¨æƒ…å†µæŸ¥çœ‹å·¥å…·` \\ etherwake `# ç½‘ç»œå”¤é†’ç”¨çš„` \\ ethtool `# ç½‘å¡å·¥å…·` \\ fzf `# é…åˆzshæ’ä»¶fzfå’Œzsh-interactive-cd` \\ iftop `# ç›‘æµ‹ç½‘ç»œæµé‡` \\ iperf3 `# æµ‹é€Ÿå·¥å…·` \\ lsd `# æ¯”lsç¾è§‚` \\ gdu `# ç¾è§‚çš„æŸ¥çœ‹æ–‡ä»¶å¤¹ä½“ç§¯å¤§å°çš„å·¥å…·` \\ qemu-guest-agent `# qemuå®¿ä¸»æœºç®¡ç†è™šæ‹Ÿæœºçš„å·¥å…·` \\ rsync `# åŒæ­¥å·¥å…·` \\ socat `# è‡ªåŠ¨ç­¾å‘sslè¯ä¹¦çš„å·¥å…·acme.shçš„ä¾èµ–` \\ tmux `# è™šæ‹Ÿå±å¹•ï¼Œè¿è¡Œé•¿ä»»åŠ¡çš„å¥½å¸®æ‰‹` \\ zoxide `# é…åˆzshçš„æ’ä»¶zoxide` \\ zsh `# ä¸€ä¸ªå¥½ç”¨çš„shell` æ€»ç»“ æˆªæ­¢ç›®å‰ï¼Œæˆ‘ä»¬å®‰è£…å¥½äº†Debianï¼Œå¹¶é…ç½®äº†å®ƒçš„åŸºç¡€ç½‘ç»œæœåŠ¡ï¼Œå¼€å¯äº†IPv4æµé‡è½¬å‘ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå®ƒå·²ç»å¯ä»¥åšä¸€ä¸ªæ—è·¯ç”±äº†ã€‚ä¸è¿‡ï¼Œå¦‚æœä»…ä»…æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬è¦è¿™æ—è·¯ç”±æœ‰ä½•ç”¨ï¼ï¼ï¼æ‰€ä»¥ï¼Œæˆ‘å°†åœ¨æ¥ä¸‹æ¥çš„ è½¯è·¯ç”±ç³»åˆ—æ–‡ç«  ç»§ç»­è®¾ç½®adguardhomeã€mosdnsã€clashã€nftablesã€subconverterã€unblockneteasemusicã€snmpdã€cronã€nginxç­‰ç­‰ï¼Œè®©å®ƒæˆä¸ºä¸€å°åˆæ ¼çš„æ—è·¯ç”±ã€‚\nç³»åˆ— ä¸€ã€å­ç½‘åˆ’åˆ†åŠç½‘ç»œæ‹“æ‰‘è®¾è®¡ã€çˆ±å¿«ä¸Šçš„è®¾ç½®\näºŒã€å®‰è£…Debianã€åˆå§‹ç½‘ç»œé…ç½®ã€å¿…è¦è½¯ä»¶å®‰è£…\nä¸‰ã€AdGuardHomeã€mosdnsã€clashåœ¨DNSçš„å…³ç³»ï¼Œä»¥åŠAdGuardHomeã€mosdnsçš„å®‰è£…å’Œé…ç½®\nå››ã€clashé€æ˜ä»£ç†(Tproxy)çš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„IPè§„åˆ™å’Œnftablesè§„åˆ™\näº”ã€UnblockNeteaseMusicçš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„çš„nftablesè§„åˆ™ã€å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨\nå…­ã€subconverterçš„å®‰è£…å’Œé…ç½®\nä¸ƒã€é…ç½®nginxä¸ºæ–‡ä»¶æœåŠ¡å™¨ã€è‡ªåŠ¨æ›´æ–°clashè®¢é˜…ã€è‡ªåŠ¨ç”Ÿæˆéœ€è¦çš„æ–‡ä»¶\nå…«ã€é…ç½®æ—è·¯ç”±çš„SNMPDæœåŠ¡ã€é…ç½®ä¸»è·¯ç”±çš„è·¨ä¸‰å±‚åº”ç”¨\nä¹ã€ç›‘æµ‹é™Œç”Ÿè®¾å¤‡\nåã€å¿«é€Ÿç®€å•çš„å®‰è£…å’Œæ›´æ–°è½¯ä»¶åŒ…\nåä¸€ã€DNSã€ç½‘ç»œæ•…éšœç­‰çš„æ€»ç»“ï¼Œä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹\n","date":"2023-10-20T00:00:00+08:00","image":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E4%BA%8C/dhcpv6-client_hu341c4831b38005b757fc546cdf02cd89_805455_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E4%BA%8C/","title":"æˆ‘çš„å®¶åº­ç½‘ç»œè®¾è®¡æ€è·¯ï¼Œå¼€å¯debiançš„æ—è·¯ç”±ä¹‹è·¯ï¼ˆäºŒï¼‰"},{"content":"å‰è¨€ ä¹‹å‰æˆ‘ç”¨çš„æ˜¯çˆ±å¿«ä½œä¸ºä¸»è·¯ç”±ï¼ŒOpenWRTä½œä¸ºæ—è·¯ç”±ï¼Œæ—è·¯ç”±ä¸Šä¼šè·‘ä¸€äº›åªæœ‰å®ƒèƒ½è·‘è€Œä¸»è·¯ç”±ä¸Šä¸èƒ½è·‘çš„æœåŠ¡ã€‚å°½ç®¡OpenWRTè¿˜æ˜¯æˆ‘è‡ªå·±å®šåˆ¶åŒ–ç¼–è¯‘çš„ï¼ŒæŠ›å¼ƒäº†è®¸å¤šæˆ‘ä¸ä½¿ç”¨çš„åŠŸèƒ½ï¼Œä½†å¯èƒ½å› ä¸ºè¦ç”¨çš„æœåŠ¡ä»ç„¶æœ‰äº›å¤šï¼Œå¹¶ä¸”å®ƒä»¬ä¹‹é—´éƒ½ä¼šæ“ä½œnetfilterï¼Œå¯¼è‡´ç½‘ç»œç»å¸¸å‡ºé—®é¢˜ã€‚æ‰€ä»¥ï¼Œç”¨OpenWRTä½œä¸ºæ—è·¯ç”±çš„æ—¶å€™ï¼Œæˆ‘ä»æ¥ä¸æ•¢åœ¨çˆ±å¿«ä¸Šç›´æ¥æŒ‡å®šå…¨éƒ¨è®¾å¤‡çš„ç½‘å…³å’ŒDNSä¸ºOpenWRTï¼ˆç½‘å…³å’ŒDNSä»ç„¶æ˜¯çˆ±å¿«è‡ªå·±ï¼‰ï¼Œåªæ•¢åœ¨æˆ‘è‡ªå·±çš„è®¾å¤‡ä¸Šæ‰‹åŠ¨æŒ‡å®šç½‘å…³å’ŒDNSä¸ºOpenWRTã€‚ä½†è¿™é•¿ä¹…ç”¨èµ·æ¥ä¸æ˜¯ä¸ªåŠæ³•ï¼Œæ‰€ä»¥å¹²è„†ä¸‹å®šå†³å¿ƒï¼ŒæŠ›å¼ƒOpenWRTï¼Œå®Œå…¨å¯ç”¨Debianæ¥ä½œä¸ºæ—è·¯ç”±ã€‚\nç½‘ç»œè®¾è®¡æ€è·¯ ä¸ºä»€ä¹ˆä¸ç›´æ¥é‡‡ç”¨Debianä½œä¸ºä¸»è·¯ç”±å‘¢ï¼Œæ¯•ç«Ÿçˆ±å¿«ä½œä¸ºä¸“ä¸šçš„è·¯ç”±ç³»ç»Ÿï¼Œè¿˜æ˜¯æœ‰å…¶ä¾¿åˆ©æ€§çš„ï¼ŒæŸ¥çœ‹ç›¸å…³æ•°æ®ä¹Ÿæ¯”è¾ƒå®¹æ˜“ï¼Œå¦‚æœç›´æ¥é‡‡ç”¨Debianä½œä¸ºä¸»è·¯ç”±çš„è¯ï¼Œå°†ä¼šæœ‰å¤§é‡çš„é…ç½®å·¥ä½œï¼Œå¹¶ä¸”æƒ³è¦ä¾¿æ·çš„æŸ¥çœ‹å„é¡¹æ•°æ®ä¹Ÿä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚\nå¹¶ä¸”ï¼Œæˆ‘è¿˜éœ€è¦æ—è·¯ç”±çš„å­˜åœ¨ä¸èƒ½å½±å“ç«¯å£è½¬å‘ï¼Œå¿…é¡»ç”±ä¸»è·¯ç”±çˆ±å¿«ç›´æ¥å°†ç«¯å£è½¬å‘åˆ°NASåŠå…¶ä»–æœåŠ¡ï¼Œä¸èƒ½å…ˆè½¬å‘åˆ°æ—è·¯ç”±å†ç»æ—è·¯ç”±å†è½¬å‘ä¸€æ¬¡ã€‚\né‚£ä¹ˆï¼ŒåŸºäºçˆ±å¿«ä½œä¸ºä¸»è·¯ç”±ï¼ŒDebianä½œä¸ºæ—è·¯ç”±ï¼Œæˆ‘å°†ä»¥ä¸‹é¢çš„æ‹“æ‰‘å›¾å¼€å±•ã€‚\nä¸Šå›¾ä¸­ä»…æ¶‰åŠäº†çˆ±å¿«ä¸­lan1çš„è®¾ç½®ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨IPTVï¼Œè¿˜å¯ä»¥å‚è€ƒæˆ‘çš„è¿™ç¯‡æ–‡ç« æ¥è®¾ç½®ä¸€ä¸‹lan2ã€‚\nå…³äºIPv6 IPv6æ˜¯æœªæ¥çš„è¶‹åŠ¿ï¼Œæˆ‘çš„ISPä¹Ÿå·²ç»æ”¯æŒIPv6äº†ï¼Œå¹¶ä¸”ä¸ç®¡æ˜¯DDNSè¿˜æ˜¯PTï¼Œæœ‰IPv6çš„åŒæ ˆæ€»å½’æ˜¯å¥½çš„ã€‚ä½†åˆåŒæ—¶ï¼Œæˆ‘æ‰€ä½¿ç”¨çš„ç§‘å­¦ä¸Šç½‘æœåŠ¡å¹¶ä¸æ”¯æŒIPv6ï¼Œæ‰€ä»¥ï¼Œæˆ‘éœ€è¦åœ¨10.0.0.0/24è¿™ä¸ªç§‘å­¦ä¸Šç½‘çš„ç½‘æ®µä¿ç•™å›½å†…ç½‘ç«™çš„IPv6è§£æï¼Œå±è”½æ‰å›½å¤–ç½‘ç«™IPv6çš„è§£æã€‚è¿™å°±å¾—é æˆ‘åœ¨æ—è·¯ç”±10.0.0.2ä¸Šè‡ªå»ºDNSæœåŠ¡äº†ï¼Œä¸æ­¤åŒæ—¶ï¼Œå¦‚æœä¸å…³é—­çˆ±å¿«IPv6çš„DNSæœåŠ¡ï¼Œç”±äºæˆ‘å¹¶æ²¡æœ‰è®¾ç½®æ—è·¯ç”±ä½œä¸ºIPv6ç½‘å…³ï¼Œä»ç„¶ä½¿ç”¨ä¸»è·¯ç”±ä½œä¸ºIPv6ç½‘å…³ï¼Œè¿™æ ·çš„è¯ï¼Œç»ˆç«¯å°±ä¸ä»…ä»…ä»æˆ‘çš„è‡ªå»ºDNSæœåŠ¡æ¥è·å–è§£æäº†ï¼Œä¹Ÿä¼šä»IPv6 DNSæœåŠ¡å™¨æ¥è·å–ï¼Œæ‰€ä»¥è¿˜éœ€è¦å…³é—­çˆ±å¿«IPv6çš„DNSã€‚è‡ªå»ºDNSæœåŠ¡ä¸€æ ·å¯ä»¥è§£æIPv6åœ°å€ï¼Œä»¥IPv6è®¿é—®å›½å†…ç½‘ç«™ä¸æ˜¯é—®é¢˜ã€‚\nè¯´æ˜ ç½‘æ®µçš„åˆ’åˆ† 10.0.0.0/24ä½œä¸ºç§‘å­¦ä¸Šç½‘çš„å­ç½‘ï¼Œè¯¥å­ç½‘ä¸‹å…¨éƒ¨è®¾å¤‡é»˜è®¤ç›´æ¥å¯ä»¥ç§‘å­¦ä¸Šç½‘ã€‚æ³¨æ„å…¶ä¸­æ—è·¯ç”±çš„IPæ˜¯10.0.0.2/24\n10.0.1.0/24ä½œä¸ºæ— éœ€ç§‘å­¦ä¸Šç½‘çš„å­ç½‘ï¼Œè¯¥å­ç½‘ä¸‹å…¨éƒ¨è®¾å¤‡é»˜è®¤ä¸å¯ä»¥ç§‘å­¦ä¸Šç½‘ã€‚\nçˆ±å¿«ä¸­çš„è®¾ç½® lan1è®¾ç½®10.0.0.1ä¸ºä¸»IPï¼Œå­ç½‘æ©ç ä¸º/24ï¼ŒåŒæ—¶è®¾ç½®10.0.1.1ä¸ºæ‰©å±•IPï¼Œå­ç½‘æ©ç åŒæ ·ä¸º/24ï¼Œè¯¦è§ä¸‹å›¾ã€‚ä½ ä¹Ÿå¯ä»¥è®¾ç½®æ›´å¤šçš„æ‰©å±•IPæ¥åˆ†åˆ«ç®¡ç†ä¸åŒçš„ç½‘æ®µåŠè®¾å¤‡ï¼ˆæ¯”å¦‚å†å•ç‹¬è®¾ç½®ä¸€ä¸ªå­ç½‘ä¸ºè®¿å®¢ç½‘ç»œï¼‰ã€‚ çˆ±å¿«çš„DHCPæœåŠ¡å™¨ä¸­åˆ†åˆ«è®¾ç½®ä¸¤ä¸ªå­ç½‘çš„æ©ç ã€ç½‘å…³å’ŒDNSï¼Œå…¶ä¸­10.0.0.3-10.0.0.254çš„ç½‘å…³å’ŒDNSéƒ½æ˜¯æ—è·¯ç”±çš„IP10.0.0.2(è¯·åœ¨å®Œæˆå…¨éƒ¨æ—è·¯ç”±é…ç½®ä»¥åå†åœ¨çˆ±å¿«ä¸­è®¾ç½®æˆè¿™æ ·ï¼Œæ²¡é…ç½®å¥½æ—è·¯ç”±å‰å°±è®¾ç½®æˆè¿™æ ·ä¼šä¸Šä¸äº†ç½‘)ï¼›10.0.1.2-10.0.1.254è¿™ä¸€æ®µçš„ç½‘å…³æ˜¯çˆ±å¿«çš„æ‰©å±•IP10.0.1.1ï¼ŒDNSå¯ä»¥è®¾ç½®ä¸ºå½“åœ°å“åº”æœ€å¿«çš„DNSæœåŠ¡å™¨ï¼Œå¦‚æœçˆ±å¿«å¼€å¯äº†DNSåŠ é€Ÿï¼Œä¹Ÿå¯ä»¥å°†çˆ±å¿«çš„æ‰©å±•IP10.0.1.1è®¾ç½®ä¸ºè¿™ä¸€ç½‘æ®µçš„DNSæœåŠ¡å™¨ã€‚ ä¸ºå…¨éƒ¨è®¾å¤‡è®¾ç½®DHCPé™æ€åˆ†é…ã€‚å¦‚æœä½ éœ€è¦ä¸ºåç»­é¦–æ¬¡æ¥å…¥ç½‘ç»œçš„è®¾å¤‡åˆ†é…åˆ°10.0.1.2-10.0.1.254ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥åˆ†é…åˆ°10.0.0.3-10.0.0.254ç½‘æ®µä¸­ï¼Œä½ å¯ä»¥åœ¨DHCPé™æ€åˆ†é…ä¸­ï¼ŒæŠŠé‚£äº›è¿˜æ²¡æœ‰è®¾å¤‡å ç”¨çš„IPç”¨å‡MACå…ˆå ç”¨ç€ï¼ŒMACæ‰¹é‡ç”Ÿæˆå·¥å…·åœ¨æ­¤ï¼Œæ‰¹é‡ç”Ÿæˆåç²˜è´´åœ¨ä»çˆ±å¿«DHCPé™æ€åˆ†é…å¯¼å‡ºçš„csvæ–‡ä»¶ä¸­ï¼Œå†å¯¼å…¥å›å»å°±å¥½ã€‚æˆ–è€…ä¹Ÿå¯ä»¥äº¤æ¢ä¸€ä¸‹10.0.0.0/24ä½œä¸ºæ— éœ€ç§‘å­¦ä¸Šç½‘çš„å­ç½‘ï¼Œ10.0.1.0/24ä½œä¸ºéœ€è¦ç§‘å­¦ä¸Šç½‘çš„å­ç½‘ã€‚\nå…³é—­IPv6çš„DNSã€‚åç»­æˆ‘å°†åœ¨æ—è·¯ç”±ä¸Šè‡ªå»ºDNSæœåŠ¡ï¼Œæ‰€ä»¥å¿…é¡»å…³é—­çˆ±å¿«IPv6çš„DNSé€šå‘Šã€‚\nå…¨éƒ¨å­ç½‘å†…çš„è®¾å¤‡ä¸å†å•ç‹¬è®¾ç½®é˜²ç«å¢™ï¼Œå…¨éƒ¨åœ¨ä¸»è·¯ç”±çˆ±å¿«ä¸­è®¾ç½®ï¼Œå…·ä½“çš„æ•™ç¨‹å¯ä»¥è§è¿™ä¸¤ç¯‡æ–‡ç« ï¼šIPv4ã€IPv6ã€‚\nç½‘å…³ä¸ºæ—è·¯ç”±çš„è®¾å¤‡åœ¨çˆ±å¿«çš„ç»ˆç«¯ç›‘æ§ä¸­ï¼Œå…¨éƒ¨æ˜¾ç¤ºä¸ºæ—è·¯ç”±çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦è®¾ç½®çˆ±å¿«çš„â€œé«˜çº§åº”ç”¨-\u0026gt;è·¨ä¸‰å±‚åº”ç”¨â€ï¼Œå…·ä½“å¦‚ä½•è®¾ç½®å› ä¸ºè¿˜æ¶‰åŠåˆ°æ—è·¯ç”±ä¸­çš„è®¾ç½®ï¼Œæˆ‘å°†åœ¨æ¥ä¸‹æ¥çš„ æœ¬ç³»åˆ—ç¬¬ï¼ˆå…«ï¼‰ç¯‡ ä¸­è¯¦ç»†è®²è§£ã€‚\näº¤æ¢æœº å¦‚æœä¸»è·¯ç”±æœ‰è¶³å¤Ÿçš„ç½‘å£ï¼Œäº¤æ¢æœºå¯ä»¥çœç•¥ï¼Œå…¨éƒ¨è®¾å¤‡éƒ½ç›´æ¥æ¥å…¥ä¸»è·¯ç”±ã€‚æœ‰äº¤æ¢æœºæ—¶ï¼Œå³ä½¿äº¤æ¢æœºæœ¬èº«çš„ç®¡ç†IPå¤„äº10.0.0.3/24ï¼Œä½†æ¥å…¥çš„å¤„äº10.0.1.0/24ç½‘æ®µçš„è®¾å¤‡ä¸€æ ·æ˜¯å¯ä»¥æ­£å¸¸ä¸Šç½‘çš„ï¼Œæ¯•ç«Ÿå®ƒæ˜¯äº¤æ¢æœºã€‚\nAP å¦‚æœä¸»è·¯ç”±æˆ–è€…æ—è·¯ç”±æœ‰æ— çº¿åŠŸèƒ½ï¼ŒAPä¹Ÿå¯ä»¥çœç•¥ï¼Œç›´æ¥ä»¥ä¸»è·¯ç”±æˆ–è€…æ—è·¯ç”±ä½œä¸ºAPå³å¯ã€‚\næ—è·¯ç”± æ—è·¯ç”±æ˜¯ä¸æ˜¯è™šæ‹Ÿæœºéƒ½æ²¡æœ‰å…³ç³»ã€‚æˆ‘çš„ä¸»è·¯ç”±æ˜¯ç‰©ç†æœºï¼Œæ—è·¯ç”±æ˜¯è™šæ‹Ÿæœºã€‚å…¶å®æˆ‘çš„å¾ˆå¤šè®¾å¤‡éƒ½æ˜¯é€šè¿‡è™šæ‹Ÿæœºæˆ–è€…Dockerçš„MacVLANæ¥å…¥ç½‘ç»œä¸­ï¼Œå®ƒä»¬æ—¢æœ‰10.0.0.0/24çš„ï¼Œä¹Ÿæœ‰10.0.1.0/24çš„ï¼Œéƒ½æŒ‰ç…§æˆ‘ä¸Šé¢è®¾ç½®çš„DHCPæœåŠ¡æ­£å¸¸å·¥ä½œç€ã€‚\næ€»ç»“ é€šè¿‡åˆ†ç¦»ä¸ºä¸¤ä¸ªå­ç½‘ï¼Œå°†éœ€è¦ç§‘å­¦ä¸Šç½‘çš„è®¾å¤‡å’Œä¸éœ€è¦ç§‘å­¦ä¸Šç½‘çš„è®¾ç½®åˆ†å¼€ï¼ŒåŒæ—¶åœ¨å‰è€…æ‰€åœ¨å­ç½‘ä¸‹è‡ªå»ºDNSæœåŠ¡å™¨ï¼Œè¾¾åˆ°å›½å†…æ”¯æŒIPv4/IPv6åŒæ ˆï¼Œå›½å¤–ä»…é€šè¿‡IPv4ç§‘å­¦ä¸Šç½‘çš„ç›®çš„ã€‚è€Œåœ¨ä¸éœ€è¦ç§‘å­¦ä¸Šç½‘çš„å­ç½‘ä¸‹ï¼Œè®¾å¤‡éƒ½æ˜¯ç›´æ¥é‡‡ç”¨å…¬å…±DNSæœåŠ¡å™¨ã€‚\nä¸åŒçš„æœåŠ¡å¯ä»¥æ”¾åœ¨ä¸åŒçš„å­ç½‘ä¸‹åˆ†åˆ«è¿›è¡Œç®¡ç†ï¼Œæ¯”å¦‚æˆ‘çš„è®¸å¤šDockerå®¹å™¨å°±é€šè¿‡åˆ›å»ºåœ¨ä¸¤ä¸ªå­ç½‘ä¸‹çš„MacVLANç½‘ç»œåˆ†åˆ«èµ°ä¸åŒçš„è·¯çº¿ï¼Œä¸€å—ç½‘å¡ä¹Ÿå¯ä»¥åˆ›å»ºå¤šä¸ªMacVLANç½‘ç»œä»¥è¿›è¡Œåˆ†æµï¼Œè¯¦è§æˆ‘çš„ è¿™ç¯‡æ–‡ç« ï¼Œæ¯”å¦‚ æˆ‘çš„qBittorrentå®¹å™¨ å°±æ”¾åœ¨10.0.1.0/24ä¸‹ï¼Œå®Œå…¨ä¸ç”¨æ‹…å¿ƒæµé‡èµ°äº†ä»£ç†ï¼ˆæˆ‘ç”šè‡³åœ¨Clashä¸­å¼€å¯äº†ä»£ç†PTç½‘ç«™ï¼Œä½†è¿™åªå½±å“æˆ‘ç”¨PCè®¿é—®PTç½‘ç«™ï¼Œå¯¹ æˆ‘çš„qBittorrentå®¹å™¨ æ¯«æ— å½±å“ï¼‰ã€‚è‡³äºè™šæ‹Ÿæœºä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¯ä»¥å°†å…¶æ”¾å…¥ä¸åŒçš„å­ç½‘æ¥èµ°ä¸åŒçš„è·¯çº¿ã€‚\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç»§ç»­è®¾ç½®Debianä¸ºæ—è·¯ç”±ï¼ŒçœŸæ­£çš„å¼€å¯Debiançš„æ—è·¯ç”±ä¹‹è·¯ï¼Œè¿™å°†åœ¨æˆ‘çš„ è½¯è·¯ç”±ç³»åˆ—æ–‡ç«  ä¸­é€æ¸åœ°ä¸€ç¯‡ä¸€ç¯‡å‘å‡ºæ¥ã€‚è¿™ä¸ªç³»åˆ—è™½ç„¶æ¯”è¾ƒé•¿ï¼Œçœ‹èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œä½†ä½ å¯ä»¥æ ¹æ®ä½ çš„éœ€è¦è¿›è¡Œé€‰æ‹©æ€§çš„ä½¿ç”¨ï¼Œå¹¶ä¸”ï¼Œé…ç½®å¥½åæ˜¯ä¸€åŠ³æ°¸é€¸çš„ï¼Œä¸ç”¨æ‹…å¿ƒåˆ·æœºï¼Œä¸ç”¨æ‹…å¿ƒå“ªå¤©æœåŠ¡æ•…éšœï¼Œè¿™å¥—é…ç½®æ¯”OpenWRTç¨³å®šå¤šäº†ï¼Œå³ä½¿æœªæ¥å‡çº§ç³»ç»Ÿä¹Ÿæ˜¯åˆ†åˆ†é’Ÿçš„äº‹ã€‚\nç³»åˆ— ä¸€ã€å­ç½‘åˆ’åˆ†åŠç½‘ç»œæ‹“æ‰‘è®¾è®¡ã€çˆ±å¿«ä¸Šçš„è®¾ç½®\näºŒã€å®‰è£…Debianã€åˆå§‹ç½‘ç»œé…ç½®ã€å¿…è¦è½¯ä»¶å®‰è£…\nä¸‰ã€AdGuardHomeã€mosdnsã€clashåœ¨DNSçš„å…³ç³»ï¼Œä»¥åŠAdGuardHomeã€mosdnsçš„å®‰è£…å’Œé…ç½®\nå››ã€clashé€æ˜ä»£ç†(Tproxy)çš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„IPè§„åˆ™å’Œnftablesè§„åˆ™\näº”ã€UnblockNeteaseMusicçš„å®‰è£…å’Œé…ç½®ã€ç›¸å…³çš„çš„nftablesè§„åˆ™ã€å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨\nå…­ã€subconverterçš„å®‰è£…å’Œé…ç½®\nä¸ƒã€é…ç½®nginxä¸ºæ–‡ä»¶æœåŠ¡å™¨ã€è‡ªåŠ¨æ›´æ–°clashè®¢é˜…ã€è‡ªåŠ¨ç”Ÿæˆéœ€è¦çš„æ–‡ä»¶\nå…«ã€é…ç½®æ—è·¯ç”±çš„SNMPDæœåŠ¡ã€é…ç½®ä¸»è·¯ç”±çš„è·¨ä¸‰å±‚åº”ç”¨\nä¹ã€ç›‘æµ‹é™Œç”Ÿè®¾å¤‡\nåã€å¿«é€Ÿç®€å•çš„å®‰è£…å’Œæ›´æ–°è½¯ä»¶åŒ…\nåä¸€ã€DNSã€ç½‘ç»œæ•…éšœç­‰çš„æ€»ç»“ï¼Œä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹\n","date":"2023-10-19T00:00:00+08:00","image":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E4%B8%80/%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C_hu4d3bb5febb14b87d984ab69f868ff292_86542_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF%E5%BC%80%E5%90%AFdebian%E7%9A%84%E6%97%81%E8%B7%AF%E7%94%B1%E4%B9%8B%E8%B7%AF%E4%B8%80/","title":"æˆ‘çš„å®¶åº­ç½‘ç»œè®¾è®¡æ€è·¯ï¼Œå¼€å¯debiançš„æ—è·¯ç”±ä¹‹è·¯ï¼ˆä¸€ï¼‰"},{"content":" æœ¬æ–‡è¾ƒé•¿ï¼Œå¦‚æƒ³ç•¥è¿‡æŸäº›å†…å®¹ï¼Œè¯·ç›´æ¥ç‚¹å‡»å³ä¾§ç›®å½•é“¾æ¥ã€‚\nè¯´æ˜ ä¸ºä¿è¯ç”¨æˆ·å®‰å…¨ï¼Œé˜²æ­¢ç”¨æˆ·å› ä½¿ç”¨åä»£å¹¶ä»£ç†äº†127.0.0.1è¿™ç§æƒ…å†µå¯¼è‡´å®‰å…¨æ€§é™ä½ï¼Œä»2023å¹´9æœˆ5æ—¥æ›´æ–°çš„é•œåƒå¼€å§‹ï¼Œåˆ›å»ºå®¹å™¨éœ€è¦æ–°å¢è®¾ç½®ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼šQB_USERNAMEï¼ˆç™»é™†qBittorrentçš„ç”¨æˆ·åï¼‰å’ŒQB_PASSWORDï¼ˆç™»é™†qBittorrentçš„å¯†ç ï¼‰ã€‚å®¹å™¨å°†åœ¨åˆ›å»ºæ—¶ä½¿ç”¨è¿™ä¸¤ä¸ªç¯å¢ƒå˜é‡å»è®¾ç½®ï¼ˆå¦‚å·²å­˜åœ¨é…ç½®æ–‡ä»¶åˆ™æ˜¯ä¿®æ”¹ï¼‰ç™»é™†qBittorentçš„ç”¨æˆ·åå’Œå¯†ç ã€‚å¦‚æœªè®¾ç½®è¿™ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼Œæˆ–è€…ä¿æŒä¸ºqBittorrentçš„é»˜è®¤å€¼ï¼ˆé»˜è®¤ç”¨æˆ·åï¼šadminï¼Œé»˜è®¤å¯†ç ï¼šadminadminï¼‰ï¼Œåˆ™æœ¬å®¹å™¨é™„åŠ çš„æ‰€æœ‰è„šæœ¬ã€å®šæ—¶ä»»åŠ¡å°†æ— æ³•ç»§ç»­ä½¿ç”¨ã€‚è¯¦æƒ…ã€‚ä¹Ÿå› æ­¤é•œåƒé»˜è®¤å³å®‰è£…å¥½pythonï¼Œä¸å†éœ€è¦è®¾ç½®INSTALL_PYTHONè¿™ä¸ªç¯å¢ƒå˜é‡ã€‚\nå£°æ˜ æœ¬é•œåƒéé­”æ”¹ç‰ˆã€éå¿«éªŒç‰ˆã€éEnhancedå¢å¼ºç‰ˆï¼ŒqBittorrentè‡ªèº«çš„è¡Œä¸º/åŠŸèƒ½å…¨éƒ¨æœªåšä»»ä½•æ”¹åŠ¨ï¼ˆä¹Ÿä¸ä¼šè€ƒè™‘æ·»åŠ æˆ–ä¿®æ”¹å®˜æ–¹å®¢æˆ·ç«¯è¡Œä¸º/åŠŸèƒ½çš„å†…å®¹ï¼‰ï¼Œå…¨éƒ¨å±äºå®˜æ–¹å®¢æˆ·ç«¯çš„é»˜è®¤è¡Œä¸º/åŠŸèƒ½ï¼Œåœ¨å’ŒPTç«™TrackeræœåŠ¡å™¨äº¤äº’æ—¶åé¦ˆçš„ä¸€åˆ‡ä¿¡æ¯å‡æ˜¯qBittorrentå®˜æ–¹ç‰ˆåé¦ˆçš„ä¿¡æ¯ã€‚æœ¬é•œåƒåªæ˜¯åŸºäºå®˜æ–¹å®¢æˆ·ç«¯é™„åŠ äº†ä¸€äº›å®ç”¨çš„è„šæœ¬ï¼Œè„šæœ¬å…¨éƒ¨æ˜¯åˆç†åˆæ³•ä½¿ç”¨qBittorrentå®˜æ–¹APIè·å–ä¿¡æ¯ï¼Œè„šæœ¬å…¨éƒ¨è¡Œä¸ºéƒ½é›†ä¸­åœ¨æœ¬åœ°ï¼Œä¸ä»»ä½•è¿œç«¯æœåŠ¡å™¨æ— ä»»ä½•è”ç³»ã€‚å¢åŠ çš„è„šæœ¬å…¨éƒ¨ä»£ç åœ¨ Github æˆ– Gitee å‡å¯æŸ¥çœ‹ ã€‚ç»å¯¹ä¸ä¼šå› ä¸ºä½¿ç”¨æ­¤é•œåƒè€Œå¯¼è‡´è´¦å·è¢«å°ã€‚\næ•ˆæœå›¾ ç‰¹ç‚¹ è‡ªåŠ¨æŒ‰trackeråˆ†ç±»æˆ–æ‰“æ ‡ç­¾ï¼ˆå¯ä»¥é€‰æ‹©å…³é—­ï¼Œå¯ä»¥é€‰æ‹©é‡‡ç”¨qBittorrentä¸­çš„â€œåˆ†ç±»â€è¿˜æ˜¯â€œæ ‡ç­¾â€ï¼‰ã€‚\nä¸‹è½½å®Œæˆå‘é€é€šçŸ¥ï¼ˆå¯ä»¥é€‰æ‹©å…³é—­ï¼‰ï¼Œå¯é€‰é€”å¾„ï¼šé’‰é’‰ï¼ˆæ•ˆæœå›¾ï¼‰, Telegram, ServerChan, çˆ±è¯­é£é£, PUSHPLUSæ¨é€åŠ , ä¼ä¸šå¾®ä¿¡, Gotifyï¼›æ­é…RSSåŠŸèƒ½ï¼ˆRSSæ•™ç¨‹ï¼‰è‡ªåŠ¨ä¸‹è½½æ•ˆæœå¾ˆå¥½ï¼›ä¸‹è½½å®Œæˆåè¿˜å¯ä»¥è¡¥å……è¿è¡Œä½ çš„è‡ªå®šä¹‰è„šæœ¬ã€‚\næ•…éšœæ—¶å‘é€é€šçŸ¥ï¼Œå¯é€‰é€”å¾„åŒä¸Šã€‚\næŒ‰è®¾å®šçš„cronæ£€æŸ¥trackerçŠ¶æ€ï¼Œå¦‚å‘ç°ç§å­çš„trackerçŠ¶æ€æœ‰é—®é¢˜ï¼Œå°†ç»™è¯¥ç§å­æ·»åŠ TrackerErrorçš„æ ‡ç­¾ï¼Œæ–¹ä¾¿ç­›é€‰ï¼›å¦‚æœtrackerå‡ºé”™æ•°é‡è¶…è¿‡è®¾å®šçš„é˜ˆå€¼ï¼Œç»™è®¾å®šæ¸ é“å‘é€é€šçŸ¥ã€‚\nä¸€äº›è¾…åŠ©åŠŸèƒ½ï¼šæ‰¹é‡ä¿®æ”¹trackerï¼›æ£€æµ‹æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹æœªåšç§çš„å­æ–‡ä»¶å¤¹/æ–‡ä»¶ï¼›ç”Ÿæˆåšç§æ–‡ä»¶æ¸…å•ï¼›ç”Ÿæˆæœªåšç§æ–‡ä»¶æ¸…å•ï¼›é…åˆIYUUè‡ªåŠ¨é‡æ–°æ ¡éªŒå’Œè‡ªåŠ¨æ¢å¤åšç§ï¼›æŒ‡å®šè®¾å¤‡ä¸Šçº¿æ—¶è‡ªåŠ¨é™é€Ÿï¼›å¤šæ—¶æ®µé™é€Ÿï¼›åˆ†ææŒ‡å®šç›®å½•çš„é‡å¤åšç§ç‡ï¼ˆè¾…ç§ç‡ï¼‰ç­‰ç­‰ã€‚\nå¦‚éœ€è¦ä¸‹è½½å®Œæˆåè‡ªåŠ¨è§¦å‘EMBY/JELLYFINæ‰«æåª’ä½“åº“ï¼Œè§¦å‘ChineseSubFinderè‡ªåŠ¨ä¸ºåˆšåˆšä¸‹è½½å®Œæˆçš„è§†é¢‘è‡ªåŠ¨ä¸‹è½½å­—å¹•ï¼Œè¯·æŒ‰ç…§ è¿™é‡Œ æ“ä½œã€‚\npythonä¸ºå¯é€‰å®‰è£…é¡¹ï¼Œè®¾ç½®ä¸ºtrueå°±è‡ªåŠ¨å®‰è£…ã€‚ï¼ˆä»2023å¹´9æœˆ5æ—¥èµ·ï¼Œé»˜è®¤å®‰è£…å¥½pythonï¼Œä¸å†éœ€è¦è®¾ç½®è¿™ä¸€é¡¹ã€‚ï¼‰\nä½“ç§¯å°ï¼Œé»˜è®¤ä¸­æ–‡UIï¼Œé»˜è®¤ä¸œå…«åŒºæ—¶åŒºã€‚\niyuuæ ‡ç­¾é›†æˆäº†IYUUPlusï¼Œè‡ªåŠ¨è®¾ç½®å¥½ä¸‹è½½å™¨ï¼Œå‡å°‘IYUUPlusè®¾ç½®å¤æ‚ç¨‹åº¦ã€‚\næ ‡ç­¾ 4.x.x , latest: æ ‡ç­¾ä»¥çº¯æ•°å­—ç‰ˆæœ¬å·å‘½åï¼Œè¿™æ˜¯qBittorrentæ­£å¼å‘å¸ƒçš„ç¨³å®šç‰ˆï¼Œå…¶ä¸­æœ€æ–°çš„ç‰ˆæœ¬é¢å¤–å¢åŠ latestæ ‡ç­¾ã€‚\n4.x.x-iyuu , latest-iyuu , iyuu: æ ‡ç­¾ä¸­å¸¦æœ‰iyuuå­—æ ·ï¼ŒåŸºäºqBittorrentç¨³å®šç‰ˆé›†æˆäº†IYUUPlusï¼Œå…¶ä¸­æœ€æ–°çš„ç‰ˆæœ¬é¢å¤–å¢åŠ latest-iyuuå’Œiyuuæ ‡ç­¾ï¼Œè‡ªåŠ¨å®‰è£…å¥½IYUUPlusï¼Œè‡ªåŠ¨è®¾ç½®å¥½ä¸‹è½½å™¨ï¼Œä¸»è¦é’ˆå¯¹ä¸ä¼šè®¾ç½®ä¸‹è½½å™¨çš„ç”¨æˆ·ã€‚\nx.x.xalphax, x.x.xbetax , x.x.xrcx , unstable: æ ‡ç­¾ä¸­å¸¦æœ‰alphaã€betaæˆ–rcå­—æ ·ï¼Œè¿™æ˜¯qBittorrentå‘å¸ƒçš„æµ‹è¯•ç‰ˆï¼Œå…¶ä¸­æœ€æ–°çš„æµ‹è¯•ç‰ˆé¢å¤–å¢åŠ unstable æ ‡ç­¾ã€‚æ­¤æ ‡ç­¾ä»…ä¾›æµ‹è¯•ä½¿ç”¨åŠå‘qBittorrentå®˜æ–¹åé¦ˆbugä½¿ç”¨ã€‚\nedge: åŸºäºalpine:edgeåˆ¶ä½œçš„é•œåƒï¼Œä½“ç§¯æœ€å°ï¼Œæ‰€ä¾èµ–çš„ç»„ä»¶ç‰ˆæœ¬æœ€æ–°ï¼Œä¼šæä¾›riscv64ç‰ˆæœ¬é•œåƒã€‚æ‰€æœ‰æ–°åŠŸèƒ½æˆ–è€…BUGä¿®å¤ï¼Œæˆ–è€…æœ‰ä»»ä½•å˜åŒ–æ—¶ï¼Œéƒ½ä¼šç¬¬ä¸€æ—¶é—´æ›´æ–°åˆ°æ­¤æ ‡ç­¾ã€‚\næ›´æ–°æ—¥å¿—ï¼ˆä»…åˆ—å‡ºç¨³å®šç‰ˆï¼‰ Date qBittorrent libtorrent alpine å¤‡æ³¨ 20210608 4.3.5 1.2.13 3.13.5 20210617 4.3.5 1.2.14 3.14.0 é»˜è®¤ä¸å†å®‰è£…pythonï¼Œéœ€è¦å¼€å…³æ‰“å¼€æ‰å®‰è£… 20210628 4.3.6 1.2.14 3.14.0 ä¼˜åŒ–è‡ªåŠ¨åˆ†ç±»å’Œtrackeré”™è¯¯æ£€æŸ¥æ—¶çš„èµ„æºå ç”¨ 20210804 4.3.7 1.2.14 3.14.0 1. å¢åŠ 5ä¸ªç¯å¢ƒå˜é‡æ§åˆ¶å¼€å…³ï¼Œè¯¦è§ç¯å¢ƒå˜é‡æ¸…å•ï¼›\n2. å¢åŠ æ‰¹é‡ä¿®æ”¹ trackerçš„åŠŸèƒ½ï¼Œè¯¦è§å‘½ä»¤ï¼›\n3. å¢åŠ åœ¨è¿è¡Œdl-finish %Kæ—¶è¿è¡Œè‡ªå®šä¹‰è„šæœ¬çš„åŠŸèƒ½ï¼Œè¯¦è§ç›¸å…³é—®é¢˜2ã€‚ 20210830 4.3.8 1.2.14 3.14.2 1. å¢åŠ 3ä¸ªç¯å¢ƒå˜é‡æ§åˆ¶å¼€å…³ï¼Œè¯¦è§ç¯å¢ƒå˜é‡æ¸…å•ï¼›\n2. å¢åŠ æ£€æµ‹æŒ‡å®šç›®å½•æœªåšç§çš„å­æ–‡ä»¶å¤¹/æ–‡ä»¶åŠŸèƒ½ï¼Œè¯¦è§å‘½ä»¤ã€‚ 20211101 4.3.9 1.2.14 3.14.2 ä¿®å¤é€šçŸ¥å†…å®¹ä¸­å«æœ‰å­—ç¬¦\u0026quot;\u0026amp;\u0026ldquo;æ—¶æ— æ³•æ­£å¸¸å‘é€çš„bugã€‚ 20220107 4.4.0 2.0.5 3.14.3 1. å¢åŠ ç¯å¢ƒå˜é‡EXTRA_PACKAGESï¼Œè¯¦è§ç¯å¢ƒå˜é‡æ¸…å•ï¼›\n2. é»˜è®¤è¿è¡Œè‡ªåŠ¨åˆ†ç±»ç¨‹åºæ—¶ä»…å¯¹æœªåˆ†ç±»çš„ç§å­è¿›è¡Œåˆ†ç±»ï¼Œå¦‚éœ€è¦å¼ºåˆ¶å¯¹æ‰€æœ‰ç§å­è¿›è¡Œåˆ†ç±»ï¼Œè¯·å‚è€ƒå‘½ä»¤ï¼›\n3. å¢åŠ ä¸¤ä¸ªéœ€è¦æ‰‹åŠ¨è¿è¡Œçš„è„šæœ¬report-seed-files(å¯¼å‡ºæ‰€æœ‰åšç§æ–‡ä»¶æ¸…å•)å’Œreport-unseed-files(å¯¼å‡ºæŒ‡å®šæ–‡ä»¶å¤¹ä¸‹æœªåšç§æ–‡ä»¶æ¸…å•)ï¼Œè¯¦è§å‘½ä»¤ã€‚ 20220216 4.4.1 2.0.5 3.14.3 20220325 4.4.2 2.0.5 3.14.4 20220524 4.4.3 2.0.6 3.16.0 1. ä¿®å¤å­˜åœ¨å¤šä¸ªæ ‡ç­¾æ—¶æ— æ³•ç§»é™¤TrackerErroræ ‡ç­¾çš„bugï¼›2. å¢åŠ ä¼ä¸šå¾®ä¿¡ç¾¤æœºå™¨äººçš„é€šçŸ¥æ¸ é“ã€‚3. å‡çº§opensslåˆ°1.1.1oï¼Œbooståˆ°1.78ï¼Œalpineåˆ°3.16.0ï¼Œå‡çº§iyuué•œåƒä¸­çš„php7ä¸ºphp8ã€‚ 20220526 4.4.3.1 2.0.6 3.16.0 20220824 4.4.4 2.0.7 3.16.2 1. å¢åŠ remove-trackè„šæœ¬ï¼Œè¯¦è§å‘½ä»¤ï¼›2. ä¼˜åŒ–del-unseed-dirè„šæœ¬ï¼Œç°è¿˜å¯ä»¥ä¸€æ¬¡æ€§æ£€æµ‹å¤šä¸ªç›®å½•äº†ï¼›3. å¢åŠ Gotityé€šçŸ¥ç¯å¢ƒå˜é‡GOTIFY_URL GOTIFY_APP_TOKEN GOTIFY_PRIORITYï¼Œè¯¦è§ç¯å¢ƒå˜é‡æ¸…å•ã€‚ 20220831 4.4.5 2.0.7 3.16.2 20221024 4.4.5 2.0.8 3.16.2 libtorrent-rasterbar v2.0.8 ä¿®å¤äº†å†…å­˜æº¢å‡ºçš„é—®é¢˜ï¼Œå› æ­¤æ›´æ–°ä¸€ä¸‹qbittorrentã€‚ 20221109 4.3.9 1.2.18 3.16.2 æ·»åŠ CATEGORY_OR_TAGç¯å¢ƒå˜é‡ï¼Œè¯¦è§ç¯å¢ƒå˜é‡æ¸…å•ï¼›è€ƒè™‘åˆ°4.3.9å°†æ˜¯è®¸å¤šäººçš„ä½¿ç”¨ç‰ˆæœ¬ï¼Œå°†å…¨éƒ¨æ–°åŠŸèƒ½é‡æ–°åº”ç”¨åˆ°4.3.9ç‰ˆæœ¬ä¸­ã€‚ 20221126 4.3.94.5.0 1.2.182.0.8 3.17.0 alpineå‡çº§è‡³3.17.0ï¼Œå‡çº§ä¾èµ–ç‰ˆæœ¬ä¸ºï¼šboost 1.80.0, openssl 3.0.7, qt 5.16.6, zlib 1.2.13 20221130 4.5.0 1.2.18 3.17.0 æŠŠä¾èµ–é¡¹libtorrent-rasterbarä»2.0.8åˆ‡æ¢ä¸º1.2.18ï¼Œåº”ç”¨#17994.patchä¿®å¤4.5.0ç‰ˆæœ¬ç®€ä½“ä¸­æ–‡æ— æ³•å¯ç”¨çš„bugï¼Œéœ€è¦å…ˆåˆ‡æ¢ä¸ºè‹±æ–‡å†åˆ‡æ¢ä¸ºä¸­æ–‡ï¼Œæˆ–è€…åœ¨å¯åŠ¨å®¹å™¨å‰å…ˆå°†config/qBittorrent.confä¸­General\\Localeè¿™ä¸€è¡Œä»zhæ”¹ä¸ºzh_CNã€‚ 20230213 4.5.1 1.2.18 3.17.2 1. æ ¹æ®ç‰ˆæœ¬çš„ä¸åŒè‡ªåŠ¨è®¾ç½®General\\Localeä¸ºzhæˆ–zh_CNï¼›2. ä¼˜åŒ–auto-cat report-unseed-files tracker-erroré€»è¾‘ï¼ŒåŠ å¿«è¿è¡Œé€Ÿåº¦ï¼Œå¯¹å¤štrackerçš„ï¼Œåªè¦æœ‰ä¸€ä¸ªæ­£å¸¸å°±ä¸æ ‡è®°ä¸ºTrackerErrorï¼ˆæœ‰ä»»ä½•ä¸€ä¸ªtrackerå¤„äºå·¥ä½œ``æ›´æ–°ä¸­å’Œæœªè”ç³»éƒ½ä¸ä¼šè§†ä½œTrackerErrorï¼Œåªæœ‰åœ¨è¿è¡Œè„šæœ¬å½“æ—¶é‚£ä¸€åˆ»å…¨éƒ¨trackerå¤„äºæœªå·¥ä½œæ‰ä¼šæ ‡è®°ï¼‰ï¼›3. åˆ‡æ¢ä¸ºqt6å¹¶å¢åŠ ä¾èµ–qt6-qtbase-sqliteï¼›4. ä¿®å¤#68ï¼Œ#69ã€‚ 20230228 4.5.2 2.0.8 3.17.2 1. libtorrent-rasterbaråˆ‡æ¢ä¸º2.xï¼›2. å†ä¸€æ¬¡ä¼˜åŒ–tracker-errorå‡å°‘70%æ—¶é•¿ã€‚ 20230529 4.5.3 2.0.9 3.18.0 1. å†ä¸€æ¬¡ä¼˜åŒ–report-seed-fileså‡å°‘70%æ—¶é•¿ï¼›2. dl-finishä¸å†ä½¿ç”¨%Iä¼ å‚ï¼Œè€Œä½¿ç”¨%Kï¼Œå·²ç»éƒ¨ç½²å¥½çš„ä½¿ç”¨%Iä¹Ÿæ²¡æœ‰é—®é¢˜ï¼ˆé™¤éä¼šæœ‰æ··åˆç§å­æˆ–v2ç§å­ï¼‰ï¼›3. å¢åŠ gen-dupè„šæœ¬ï¼Œè¯¦è§â€œå‘½ä»¤â€ç« èŠ‚ã€‚ 20230619 4.5.4 2.0.9 3.18.2 gen-dupè„šæœ¬å¢åŠ æ€»è®¡è¾“å‡ºã€‚ 20230830 4.5.5 2.0.9 3.18.3 æŠ›å¼ƒs6-overlayï¼Œç›´æ¥äº¤ç»™tiniæ¥æ•è·é€€å‡ºä¿¡å·ï¼Œåœ¨é€€å‡º/åœæ­¢å®¹å™¨æ—¶qBä¼šè‡ªåŠ¨ä¿å­˜é…ç½®å’Œç§å­è¿›åº¦ã€‚å®šæ—¶ä»»åŠ¡æ”¹ç”±ä½æƒé™è¿è¡Œï¼Œæ—¥å¿—è®°å½•åœ¨å®¹å™¨å†…çš„/data/diy/crond.logï¼Œä¸å†è¾“å‡ºåˆ°å®¹å™¨æ§åˆ¶å°ã€‚ 20230906 4.5.5 2.0.9 3.18.3 ä¸ºä¿è¯ç”¨æˆ·å®‰å…¨ï¼Œé˜²æ­¢ç”¨æˆ·å› ä½¿ç”¨åä»£å¹¶ä»£ç†äº†127.0.0.1è¿™ç§æƒ…å†µå¯¼è‡´å®‰å…¨æ€§é™ä½ï¼Œä»2023å¹´9æœˆ5æ—¥æ›´æ–°çš„é•œåƒå¼€å§‹ï¼Œåˆ›å»ºå®¹å™¨éœ€è¦æ–°å¢è®¾ç½®ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼šQB_USERNAMEï¼ˆç™»é™†qBittorrentçš„ç”¨æˆ·åï¼‰å’ŒQB_PASSWORDï¼ˆç™»é™†qBittorrentçš„å¯†ç ï¼‰ã€‚å®¹å™¨å°†åœ¨åˆ›å»ºæ—¶ä½¿ç”¨è¿™ä¸¤ä¸ªç¯å¢ƒå˜é‡å»è®¾ç½®ï¼ˆå¦‚å·²å­˜åœ¨é…ç½®æ–‡ä»¶åˆ™æ˜¯ä¿®æ”¹ï¼‰ç™»é™†qBittorentçš„ç”¨æˆ·åå’Œå¯†ç ã€‚å¦‚æœªè®¾ç½®è¿™ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼Œæˆ–è€…ä¿æŒä¸ºqBittorrentçš„é»˜è®¤å€¼ï¼ˆé»˜è®¤ç”¨æˆ·åï¼šadminï¼Œé»˜è®¤å¯†ç ï¼šadminadminï¼‰ï¼Œåˆ™æœ¬å®¹å™¨é™„åŠ çš„æ‰€æœ‰è„šæœ¬ã€å®šæ—¶ä»»åŠ¡å°†æ— æ³•ç»§ç»­ä½¿ç”¨ã€‚è¯¦æƒ…ã€‚ä¹Ÿå› æ­¤é•œåƒé»˜è®¤å³å®‰è£…å¥½pythonï¼Œä¸å†éœ€è¦è®¾ç½®INSTALL_PYTHONè¿™ä¸ªç¯å¢ƒå˜é‡ã€‚ 20231023 4.6.0 2.0.9 3.18.4 20231121 4.3.94.6.1 2.0.9 3.18.4 å¢åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡TG_API_HOSTï¼ŒåŒæ—¶å…è®¸å…³é—­CRON_HEALTH_CHECKå’ŒCRON_TRACKER_ERRORï¼Œæ­¤ä¸‰é¡¹ç¯å¢ƒå˜é‡è¯´æ˜è¯¦è§ ç¯å¢ƒå˜é‡æ¸…å•ã€‚ä»æ­¤ç‰ˆæœ¬èµ·ï¼ŒqBittorrentå®˜æ–¹å·²ç»è®¾ç½®ç¦æ­¢é»˜è®¤å¯†ç ï¼Œå› æ­¤è¯·åŠ¡å¿…è®¾ç½®QB_USERNAMEå’ŒQB_PASSWORDä¸ºéé»˜è®¤å€¼ã€‚åŒæ­¥ç¼–è¯‘çš„4.3.9ç‰ˆæœ¬äº¦å¯ä½¿ç”¨æ–°ç‰ˆæœ¬å¯ç”¨çš„ç¯å¢ƒå˜é‡ã€‚ 20231128 4.6.2 2.0.9 3.18.4 ä¿®å¤UMASK_SETã€‚ 20240117 4.6.3 2.0.9 3.19.0 iyuuç›¸å…³æ ‡ç­¾å°†phpå‡çº§åˆ°8.3.xã€‚ ç¯å¢ƒå˜é‡æ¸…å• åœ¨ä¸‹ä¸€èŠ‚çš„åˆ›å»ºå‘½ä»¤ä¸­ï¼ŒåŒ…æ‹¬å·²ç»æåŠçš„å˜é‡åœ¨å†…ï¼Œæ€»å…±ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼Œè¯·æ ¹æ®éœ€è¦å‚è€ƒåˆ›å»ºå‘½ä»¤ä¸­WEBUI_PORT BT_PORTçš„å½¢å¼è‡ªè¡Œè¡¥å……æ·»åŠ åˆ°åˆ›å»ºå‘½ä»¤ä¸­ã€‚\næ³¨1ï¼šé»˜è®¤å€¼çš„å«ä¹‰æ˜¯ï¼Œä½ ä¸è®¾ç½®è¿™ä¸ªç¯å¢ƒå˜é‡ä¸ºå…¶ä»–å€¼ï¼Œé‚£ä¹ˆç¨‹åºå°±è‡ªåŠ¨ä½¿ç”¨é»˜è®¤å€¼ã€‚\næ³¨2ï¼šæ‰€æœ‰å®šæ—¶ä»»åŠ¡cronç±»çš„ç¯å¢ƒå˜é‡ï¼ˆä»¥CRONè¿™å››ä¸ªå­—æ¯å¼€å¤´çš„ï¼‰åœ¨docker cliä¸­è¯·ç”¨ä¸€å¯¹åŒå¼•å·å¼•èµ·æ¥ï¼Œåœ¨docker-composeä¸­ä¸è¦å¢åŠ å¼•å·ã€‚\næ³¨3ï¼šQB_USERNAMEå’ŒQB_PASSWORDå¿…é¡»æ”¹æˆéé»˜è®¤å€¼ï¼Œé™¤æ­¤ä»¥å¤–ï¼Œå…¶ä½™æ‰€æœ‰ç¯å¢ƒå˜é‡ä½ éƒ½å¯ä»¥ä¸è®¾ç½®ï¼Œå¹¶ä¸å½±å“qbittorrentçš„ä½¿ç”¨ï¼Œä½†å¦‚æœä½ æƒ³ç”¨å¾—æ›´çˆ½ï¼Œä½ å°±æ ¹æ®ä½ çš„éœ€è¦è®¾ç½®ã€‚\nä»¥ä¸‹æ˜¯æ‰€æœ‰æ ‡ç­¾å‡å¯ç”¨çš„ç¯å¢ƒå˜é‡ï¼š\nåºå· å˜é‡å é»˜è®¤å€¼ è¯´æ˜ 1 PUID 1000 ç”¨æˆ·çš„uidï¼Œè¾“å…¥å‘½ä»¤id -uå¯ä»¥æŸ¥åˆ°ï¼Œä»¥è¯¥ç”¨æˆ·è¿è¡Œqbittorrent-noxï¼Œç¾¤æ™–ç”¨æˆ·å¿…é¡»æ”¹ã€‚ 2 PGID 100 ç”¨æˆ·çš„gidï¼Œè¾“å…¥å‘½ä»¤id -gå¯ä»¥æŸ¥åˆ°ï¼Œä»¥è¯¥ç”¨æˆ·è¿è¡Œqbittorrent-noxï¼Œç¾¤æ™–ç”¨æˆ·å¿…é¡»æ”¹ã€‚ 3 WEBUI_PORT 8080 WebUIè®¿é—®ç«¯å£ï¼Œå»ºè®®è‡ªå®šä¹‰ï¼Œå¦‚éœ€å…¬ç½‘è®¿é—®ï¼Œéœ€è¦å°†qBittorrentå’Œå…¬ç½‘ä¹‹é—´æ‰€æœ‰ç½‘å…³è®¾å¤‡ä¸Šéƒ½è®¾ç½®ç«¯å£è½¬å‘ã€‚ 4 BT_PORT 34567 BTç›‘å¬ç«¯å£ï¼Œå»ºè®®è‡ªå®šä¹‰ï¼Œå¦‚éœ€è¾¾åˆ°å¯è¿æ¥çŠ¶æ€ï¼Œéœ€è¦å°†qBittorrentå’Œå…¬ç½‘ä¹‹é—´æ‰€æœ‰ç½‘å…³è®¾å¤‡ä¸Šéƒ½è®¾ç½®ç«¯å£è½¬å‘ã€‚ 5 QB_USERNAME admin 4.5.5+å¿…é¡»è®¾ç½®æ­¤ç¯å¢ƒå˜é‡ï¼Œç™»é™†qBittorrentçš„ç”¨æˆ·åï¼Œè¯·åŠ¡å¿…ä¸è¦ä½¿ç”¨é»˜è®¤å€¼ï¼Œå¦‚ä½¿ç”¨é»˜è®¤å€¼å°†æ— æ³•ä½¿ç”¨æœ¬é•œåƒçš„å…¨éƒ¨è„šæœ¬ã€‚ 6 QB_PASSWORD adminadmin 4.5.5+å¿…é¡»è®¾ç½®æ­¤ç¯å¢ƒå˜é‡ï¼Œç™»é™†qBittorrentçš„å¯†ç ï¼Œè¯·åŠ¡å¿…ä¸è¦ä½¿ç”¨é»˜è®¤å€¼ï¼Œå¦‚ä½¿ç”¨é»˜è®¤å€¼å°†æ— æ³•ä½¿ç”¨æœ¬é•œåƒçš„å…¨éƒ¨è„šæœ¬ã€‚ 7 TZ Asia/Shanghai æ—¶åŒºï¼Œå¯å¡«å†…å®¹è¯¦è§ï¼šhttps://meetingplanner.io/zh-cn/timezone/cities 8 INSTALL_PYTHON false ä»4.5.5èµ·ï¼Œé»˜è®¤å®‰è£…å¥½pythonï¼Œä¸å†éœ€è¦è®¾ç½®è¿™ä¸ªç¯å¢ƒå˜é‡ã€‚é»˜è®¤ä¸å®‰è£…pythonï¼Œå¦‚éœ€è¦pythonï¼ˆqBittorrentçš„æœç´¢åŠŸèƒ½å¿…é¡»å®‰è£…pythonï¼‰ï¼Œè¯·è®¾ç½®ä¸ºtrueï¼Œè®¾ç½®åå°†åœ¨é¦–æ¬¡å¯åŠ¨å®¹å™¨æ—¶è‡ªåŠ¨å®‰è£…å¥½ã€‚ 9 ENABLE_AUTO_CATEGORY true 4.3.7+å¯ç”¨ã€‚æ˜¯å¦è‡ªåŠ¨æŒ‰trackerè¿›è¡Œåˆ†ç±»ï¼Œé»˜è®¤ä¸ºtrueå¼€å¯ï¼Œå¦‚éœ€å…³é—­ï¼Œè¯·è®¾ç½®ä¸ºfalseã€‚ 10 CATEGORY_OR_TAG category 4.3.9åŠ4.5.0+å¯ç”¨ï¼Œå½“ENABLE_AUTO_CATEGORY=trueæ—¶ï¼Œæ§åˆ¶è‡ªåŠ¨åˆ†ç±»æ˜¯qBittorrentä¸­çš„â€œåˆ†ç±»â€è¿˜æ˜¯â€œæ ‡ç­¾â€ã€‚è®¾ç½®ä¸ºcategoryï¼ˆé»˜è®¤å€¼ï¼‰ä¸ºâ€œåˆ†ç±»â€ï¼Œè®¾ç½®ä¸ºtagä¸ºâ€œæ ‡ç­¾â€ã€‚å½“è®¾ç½®ä¸ºtagæ—¶ï¼Œç”±äºæ ‡ç­¾ä¸æ˜¯å”¯ä¸€çš„ï¼Œæ— æ³•ç­›é€‰å‡ºæ²¡æœ‰æ‰“ä¸Štrackeræ ‡ç­¾çš„ç§å­ï¼Œæ‰€ä»¥è¿è¡Œauto-cat -aå’Œauto-cat -Aéƒ½å°†å¯¹å…¨éƒ¨ç§å­æŒ‰trackeræ‰“æ ‡ç­¾ï¼Œç§å­å¤šæ—¶æ¯”è¾ƒè€—æ—¶ï¼›è€Œå½“è®¾ç½®ä¸ºcategoryæ—¶ï¼Œè¿è¡Œauto-cat -aå°±åªå¯¹æœªåˆ†ç±»ç§å­è¿›è¡Œåˆ†ç±»ã€‚ 11 DL_FINISH_NOTIFY true é»˜è®¤ä¼šåœ¨ä¸‹è½½å®Œæˆæ—¶å‘è®¾å®šçš„é€šçŸ¥æ¸ é“å‘é€ç§å­ä¸‹è½½å®Œæˆçš„é€šçŸ¥æ¶ˆæ¯ï¼Œå¦‚ä¸æƒ³æ”¶æ­¤ç±»é€šçŸ¥ï¼Œåˆ™è®¾ç½®ä¸ºfalseã€‚ 12 TRACKER_ERROR_COUNT_MIN 3 4.3.7+å¯ç”¨ã€‚å¯ä»¥è®¾ç½®çš„å€¼ï¼šæ­£æ•´æ•°ã€‚åœ¨æ£€æµ‹åˆ°trackerå‡ºé”™çš„ç§å­æ•°é‡è¶…è¿‡è¿™ä¸ªé˜ˆå€¼æ—¶ï¼Œç»™è®¾ç½®çš„é€šçŸ¥æ¸ é“å‘é€é€šçŸ¥ã€‚ 13 UMASK_SET æƒé™æ©ç umaskï¼ŒæŒ‡å®šqBittorrentåœ¨å»ºç«‹æ–‡ä»¶æ—¶é¢„è®¾çš„æƒé™æ©ç ã€‚ 14 TG_USER_ID é€šçŸ¥æ¸ é“telegramï¼Œå¦‚éœ€ä½¿ç”¨éœ€è¦å’Œ TG_BOT_TOKEN åŒæ—¶èµ‹å€¼ï¼Œç§èŠ @getuseridbot è·å–ã€‚ 15 TG_BOT_TOKEN é€šçŸ¥æ¸ é“telegramï¼Œå¦‚éœ€ä½¿ç”¨éœ€è¦å’Œ TG_USER_ID åŒæ—¶èµ‹å€¼ï¼Œç§èŠ @BotFather è·å–ã€‚ 16 TG_PROXY_ADDRESS 4.3.7+å¯ç”¨ã€‚ç»™TGæœºå™¨äººå‘é€æ¶ˆæ¯çš„ä»£ç†åœ°å€ï¼Œå½“è®¾ç½®äº†TG_USER_IDå’ŒTG_BOT_TOKENåå¯ä»¥è®¾ç½®æ­¤å€¼ï¼Œå½¢å¦‚ï¼šhttp://192.168.1.1:7890ï¼Œä¹Ÿå¯ä»¥ä¸è®¾ç½®ã€‚ 17 TG_PROXY_USER 4.3.7+å¯ç”¨ã€‚ç»™TGæœºå™¨äººå‘é€æ¶ˆæ¯çš„ä»£ç†çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå½“è®¾ç½®äº†TG_PROXY_ADDRESSåå¯ä»¥è®¾ç½®æ­¤å€¼ï¼Œæ ¼å¼ä¸ºï¼š\u0026lt;ç”¨æˆ·å\u0026gt;:\u0026lt;å¯†ç \u0026gt;ï¼Œå½¢å¦‚ï¼šadmin:passwordï¼Œå¦‚æ²¡æœ‰å¯ä¸è®¾ç½®ã€‚ 18 TG_API_HOST 4.6.1+å¯ç”¨ã€‚Telegram çš„åä»£ APIï¼Œå¦‚æœè®¾ç½®äº†å°±æ”¹ä¸ºå‘ä½ çš„åä»£ API å‘é€æ¶ˆæ¯ï¼Œä¸è®¾ç½®åˆ™å‘å®˜æ–¹ API å‘é€æ¶ˆæ¯ã€‚ 19 DD_BOT_TOKEN é€šçŸ¥æ¸ é“é’‰é’‰ï¼Œå¦‚éœ€ä½¿ç”¨éœ€è¦å’Œ DD_BOT_SECRET åŒæ—¶èµ‹å€¼ï¼Œæœºå™¨äººè®¾ç½®ä¸­webhooké“¾æ¥access_token=åé¢çš„å­—ç¬¦ä¸²ï¼ˆä¸å«=ä»¥åŠ=ä¹‹å‰çš„å­—ç¬¦ï¼‰ã€‚ 20 DD_BOT_SECRET é€šçŸ¥æ¸ é“é’‰é’‰ï¼Œå¦‚éœ€ä½¿ç”¨éœ€è¦å’Œ DD_BOT_TOKEN åŒæ—¶èµ‹å€¼ï¼Œæœºå™¨äººè®¾ç½®ä¸­åªå¯ç”¨åŠ ç­¾ï¼ŒåŠ ç­¾çš„ç§˜é’¥ï¼Œå½¢å¦‚ï¼šSEC1234567890abcdefgã€‚ 21 IYUU_TOKEN é€šçŸ¥æ¸ é“çˆ±è¯­é£é£ï¼Œé€šè¿‡ è¿™é‡Œ è·å–ï¼Œçˆ±è¯­é£é£çš„TOKENã€‚ 22 SCKEY é€šçŸ¥æ¸ é“ServerChanï¼Œé€šè¿‡ è¿™é‡Œ è·å–ã€‚ 23 PUSHPLUS_TOKEN 4.3.7+å¯ç”¨ã€‚é€šçŸ¥æ¸ é“PUSH PLUSï¼Œå¡«å…¥å…¶tokenï¼Œè¯¦è§ è¿™é‡Œã€‚ 24 WORK_WECHAT_BOT_KEY 4.3.9åŠ4.4.3+å¯ç”¨ã€‚é€šçŸ¥æ¸ é“ä¼ä¸šå¾®ä¿¡ç¾¤æœºå™¨äººï¼Œå¡«å…¥æœºå™¨äººè®¾ç½®webhooké“¾æ¥ä¸­key=åé¢çš„å­—ç¬¦ä¸²ï¼Œä¸å«key=ã€‚ 25 GOTIFY_URL 4.3.9åŠ4.4.4+å¯ç”¨ã€‚é€šçŸ¥æ¸ é“Gotifyï¼Œå¡«å…¥å…¶é€šçŸ¥ç½‘å€ï¼Œéœ€è¦å’ŒGOTIFY_APP_TOKENåŒæ—¶èµ‹å€¼ã€‚ 26 GOTIFY_APP_TOKEN 4.3.9åŠ4.4.4+å¯ç”¨ã€‚é€šçŸ¥æ¸ é“Gotifyï¼Œå¡«å…¥å…¶TOKENï¼Œéœ€è¦å’ŒGOTIFY_URLåŒæ—¶èµ‹å€¼ã€‚ 27 GOTIFY_PRIORITY 5 4.3.9åŠ4.4.4+å¯ç”¨ã€‚é€šçŸ¥æ¸ é“Gotifyï¼Œå‘é€æ¶ˆæ¯çš„ä¼˜å…ˆçº§ã€‚ 28 CRON_HEALTH_CHECK 12 * * * * å®•æœºæ£€æŸ¥çš„cronï¼Œåœ¨è®¾å®šçš„cronè¿è¡Œæ—¶å¦‚å‘ç°qbittorrent-noxå®•æœºäº†ï¼Œåˆ™å‘è®¾ç½®çš„é€šçŸ¥æ¸ é“å‘é€é€šçŸ¥ã€‚4.6.1+å¯ä»¥è®¾ç½®ä¸ºoffï¼Œæ„ä¸ºå…³é—­æ­¤å®šæ—¶ä»»åŠ¡ã€‚ 29 CRON_AUTO_CATEGORY 32 */2 * * * è‡ªåŠ¨åˆ†ç±»çš„cronï¼Œåœ¨è®¾å®šçš„cronè¿è¡Œauto-cat -aå‘½ä»¤ï¼Œå°†æ‰€æœ‰æœªåˆ†ç±»ç§å­æŒ‰trackeråˆ†ç±»ï¼ˆå½“CATEGORY_OR_TAG=categoryæ—¶ï¼‰ï¼Œæˆ–å°†æ‰€æœ‰ç§å­æŒ‰trackeræ‰“æ ‡ç­¾ï¼ˆå½“CATEGORY_OR_TAG=tagæ—¶ï¼‰ã€‚å¯¹äºç§å­å¾ˆå¤šçš„å¤§æˆ·äººå®¶ï¼Œå»ºè®®æŠŠcroné¢‘ç‡ä¿®æ”¹ä½ä¸€äº›ï¼Œä¸€å¤©ä¸€æ¬¡å³å¯ã€‚æ­¤cronå¯ä»¥ç”±ENABLE_AUTO_CATEGORYå…³é—­ï¼Œå…³é—­åä¸ç”Ÿæ•ˆã€‚è™½ç„¶æœ¬å˜é‡æ˜¯å…¨ç‰ˆæœ¬æœ‰æ•ˆï¼Œä½†æ§åˆ¶é‡‡ç”¨â€œåˆ†ç±»â€è¿˜æ˜¯â€œæ ‡ç­¾â€çš„å˜é‡CATEGORY_OR_TAGä»…4.3.9å’Œ4.5.0+æœ‰æ•ˆã€‚ 30 CRON_TRACKER_ERROR 52 */4 * * * æ£€æŸ¥trackerçŠ¶æ€æ˜¯å¦å¥åº·çš„cronï¼Œåœ¨è®¾å®šçš„cronå°†æ£€æŸ¥æ‰€æœ‰ç§å­çš„trackerçŠ¶æ€ï¼Œå¦‚æœæœ‰é—®é¢˜å°±æ‰“ä¸ŠTrackerErrorçš„æ ‡ç­¾ã€‚åœ¨è¿è¡Œçš„æ—¶å€™æ¯”è¾ƒåƒèµ„æºï¼Œæ‰€ä»¥å¯¹äºç§å­å¾ˆå¤šçš„å¤§æˆ·äººå®¶ï¼Œæˆ–è€…æ˜¯å¯¹æ­¤ä¸é‚£ä¹ˆæ•æ„Ÿçš„ç”¨æˆ·ï¼Œå»ºè®®æŠŠcroné¢‘ç‡ä¿®æ”¹ä½ä¸€äº›ï¼Œä¸€å¤©ä¸€æ¬¡å³å¯ã€‚4.6.1+å¯ä»¥è®¾ç½®ä¸ºoffï¼Œæ„ä¸ºå…³é—­æ­¤å®šæ—¶ä»»åŠ¡ã€‚ 31 MONITOR_IP 4.3.8+å¯ç”¨ã€‚å¯è®¾ç½®ä¸ºå±€åŸŸç½‘è®¾å¤‡çš„ipï¼Œå¤šä¸ªipä»¥åŠè§’ç©ºæ ¼åˆ†éš”ï¼Œå½¢å¦‚ï¼š192.168.1.5 192.168.1.9 192.168.1.20ã€‚æœ¬å˜é‡ä½œç”¨ï¼šå½“æ£€æµ‹åˆ°è¿™äº›è®¾ç½®çš„ipä¸­æœ‰ä»»ä½•ä¸€ä¸ªipåœ¨çº¿æ—¶ï¼ˆæ£€æµ‹é¢‘ç‡ä¸ºæ¯åˆ†é’Ÿï¼‰ï¼Œè‡ªåŠ¨å¯ç”¨qbittorentå®¢æˆ·ç«¯çš„â€œå¤‡ç”¨é€Ÿåº¦é™åˆ¶â€ï¼Œå¦‚æœéƒ½ä¸åœ¨çº¿å°±å…³é—­â€œå¤‡ç”¨é€Ÿåº¦é™åˆ¶â€ã€‚â€œå¤‡ç”¨é€Ÿåº¦é™åˆ¶â€éœ€è¦äº‹å…ˆè®¾ç½®å¥½é™åˆ¶é€Ÿç‡ï¼Œå»ºè®®åœ¨è·¯ç”±å™¨ä¸Šç»™éœ€è¦è®¾ç½®çš„è®¾å¤‡å›ºå®šipã€‚åœ¨docker cliä¸­è¯·ä½¿ç”¨ä¸€å¯¹åŒå¼•å·å¼•èµ·æ¥ï¼Œåœ¨docker-composeä¸­ä¸è¦ä½¿ç”¨å¼•ç”¨ã€‚ 32 CRON_ALTER_LIMITS 4.3.8+å¯ç”¨ã€‚å¯åŠ¨å’Œå…³é—­â€œå¤‡ç”¨é€Ÿåº¦é™åˆ¶â€œçš„cronï¼Œä¸»è¦é’ˆå¯¹å¤šæ—¶æ®µé™é€Ÿåœºæ™¯ï¼Œå½“è®¾ç½®äº†MONITOR_IPæ—¶æœ¬å˜é‡çš„cronä¸ç”Ÿæ•ˆï¼ˆå› ä¸ºä¼šå†²çªï¼‰ã€‚è¯¦è§ ç›¸å…³é—®é¢˜13 é—®é¢˜13ã€‚ 33 CRON_IYUU_HELP 4.3.8+å¯ç”¨ã€‚IYUUPlusè¾…åŠ©ä»»åŠ¡çš„cronï¼Œè‡ªåŠ¨é‡æ ¡éªŒã€è‡ªåŠ¨æ¢å¤åšç§ï¼Œè¯¦è§ ç›¸å…³é—®é¢˜14ã€‚ 34 EXTRA_PACKAGES 4.3.9+å¯ç”¨ã€‚ä½ éœ€è¦å®‰è£…çš„å…¶ä»–è½¯ä»¶åŒ…ï¼Œå½¢å¦‚htop nano nodejsï¼Œå¤šä¸ªè½¯ä»¶åŒ…ç”¨åŠè§’ç©ºæ ¼åˆ†å¼€ï¼Œåœ¨docker cliä¸­è¯·ç”¨ä¸€å¯¹åŒå¼•å·å¼•èµ·æ¥ï¼Œåœ¨docker-composeä¸­ä¸è¦å¢åŠ å¼•å·ã€‚ ä»¥ä¸‹æ˜¯ä»…iyuuæ ‡ç­¾é¢å¤–å¯ç”¨çš„ç¯å¢ƒå˜é‡ï¼š\nåºå· å˜é‡å é»˜è®¤å€¼ è¯´æ˜ 1 IYUU_REPO_URL https://gitee.com/ledc/iyuuplus.git æŒ‡å®šä»å“ªé‡Œè·å–IYUUPlusçš„ä»£ç ï¼Œé»˜è®¤ä»giteeæ›´æ–°ï¼Œå¦‚æœä½ æƒ³ä»githubæ›´æ–°ï¼Œå¯ä»¥è®¾ç½®ä¸ºï¼šhttps://github.com/ledccn/IYUUPlus.git åˆ›å»º ç¾¤æ™– å®‰è£…åè®¿é—®http://ip:8080ã€‚å¦‚æƒ³ä½¿ç”¨é›†æˆäº†IYUUPlusçš„qBittorrentï¼ˆè‡ªåŠ¨è®¾ç½®å¥½IYUUPlusä¸­çš„ä¸‹è½½å™¨ï¼‰ï¼Œè¯·ä½¿ç”¨docker cliä»¥å‘½ä»¤è¡Œæ–¹å¼éƒ¨ç½²ã€‚\nå‘½ä»¤è¡Œdocker cli é™¤WEBUI_PORT BT_PORT PUID PGIDè¿™å‡ ä¸ªç¯å¢ƒå˜é‡å¤–ï¼Œå¦‚æœä½ è¿˜éœ€è¦ä½¿ç”¨å…¶ä»–ç¯å¢ƒå˜é‡ï¼Œè¯·æ ¹æ®ç¯å¢ƒå˜é‡æ¸…å•æŒ‰ç…§-e å˜é‡å=\u0026quot;å˜é‡å€¼\u0026quot; \\çš„å½¢å¼è‡ªè¡Œæ·»åŠ åœ¨åˆ›å»ºå‘½ä»¤ä¸­ã€‚\narmv7è®¾å¤‡å¦‚è‹¥æ— æ³•ä½¿ç”¨ç½‘ç»œï¼Œå¯èƒ½æ˜¯seccompé—®é¢˜ï¼Œè¯¦è§ è¿™é‡Œã€‚å¯ä»¥åœ¨åˆ›å»ºå‘½ä»¤ä¸­å¢åŠ ä¸€è¡Œ--security-opt seccomp=unconfined \\ æ¥è§£å†³ã€‚\nåˆ›å»ºå®Œæˆåè¯·è®¿é—®http://\u0026lt;IP\u0026gt;:\u0026lt;WEBUI_PORT\u0026gt;ï¼ˆå¦‚æœªä¿®æ”¹ï¼Œå¯¹å®‰è£…æœºé»˜è®¤æ˜¯http://127.0.0.1:8080ï¼‰æ¥å¯¹qbittorrentä½œè¿›ä¸€æ­¥è®¾ç½®ï¼Œåˆå§‹ç”¨æˆ·åå¯†ç ï¼šadmin/adminadminã€‚å¦‚è¦åœ¨å…¬ç½‘è®¿é—®ï¼Œè¯·åŠ¡å¿…ä¿®æ”¹ç”¨æˆ·åå’Œå¯†ç ã€‚\né’ˆå¯¹iyuuæ ‡ç­¾ï¼Œåˆ›å»ºåå¯è®¿é—®http://\u0026lt;IP\u0026gt;:8787è¿›è¡ŒIYUUPlusè®¾ç½®ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 ## latestæ ‡ç­¾æˆ–unstableæ ‡ç­¾ docker run -dit \\ -v $PWD/qbittorrent:/data `# å†’å·å·¦è¾¹è¯·ä¿®æ”¹ä¸ºä½ æƒ³åœ¨æœ¬åœ°ä¿å­˜çš„è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„ç”¨æ¥ä¿å­˜ä½ ä¸ªäººçš„é…ç½®æ–‡ä»¶` \\ -e PUID=\u0026#34;1000\u0026#34; `# è¾“å…¥id -uå¯æŸ¥è¯¢ï¼Œç¾¤æ™–å¿…é¡»æ”¹` \\ -e PGID=\u0026#34;100\u0026#34; `# è¾“å…¥id -gå¯æŸ¥è¯¢ï¼Œç¾¤æ™–å¿…é¡»æ”¹` \\ -e WEBUI_PORT=\u0026#34;8080\u0026#34; `# WEBUIæ§åˆ¶ç«¯å£ï¼Œå¯è‡ªå®šä¹‰` \\ -e BT_PORT=\u0026#34;34567\u0026#34; `# BTç›‘å¬ç«¯å£ï¼Œå¯è‡ªå®šä¹‰` \\ -p 8080:8080 `# å†’å·å·¦å³ä¸€æ ·ï¼Œè¦å’ŒWEBUI_PORTä¸€è‡´ï¼Œå‘½ä»¤ä¸­çš„3ä¸ª8080è¦æ”¹ä¸€èµ·æ”¹` \\ -p 34567:34567/tcp `# å†’å·å·¦å³ä¸€æ ·ï¼Œè¦å’ŒBT_PORTä¸€è‡´ï¼Œå‘½ä»¤ä¸­çš„5ä¸ª34567è¦æ”¹ä¸€èµ·æ”¹` \\ -p 34567:34567/udp `# å†’å·å·¦å³ä¸€æ ·ï¼Œè¦å’ŒBT_PORTä¸€è‡´ï¼Œå‘½ä»¤ä¸­çš„5ä¸ª34567è¦æ”¹ä¸€èµ·æ”¹` \\ --tmpfs /tmp \\ --restart always \\ --name qbittorrent \\ --hostname qbittorrent \\ nevinee/qbittorrent `# å¦‚æƒ³å‚ä¸qbittorrentæµ‹è¯•å·¥ä½œï¼Œå¯ä»¥æŒ‡å®šæµ‹è¯•æ ‡ç­¾nevinee/qbittorrent:unstable` ## iyuuæ ‡ç­¾ docker run -dit \\ -v $PWD/qbittorrent:/data `# å†’å·å·¦è¾¹è¯·ä¿®æ”¹ä¸ºä½ æƒ³åœ¨æœ¬åœ°ä¿å­˜çš„è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„ç”¨æ¥ä¿å­˜ä½ ä¸ªäººçš„é…ç½®æ–‡ä»¶` \\ -e PUID=\u0026#34;1000\u0026#34; `# è¾“å…¥id -uå¯æŸ¥è¯¢ï¼Œç¾¤æ™–å¿…é¡»æ”¹` \\ -e PGID=\u0026#34;100\u0026#34; `# è¾“å…¥id -gå¯æŸ¥è¯¢ï¼Œç¾¤æ™–å¿…é¡»æ”¹` \\ -e WEBUI_PORT=\u0026#34;8080\u0026#34; `# WEBUIæ§åˆ¶ç«¯å£ï¼Œå¯è‡ªå®šä¹‰` \\ -e BT_PORT=\u0026#34;34567\u0026#34; `# BTç›‘å¬ç«¯å£ï¼Œå¯è‡ªå®šä¹‰` \\ -p 8080:8080 `# å†’å·å·¦å³ä¸€æ ·ï¼Œè¦å’ŒWEBUI_PORTä¸€è‡´ï¼Œå‘½ä»¤ä¸­çš„3ä¸ª8080è¦æ”¹ä¸€èµ·æ”¹` \\ -p 34567:34567/tcp `# å†’å·å·¦å³ä¸€æ ·ï¼Œè¦å’ŒBT_PORTä¸€è‡´ï¼Œå‘½ä»¤ä¸­çš„5ä¸ª34567è¦æ”¹ä¸€èµ·æ”¹` \\ -p 34567:34567/udp `# å†’å·å·¦å³ä¸€æ ·ï¼Œè¦å’ŒBT_PORTä¸€è‡´ï¼Œå‘½ä»¤ä¸­çš„5ä¸ª34567è¦æ”¹ä¸€èµ·æ”¹` \\ -p 8787:8787 `# IYUUPlusçš„WebUIæ§åˆ¶ç«¯å£` \\ --tmpfs /tmp \\ --restart always \\ --name qbittorrent \\ --hostname qbittorrent \\ nevinee/qbittorrent:iyuu docker compose æ–°å»ºcompose.ymlæ–‡ä»¶å¦‚ä¸‹ï¼ˆdocker composeå®‰è£…æ–¹æ³•ï¼‰ï¼Œåˆ›å»ºå¥½åä»¥docker-compose up -d(æ—§ç‰ˆ)æˆ–docker compose up -d(æ–°ç‰ˆ)å‘½ä»¤å¯åŠ¨å³å¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 version: \u0026#34;2.0\u0026#34; services: qbittorrent: image: nevinee/qbittorrent # å¦‚æƒ³å‚ä¸æµ‹è¯•å·¥ä½œå¯ä»¥æŒ‡å®šnevinee/qbittorrent:unstableï¼Œå¦‚æƒ³ä½¿ç”¨é›†æˆäº†iyuuçš„ç‰ˆæœ¬è¯·æŒ‡å®šnevinee/qbittorrent:iyuu container_name: qbittorrent restart: always tty: true network_mode: bridge hostname: qbitorrent stop_grace_period: 10m # è®©qBittorrentç¨‹åºè‡ªè¡Œé€€å‡ºåå†å…³é—­/åˆ é™¤/é‡å¯å®¹å™¨çš„æœ€é•¿æ—¶é—´ï¼Œå¦‚ä¸è®¾ç½®ï¼Œåˆ™dockeré»˜è®¤10ç§’ï¼Œè¿™æ—¶ï¼Œç§å­å¤šçš„qBittorrentå¯èƒ½è¿˜æ²¡æœ‰å®Œå…¨ä¿å­˜å¥½å…¨éƒ¨éœ€è¦ä¿å­˜çš„ä¿¡æ¯ã€‚ volumes: - ./data:/data # é…ç½®ä¿å­˜ç›®å½• tmpfs: - /tmp environment: # ä¸‹é¢æœªåˆ—å‡ºçš„å…¶ä»–ç¯å¢ƒå˜é‡è¯·æ ¹æ®ç¯å¢ƒå˜é‡æ¸…å•è‡ªè¡Œæ·»åŠ  - WEBUI_PORT=8080 # WEBUIæ§åˆ¶ç«¯å£ï¼Œå¯è‡ªå®šä¹‰ - BT_PORT=34567 # BTç›‘å¬ç«¯å£ï¼Œå¯è‡ªå®šä¹‰ - PUID=1000 # è¾“å…¥id -uå¯æŸ¥è¯¢ï¼Œç¾¤æ™–å¿…é¡»æ”¹ - PGID=100 # è¾“å…¥id -gå¯æŸ¥è¯¢ï¼Œç¾¤æ™–å¿…é¡»æ”¹ ports: - 8080:8080 # å†’å·å·¦å³ä¸€è‡´ï¼Œå¿…é¡»åŒWEBUI_PORTä¸€æ ·ï¼Œæœ¬æ–‡ä»¶ä¸­çš„3ä¸ª8080è¦æ”¹ä¸€èµ·æ”¹ - 34567:34567 # å†’å·å·¦å³ä¸€è‡´ï¼Œå¿…é¡»åŒBT_PORTä¸€æ ·ï¼Œæœ¬æ–‡ä»¶ä¸­çš„5ä¸ª34567è¦æ”¹ä¸€èµ·æ”¹ - 34567:34567/udp # å†’å·å·¦å³ä¸€è‡´ï¼Œå¿…é¡»åŒBT_PORTä¸€æ ·ï¼Œæœ¬æ–‡ä»¶ä¸­çš„5ä¸ª34567è¦æ”¹ä¸€èµ·æ”¹ #- 8787:8787 # å¦‚ä½¿ç”¨çš„æ˜¯nevinee/qbittorrent:iyuuæ ‡ç­¾ï¼Œè¯·è§£é™¤æœ¬è¡Œæ³¨é‡Š #security_opt: # armv7è®¾å¤‡è¯·è§£é™¤æœ¬è¡Œå’Œä¸‹ä¸€è¡Œçš„æ³¨é‡Š #- seccomp=unconfined å¦‚è‹¥æƒ³å°†qbittorrentå»ºç«‹åœ¨å·²ç»åˆ›å»ºå¥½çš„macvlanç½‘ç»œä¸Šï¼Œå¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼åˆ›å»ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 version: \u0026#34;2.0\u0026#34; services: qbittorrent: image: nevinee/qbittorrent # å¦‚æƒ³å‚ä¸æµ‹è¯•å·¥ä½œå¯ä»¥æŒ‡å®šnevinee/qbittorrent:unstableï¼Œå¦‚æƒ³ä½¿ç”¨é›†æˆäº†iyuuçš„ç‰ˆæœ¬ï¼Œè¯·æŒ‡å®šnevinee/qbittorrent:iyuu container_name: qbittorrent restart: always tty: true networks: \u0026lt;ä½ çš„macvlanç½‘ç»œåç§°\u0026gt;: ipv4_address: \u0026lt;ä½ æƒ³è®¾ç½®çš„ip\u0026gt; aliases: - qbittorrent dns: # dockeræ˜¯æ— æ³•ä¸ºmacvlanç½‘ç»œæä¾›dnsè§£ææœåŠ¡çš„ï¼Œè¦æƒ³æ­£å¸¸åœ¨macvlanç½‘ç»œä¸Šå‘é€šçŸ¥ï¼Œè¯·ç»™å®¹å™¨æ·»åŠ dnsæœåŠ¡å™¨ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ä½ çš„ç½‘å…³ipä½œä¸ºdnsæœåŠ¡å™¨ - 223.5.5.5 - 114.114.114.114 - 1.2.4.8 hostname: qbitorrent stop_grace_period: 10m # è®©qBittorrentç¨‹åºè‡ªè¡Œé€€å‡ºåå†å…³é—­/åˆ é™¤/é‡å¯å®¹å™¨çš„æœ€é•¿æ—¶é—´ï¼Œå¦‚ä¸è®¾ç½®ï¼Œåˆ™dockeré»˜è®¤10ç§’ï¼Œè¿™æ—¶ï¼Œç§å­å¤šçš„qBittorrentå¯èƒ½è¿˜æ²¡æœ‰å®Œå…¨ä¿å­˜å¥½å…¨éƒ¨éœ€è¦ä¿å­˜çš„ä¿¡æ¯ã€‚ volumes: - ./data:/data tmpfs: - /tmp environment: # ä¸‹é¢æœªåˆ—å‡ºçš„å…¶ä»–ç¯å¢ƒå˜é‡è¯·æ ¹æ®ç¯å¢ƒå˜é‡æ¸…å•è‡ªè¡Œæ·»åŠ  - WEBUI_PORT=8080 # WEBUIæ§åˆ¶ç«¯å£ï¼Œå¯è‡ªå®šä¹‰ - BT_PORT=34567 # BTç›‘å¬ç«¯å£ï¼Œå¯è‡ªå®šä¹‰ - PUID=1000 # è¾“å…¥id -uå¯æŸ¥è¯¢ï¼Œç¾¤æ™–å¿…é¡»æ”¹ - PGID=100 # è¾“å…¥id -gå¯æŸ¥è¯¢ï¼Œç¾¤æ™–å¿…é¡»æ”¹ #security_opt: # armv7è®¾å¤‡è¯·è§£é™¤æœ¬è¡Œå’Œä¸‹ä¸€è¡Œçš„æ³¨é‡Š #- seccomp=unconfined networks: \u0026lt;ä½ çš„macvlanç½‘ç»œåç§°\u0026gt;: external: true åˆ›å»ºå®Œæˆåè¯·è®¿é—®http://\u0026lt;IP\u0026gt;:\u0026lt;WEBUI_PORT\u0026gt;ï¼ˆå¦‚æœªä¿®æ”¹ï¼Œå¯¹å®‰è£…æœºé»˜è®¤æ˜¯http://127.0.0.1:8080ï¼‰æ¥å¯¹qbittorrentä½œè¿›ä¸€æ­¥è®¾ç½®ï¼Œåˆå§‹ç”¨æˆ·åå¯†ç ï¼šadmin/adminadminã€‚å¦‚è¦åœ¨å…¬ç½‘è®¿é—®ï¼Œè¯·åŠ¡å¿…ä¿®æ”¹ç”¨æˆ·åå’Œå¯†ç ã€‚\né’ˆå¯¹iyuuæ ‡ç­¾ï¼Œåˆ›å»ºåå¯è®¿é—®http://\u0026lt;IP\u0026gt;:8787è¿›è¡ŒIYUUPlusè®¾ç½®ã€‚\nç›®å½•è¯´æ˜ å¦‚æœæŒ‰ç…§ä¸Šè¿°ä»»ä½•ä¸€ç§éƒ¨ç½²æ–¹å¼ï¼Œåœ¨æ˜ å°„çš„ç›®å½•ä¸‹ä¼šæœ‰ä»¥ä¸‹æ–‡ä»¶å¤¹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 /data # åŸºç¡€è·¯å¾„åœ¨å®¹å™¨å†…ä¸º/dataï¼Œä¸‹é¢æ‰€æœ‰æ–‡ä»¶å¤¹å‡å¤„äº/dataçš„ä¸‹ä¸€å±‚ï¼ŒåŸºç¡€è·¯å¾„åœ¨å®¿ä¸»æœºä¸Šä¸ºä½ åˆ›å»ºå®¹å™¨æ—¶æ˜ å°„çš„ â”œâ”€â”€ cache # qbittorrentçš„ç¼“å­˜ç›®å½• â”œâ”€â”€ certs # ç”¨æ¥å­˜æ”¾sslè¯ä¹¦ï¼Œé»˜è®¤æ˜¯ç©ºçš„ï¼Œå¯å¦å¤–ä½¿ç”¨acme.shæ¥ç”³è¯·sslè¯ä¹¦ â”œâ”€â”€ config # æ‰€æœ‰çš„é…ç½®æ–‡ä»¶ä¿å­˜ç›®å½• â”‚Â â”œâ”€â”€ qBittorrent.conf # **é…ç½®æ–‡ä»¶ï¼Œå¾ˆé‡è¦ï¼Œå¦‚éœ€æ¢å¤é…ç½®æ­¤æ–‡ä»¶å¿…é¡»ä¿ç•™** â”‚Â â”œâ”€â”€ qBittorrent-data.conf # **ä¸Šä¼ ä¸‹è½½æ•°æ®ç»Ÿè®¡æ–‡ä»¶ï¼Œå¦‚éœ€æ¢å¤é…ç½®æ­¤æ–‡ä»¶å¿…é¡»ä¿ç•™** â”‚Â â””â”€â”€ rss # **rssçš„é…ç½®æ–‡ä»¶ä¿å­˜ç›®å½•ï¼Œå¦‚éœ€æ¢å¤é…ç½®æ­¤ç›®å½•å¿…é¡»ä¿ç•™** â”œâ”€â”€ data # æ‰€æœ‰çš„æ•°æ®æ–‡ä»¶ä¿å­˜ç›®å½• â”‚Â â”œâ”€â”€ BT_backup # **å½“é«˜çº§è®¾ç½®ä¸­æ¢å¤æ–‡ä»¶é€‰æ‹©ä¸º\u0026#34;Fastresume files\u0026#34;æ—¶ï¼Œç§å­å’Œå¿«é€Ÿæ¢å¤æ–‡ä»¶ä¿å­˜ç›®å½•ï¼Œå¦‚éœ€æ¢å¤åšç§æ•°æ®æ­¤ç›®å½•å¿…é¡»ä¿ç•™** â”‚Â â”œâ”€â”€ torrents.db # **å½“é«˜çº§è®¾ç½®ä¸­æ¢å¤æ–‡ä»¶é€‰æ‹©ä¸º\u0026#34;SQLite database\u0026#34;æ—¶ï¼Œç§å­å’Œå¿«é€Ÿæ¢å¤æ•°æ®çš„æ•°æ®åº“æ–‡ä»¶ï¼Œå¦‚éœ€æ¢å¤åšç§æ•°æ®æ­¤æ–‡ä»¶å¿…é¡»ä¿ç•™** â”‚Â â”œâ”€â”€ GeoDB # IPæ•°æ®ä¿å­˜ç›®å½• â”‚Â â”œâ”€â”€ logs # æ—¥å¿—æ–‡ä»¶ä¿å­˜ç›®å½• â”‚Â â”œâ”€â”€ nova3 # å¯ç”¨qBittorrentæœç´¢åŠŸèƒ½åç›¸å…³æ–‡ä»¶ä¿å­˜ç›®å½• â”‚Â â””â”€â”€ rss # rssè®¢é˜…ä¸‹è½½æ–‡ä»¶ä¿å­˜ç›®å½• â”œâ”€â”€ diy # å­˜æ”¾ä½ è‡ªå·±ç¼–å†™çš„è„šæœ¬çš„ç›®å½•ï¼Œdiy.shéœ€è¦å­˜æ”¾åœ¨æ­¤ â”œâ”€â”€ downloads # é»˜è®¤ä¸‹è½½ç›®å½• â”œâ”€â”€ iyuu_db # ä»…iyuuæ ‡ç­¾æœ‰æ­¤ç›®å½•ï¼Œç”¨æ¥ä¿å­˜IYUUPlusçš„é…ç½®æ–‡ä»¶ï¼ŒIYUUPlusç”¨æˆ·é¡»ä¿ç•™æ­¤æ–‡ä»¶å¤¹ â”œâ”€â”€ logs -\u0026gt; data/logs # åªæ˜¯ä¸ªè½¯è¿æ¥ï¼Œè¿æ¥åˆ°å®¹å™¨å†…çš„/data/data/logs â”œâ”€â”€ temp # ä¸‹è½½æ–‡ä»¶ä¸´æ—¶å­˜æ”¾ç›®å½•ï¼Œé»˜è®¤åœ¨é…ç½®ä¸­æœªå¯ç”¨ â”œâ”€â”€ torrents # ä¿å­˜ç§å­æ–‡ä»¶ç›®å½•ï¼Œé»˜è®¤åœ¨é…ç½®ä¸­æœªå¯ç”¨ â”œâ”€â”€ watch # ç›‘æ§ç›®å½•ï¼Œç›‘æ§è¿™ä¸ªç›®å½•ä¸‹çš„.torrentæ–‡ä»¶å¹¶è‡ªåŠ¨ä¸‹è½½ï¼Œé»˜è®¤åœ¨é…ç½®ä¸­æœªå¯ç”¨ â””â”€â”€ webui # å­˜æ”¾å…¶ä»–webuiæ–‡ä»¶çš„ç›®å½•ï¼Œéœ€è¦è‡ªå·±å­˜æ”¾ï¼Œé»˜è®¤åœ¨é…ç½®ä¸­æœªå¯ç”¨ æœ‰ä¸¤ä¸ªæ˜Ÿå·æ ‡è®°çš„æ–‡ä»¶æˆ–ç›®å½•æ˜¯é‡è¦ç›®å½•ï¼Œæ¢å¤æ•°æ®å¿…é¡»è¦æœ‰è¿™å‡ ä¸ªã€‚\nåœ¨ è¿™é‡Œ å¯ä»¥æŸ¥é˜…æ‰€æœ‰å¯ç”¨çš„éå®˜æ–¹webuiã€‚\nç›¸å…³é—®é¢˜ ä½¿ç”¨æ­¤é•œåƒä¼šå¯¼è‡´å°å·å— æ­¤é•œåƒæœªä¿®æ”¹qbittorrentå®¢æˆ·ç«¯å®˜æ–¹ä»»ä½•ä¿¡æ¯ï¼Œåœ¨å’Œptç«™trackeræœåŠ¡å™¨äº¤äº’æ—¶åé¦ˆçš„ä¸€åˆ‡ä¿¡æ¯å‡æ˜¯qbittorrentå®˜æ–¹åŸç‰ˆåé¦ˆçš„ä¿¡æ¯ï¼Œæ­¤é•œåƒåªæ˜¯åŸºäºqbittorrenté¢å¤–å¢åŠ äº†ä¸€äº›è„šæœ¬è€Œå·²ã€‚å¢åŠ çš„è„šæœ¬å…¨éƒ¨ä»£ç åœ¨ è¿™é‡Œ å¯ä»¥æŸ¥çœ‹ï¼Œä¸ä¼šå› ä¸ºä½¿ç”¨æ­¤é•œåƒå¯¼è‡´ptè´¦å·è¢«å°ã€‚\nå¦‚ä½•åœ¨è¿è¡Œ dl-finish \u0026ldquo;%K\u0026rdquo; æ—¶è°ƒç”¨è‡ªå®šä¹‰è„šæœ¬ æ­¤åŠŸèƒ½å¯ç”¨ç‰ˆæœ¬ï¼š4.3.7+ï¼›\nåœ¨4.5.0ä»¥å‰çš„ç‰ˆæœ¬ä¸èƒ½ä½¿ç”¨%Kï¼Œåªèƒ½ä½¿ç”¨%Iï¼›\nåªè¦ä½ å°†åä¸ºdiy.shçš„shellè„šæœ¬æ”¾åœ¨æ˜ å°„ç›®å½•ä¸‹çš„diyæ–‡ä»¶å¤¹ä¸‹å³å¯ï¼Œå®¹å™¨å†…è·¯å¾„ä¸º/data/diy/diy.shï¼ˆhashå·²å­˜å‚¨åœ¨åä¸ºtorrent_hashçš„å˜é‡ä¸­ï¼Œå¯é€šè¿‡æ­¤å€¼è·å–å…¶ä»–ä¿¡æ¯ï¼‰ã€‚\nå¦‚æƒ³ä¼ å…¥é™¤â€œ%Kâ€ç§å­IDä¹‹å¤–çš„å…¶ä»–å‚æ•°ï¼Œå¯ä»¥åœ¨ è®¾ç½®-\u0026gt;ä¸‹è½½-\u0026gt;Torrent å®Œæˆæ—¶è¿è¡Œå¤–éƒ¨ç¨‹åº ä¸‹å¡«å…¥è¿™ç§å½¢å¼ï¼šdl-finish \u0026quot;%K\u0026quot; \u0026quot;%N\u0026quot; \u0026quot;%L\u0026quot; \u0026quot;%F\u0026quot;ï¼Œå¿…é¡»ä¿è¯\u0026rdquo;%K\u0026quot;æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œåé¢çš„å‚æ•°æ ¹æ®ä½ è‡ªå·±éœ€è¦è°ƒæ•´ã€‚åœ¨diy.shä¸­ï¼Œ\u0026quot;%N\u0026quot; \u0026quot;%L\u0026quot; \u0026quot;%F\u0026quot;åˆ†åˆ«é€šè¿‡$2 $3 $4è°ƒç”¨ã€‚å¦‚ï¼šcmd \u0026quot;$2\u0026quot; \u0026quot;$3 \u0026quot;$4\u0026quot;ã€‚$2, $3, $4åˆ†åˆ«æŒ‡ä¼ å…¥çš„ç¬¬2, ç¬¬3, ç¬¬4ä¸ªå‚æ•°ï¼Œåˆ†åˆ«å¯¹åº”\u0026quot;%N\u0026quot; \u0026quot;%L\u0026quot; \u0026quot;%F\u0026quot;ã€‚\nå‡å¦‚ä½ è¦è°ƒç”¨å…¶ä»–è¯­è¨€çš„è„šæœ¬ï¼Œæ¯”å¦‚pythonï¼Œå¯ä»¥åœ¨diy.shä¸­å†™ä¸Špython3 /data/diy/your_python_scripts.py $torrent_hashå³å¯ã€‚å¦‚éœ€è¦ä¼ å…¥æ›´å¤šå‚æ•°ï¼Œè¯·å‚è€ƒä¸Šä¸€æ¡åœ¨â€œTorrent å®Œæˆæ—¶è¿è¡Œå¤–éƒ¨ç¨‹åºâ€å¡«å…¥å½¢å¦‚dl-finish \u0026quot;%K\u0026quot; \u0026quot;%N\u0026quot; \u0026quot;%L\u0026quot; \u0026quot;%F\u0026quot;çš„å½¢å¼ï¼Œç„¶ååœ¨diy.shä¸­å†™ä¸Špython3 /data/diy/your_python_scripts.py \u0026quot;$2\u0026quot; \u0026quot;$3\u0026quot; \u0026quot;$4\u0026quot;ã€‚\nå¦‚éœ€è¦ä¸‹è½½å®Œæˆåè‡ªåŠ¨è§¦å‘EMBY/JELLYFINæ‰«æåª’ä½“åº“ï¼Œè§¦å‘ChineseSubFinderè‡ªåŠ¨ä¸ºåˆšåˆšä¸‹è½½å®Œæˆçš„è§†é¢‘è‡ªåŠ¨ä¸‹è½½å­—å¹•ï¼Œè¯·æŒ‰ç…§ è¿™é‡Œ æ“ä½œã€‚\nå¦‚ä½•ä¼˜é›…çš„å…³é—­qbittorrentå®¹å™¨ æš´åŠ›å¼ºåˆ¶å…³é—­qbittorrentå®¹å™¨è‡ªç„¶æ˜¯å®¹æ˜“ä¸¢å¤±ä»»åŠ¡çš„ï¼Œæ‰€ä»¥åœ¨å…³é—­å‰åº”å½“å…ˆå°†æ‰€æœ‰ç§å­æš‚åœï¼Œè¿‡ä¸€ä¼šå†å…³é—­å®¹å™¨ã€‚è¿™æ—¶ï¼Œæ‰€æœ‰çš„é…ç½®æ–‡ä»¶å’Œtorrentæ¢å¤æ–‡ä»¶ä¹Ÿéƒ½æ˜¯æš‚åœåçš„çŠ¶æ€ï¼Œç„¶åå†æ–°å»ºå®¹å™¨æˆ–é‡æ–°éƒ¨ç½²ï¼Œå¯åŠ¨åå†å¼€å§‹æ‰€æœ‰ä»»åŠ¡ã€‚\nè¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œåƒä¸‡ä¸è¦åœ¨æœ‰ä¸‹è½½ä»»åŠ¡æ—¶å…³é—­æˆ–é‡å¯qbittorrentå®¹å™¨ã€‚\nå¦‚ä½•ä»å…¶ä»–ä½œè€…çš„é•œåƒ/å¥—ä»¶ç‰ˆè½¬ç§»è‡³æœ¬é•œåƒ å¦‚æœå¯ç”¨äº†ssl/httpsï¼Œè¯·å…ˆåœ¨åŸqbittorrentçš„webuiä¸­ç¦ç”¨ï¼Œæˆ–è€…å°†qBittorrent.confä¸­WebUI\\HTTPS\\Enabled=trueæ”¹ä¸ºWebUI\\HTTPS\\Enabled=falseã€‚\nè¯·æ³¨æ„è¦ä¼˜é›…çš„å…³é—­æ—§å®¹å™¨åå†å¤„ç†é…ç½®æ–‡ä»¶ã€‚\nè¿›å…¥åŸæ¥å®¹å™¨çš„æ˜ å°„ç›®å½•ï¼ˆæˆ–åŸå¥—ä»¶ç‰ˆé…ç½®æ–‡ä»¶ä¿å­˜ç›®å½•ï¼Œå¯èƒ½æ˜¯éšè—çš„ï¼‰ä¸‹ï¼Œåœ¨configä¸‹åˆ†åˆ«æ‰¾åˆ°qBittorrent.conf qBittorrent-data.conf rssï¼Œåœ¨dataä¸‹æ‰¾åˆ°BT_backupæˆ–torrents.dbï¼Œç„¶åå°†å…¶å‚è€ƒä¸Šé¢çš„ç›®å½•æ ‘æ”¾åœ¨æ–°å®¹å™¨çš„æ˜ å°„ç›®å½•ä¸‹ï¼Œç„¶ååœ¨åˆ›å»ºå®¹å™¨æ—¶ï¼Œä¿è¯æ–°å®¹å™¨ä¸­çš„ä¸‹è½½æ–‡ä»¶çš„ä¿å­˜è·¯å¾„å’Œæ—§å®¹å™¨ä¸€è‡´ï¼Œå¹¶æ–°å»ºå®¹å™¨å³å¯ã€‚\nä¸¾ä¾‹è¯´æ˜å¦‚ä½•ä¿è¯æ–°å®¹å™¨ä¸­çš„ä¸‹è½½æ–‡ä»¶çš„ä¿å­˜è·¯å¾„å’Œæ—§å®¹å™¨ä¸€è‡´ï¼Œæ¯”å¦‚æ—§å®¹å™¨ä¸­ä¸‹è½½äº†ä¸€ä¸ª xxx.2020.BluRay.1080p.x264.DTS-XXXï¼Œä¿å­˜è·¯å¾„ä¸º/moviesï¼ˆå®¿ä¸»æœºä¸Šçš„çœŸå®è·¯å¾„ä¸º/volume1/home/id/moviesï¼‰ï¼Œé‚£ä¹ˆåœ¨æ–°å»ºæ–°å®¹å™¨æ—¶ï¼Œç»™æ–°å®¹å™¨å¢åŠ ä¸€ä¸ªè·¯å¾„æ˜ å°„ï¼š/volume1/home/id/movies:/moviesã€€å³å¯ã€‚\næ³¨æ„æ–°å®¹å™¨çš„PUID/PGIDå’Œè¦æ—§å®¹å™¨ä¿æŒä¸€è‡´ã€‚\næ³¨æ„åœ¨ è®¾ç½® -\u0026gt; ä¸‹è½½ ä¸­å‹¾é€‰ Torrent å®Œæˆæ—¶è¿è¡Œå¤–éƒ¨ç¨‹åº å¹¶å¡«å…¥ dl-finish \u0026quot;%K\u0026quot;ï¼Œå¦‚éœ€è¦httpsè¦é‡æ–°è®¾ç½®è¯ä¹¦è·¯å¾„ã€‚\nå¯ä¸å¯ä»¥ä¸ä½¿ç”¨é»˜è®¤ä¸‹è½½ç›®å½• é»˜è®¤ä¸‹è½½ç›®å½•æ˜¯/data/downloadsï¼Œå¦‚ä¸æƒ³ä½¿ç”¨é»˜è®¤ä¸‹è½½ç›®å½•ï¼Œå¯ä»¥é¢å¤–æ˜ å°„å…¶ä»–è·¯å¾„ï¼Œæ¯”å¦‚æ˜ å°„/volume1/media:/mediaï¼Œç„¶ååœ¨qbittorrentä¸­è®¾ç½®é»˜è®¤ä¸‹è½½ç›®å½•ä¸º/mediaï¼Œä¹Ÿå¯ä»¥åœ¨æ¯æ¬¡ä¸‹è½½æ—¶è‡ªå·±è¾“å…¥ä¸‹è½½ç›®å½•ä¸º/mediaã€‚\né—å¿˜ç™»é™†å¯†ç å¦‚ä½•é‡ç½® é‡å¯ä¸€æ¬¡å®¹å™¨å³å¯ï¼Œå¯åŠ¨æ—¶å®¹å™¨ä¼šè‡ªåŠ¨ä»¥ä½ åˆ›å»ºå®¹å™¨æ—¶å®šä¹‰çš„ç¯å¢ƒå˜é‡QB_USERNAMEå’ŒQB_PASSWORDå»è®¾ç½®ç™»é™†qBittorrentçš„ç”¨æˆ·åå’Œå¯†ç ã€‚\nå¦‚ä½•ä¸emby, jellyfin, plexç­‰ç­‰é…åˆä½¿ç”¨ å°†éœ€è¦é…åˆä½¿ç”¨çš„å®¹å™¨çš„ç¯å¢ƒå˜é‡PUID/PGIDè®¾ç½®ä¸ºä¸€æ ·çš„å³å¯ã€‚\nå¯ç”¨äº†å…¶ä»–éå®˜æ–¹webuiï¼Œå¯¼è‡´webuiæ‰“ä¸å¼€ï¼Œå¦‚ä½•å…³é—­ 1 2 3 4 5 # è¿›å…¥å®¹å™¨ docker exec -it qbittorrent bash # å…³é—­å¤‡ç”¨webui source /usr/local/bin/share; $cmd_curl_post -d \u0026#39;json={\u0026#34;alternative_webui_enabled\u0026#34;:false}\u0026#39; $api_url_base/app/setPreferences å¦‚ä½•è‡ªåŠ¨æ›´æ–°å®¹å™¨ å®‰è£…watchtowerå³å¯ï¼Œè¯¦è§ è¿™é‡Œ\nå®‰è£…äº†watchtowerï¼Œå¦‚ä½•è®©qbittorrentä¸è¢«watchtowerè‡ªåŠ¨æ›´æ–° æ–¹æ³•1ï¼šéƒ¨ç½²qbittorrentå®¹å™¨æ—¶ï¼Œç›´æ¥æŒ‡å®šæ ‡ç­¾ï¼Œå¦‚nevinee/qbittorrent:4.3.7ï¼›\næ–¹æ³•2ï¼ˆæ¨èï¼‰ï¼šåœ¨éƒ¨ç½²æ—¶åœ¨å‘½ä»¤ä¸­æ·»åŠ ä¸€ä¸ªlabelï¼šcom.centurylinklabs.watchtower.enable=falseï¼š\ndocker cliï¼š\n1 --label com.centurylinklabs.watchtower.enable=false \\ docker-compose:\n1 2 labels: com.centurylinklabs.watchtower.enable: false ä¸ºä½•å»ºè®®å°†qbittorrentå®‰è£…åœ¨macvlanç½‘ç»œä¸Š å¯ä»¥åœ¨ç½‘å…³ä¸Šç»™qbittorrentæ‰€åœ¨ipç‹¬ç«‹è®¾ç½®é™é€Ÿ;\nå¦‚æœæœ‰ç”¨openwrtæ—¶ï¼Œå¯ä»¥è®©qbittorrentæ‰€åœ¨ipè·³è¿‡ä»£ç†ã€‚\nå°†qbittorrentå®‰è£…åœ¨macvlanç½‘ç»œä¸Šæ—¶ï¼Œå¦‚ä½•ä½¿ç”¨IYUUAutoReseedè‡ªåŠ¨è¾…ç§ å°†ä¸¤ä¸ªå®¹å™¨éƒ½å®‰è£…åœ¨åŒä¸€ä¸ªmacvlanç½‘ç»œä¸Šå³å¯ï¼Œæˆ–è€…ç›´æ¥å®‰è£…nevinee/qbittorrent:iyuuæ ‡ç­¾ã€‚\nå¦‚ä½•ä½¿ç”¨ CRON_ALTER_LIMITS è¿™ä¸ªç¯å¢ƒå˜é‡ 4.3.8+å¯ç”¨ã€‚\nè¯¥åŠŸèƒ½ä¸»è¦æä¾›ç»™å¤šæ—¶æ®µé™é€Ÿåœºæ™¯ä½¿ç”¨ï¼Œè¯·åœ¨qbittorrentå®¢æˆ·ç«¯ä¸­å…ˆè®¾ç½®å¥½â€å¤‡ç”¨é€Ÿåº¦é™åˆ¶â€œçš„é™åˆ¶é€Ÿç‡ã€‚\nå½“è®¾ç½®äº†æœ‰æ•ˆçš„MONITOR_IPæ—¶ï¼ŒCRON_ALTER_LIMITSçš„cronä¸ç”Ÿæ•ˆï¼ˆå› ä¸ºä¼šå†²çªï¼‰ã€‚\nè®¾ç½®å½¢å¼å¦‚ï¼š0 5 * * *:0 18 * * *|0 8 * * *:0 22 * * *ï¼Œ|å‰é¢çš„cronæ˜¯å¯ç”¨â€œå¤‡ç”¨é€Ÿåº¦é™åˆ¶â€çš„æ—¶é—´ç‚¹ï¼Œ|åé¢çš„cronæ˜¯å…³é—­â€œå¤‡ç”¨é€Ÿåº¦é™åˆ¶â€çš„æ—¶é—´ç‚¹ã€‚éœ€è¦åœ¨ä¸€å¤©ä¸­å¤šæ¬¡å¯ç”¨â€œå¤‡ç”¨é€Ÿåº¦é™åˆ¶â€çš„ï¼Œä»¥:åˆ†éš”æ¯ä¸ªcronï¼Œå¯ä»¥ä»»æ„ä¸ªcronï¼Œéœ€è¦å¤šæ¬¡å…³é—­â€œå¤‡ç”¨é€Ÿåº¦é™åˆ¶â€çš„åŒæ ·ä»¥:åˆ†éš”æ¯ä¸ªcronã€‚\næ¯”å¦‚éœ€è¦åœ¨å‘¨ä¸€è‡³å‘¨äº”çš„5:00-8:00ã€17:30-23:30ï¼Œä»¥åŠå‘¨å…­ã€å‘¨æ—¥çš„9:00-23:30è¿›è¡Œé™é€Ÿï¼Œé‚£ä¹ˆå¯ä»¥è®¾ç½®CRON_ALTER_LIMITSä¸º0 5 * * 1-5:30 17 * * 1-5:0 9 * * 0,6|0 8 * * 1-5:30 23 * * *ã€‚\næ¯”å¦‚éœ€è¦åœ¨å‘¨ä¸€è‡³å‘¨äº”çš„17:30-22:00ï¼Œä»¥åŠå‘¨å…­ã€å‘¨æ—¥çš„8:30-23:00è¿›è¡Œé™é€Ÿï¼Œé‚£ä¹ˆå¯ä»¥è®¾ç½®CRON_ALTER_LIMITSä¸º30 17 * * 1-5:30 8 * * 0,6|0 22 * * 1-5:0 23 * * 0,6ã€‚\nåœ¨docker cliä¸­è¯·ä½¿ç”¨ä¸€å¯¹åŒå¼•å·å¼•èµ·æ¥ï¼Œåœ¨docker-compose.ymlä¸­è¯·å‹¿å¢åŠ å¼•å·ã€‚\nå¦‚ä½•ä½¿ç”¨ CRON_IYUU_HELP è¿™ä¸ªç¯å¢ƒå˜é‡ 4.3.8+å¯ç”¨ã€‚\nåœ¨è®¾ç½®çš„æ—¶é—´ç‚¹æ‰§è¡Œiyuu-helpå‘½ä»¤ï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š\næ£€æŸ¥ä¸‹è½½æ¸…å•ï¼ˆå°±æ˜¯qbittorrentç­›é€‰â€œä¸‹è½½â€çš„æ¸…å•ï¼‰ï¼Œæ£€æµ‹è¯¥æ¸…å•ä¸­å¤„äºæš‚åœçŠ¶æ€ã€å¹¶ä¸”ä¸‹è½½å®Œæˆç‡ä¸º0%ï¼ˆè¾…ç§çš„ç§å­åœ¨æ ¡éªŒå‰ä¹Ÿæ˜¯0%ï¼‰çš„ç§å­ï¼Œå°†è¿™äº›ç§å­è¯·æ±‚é‡æ–°æ ¡éªŒã€‚å·²ç»è¯·æ±‚è¿‡æ ¡éªŒå¹¶ä¸”å®Œæˆç‡å¤§äº0%çš„ç§å­ä¸ä¼šå†æ¬¡æ ¡éªŒã€‚ æ£€æŸ¥æš‚åœæ¸…å•ï¼ˆå°±æ˜¯qbittorrentç­›é€‰â€œæš‚åœâ€çš„æ¸…å•ï¼‰ï¼Œæ£€æµ‹è¯¥æ¸…å•ä¸­100%ä¸‹è½½å®Œæˆ/100%æ ¡éªŒé€šè¿‡çš„ç§å­ï¼Œå°†è¿™äº›ç§å­æ¢å¤åšç§ã€‚æ ¡éªŒæœªé€šè¿‡ä¸è¾¾100%å®Œæˆç‡çš„ç§å­ä¸ä¼šå¯åŠ¨ï¼Œä»ç„¶ä¿æŒæš‚åœçŠ¶æ€ã€‚ é…åˆIYUUAutoReseedï¼Œå°†CRON_IYUU_HELPè®¾ç½®åœ¨IYUUAutoReseedè‡ªåŠ¨è¾…ç§ä»»åŠ¡çš„cronä»¥åï¼Œå¹¶è¿è¡Œè‹¥å¹²æ¬¡å³å¯ï¼ˆå› ä¸ºæ ¡éªŒæ¯”è¾ƒè´¹æ—¶ï¼Œæ‰€ä»¥è¦å¤šæ¬¡è¿è¡Œï¼‰ã€‚\næ¯”å¦‚ä½ IYUUAutoReseedè¾…ç§ä»»åŠ¡çš„cronæ˜¯22 7 * * *ï¼Œä½ æƒ³ä»è¾…ç§ä»»åŠ¡3åˆ†é’Ÿåï¼Œæ¯10åˆ†é’Ÿè¿è¡Œä¸€æ¬¡ï¼Œå…±è¿è¡Œ4æ¬¡ï¼Œé‚£ä¹ˆå¯ä»¥è®¾ç½®CRON_IYUU_HELPä¸ºï¼š25-55/10 7 * * *ã€‚\nåœ¨docker cliä¸­è¯·ä½¿ç”¨ä¸€å¯¹åŒå¼•å·å¼•èµ·æ¥ï¼Œåœ¨docker-compose.ymlä¸­è¯·å‹¿å¢åŠ å¼•å·ã€‚\nqBittorrentä½¿ç”¨httpsçš„webuiæ—¶ï¼Œiyuuå¦‚ä½•è¿æ¥ å½“qBittorrentä½¿ç”¨httpsçš„webuiæ—¶ï¼Œiyuuè¿æ¥qBittorrentéœ€è¦ä½¿ç”¨https://\u0026lt;åŸŸå\u0026gt;:\u0026lt;ç«¯å£\u0026gt;çš„å½¢å¼ï¼Œä¸èƒ½ä½¿ç”¨https://\u0026lt;IP\u0026gt;:\u0026lt;ç«¯å£\u0026gt;ï¼Œæ‰€ä»¥éœ€è¦åœ¨åˆ›å»ºiyuuå®¹å™¨ï¼ˆä½¿ç”¨nevinee/qbittorrent:iyuuæ—¶åŒæ ·ä¹Ÿéœ€è¦ï¼‰æŒ‡å®šåŸŸåå’Œipçš„å¯¹åº”å…³ç³»ã€‚\nå‘½ä»¤è¡Œåˆ›å»ºiyuuå®¹å™¨æ—¶æ—¶ï¼Œå¢åŠ --add-host \u0026lt;åŸŸå\u0026gt;:\u0026lt;qBittorrentå®¹å™¨çš„IP\u0026gt;ï¼Œå…¶ä¸­åŸŸåæ˜¯ä½ åœ¨å…¬ç½‘ä¸Šè®¿é—®qBittorrentçš„webuiçš„åŸŸåï¼Œå¦‚æœç›´æ¥ä½¿ç”¨çš„nevinee/qbittorrent:iyuuæ ‡ç­¾ï¼Œå°±æ˜¯--add-host \u0026lt;åŸŸå\u0026gt;:127.0.0.1ã€‚\ndocker composeåˆ›å»ºæ—¶ï¼Œå¢åŠ ä»¥ä¸‹å†…å®¹ï¼š\n1 2 extra_hosts: - \u0026#34;\u0026lt;åŸŸå\u0026gt;:\u0026lt;qBittorrentå®¹å™¨çš„IP\u0026gt;\u0026#34; ## å¦‚æœç›´æ¥ä½¿ç”¨çš„`nevinee/qbittorrent:iyuu`æ ‡ç­¾ï¼ŒIPå°±æ˜¯127.0.0.1 qBittorrentå ç”¨äº†å·¨å¤§çš„å†…å­˜ï¼Œå¦‚ä½•è°ƒæ•´ ä½ æ‰€è§åˆ°çš„å ç”¨å·¨å¤§çš„å†…å­˜å¹¶ä¸æ˜¯çœŸçš„å ç”¨äº†ï¼Œä½¿ç”¨docker stats qbittorrentè¾“å‡ºçš„å†…å­˜å ç”¨æ›´å‡†ç¡®ä¸€ç‚¹ï¼Œå…¶ä»–æ–¹å¼è¾“å‡ºçš„å†…å­˜å ç”¨ä¼šéå¸¸çš„å¤§ã€‚å› ä¸ºlibtorrent-rasterbar v2.xæŠŠå†…å­˜ä½¿ç”¨äº¤ç»™å†…æ ¸æ¥å¤„ç†ï¼Œå†…æ ¸ä¼šè‡ªå·±æ ¹æ®å†…å­˜å¤§å°å’Œè¯»å–é¢‘æ¬¡æ¥è‡ªåŠ¨å†³å®šæ€ä¹ˆå»ç¼“å­˜ï¼Œæ‰€ä»¥ä¸è¦è¢«çœ‹èµ·æ¥åºå¤§çš„å†…å­˜å ç”¨ç»™å“ç€äº†ã€‚è¯¦è§libtorrent-rasterbarä½œè€…çš„åŸè¯ã€‚\nè°·æ­Œç¿»è¯‘å¦‚ä¸‹ï¼š\næ€»ç»“ä¸€ä¸‹ï¼Œlibtorrent2.0ä½¿ç”¨å†…å­˜æ˜ å°„æ–‡ä»¶ã€‚åœ¨é™¤windowsä¹‹å¤–çš„æ‰€æœ‰ç°ä»£æ“ä½œç³»ç»Ÿä¸Šï¼Œåœ¨å—è®¾å¤‡çº§åˆ«ä½¿ç”¨ç»Ÿä¸€çš„é¡µé¢ç¼“å­˜ï¼Œå…¶ä¸­åŒ¿åå†…å­˜ï¼ˆç”±swapfileæ”¯æŒï¼‰å’Œå†…å­˜æ˜ å°„æ–‡ä»¶ï¼ˆåŒ…æ‹¬å…±äº«åº“ï¼Œè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼‰éƒ½æ˜¯åŒä¸€ç¼“å­˜çš„ä¸€éƒ¨åˆ†ã€‚Linuxå¯èƒ½æ˜¯å†³å®šå¦‚ä½•åœ¨ç‰©ç†RAMä¸­å¹³è¡¡è¿™äº›é¡µé¢çš„æœ€å¤æ‚çš„å·¥å…·ã€‚ ä½¿ç”¨å†…å­˜æ˜ å°„æ–‡ä»¶çš„å¥½å¤„ä¸»è¦æœ‰ï¼š å†…æ ¸ï¼ˆå®ƒçŸ¥é“æœºå™¨æœ‰å¤šå°‘ç‰©ç†RAMå¯ç”¨ï¼‰æœ€äº†è§£ä½•æ—¶ä»¥åŠä»¥ä½•ç§é¡ºåºåˆ·æ–°ç¼“å­˜ã€‚ä¹Ÿè®¸æ›´é‡è¦çš„æ˜¯ï¼Œå†³å®šä¿ç•™è¯»ç¼“å­˜çš„æ•°é‡å’Œæ—¶é—´ã€‚ æŸäº›ç±»å‹çš„å­˜å‚¨å¯ä»¥ç”±CPUç›´æ¥å¯»å€ï¼Œå°±åƒå®ƒæ˜¯RAMä¸€æ ·ï¼Œç»•è¿‡äº†è®¸å¤šå†…æ ¸åŸºç¡€è®¾æ–½ï¼Œå¹¶æä¾›äº†éå¸¸é«˜çš„æ€§èƒ½ã€‚ï¼ˆlinuxç§°æ­¤DAXï¼‰ æ­¤å¤–ï¼Œå½“æŠ¥å‘Šlibtorrentï¼ˆç‰¹åˆ«æ˜¯mmapç£ç›˜åç«¯ï¼‰ä¸­çš„é—®é¢˜æ—¶ï¼Œä»…ä»…æŒ‡å‡ºvmstatsæ•°å­—è¡¨æ˜å†…æ ¸å†³å®šä½¿ç”¨å¤§é‡ç‰©ç†å†…å­˜è¿›è¡Œç£ç›˜ç¼“å­˜æ˜¯ä¸å¤Ÿçš„ã€‚è¿™æ˜¯å†…å­˜æ˜ å°„ç£ç›˜åç«¯çš„ä¸€ä¸ªç‰¹æ€§ã€‚\nqBè€æ˜¯ä¸ç›‘å¬IPv6åœ°å€ï¼Œæ€ä¹ˆåŠï¼Ÿ æœ‰å¾ˆå¤šåŸå› ä¼šå¯¼è‡´qBittorrentæ²¡æœ‰ç›‘å¬IPv6ï¼Œæ¯”å¦‚ä½ çš„IPv6åœ°å€å˜äº†ï¼Œæ¯”å¦‚å¯åŠ¨qBittorrentæ—¶è¿˜æ²¡æœ‰è·å–åˆ°IPv6ç­‰ç­‰ã€‚çœ‹çœ‹æœ‰æ²¡æœ‰æˆåŠŸç›‘å¬åˆ°IPv6ï¼Œåªéœ€è¦åœ¨æ—¥å¿—ä¸­æŸ¥çœ‹æœ¬æ¬¡å¯åŠ¨åæœ‰æ²¡æœ‰å‡ºç°è¿™æ ·çš„å­—æ ·å³å¯ï¼š\n1 æ£€æµ‹åˆ°å¤–éƒ¨ IPã€‚IPï¼šâ€œ240e:1234:5678:abcd:ef12:3456:7890:abcdâ€ å¦‚æœæ²¡æœ‰å‡ºç°ç±»ä¼¼è¿™æ ·çš„æ—¥å¿—ï¼Œæˆ–è€…å‡ºçš„æ—¥å¿—ä¸­çš„IPv6åœ°å€ä¸æ˜¯å½“å‰æœ€æ–°çš„åœ°å€ï¼Œé‚£ä¹ˆä½ å¯ä»¥æ“ä½œï¼šå…ˆå°† â€œè®¾ç½®-\u0026gt;é«˜çº§-\u0026gt;ç»‘å®šåˆ°çš„å¯é€‰IPåœ°å€â€ é€‰æ‹©æœ€æ–°çš„IPv6åœ°å€ï¼Œä¿å­˜ä¸€æ¬¡ï¼›ç„¶åå†å°†å…¶è®¾ç½®ä¸º â€œæ‰€æœ‰åœ°å€â€ åå†é‡æ–°ä¿å­˜ä¸€æ¬¡ã€‚è¿‡ä¸€ä¼šæ—¥å¿—ä¸­å°±ä¼šå‡ºç°æ­£å¸¸çš„ä¿¡æ¯äº†ã€‚\nå‘½ä»¤ è‡ªåŠ¨è¿è¡Œçš„å‘½ä»¤ï¼ˆæ‰€æœ‰æ ‡ç­¾å¯ç”¨ï¼Œç”±è®¾ç½®çš„cronæˆ–åœ¨ä¸‹è½½å®Œæˆæ—¶è‡ªåŠ¨è¿è¡Œï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨è¿è¡Œï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 # å‘é€é€šçŸ¥ docker exec qbittorrent notify \u0026#34;æµ‹è¯•æ¶ˆæ¯æ ‡é¢˜\u0026#34; \u0026#34;æµ‹è¯•æ¶ˆæ¯é€šçŸ¥å†…å®¹\u0026#34; # å°†ç§å­æŒ‰trackerè¿›è¡Œåˆ†ç±»ï¼Œç”±CRON_AUTO_CATEGORè®¾ç½®çš„cronæ¥è°ƒç”¨ docker exec qbittorrent auto-cat -a # ç”±ç¨‹åºè‡ªåŠ¨è°ƒç”¨ï¼Œä¹Ÿå¯æ‰‹åŠ¨è¿è¡Œã€‚å½“CATEGORY_OR_TAG=categoryæ—¶ï¼Œå°†æ‰€æœ‰æœªåˆ†ç±»çš„ç§å­æŒ‰trackeråˆ†ç±»ï¼›å½“CATEGORY_OR_TAG=tagæ—¶ï¼Œå¯¹æ‰€æœ‰ç§å­æŒ‰trackeræ‰“æ ‡ç­¾ docker exec qbittorrent auto-cat -A # éœ€è¦æ‰‹åŠ¨è¿è¡Œã€‚å½“CATEGORY_OR_TAG=categoryæ—¶ï¼Œå°†æ‰€æœ‰ç§å­æŒ‰trackeråˆ†ç±»ï¼›å½“CATEGORY_OR_TAG=tagæ—¶ï¼Œå¯¹æ‰€æœ‰ç§å­æŒ‰trackeræ‰“æ ‡ç­¾ # å°†æŒ‡å®šç§å­æŒ‰trackerè¿›è¡Œåˆ†ç±»ï¼Œä¼šè‡ªåŠ¨åœ¨ä¸‹è½½å®Œæˆæ—¶è¿è¡Œä¸€æ¬¡ï¼ˆç”± dl-finish \u0026lt;hash\u0026gt; å‘½ä»¤è°ƒç”¨ï¼‰ docker exec qbittorrent auto-cat -i \u0026lt;hash\u0026gt; # hashå¯ä»¥åœ¨ç§å­è¯¦æƒ…ä¸­çš„\u0026#34;æ™®é€š\u0026#34;æ ‡ç­¾é¡µä¸ŠæŸ¥çœ‹åˆ° # ä¸‹è½½å®Œæˆæ—¶å°†ç§å­åˆ†ç±»ï¼Œå¹¶å‘é€é€šçŸ¥ï¼Œå·²ç»åœ¨é…ç½®æ–‡ä»¶ä¸­å¡«å¥½äº† docker exec qbittorrent dl-finish \u0026lt;hash\u0026gt; # hashå¯ä»¥åœ¨ç§å­è¯¦æƒ…ä¸­çš„\u0026#34;æ™®é€š\u0026#34;æ ‡ç­¾é¡µä¸ŠæŸ¥çœ‹åˆ° # æ£€æŸ¥qbittorrentæ˜¯å¦å®•æœºï¼Œå¦‚å®•æœºåˆ™å‘é€é€šçŸ¥ï¼Œç”±CRON_HEALTH_CHECKè®¾ç½®çš„cronæ¥è°ƒç”¨ docker exec qbittorrent health-check # æ£€æŸ¥æ‰€æœ‰ç§å­çš„trackerçŠ¶æ€æ˜¯å¦æœ‰é—®é¢˜ï¼Œå¦‚æœ‰é—®é¢˜ï¼Œç»™è¯¥ç§å­æ·»åŠ ä¸€ä¸ª TrackerError çš„æ ‡ç­¾ï¼Œç”±CRON_TRACKER_ERRORè®¾ç½®çš„cronæ¥è°ƒç”¨ # æœ‰ä»»ä½•ä¸€ä¸ªtrackerå¤„äº`å·¥ä½œä¸­``æ›´æ–°ä¸­`å’Œ`æœªè”ç³»`éƒ½ä¸ä¼šè§†ä½œ`TrackerError`ï¼Œåªæœ‰åœ¨è¿è¡Œè„šæœ¬å½“æ—¶é‚£ä¸€åˆ»å…¨éƒ¨trackerå¤„äº`æœªå·¥ä½œ`æ‰ä¼šæ ‡è®° docker exec qbittorrent tracker-error # æ¯åˆ†é’Ÿæ£€æµ‹MONITOR_IPè®¾ç½®çš„ipæ˜¯å¦åœ¨çº¿ï¼Œå¦‚æœ‰ä»»ä½•ä¸€ä¸ªipåœ¨çº¿ï¼Œåˆ™å¯ç”¨â€œå¤‡ç”¨é€Ÿåº¦é™åˆ¶â€ï¼Œ4.3.8+å¯ç”¨ã€‚ docker exec qbittorrent detect-ip ## å¯ç”¨å¯å…³é—­â€œå¤‡ç”¨é€Ÿåº¦é™åˆ¶â€ï¼Œ4.3.8+å¯ç”¨ï¼Œç”±CRON_ALTER_LIMITSè®¾ç½®çš„cronæ¥è°ƒç”¨ docker exec qbittorrent alter-limits on # å¯ç”¨â€œå¤‡ç”¨é€Ÿåº¦é™åˆ¶â€ docker exec qbittorrent alter-limits off # å…³é—­â€œå¤‡ç”¨é€Ÿåº¦é™åˆ¶â€ ## IYUUAutoReseedè¾…åŠ©ä»»åŠ¡ï¼Œè‡ªåŠ¨é‡æ ¡éªŒã€è‡ªåŠ¨æ¢å¤åšç§ï¼Œ4.3.8+å¯ç”¨ï¼Œç”±CRON_IYUU_HELPè®¾ç½®çš„cronæ¥è°ƒç”¨ docker exec qbittorrent iyuu-help éœ€è¦æ‰‹åŠ¨è¿è¡Œçš„å‘½ä»¤ï¼ˆæ‰€æœ‰æ ‡ç­¾å¯ç”¨ï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 # æŸ¥çœ‹qbittorrentæ—¥å¿—ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨portaineræ§åˆ¶å°ä¸­çœ‹åˆ° docker logs -f qbittorrent # æ‰¹é‡ä¿®æ”¹trackerï¼Œè¯¦è§æ•ˆæœå›¾ï¼Œ4.3.7+å¯ç”¨ï¼Œæœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼Œè¯·è¿è¡Œä¸‹é¢å‘½ä»¤æŸ¥çœ‹ä¸¤ç§æ–¹å¼ docker exec -it qbittorrent change-tracker -h # æ‰¹é‡åˆ é™¤trackerï¼Œ4.4.4+å¯ç”¨ï¼Œæœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼Œè¯·è¿è¡Œä¸‹é¢å‘½ä»¤æŸ¥çœ‹ä¸¤ç§æ–¹å¼ docker exec -it qbittorrent remove-tracker -h # æ£€æµ‹æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹æ²¡æœ‰åœ¨qbittorrentå®¢æˆ·ç«¯ä¸­åšç§æˆ–ä¸‹è½½çš„å­æ–‡ä»¶å¤¹/å­æ–‡ä»¶ï¼Œç”±ç”¨æˆ·ç¡®è®¤æ˜¯å¦åˆ é™¤ï¼Œè¯¦è§æ•ˆæœå›¾ï¼Œ4.3.8+å¯ç”¨ # ä»4.4.4èµ·ï¼Œæ›´æ”¹æˆå¯ä»¥ä¸€æ¬¡æ€§æ£€æµ‹å¤šä¸ªç›®å½• docker exec -it qbittorrent del-unseed-dir # å½“CATEGORY_OR_TAG=categoryæ—¶ï¼Œå°†æ‰€æœ‰ç§å­æŒ‰trackeråˆ†ç±»ï¼›å½“CATEGORY_OR_TAG=tagæ—¶ï¼Œå¯¹æ‰€æœ‰ç§å­æŒ‰trackeræ‰“æ ‡ç­¾ã€‚4.3.9+å¯ç”¨ docker exec qbittorrent auto-cat -A # ç”Ÿæˆæœ¬qBittorrentå®¢æˆ·ç«¯ä¸­æ‰€æœ‰åšç§æ–‡ä»¶æ¸…å•ï¼Œ4.3.9+å¯ç”¨ docker exec -it qbittorrent report-seed-files # ç”ŸæˆæŒ‡å®šè·¯å¾„ä¸‹æ²¡æœ‰åœ¨æœ¬qBittorrentå®¢æˆ·ç«¯åšç§çš„æ–‡ä»¶æ¸…å•ï¼Œ4.3.9+å¯ç”¨ docker exec -it qbittorrent report-unseed-files # åˆ†ææŒ‡å®šç›®å½•çš„é‡å¤åšç§ç‡ï¼ˆè¾…ç§ç‡ï¼‰ï¼Œå…·ä½“è¯´æ˜è¯·è¿è¡Œä¸‹åˆ—å‘½ä»¤ï¼Œ4.5.3+å¯ç”¨ docker exec -it qbittorrent gen-dup ä»…â€œiyuuâ€æ ‡ç­¾å¯ç”¨çš„å‘½ä»¤ 1 2 3 4 5 # æ›´æ–°IYUUPlusè„šæœ¬ docker exec -it qbittorrent git -C /iyuu pull # é‡å¯IYUUPlus docker exec -it qbittorrent php /iyuu/start.php restart -d å‚è€ƒ crazymax/qbittorrent , å‚è€ƒäº†Dockerfile;\n80x86/qbittorrent, å€Ÿé‰´äº†æ ‡ç­¾å’Œåˆ†ç±»çš„ç†å¿µã€‚\næºä»£ç ã€é—®é¢˜åé¦ˆã€æ„è§å»ºè®® å¦‚æœé•œåƒå¥½ç”¨ï¼Œè¯·ç‚¹äº®starã€‚å…¨å¥—ä»£ç è§ Github æˆ– Giteeã€‚å¦‚æœ‰ä½¿ç”¨ä¸Šçš„é—®é¢˜ï¼Œæˆ–è€…æœ‰å…¶ä»–å¥½çš„åŠŸèƒ½å»ºè®®ï¼Œè¯·ç›´æ¥åœ¨æœ¬æ–‡ä¸‹æ–¹è¯„è®ºï¼Œæˆ–è€…åœ¨ Githubè¿™é‡Œ æˆ– Giteeè¿™é‡Œ æäº¤ã€‚\næäº¤bugå¿…é¡»åé¦ˆçš„ä¿¡æ¯ï¼Œå¦‚ä¸åé¦ˆä»¥ä¸‹ä¿¡æ¯ï¼Œæˆ‘å°±ç›´æ¥æ— è§†äº†ã€‚\nåˆ›å»ºå‘½ä»¤æˆ– docker-compose.yml æ–‡ä»¶ï¼Œè¯·è‡ªè¡Œå¯¹å¯†ç æ‰“ç ï¼›\nä½¿ç”¨çš„dockeré•œåƒçš„tagï¼Œä»¥åŠqBittorrentçš„ç‰ˆæœ¬ï¼›\nè¿›å…¥å®¹å™¨åè¿è¡Œ bash -x /usr/local/bin/\u0026lt;å‘½ä»¤å\u0026gt; å¦‚ bash -x /usr/local/bin/report-seed-files çš„è¾“å‡ºï¼ˆä»€ä¹ˆå‘½ä»¤å‡ºé”™ä½ å°±åé¦ˆä»€ä¹ˆå‘½ä»¤çš„å†…å®¹ï¼‰ï¼Œè¯·è‡ªè¡Œå¯¹å¯†ç æ‰“ç ã€‚\n","date":"2023-10-18T00:00:00+08:00","image":"https://evine.win/p/docker-install-qbittorrent/notify_hu76daec3f73afd3f1986c395facd4c9f2_27308_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/docker-install-qbittorrent/","title":"ä¸€æ¬¾æ›´æ‡‚ä½ çš„ qbittorrent docker é•œåƒ"},{"content":"dockeråœ¨ä¸€å—ç½‘å¡ä¸Šåˆ›å»ºå¤šä¸ªmacvlanå­ç½‘ï¼Œä¸å¯ä»¥è¿›è¡Œå¤šæ¬¡åˆ›å»ºï¼Œéœ€è¦åœ¨ä¸€æ¬¡åˆ›å»ºä¸­æŠŠå¤šä¸ªå­ç½‘åŒæ—¶åˆ›å»ºå¥½ã€‚è¯´æ˜åŠåˆ›å»ºå‘½ä»¤å¦‚ä¸‹ï¼š\nä¸€ä¸ªsubnetå¯¹åº”ä¸€ä¸ªgatewayï¼Œgatewayå¿…é¡»åœ¨subnetçš„èŒƒå›´å†…ï¼Œç›´æ¥æ”¹ä¸ºä½ æ‰€ä½¿ç”¨çš„çœŸå®çš„gatewayå³å¯ã€‚è¿™æ ·å¯ä»¥ä¸åŒçš„subnetè®¾ç½®ä¸åŒçš„gatewayï¼Œæ§åˆ¶ä¸åŒçš„å®¹å™¨èµ°ä¸åŒçš„çº¿è·¯ï¼ˆæ¯”å¦‚æœ‰çš„éœ€è¦ä»£ç†ï¼Œæœ‰çš„ä¸èƒ½ä»£ç†ï¼‰ã€‚\n--subnet=fe80::/64 --ipv6å¯ä»¥æ‰“å¼€ipv6ï¼Œæ— éœ€è®¾ç½®å…¬ç½‘ipv6çš„subnetï¼Œåªè¦è¿™æ ·è®¾ç½®åœ¨è¿™ä¸ªmacvlanç½‘ç»œä¸Šçš„å®¹å™¨å°±èƒ½è‡ªåŠ¨è·å–åˆ°å…¬ç½‘ipv6ã€‚\n--opt parent=eth0æŒ‡å®šæœ¬macvlanç½‘ç»œç»‘å®šåˆ°çˆ¶çº§ç½‘å¡eth0ä¸Šã€‚\n--opt com.docker.network.bridge.name=mymacvlanæŒ‡å®šmacvlanç½‘ç»œåç§°ä¸ºmymacvlanã€‚\næœ€åçš„mymacvlanæ˜¯dockerä¸­çš„ç½‘ç»œåç§°ã€‚\n1 2 3 4 5 6 7 8 9 10 docker network create \\ --driver macvlan \\ --subnet=10.0.0.0/24 --gateway \u0026#34;10.0.0.2\u0026#34; \\ --subnet=10.0.1.0/24 --gateway \u0026#34;10.0.1.1\u0026#34; \\ --subnet=10.0.2.0/24 --gateway \u0026#34;10.0.2.254\u0026#34; \\ --subnet=fe80::/64 --ipv6 \\ --opt parent=eth0 \\ --opt macvlan_mode=bridge \\ --opt com.docker.network.bridge.name=mymacvlan \\ mymacvlan ","date":"2023-09-06T00:00:00+08:00","image":"https://evine.win/p/docker-create-macvlan-with-multi-subnet/docker-poster_hu6b60afdf246d478211143ca08b6c21f4_93451_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/docker-create-macvlan-with-multi-subnet/","title":"dockeråœ¨ä¸€å—ç½‘å¡ä¸Šåˆ›å»ºå¤šä¸ªmacvlanå­ç½‘"},{"content":" å…³é”®è¯ï¼šdocker buildx cache gc prune æ„å»º ç¼“å­˜ ç­–ç•¥ ç¼“å­˜æ—¶é—´ ç¼“å­˜å¤§å°\næ–°å»ºbuildkité…ç½®æ–‡ä»¶$HOME/.docker/buildx/buildkitd.default.tomlå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [worker.oci] enabled = true gc = true gckeepstorage = 20480 # å•ä½ï¼šMiB [[worker.oci.gcpolicy]] keepBytes = 21474836480 # å•ä½ï¼šBï¼Œä¸‹åŒ keepDuration = 7200 # å•ä½ï¼šsï¼Œä¸‹åŒ filters = [ \u0026#34;type==source.local\u0026#34;, \u0026#34;type==exec.cachemount\u0026#34;, \u0026#34;type==source.git.checkout\u0026#34;] [[worker.oci.gcpolicy]] keepBytes = 32212254720 keepDuration = 86400 filters = [ \u0026#34;type==source.local\u0026#34;, \u0026#34;type==exec.cachemount\u0026#34;, \u0026#34;type==source.git.checkout\u0026#34;] [[worker.oci.gcpolicy]] all = true keepBytes = 42949672960 ä¸Šè¿°é…ç½®å¯ä»¥æŒ‰æ—¶é—´ã€æŒ‰ä¸Šé™è®¾ç½®å¤šä¸ªå±‚çº§çš„worker.oci.gcpolicyï¼ŒæŒ‰ç…§ä¸åŒæ—¶é—´ã€ä¸åŒä¸Šé™æ¥åˆ é™¤buildxçš„æ„å»ºç¼“å­˜ã€‚å¦‚æœæ˜¯æœ¬åœ°æ„å»ºï¼Œä¸»è¦çš„ç¼“å­˜ç±»å‹æ˜¯source.localå’Œexec.cachemountã€‚è¯¦ç»†é…ç½®è¯·è§ï¼šbuildkitã€‚\nå¦‚æœä¹‹å‰åˆ›å»ºè¿‡åä¸ºbuilderçš„å®ä¾‹ï¼Œå…ˆåˆ é™¤ï¼š\n1 docker buildx rm builder ç„¶åé‡æ–°åˆ›å»ºä¸€ä¸ªåä¸ºbuilderçš„å®ä¾‹ï¼š\n1 2 3 docker run --privileged --rm tonistiigi/binfmt --install all docker buildx create --name builder --driver=docker-container --use --bootstrap docker buildx inspect ä¸Šé¢æœ€åä¸€ä¸ªå‘½ä»¤docker buildx inspectè¾“å‡ºå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 Name: builder Driver: docker-container Last Activity: 2023-09-06 02:55:47 +0000 UTC Nodes: Name: builder0 Endpoint: unix:///var/run/docker.sock Status: running Buildkit: v0.12.1 Platforms: linux/amd64, linux/amd64/v2, linux/amd64/v3, linux/arm64, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/mips64le, linux/mips64, linux/arm/v7, linux/arm/v6 Labels: org.mobyproject.buildkit.worker.executor: oci org.mobyproject.buildkit.worker.hostname: bcff51b12dca org.mobyproject.buildkit.worker.network: host org.mobyproject.buildkit.worker.oci.process-mode: sandbox org.mobyproject.buildkit.worker.selinux.enabled: false org.mobyproject.buildkit.worker.snapshotter: overlayfs GC Policy rule#0: All: false Filters: type==source.local type==exec.cachemount type==source.git.checkout Keep Duration: 2h0m0s Keep Bytes: 20GiB GC Policy rule#1: All: false Filters: type==source.local type==exec.cachemount type==source.git.checkout Keep Duration: 24h0m0s Keep Bytes: 30GiB GC Policy rule#2: All: true Keep Bytes: 40GiB å¯ä»¥çœ‹å‡ºç¼“å­˜ç­–ç•¥å·²ç»è®¾ç½®ä¸ºè‡ªå·±çš„äº†ã€‚\n","date":"2023-08-30T00:00:00+08:00","image":"https://evine.win/p/docker-buildx-set-cache-gcpolicy/docker-poster_hu6b60afdf246d478211143ca08b6c21f4_93451_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/docker-buildx-set-cache-gcpolicy/","title":"docker buildx è®¾ç½®æ„å»ºç¼“å­˜ç­–ç•¥ï¼ˆè®¾ç½®ç¼“å­˜ä¿å­˜æ—¶é—´åŠå¤§å°ä¸Šé™ï¼‰"},{"content":"å‰è¨€ è¿‘æœŸåœ¨PVEä¸­å‘ç°ï¼Œåªè¦è¿æ¥æ•°ä¸€å¤šï¼ŒPVEä¼šæœ‰ä¸¤ä¸ªå•æ ¸çš„ä½¿ç”¨ç‡æ˜æ˜¾æ¯”å…¶ä»–æ ¸è¶…è¿‡ä¸€å¤§æˆªã€‚ç»è¿‡æŸ¥è¯¢èµ„æ–™å‘ç°ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘çš„ RealTEK RTL8125 2.5GB ç½‘å¡é»˜è®¤åŠ è½½çš„é©±åŠ¨æ˜¯r8169ï¼Œå®ƒå¹¶æ²¡æœ‰å¼€å¯ç½‘å¡å¤šé˜Ÿåˆ—ç­‰ç‰¹æ€§ã€‚å¯¼è‡´ä¸€ä¸ªç½‘å¡çš„è½¯ä¸­æ–­åªèƒ½ä½¿ç”¨å›ºå®šçš„ä¸€ä¸ªæ ¸å¿ƒå¼€æ¥æ”¶å’Œå‘é€æ•°æ®ã€‚\næŸ¥çœ‹ç½‘å¡åŠ è½½çš„æ˜¯ä»€ä¹ˆé©±åŠ¨ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ## çœ‹çœ‹ç½‘å¡çš„pciç¼–å· $ lspci | grep RTL8125 22:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8125 2.5GbE Controller (rev 05) 2a:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8125 2.5GbE Controller (rev 05) ## çœ‹çœ‹ç½‘å¡åŠ è½½çš„é©±åŠ¨ $ lspci -s 22:00.0 -k # 22:00.0è¿™å—ç½‘å¡ 22:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8125 2.5GbE Controller (rev 05) Subsystem: Realtek Semiconductor Co., Ltd. RTL8125 2.5GbE Controller Kernel driver in use: r8169 Kernel modules: r8169 $ lspci -s 2a:00.0 -k # 2a:00.0è¿™å—ç½‘å¡ 2a:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8125 2.5GbE Controller (rev 05) Subsystem: Micro-Star International Co., Ltd. [MSI] RTL8125 2.5GbE Controller Kernel driver in use: r8169 Kernel modules: r8169 æŸ¥çœ‹ç½‘å¡è½¯ä¸­æ–­æ•°é‡ï¼š\n1 2 3 4 $ cat /proc/interrupts | grep -P \u0026#39;eth|CPU0\u0026#39; # æˆ‘çš„ç½‘å¡åå«eth0ã€eth1 CPU0 CPU1 CPU2 CPU3 CPU4 CPU5 CPU6 CPU7 CPU8 CPU9 CPU10 CPU11 CPU12 CPU13 CPU14 CPU15 51: 0 0 0 0 0 0 0 0 0 631894756 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 eth0 59: 0 0 0 0 0 0 0 0 0 0 0 932824696 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 eth1 ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤çœ‹çœ‹è½¯ä»¶ä¸­æ–­ï¼ˆ%softï¼‰æ˜¯ä¸æ˜¯å¤§é‡é›†ä¸­åœ¨æŸä¸ªæ ¸å¿ƒä¸Šã€‚\n1 $ mpstat -P ALL 1 5 è¿æ¥æ•°å¤šçš„æ—¶å€™ï¼Œç”šè‡³è¿™ä¸¤ä¸ªæ ¸å¿ƒçš„ä½¿ç”¨ç‡èƒ½è¾¾åˆ°80%ï¼Œè€Œå…¶ä»–æ ¸å¿ƒæ‰ä¸åˆ°20%ã€‚æ‰€ä»¥è¿˜æ˜¯æœ‰å¿…è¦å°†è¯¥ç½‘å¡é©±åŠ¨ä»Linuxé»˜è®¤çš„r8169åˆ‡æ¢åˆ°å®˜æ–¹é©±åŠ¨ä¸Šã€‚\nä½¿ç”¨å®˜æ–¹é©±åŠ¨ å·²ç»æœ‰å¤§ä½¬æŠŠå®˜æ–¹é©±åŠ¨æ‰“åŒ…æˆäº†dkms debåŒ…ï¼šhttps://github.com/awesometic/realtek-r8125-dkmsï¼Œä¸è¿‡è¯¥debåŒ…å¹¶æ²¡æœ‰æ‰“å¼€ç½‘å¡å¤šé˜Ÿåˆ—ï¼Œæ‰€ä»¥æˆ‘FORKäº†ä¸€ä»½ï¼Œå¯ç”¨TXå¤šé˜Ÿåˆ—åŠRSSï¼Œç¦ç”¨ASPMï¼Œå‘å¸ƒåœ¨ï¼šhttps://github.com/devome/realtek-r8125-dkms ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚å…ˆä¸‹è½½Releaseä¸­æœ€æ–°çš„debæ–‡ä»¶ï¼Œå†æŒ‰ä¸‹æ–¹æµç¨‹å®‰è£…å³å¯ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 ## æ›´æ–°å†…æ ¸ã€å®‰è£…ä¾èµ– $ apt update $ apt upgrade $ apt install -y dkms pve-headers #pve 8.0.4+å»ºè®®å°†pve-headersæ›¿æ¢ä¸ºproxmox-default-headers ## å®‰è£…headers $ headers=$(dpkg -l | awk \u0026#39;/^ii.+kernel-[0-9]+\\.[0-9]+\\.[0-9]/{gsub(/-signed/, \u0026#34;\u0026#34;); gsub(/kernel/, \u0026#34;headers\u0026#34;); print $2}\u0026#39; | tr \u0026#34;\\n\u0026#34; \u0026#34; \u0026#34;) $ eval apt install -y $headers ## å®‰è£…åˆšåˆšä¸‹è½½å¥½çš„debåŒ…ï¼Œæ­¤å‘½ä»¤åªä¼šä¸ºå½“å‰ç³»ç»Ÿæ‰€ä½¿ç”¨çš„å†…æ ¸ä»¥åŠåˆšåˆšå®‰è£…çš„æœ€æ–°å†…æ ¸ï¼ˆä¹Ÿå¯èƒ½å½“å‰æ‰€ä½¿ç”¨çš„å†…æ ¸å°±æ˜¯æœ€æ–°å†…æ ¸ï¼‰å®‰è£…é©±åŠ¨ $ dpkg -i realtek-r8125-dkms_*.deb # å¦‚é€šé…ç¬¦ä¼šåŒ¹é…å¤šä¸ªæ—¶äº¦å¯æŒ‡å®šå…·ä½“çš„æ–‡ä»¶å ## å¦‚æœæƒ³ä¸ºé‚£äº›æ—¢ä¸æ˜¯ç³»ç»Ÿå½“å‰æ‰€ä½¿ç”¨çš„å†…æ ¸ï¼Œä¹Ÿä¸æ˜¯åˆšåˆšå®‰è£…çš„æœ€æ–°å†…æ ¸å®‰è£…é©±åŠ¨ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šå®‰è£… ## çœ‹çœ‹å“ªäº›å†…æ ¸å®‰è£…å¥½äº†é©±åŠ¨ $ dkms status ## åˆ—å‡ºå…¨éƒ¨å†…æ ¸ç‰ˆæœ¬kernel_versionï¼Œæ‰¾å‡ºé‚£äº›è¿˜æ²¡æœ‰å®‰è£…é©±åŠ¨çš„å†…æ ¸ $ dpkg -l | awk \u0026#39;/^ii.+kernel-[0-9]+\\.[0-9]+\\.[0-9]/{gsub(/proxmox-kernel-|pve-kernel-|-signed/, \u0026#34;\u0026#34;); print $2}\u0026#39; ## æ‰‹åŠ¨æŒ‡å®šé©±åŠ¨ç‰ˆæœ¬ï¼ˆåœ¨debæ–‡ä»¶åä¸­æœ‰ä½“ç°ï¼‰å’Œå†…æ ¸ç‰ˆæœ¬ï¼ˆä»ä¸Šä¸€å¥å‘½ä»¤çš„è¾“å‡ºä¸­ï¼‰ï¼ŒzshæŒ‰tabå¯è‡ªåŠ¨è¡¥å…¨ï¼Œæ¯”å¦‚ï¼šdkms install realtek-r8125/9.011.01 -k 6.2.16-5-pve $ dkms install realtek-r8125/\u0026lt;driver_version\u0026gt; -k \u0026lt;kernel_version\u0026gt; ## å¸è½½ä¸å†éœ€è¦çš„headers $ eval apt-mark auto $headers $ apt autopurge ## ç¦ç”¨r8169é©±åŠ¨ $ echo \u0026#34;blacklist r8169\u0026#34; \u0026gt;\u0026gt; /etc/modprobe.d/dkms.conf ## é‡å¯ $ update-grub $ update-initramfs -u -k all $ reboot ## å†æ¬¡æŸ¥çœ‹ç½‘å¡åŠ è½½çš„é©±åŠ¨ï¼Œç°åœ¨åŠ è½½çš„æ˜¯r8125äº† $ lspci -s 22:00.0 -k 22:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8125 2.5GbE Controller (rev 05) Subsystem: Realtek Semiconductor Co., Ltd. RTL8125 2.5GbE Controller Kernel driver in use: r8125 Kernel modules: r8169, r8125 å¦‚ä½•æ›´æ–°é©±åŠ¨ å¦‚æœå·²ç»å®‰è£…å¥½äº† realtek-r8125-dkms é©±åŠ¨ï¼Œæœªæ¥å‡çº§æ—¶å¯ä»¥æ— éœ€é‡å¯PVEã€‚å¦‚éœ€è¦ä¸é‡å¯PVEæ¥æ›´æ–°é©±åŠ¨ï¼Œå¹¶ä¸”ä½ çš„ RTL8125B ç½‘å£ä½œä¸ºäº†ç®¡ç†å£ï¼Œé‚£ä¹ˆå»ºè®®ç›´æ¥ç‰©ç†æ“ä½œPVEï¼ˆä¹Ÿå°±æ˜¯ä¸è¦é€šè¿‡sshï¼‰æ¥è¾¾åˆ°æ›´æ–°é©±åŠ¨çš„ç›®æ ‡ã€‚\n1 2 3 4 5 6 7 #!/usr/bin/env bash modprobe -r r8125 insmod \u0026#34;/lib/modules/$(uname -r)/updates/dkms/r8125.ko\u0026#34; systemctl restart networking.service ## ç„¶åè‡ªè¡Œé‡å¯å…¨éƒ¨è™šæ‹Ÿæœº å¦‚æœä½ çš„ RTL8125B ç½‘å£ä½œä¸ºäº†ç®¡ç†å£ï¼Œå¹¶ä¸”æ— æ³•ç‰©ç†æ“ä½œPVEï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥å°†ä¸Šè¿°å‘½ä»¤ä¿å­˜åˆ°ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ reload.sh ä¸­ï¼Œå¢åŠ å¯æ‰§è¡Œæƒé™ååœ¨ tmux ä¸­è¿è¡Œå®ƒï¼ˆä¸èƒ½ç›´æ¥åœ¨sshä¸­è¿è¡Œï¼‰ã€‚\nçœ‹çœ‹æ•ˆæœ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 # çœ‹çœ‹ä¸­æ–­æ•° $ cat /proc/interrupts | grep -P \u0026#39;eth|CPU0\u0026#39; # æˆ‘çš„ç½‘å¡åå«eth0ã€eth1 CPU0 CPU1 CPU2 CPU3 CPU4 CPU5 CPU6 CPU7 CPU8 CPU9 CPU10 CPU11 CPU12 CPU13 CPU14 CPU15 99: 0 0 0 144263633 0 631894756 0 0 0 297 0 3128 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 0-edge eth0-0 101: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 1-edge eth0-1 102: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 2-edge eth0-2 103: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 3-edge eth0-3 104: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 4-edge eth0-4 105: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 5-edge eth0-5 106: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 6-edge eth0-6 107: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 7-edge eth0-7 108: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 8-edge eth0-8 109: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 9-edge eth0-9 110: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 10-edge eth0-10 111: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 11-edge eth0-11 112: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 12-edge eth0-12 113: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 13-edge eth0-13 114: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 14-edge eth0-14 115: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 15-edge eth0-15 116: 0 0 1733 0 440636622 5579613 0 161245 17862881 0 0 1031 0 0 9500904 0 IR-PCI-MSIX-0000:22:00.0 16-edge eth0-16 117: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 17-edge eth0-17 118: 3365897 0 1182441 0 124570 308349 2351042 235318334 0 0 0 0 230800986 1358 0 0 IR-PCI-MSIX-0000:22:00.0 18-edge eth0-18 119: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 19-edge eth0-19 120: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 20-edge eth0-20 121: 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 21-edge eth0-21 122: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 22-edge eth0-22 123: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 23-edge eth0-23 124: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 24-edge eth0-24 125: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 25-edge eth0-25 126: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 26-edge eth0-26 127: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 27-edge eth0-27 128: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 28-edge eth0-28 129: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 29-edge eth0-29 130: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 30-edge eth0-30 131: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:22:00.0 31-edge eth0-31 133: 0 156031397 0 0 0 147300933 215 514317 0 0 0 1456987057 0 0 0 422 IR-PCI-MSIX-0000:2a:00.0 0-edge eth1-0 134: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 1-edge eth1-1 136: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 2-edge eth1-2 137: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 3-edge eth1-3 138: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 4-edge eth1-4 139: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 5-edge eth1-5 140: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 6-edge eth1-6 141: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 7-edge eth1-7 142: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 8-edge eth1-8 143: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 9-edge eth1-9 144: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 10-edge eth1-10 145: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 11-edge eth1-11 146: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 12-edge eth1-12 147: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 13-edge eth1-13 148: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 14-edge eth1-14 149: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 15-edge eth1-15 150: 2196 115680935 162017341 0 0 3 459917 567139230 25305 106494 2371 5 82635683 0 1254 632401889 IR-PCI-MSIX-0000:2a:00.0 16-edge eth1-16 151: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 17-edge eth1-17 152: 1557 4043 309835387 0 0 293 1044744 0 0 473416721 0 0 0 4 162948447 615115873 IR-PCI-MSIX-0000:2a:00.0 18-edge eth1-18 153: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 19-edge eth1-19 154: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 20-edge eth1-20 155: 1 0 4 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 21-edge eth1-21 156: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 22-edge eth1-22 157: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 23-edge eth1-23 158: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 24-edge eth1-24 159: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 25-edge eth1-25 160: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 26-edge eth1-26 161: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 27-edge eth1-27 162: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 28-edge eth1-28 163: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 29-edge eth1-29 164: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 30-edge eth1-30 165: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 IR-PCI-MSIX-0000:2a:00.0 31-edge eth1-31 æ¯ä¸ªç½‘å¡éƒ½ç”¨åˆ°äº†å¤šä¸ªæ ¸å¿ƒæ¥å¤„ç†è½¯ä¸­æ–­ï¼Œæ•ˆæœä¸é”™ã€‚æ ¹æ®è¿™ä¸ªå¸–å­çš„è¯´æ³•ï¼Œ9.011.01ç‰ˆæœ¬é©±åŠ¨æ˜¯1ä¸ªrxé˜Ÿåˆ—å’Œ2ä¸ªtxé˜Ÿåˆ—ã€‚\nå†çœ‹çœ‹cpuå„æ ¸å¿ƒçš„ä½¿ç”¨ç‡æ˜¯å¦ç›¸å¯¹å‡è¡¡ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 $ mpstat -P ALL 1 3 Linux 6.2.16-6-pve (pve) 08/15/23 _x86_64_ (16 CPU) 20:55:54 CPU %usr %nice %sys %iowait %irq %soft %steal %guest %gnice %idle 20:55:55 all 1.44 0.06 1.57 0.06 0.00 0.38 0.00 4.27 0.00 92.21 20:55:55 0 0.98 0.00 1.96 0.00 0.00 0.00 0.00 5.88 0.00 91.18 20:55:55 1 0.00 0.00 1.01 0.00 0.00 0.00 0.00 4.04 0.00 94.95 20:55:55 2 0.00 0.00 0.99 0.00 0.00 0.00 0.00 8.91 0.00 90.10 20:55:55 3 1.01 0.00 0.00 0.00 0.00 1.01 0.00 5.05 0.00 92.93 20:55:55 4 2.02 0.00 0.00 0.00 0.00 1.01 0.00 5.05 0.00 91.92 20:55:55 5 4.00 0.00 4.00 0.00 0.00 1.00 0.00 1.00 0.00 90.00 20:55:55 6 1.98 0.99 1.98 0.00 0.00 0.99 0.00 3.96 0.00 90.10 20:55:55 7 1.98 0.00 1.98 0.99 0.00 0.00 0.00 3.96 0.00 91.09 20:55:55 8 1.02 0.00 2.04 0.00 0.00 0.00 0.00 2.04 0.00 94.90 20:55:55 9 0.00 0.00 1.03 0.00 0.00 0.00 0.00 4.12 0.00 94.85 20:55:55 10 4.12 0.00 1.03 0.00 0.00 0.00 0.00 3.09 0.00 91.75 20:55:55 11 1.01 0.00 1.01 0.00 0.00 1.01 0.00 7.07 0.00 89.90 20:55:55 12 1.02 0.00 2.04 0.00 0.00 1.02 0.00 2.04 0.00 93.88 20:55:55 13 3.00 0.00 1.00 0.00 0.00 0.00 0.00 3.00 0.00 93.00 20:55:55 14 0.00 0.00 2.02 0.00 0.00 0.00 0.00 3.03 0.00 94.95 20:55:55 15 0.98 0.00 2.94 0.00 0.00 0.00 0.00 5.88 0.00 90.20 20:55:55 CPU %usr %nice %sys %iowait %irq %soft %steal %guest %gnice %idle 20:55:56 all 1.14 0.00 1.21 0.51 0.00 0.44 0.00 2.35 0.00 94.35 20:55:56 0 1.02 0.00 3.06 0.00 0.00 0.00 0.00 2.04 0.00 93.88 20:55:56 1 1.02 0.00 0.00 1.02 0.00 1.02 0.00 1.02 0.00 95.92 20:55:56 2 0.99 0.00 1.98 0.00 0.00 0.00 0.00 3.96 0.00 93.07 20:55:56 3 1.98 0.00 1.98 0.00 0.00 0.99 0.00 3.96 0.00 91.09 20:55:56 4 3.06 0.00 1.02 0.00 0.00 0.00 0.00 2.04 0.00 93.88 20:55:56 5 0.00 0.00 2.97 0.00 0.00 1.98 0.00 4.95 0.00 90.10 20:55:56 6 2.06 0.00 1.03 0.00 0.00 0.00 0.00 0.00 0.00 96.91 20:55:56 7 1.02 0.00 0.00 3.06 0.00 1.02 0.00 2.04 0.00 92.86 20:55:56 8 0.00 0.00 0.00 0.00 0.00 0.00 0.00 1.04 0.00 98.96 20:55:56 9 1.02 0.00 1.02 0.00 0.00 1.02 0.00 2.04 0.00 94.90 20:55:56 10 0.00 0.00 1.01 1.01 0.00 0.00 0.00 3.03 0.00 94.95 20:55:56 11 2.04 0.00 1.02 0.00 0.00 0.00 0.00 2.04 0.00 94.90 20:55:56 12 1.03 0.00 1.03 1.03 0.00 1.03 0.00 2.06 0.00 93.81 20:55:56 13 1.01 0.00 1.01 0.00 0.00 0.00 0.00 2.02 0.00 95.96 20:55:56 14 1.01 0.00 0.00 2.02 0.00 0.00 0.00 3.03 0.00 93.94 20:55:56 15 1.02 0.00 2.04 0.00 0.00 0.00 0.00 2.04 0.00 94.90 20:55:56 CPU %usr %nice %sys %iowait %irq %soft %steal %guest %gnice %idle 20:55:57 all 1.95 0.00 1.01 0.19 0.00 0.38 0.00 2.83 0.00 93.65 20:55:57 0 0.99 0.00 0.00 0.00 0.00 0.99 0.00 3.96 0.00 94.06 20:55:57 1 0.00 0.00 1.98 0.99 0.00 0.00 0.00 2.97 0.00 94.06 20:55:57 2 0.00 0.00 2.04 0.00 0.00 0.00 0.00 3.06 0.00 94.90 20:55:57 3 2.00 0.00 0.00 0.00 0.00 1.00 0.00 3.00 0.00 94.00 20:55:57 4 1.01 0.00 2.02 0.00 0.00 0.00 0.00 2.02 0.00 94.95 20:55:57 5 2.02 0.00 3.03 0.00 0.00 0.00 0.00 1.01 0.00 93.94 20:55:57 6 2.00 0.00 0.00 0.00 0.00 1.00 0.00 2.00 0.00 95.00 20:55:57 7 10.10 0.00 0.00 1.01 0.00 0.00 0.00 2.02 0.00 86.87 20:55:57 8 0.00 0.00 1.01 0.00 0.00 0.00 0.00 5.05 0.00 93.94 20:55:57 9 1.01 0.00 0.00 0.00 0.00 2.02 0.00 3.03 0.00 93.94 20:55:57 10 3.03 0.00 1.01 0.00 0.00 0.00 0.00 4.04 0.00 91.92 20:55:57 11 4.00 0.00 2.00 0.00 0.00 0.00 0.00 2.00 0.00 92.00 20:55:57 12 3.92 0.00 0.98 0.00 0.00 0.98 0.00 3.92 0.00 90.20 20:55:57 13 0.00 0.00 1.01 1.01 0.00 0.00 0.00 3.03 0.00 94.95 20:55:57 14 0.00 0.00 1.03 0.00 0.00 0.00 0.00 1.03 0.00 97.94 20:55:57 15 1.01 0.00 0.00 0.00 0.00 0.00 0.00 3.03 0.00 95.96 Average: CPU %usr %nice %sys %iowait %irq %soft %steal %guest %gnice %idle Average: all 1.51 0.02 1.26 0.25 0.00 0.40 0.00 3.15 0.00 93.40 Average: 0 1.00 0.00 1.66 0.00 0.00 0.33 0.00 3.99 0.00 93.02 Average: 1 0.34 0.00 1.01 0.67 0.00 0.34 0.00 2.68 0.00 94.97 Average: 2 0.33 0.00 1.67 0.00 0.00 0.00 0.00 5.33 0.00 92.67 Average: 3 1.67 0.00 0.67 0.00 0.00 1.00 0.00 4.00 0.00 92.67 Average: 4 2.03 0.00 1.01 0.00 0.00 0.34 0.00 3.04 0.00 93.58 Average: 5 2.00 0.00 3.33 0.00 0.00 1.00 0.00 2.33 0.00 91.33 Average: 6 2.01 0.34 1.01 0.00 0.00 0.67 0.00 2.01 0.00 93.96 Average: 7 4.36 0.00 0.67 1.68 0.00 0.34 0.00 2.68 0.00 90.27 Average: 8 0.34 0.00 1.02 0.00 0.00 0.00 0.00 2.73 0.00 95.90 Average: 9 0.68 0.00 0.68 0.00 0.00 1.02 0.00 3.06 0.00 94.56 Average: 10 2.37 0.00 1.02 0.34 0.00 0.00 0.00 3.39 0.00 92.88 Average: 11 2.36 0.00 1.35 0.00 0.00 0.34 0.00 3.70 0.00 92.26 Average: 12 2.02 0.00 1.35 0.34 0.00 1.01 0.00 2.69 0.00 92.59 Average: 13 1.34 0.00 1.01 0.34 0.00 0.00 0.00 2.68 0.00 94.63 Average: 14 0.34 0.00 1.02 0.68 0.00 0.00 0.00 2.37 0.00 95.59 Average: 15 1.00 0.00 1.67 0.00 0.00 0.00 0.00 3.68 0.00 93.65 çœ‹å¾—å‡ºæ¥è½¯ä¸­æ–­åœ¨å„æ ¸å¿ƒä¸Šä½¿ç”¨ç‡å·®å¼‚å·²ä¸å¦‚ä¹‹å‰å¤§äº†ã€‚\n","date":"2023-08-15T00:00:00+08:00","image":"https://evine.win/p/pve-install-realtek-8125-driver/pve-poster_hu73cac004b61f9f0535175084b6c5473f_45414_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/pve-install-realtek-8125-driver/","title":"PVE 8 å®‰è£… ReakTEK RTL8125B 2.5Gç½‘å¡é©±åŠ¨"},{"content":" æœ¬æ–‡ä¸ºã€ŠPVEå®‰è£…Kodiã€‹ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚\nPVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodi ä¸ºKodié€‚é…é¥æ§å™¨ ä¿®æ”¹Kodiå­—å¹•å­—ä½“ ä¿®æ”¹Kodiçš®è‚¤å­—ä½“ å±è”½Kodiçš„å…³æœºã€é‡å¯æŒ‰é’® è®¾ç½®Kodiå¯åŠ¨çš„å‰ç½®æ¡ä»¶ åƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœ kodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜ è½¬æ¢é¥æ§å™¨çš„é€€å‡ºé”®ä¸ºè¿”å›é”® å‰è¨€ åœ¨ä¸Šæ–‡ ã€Šåƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœã€‹ ä¸­ï¼Œæˆ‘ä»¬æŠŠ2.4Gæ— çº¿é¥æ§å™¨çš„ç”µæºé”®æ”¯æŒå¹¶è½¬æ¢ä¸ºå¼€å…³Kodiäº†ã€‚ä¸è¿‡ï¼Œæœ‰äº›2.4Gæ— çº¿é¥æ§å™¨çš„è¿”å›é”®ä¸æ˜¯é€€æ ¼é”®ï¼ˆbackspaceé”®ï¼‰ï¼Œè€Œæ˜¯é€€å‡ºé”®ï¼ˆescé”®ï¼‰ï¼Œå¯¼è‡´çŸ­æŒ‰å®ƒçš„æ•ˆæœæ˜¯ç›´æ¥é€€å‡ºåˆ°ä¸Šä¸€çº§èœå•ï¼ˆPreviousMenuï¼‰ï¼Œè€Œä¸æ˜¯è¿”å›åˆ°ä¸Šä¸€ä¸ªç•Œé¢ï¼ˆBackï¼‰ã€‚è¿™ç§æƒ…å†µåœ¨ç‚¹çš„ç•Œé¢æ¯”è¾ƒæ·±çš„æ—¶å€™ä¼šæ¯”è¾ƒæ˜æ˜¾ï¼Œä¸€ç‚¹è¿”å›ç»“æœè¿”å›äº†å¾ˆè¿œã€‚å¦‚æœä¸ä¹ æƒ¯è¿™æ ·çš„æ“ä½œæ–¹å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è½¬æ¢æŒ‰é”®ã€‚\nè¯´æ˜ çœ‹åˆ°æœ¬ç¯‡æ•™ç¨‹è¿™é‡Œï¼Œæˆ‘é»˜è®¤ä½ å·²ç»æŒ‰ç…§ã€ŠPVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodiã€‹ã€Šåƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœã€‹ã€Škodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜ã€‹è¿™ä¸‰ç¯‡æ•™ç¨‹å®‰è£…å¥½äº†å¿…å¤‡çš„è½¯ä»¶åŒ…ï¼Œç¼–è¾‘å¥½äº†å¿…å¤‡çš„è„šæœ¬ï¼Œç›¸å…³çš„å®‰è£…è¿‡ç¨‹å°±ä¸å†èµ˜è¿°äº†ï¼Œç›´æ¥è¿›å…¥æ­£é¢˜ã€‚\n2.4Gæ— çº¿é¥æ§å™¨ä¸€èˆ¬è¢«Linuxç³»ç»Ÿè¯†åˆ«ä¸ºé”®ç›˜è®¾å¤‡ï¼Œæ‰€ä»¥è¿™ç§é¥æ§å™¨çš„æŒ‰é”®å®é™…ä¸Šå°±æ˜¯æ™®é€šé”®ç›˜ä¸Šçš„å¸¸è§„æŒ‰é”®ï¼Œå®ƒçš„æŒ‰é”®çš„ä½œç”¨æ˜¯é€šè¿‡/usr/share/kodi/system/keymaps/keyboard.xmlæ¥å¤„ç†çš„ï¼ˆåœ¨æœªè¢«Keymap Editoræ˜ å°„çš„å‰æä¸‹ï¼‰ã€‚æ‰“å¼€è¯¥xmlæ–‡ä»¶å†…å®¹å¯çŸ¥ï¼ˆè§ä¸‹ï¼‰ï¼Œå¤§éƒ¨åˆ†ç•Œé¢ä¸­é•¿æŒ‰escé”®çš„æ•ˆæœç­‰åŒäºçŸ­æŒ‰backspaceé”®ï¼ˆç„¶è€Œä¼¼ä¹é¥æ§å™¨å¹¶ä¸æ”¯æŒé•¿æŒ‰\u0026hellip;æ™®é€šé”®ç›˜æ‰æ”¯æŒ\u0026hellip;ï¼‰ï¼Œå¦‚æœä½ ä¹ æƒ¯çŸ­æŒ‰æ˜¯PreviousMenuï¼Œä¹Ÿå¯ä»¥ä¸å†å¾€ä¸‹çœ‹äº†ã€‚ä¸è¿‡å¯¹æˆ‘æ¥è¯´ï¼ŒçŸ­æŒ‰Backæ‰æ›´ç¬¦åˆæˆ‘çš„ä¹ æƒ¯ï¼Œæ‰€ä»¥æˆ‘éœ€è¦å°†è¿™ä¸ªé¥æ§å™¨çš„escé”®è½¬æ¢ä¸ºbackspaceé”®ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 \u0026lt;keymap\u0026gt; \u0026lt;global\u0026gt; \u0026lt;keyboard\u0026gt; ... \u0026lt;backspace\u0026gt;Back\u0026lt;/backspace\u0026gt; ... \u0026lt;escape\u0026gt;PreviousMenu\u0026lt;/escape\u0026gt; \u0026lt;escape mod=\u0026#34;longpress\u0026#34;\u0026gt;Back\u0026lt;/escape\u0026gt; ... \u0026lt;/keyboard\u0026gt; ... \u0026lt;/global\u0026gt; ... \u0026lt;/keymap\u0026gt; è½¬æ¢æŒ‰é”®æœ‰å¾ˆå¤šæ–¹å¼ï¼Œä¸€ç§ä½¿ç”¨Kodiæœ¬èº«æ”¯æŒçš„ç‰¹æ€§ï¼Œæ–°å»º~/.kodi/userdata/keymaps/my_remap.xmlï¼ˆæ–‡ä»¶åå¯ä»¥è‡ªå·±å®šä¹‰ï¼Œè¯¦è§Keymapsï¼Œ~/.kodi/userdata/keymapsä¸‹çš„xmlè¦†ç›–/usr/share/kodi/keymapsä¸‹çš„ï¼ŒåŒæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶åå­—æ¯åºé åçš„è¦†ç›–é å‰çš„ï¼‰ï¼Œå†…å®¹å¯ä»¥å½¢å¦‚ä¸‹é¢è¿™ç§ï¼š\n1 2 3 4 5 6 7 8 \u0026lt;keymap\u0026gt; \u0026lt;global\u0026gt; \u0026lt;keyboard\u0026gt; \u0026lt;escape\u0026gt;Back\u0026lt;/escape\u0026gt; \u0026lt;escape mod=\u0026#34;longpress\u0026#34;\u0026gt;PreviousMenu\u0026lt;/escape\u0026gt; \u0026lt;/keyboard\u0026gt; \u0026lt;/global\u0026gt; \u0026lt;/keymap\u0026gt; ä¸Šé¢çš„ç¤ºä¾‹å°±æ˜¯æŠŠçŸ­æŒ‰escå’Œé•¿æŒ‰escçš„ä½œç”¨äº¤æ¢äº†ä¸€ä¸‹ï¼ˆå°½ç®¡é¥æ§å™¨å¯èƒ½å¹¶ä¸æ”¯æŒé•¿æŒ‰ï¼‰ã€‚è™½ç„¶ä¸Šè¿°é…ç½®å¹¶æœªåˆ—å…¨ï¼Œä½†åŸºæœ¬ä¸Šå¯ä»¥åº”ä»˜å¤§éƒ¨åˆ†æƒ…å†µäº†ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªè¡Œå‚è€ƒ/usr/share/kodi/system/keymaps/keyboard.xmlä¸­çš„escapeæ‰€åœ¨çš„å…¨éƒ¨æ¨¡å—è¿›è¡Œè‡ªå®šä¹‰è¦†ç›–ã€‚\næ—¢ç„¶æˆ‘å·²ç»åœ¨ä½¿ç”¨evsieveæ¥èƒæŒç”µæºé”®äº†ï¼Œé‚£ä¹ˆå†ç”¨å®ƒæ¥èƒæŒescé”®ä¹Ÿæ˜¯ä¸ªä¸é”™çš„åŠæ³•ï¼Œæ‰€ä»¥å°±æœ‰äº†å¦å¤–ç¬¬äºŒç§åŠæ³•ï¼Œæµç¨‹å¦‚ä¸‹ã€‚\næµç¨‹ æµ‹è¯•é¥æ§å™¨çš„è¿”å›é”®åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆæŒ‰é”®ï¼Œä¸å‡ºæ„å¤–ï¼Œå‡ºç°ä¸€ç‚¹è¿”å›ç»“æœè¿”å›äº†å¾ˆè¿œçš„ä¸€ä¸ªç•Œé¢è¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å›é”®åº”è¯¥å°±æ˜¯escé”®ã€‚æ³¨ï¼šåœ¨æµ‹è¯•å‰è¯·å…ˆé€€å‡ºKodiï¼Œä¿è¯ç”»é¢å¤„äºæ§åˆ¶å°ç•Œé¢ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 # è¿è¡Œevtest evtest --grab # evtestä¼šåˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„è¾“å…¥è®¾å¤‡ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘çš„é¥æ§å™¨æœ‰event5-event8å…±4ä¸ªè®¾å¤‡ # ä½ å¯ä»¥é€‰æ‹©å…·ä½“çš„ç¼–å·æ¥è¿›è¡Œæµ‹è¯•ï¼Œæ‰¾åˆ°æ¯ä¸ªè®¾å¤‡åˆ†åˆ«èƒ½æ§åˆ¶å“ªäº›æŒ‰é”® # ç»è¿‡æµ‹è¯•ï¼Œæˆ‘å‘ç°æˆ‘é¥æ§å™¨çš„è¿”å›é”®åœ¨event5ï¼Œä¹Ÿå°±æ˜¯2.4G Composite Devicè¿™ä¸ªè®¾å¤‡ No device specified, trying to scan all of /dev/input/event* Available devices: /dev/input/event0: Power Button /dev/input/event1: AT Translated Set 2 keyboard /dev/input/event2: VirtualPS/2 VMware VMMouse /dev/input/event3: VirtualPS/2 VMware VMMouse /dev/input/event4: QEMU QEMU USB Tablet /dev/input/event5: 2.4G Composite Devic /dev/input/event6: 2.4G Composite Devic Mouse /dev/input/event7: 2.4G Composite Devic Consumer Control /dev/input/event8: 2.4G Composite Devic System Control /dev/input/event9: PC Speaker Select the device event number [0-9]:5 # åé¦ˆé”®ä¸€èˆ¬åœ¨é¥æ§å™¨åç§°æœ€çŸ­çš„é‚£ä¸ªè®¾å¤‡ä¸Šï¼Œä¹Ÿå°±æ˜¯2.4G Composite Devicï¼Œä½ ä¹Ÿå¯ä»¥æŠŠå¤šæ¬¡æµ‹è¯•ä¸€ä¸ªä¸€ä¸ªè¯•å‡ºæ¥ Input driver version is 1.0.1 Input device ID: bus 0x3 vendor 0x276d product 0x1101 version 0x111 Input device name: \u0026#34;2.4G Composite Devic\u0026#34; Supported events: Event type 0 (EV_SYN) Event type 1 (EV_KEY) Event code 1 (KEY_ESC) Event code 2 (KEY_1) Event code 3 (KEY_2) Event code 4 (KEY_3) Event code 5 (KEY_4) Event code 6 (KEY_5) ... ## ä¸­é—´å¤ªé•¿äº†ï¼Œç•¥å» Properties: Testing ... (interrupt to exit) ## æŒ‰ä¸‹è¿”å›é”®ï¼Œæœ‰ååº”è¯´æ˜è®¾å¤‡é€‰æ‹©å¯¹äº†ï¼Œæ— ååº”è¯´æ˜è¿”å›é”®ä¸åœ¨è¿™ä¸ªè®¾å¤‡ä¸Š Event: time 1691294047.183861, type 4 (EV_MSC), code 4 (MSC_SCAN), value 70029 Event: time 1691294047.183861, type 1 (EV_KEY), code 1 (KEY_ESC), value 1 Event: time 1691294047.183861, -------------- SYN_REPORT ------------ Event: time 1691294047.255862, type 4 (EV_MSC), code 4 (MSC_SCAN), value 70029 Event: time 1691294047.255862, type 1 (EV_KEY), code 1 (KEY_ESC), value 0 Event: time 1691294047.255862, -------------- SYN_REPORT ------------ ## Ctrl+Cé€€å‡º ç”±ä¸Šè¿°è¾“å‡ºå†…å®¹å¯çŸ¥ï¼Œè¿™æ¬¾é¥æ§å™¨çš„è¿”å›é”®æ˜¯escé”®ï¼Œè€Œå¦å¤–ä¸€äº›é¥æ§å™¨çš„è¿”å›é”®æ˜¯backspaceé”®ï¼Œè¿™æ‰æ˜¯è¿”å›ä¸Šä¸€å±‚è€Œéé€€å‡ºçš„æŒ‰é”®ã€‚æ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥æŠŠè¿™ä¸ªé¥æ§å™¨çš„escé”®è½¬æ¢ä¸ºbackspaceé”®ã€‚\nå…ˆç¡®è®¤/dev/input/by-idä¸‹å·²ç»æœ‰/dev/input/event5ï¼ˆå¯¹æˆ‘è€Œè¨€ï¼Œevent5å°±æ˜¯æˆ‘çš„2.4G Composite Devicè¿™ä¸ªé¥æ§å™¨è®¾å¤‡ï¼‰çš„è½¯è¿æ¥ã€‚ä¸€èˆ¬udevç¨‹åºè¯†åˆ«è¿™ä¸ªè®¾å¤‡æ²¡æœ‰é—®é¢˜ï¼Œä¸å†éœ€è¦è‡ªå·±ç¼–è¾‘ç›¸åº”çš„udevè§„åˆ™ï¼›ç„¶åä¿®æ”¹åœ¨ã€Šåƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœã€‹ä¸­åˆ›å»ºçš„è„šæœ¬/usr/local/bin/run-evsieve.shå¦‚ä¸‹ï¼Œå¹¶æ³¨æ„æŒ‰ç…§æ³¨é‡Šä¿®æ”¹ä¸ºè‡ªå·±çš„ä¿¡æ¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 #!/usr/bin/env bash export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin ## è¦åŠ«æŒçš„ç›®æ ‡è®¾å¤‡çš„ç»å¯¹è·¯å¾„ï¼Œè¯·æ³¨æ„ä¿®æ”¹æˆè‡ªå·±çš„ ## ä¸è¦ç›´æ¥å†™/dev/input/eventXï¼Œè€Œè¦å†™/dev/input/by-idä¸‹çš„è®¾å¤‡ ## target_hijack_input_device1æ˜¯è¿”å›é”®ï¼ˆescé”®ï¼‰æ‰€åœ¨çš„è®¾å¤‡ ## target_hijack_input_device2æ˜¯ç”µæºé”®ï¼ˆpoweré”®ï¼‰æ‰€åœ¨çš„è®¾å¤‡ target_hijack_input_device1=\u0026#34;/dev/input/by-id/usb-0627_2.4G_Composite_Devic-event-kbd\u0026#34; target_hijack_input_device2=\u0026#34;/dev/input/by-id/usb-0627_2.4G_Composite_Devic-System-Control\u0026#34; ## è¦èƒæŒçš„æŒ‰é”®çš„é”®åï¼Œåº”è¯¥åˆ†åˆ«å°±æ˜¯escå’Œpoweräº†ï¼Œå¤§æ¦‚ç‡ä¸ç”¨æ”¹ ## target_hijack_button1å°±æ˜¯target_hijack_input_device1ä¸Šçš„escé”® ## target_hijack_button2å°±æ˜¯target_hijack_input_device2ä¸Šçš„poweré”® target_hijack_button1=\u0026#34;esc\u0026#34; target_hijack_button2=\u0026#34;power\u0026#34; ###### ä»¥ä¸‹æ— éœ€ä¿®æ”¹ ###### ## å…ˆæ£€æµ‹ target_hijack_input_device1 å’Œ target_hijack_input_device2 æ˜¯å¦å·²ç»å­˜åœ¨ while :; do if [[ -L \u0026#34;$target_hijack_input_device1\u0026#34; \u0026amp;\u0026amp; -L \u0026#34;$target_hijack_input_device2\u0026#34; ]]; then break else echo \u0026#34;The \u0026#39;$target_hijack_input_device1\u0026#39; or \u0026#39;$target_hijack_input_device2\u0026#39; is not inserted, wait 2 seconds...\u0026#34; sleep 2 fi done ## æ‰§è¡ŒæŒ‰é”®èƒæŒï¼Œè¯¦ç»†ç”¨æ³•è¯·è§ï¼šhttps://github.com/KarsMulder/evsieve ## å½“æŒ‰ä¸‹é€€å‡ºé”®æ—¶ï¼Œè½¬æ¢ä¸ºè¿”å›é”® ## å½“æŒ‰ä¸‹ç”µæºé”®æ—¶ï¼Œè½¬æ¢ä¸ºè¿è¡Œè„šæœ¬/usr/local/bin/kodi-power.sh exec evsieve \\ --input \u0026#34;$target_hijack_input_device1\u0026#34; grab persist=reopen \\ --map key:$target_hijack_button1 key:backspace \\ --output \\ --input \u0026#34;$target_hijack_input_device2\u0026#34; grab persist=reopen \\ --hook key:$target_hijack_button2 exec-shell=\u0026#34;/usr/local/bin/kodi-power.sh\u0026#34; \\ --block key:$target_hijack_button2 ç„¶åé‡å¯åœ¨ã€Šåƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœã€‹ä¸­åˆ›å»ºçš„æœåŠ¡/etc/systemd/system/evsieve.serviceã€‚\n1 2 systemctl daemon-reload systemctl restart evsieve.service ç¡®è®¤æœåŠ¡æ­£å¸¸è¿è¡Œèµ·æ¥äº†ï¼Œç„¶åä½ å°±å¯ä»¥ç”¨é¥æ§å™¨æ‰“å¼€Kodiå¹¶æµ‹è¯•é€€å‡ºé”®æ˜¯å¦è½¬æ¢ä¸ºè¿”å›é”®äº†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ## æŸ¥çœ‹çŠ¶æ€ systemctl status evsieve.service ## å¦‚ä¸‹è¾“å‡ºå†…å®¹åƒä¸‹é¢è¿™æ ·ï¼Œå°±è¡¨ç¤ºèƒæŒå¥½äº† â— evsieve.service - Run Evsieve Loaded: loaded (/etc/systemd/system/evsieve.service; enabled; preset: enabled) Active: active (running) since Sun 2023-08-06 12:05:36 CST; 1h 20min ago Main PID: 3612370 (evsieve) Tasks: 2 (limit: 75726) Memory: 1.3M CPU: 317ms CGroup: /system.slice/evsieve.service â””â”€3612370 evsieve --input /dev/input/by-id/usb-0627_2.4G_Composite_Devic-event-kbd grab persist=reopen --map key:esc key:backspace --output --input /dev/input/by-id/usb-0627_2.4G_Composite_Devic-System-Control grab persist=reopen --hook key:power exec-shell=/usr/local/bin/kodi-power.sh --block key:power 8æœˆ 06 12:05:36 pve systemd[1]: Started evsieve.service - Run Evsieve. ","date":"2023-08-06T00:00:00+08:00","image":"https://evine.win/p/kodi-change-exit-to-backspace/kodi-poster_hu6a9a6c2102fadf339a8899f5319f0c51_430270_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/kodi-change-exit-to-backspace/","title":"è½¬æ¢é¥æ§å™¨çš„é€€å‡ºé”®ä¸ºè¿”å›é”®"},{"content":" å…³é”®è¯ï¼šä¸Šæµ· ç”µä¿¡ IPTV SDNå…‰çŒ« æ¡¥æ¥ çˆ±å¿« iKuai IPTVç›’å­\næ ¹æ® è¿™ä¸ªæ–¹æ³• ï¼Œå¯ä»¥åœ¨æ²¡æœ‰äº¤æ¢æœºæ—¶ï¼Œå®ç°å…‰çŒ«æ¡¥æ¥ã€çˆ±å¿«ä½œä¸ºä¸»è·¯ç”±è¿›è¡Œæ‹¨å·çš„æƒ…å†µä¸‹ï¼Œæ— éœ€è®¾ç½®vlan tagå³å¯è®©ä¸Šæµ·ç”µä¿¡IPTVç›’å­æ­£å¸¸ä½¿ç”¨ã€‚æ³¨æ„ï¼šæ­¤æ–¹æ³•ä¸æ˜¯å°†IPTVä¿¡å·æµåª’ä½“åŒ–ï¼Œåªæ˜¯è®©ç”µä¿¡çš„IPTVç›’å­å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚ä¸»è¦é€‚ç”¨äºSDNå…‰çŒ«ä»¥åŠæœ€æ–°çš„2.5Gå…‰çŒ«ã€‚\nå…‰çŒ«å…ˆæ‰¾ç”µä¿¡å°å“¥æ²Ÿé€šå¥½æ”¹æ¡¥æ¥ï¼Œç„¶åæŒ‰å¦‚ä¸‹çš„ç½‘ç»œæ‹“æ‰‘å›¾æ¥çº¿ï¼š\nçˆ±å¿«è‡³å°‘éœ€è¦4ä¸ªç‰©ç†ç½‘å£ï¼Œå‡å¦‚åˆ†åˆ«ä¸ºeth0ã€eth1ã€eth2ã€eth3ã€‚å…¶ä¸­eth3ä½œä¸ºwanå£è¿æ¥å…‰çŒ«ï¼ˆä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å£ï¼Œåªè¦åŒºåˆ†æ¸…æ¥šå³å¯ï¼‰ã€‚\neth0è®¾ç½®ä¸ºlan1 ï¼Œlan1ç›¸åº”çš„DHCPæœåŠ¡è¯·è‡ªè¡Œè®¾ç½®ã€‚\neth2é€šè¿‡ç½‘çº¿è¿æ¥å…‰çŒ«çš„ç½‘å£3ï¼Œeth1å’Œeth2è®¾ç½®ä¸ºlan2ï¼Œæ³¨æ„æ‰©å±•ç½‘å¡è¦å‹¾é€‰ä¸¤ä¸ªã€‚\nè®¾ç½®lan2çš„DHCPæœåŠ¡å¹¶è®¾ç½®ç›¸åº”çš„DHCP Optionã€‚\noption 60ï¼ˆåå…­è¿›åˆ¶ï¼‰:\n1 00:00:01:00:02:03:43:50:45:03:0e:45:38:20:47:50:4f:4e:20:52:4f:55:54:45:52:04:03:31:2e:30 option 125 ï¼ˆåå…­è¿›åˆ¶ï¼‰:\n1 2 3 00:00:00:00:1a:02:06:48:47:57:2d:43:54:0a:02:20:00:0b:02:00:55:0d:02:00:2e # æˆ–è€… 00:00:01:00:02:03:43:50:45:03:0e:45:38:20:47:50:4f:4e:20:52:4f:55:54:45:52:04:03:31:2e:30 æ‰“å¼€IPTVç›’å­ï¼Œè¿æ¥å¥½ç”µè§†æœºï¼Œåº”è¯¥å°±å¯ä»¥äº†ï¼Œä»ç³»ç»Ÿä¿¡æ¯ä¸­ä¹Ÿèƒ½çœ‹åˆ°èƒ½å¤Ÿè·å–åˆ°ä¸¤ä¸ª IPã€‚\n","date":"2023-05-19T00:00:00+08:00","image":"https://evine.win/p/ikuai-how-use-iptv-in-shanghai/pic1_hu110183bbca19103c650c46f2204413d3_49641_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/ikuai-how-use-iptv-in-shanghai/","title":"å…‰çŒ«æ¡¥æ¥çˆ±å¿«æ‹¨å·æ—¶ï¼Œä¸Šæµ·ç”µä¿¡IPTVç›’å­å¦‚ä½•æ­£å¸¸ä½¿ç”¨"},{"content":" å…³é”®è¯ï¼šçˆ±å¿« IPv4 / IPv6 ACL / é˜²ç«å¢™ ç«¯å£è½¬å‘ è®¾ç½® å®‰å…¨\nç›¸å…³æ¦‚å¿µ å¼•ç”¨è‡ªçˆ±å¿«å¸®åŠ©æ–‡æ¡£ï¼Œä¸å®Œå…¨ç†è§£ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå¯ä»¥åœ¨å®è·µä¸­åŠ æ·±æ¦‚å¿µç†è§£ã€‚\nåè®®æ ˆï¼šæ”¯æŒé€‰æ‹©IPV4æˆ–IPV6ï¼Œåœ¨çˆ±å¿«è·¯ç”±3.7.0åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒã€‚ åè®®ï¼šè¿™æ¡ACLè§„åˆ™æ‰€èµ°çš„åè®®çš„ç±»å‹ã€‚ åŠ¨ä½œï¼šå…è®¸æˆ–é˜»æ–­ï¼› æ–¹å‘ï¼š è¿›æˆ–è½¬å‘ï¼› [è¿›]ï¼šå†…ç½‘æˆ–å¤–ç½‘è¿›è·¯ç”±ã€‚ [è½¬å‘]ï¼šè·¯ç”±æ¥æ”¶åˆ°å†…ç½‘æˆ–å¤–ç½‘æ•°æ®ç„¶åæŠŠæ•°æ®è¿›è¡Œè½¬å‘åŠ¨ä½œã€‚ è¿æ¥æ–¹å‘åŒ¹é…: [åŸå§‹æ–¹å‘]ï¼šåŒ¹é…ä¸»åŠ¨å‘èµ·æ–¹å‘èµ·è®¿é—®æ—¶çš„æŠ¥æ–‡ã€‚ [åº”ç­”æ–¹å‘]ï¼šåŒ¹é…è¢«è®¿é—®æ–¹åº”ç­”æ—¶çš„æŠ¥æ–‡ã€‚ æºåœ°å€ï¼šè½¬å‘ä¸è¿›åŠ¨ä½œçš„èµ·å§‹åœ°å€ã€‚ ç›®çš„åœ°å€ï¼šè½¬å‘ä¸è¿›åŠ¨ä½œçš„ç»“æŸåœ°å€ã€‚ æºç«¯å£ï¼šå…è®¸æˆ–é˜»æ–­çš„èµ·å§‹ç«¯å£ã€‚ ç›®çš„ç«¯å£ï¼šç‰¹å®šç›®æ ‡çš„ç«¯å£ã€‚ è¿›æ¥å£ï¼šæ•°æ®æ¥æºå£ã€‚ å‡ºæ¥å£ï¼šç›®çš„å‡ºå£ã€‚ IPv4ä¸IPv6çš„ä¸åŒ IPv4åœ¨çˆ±å¿«ç³»ç»Ÿä¸­è®¾ç½®äº†ç«¯å£è½¬å‘ä»¥åï¼Œè¢«è½¬å‘çš„ç«¯å£é€šè¿‡ä»»ä½•å…¬ç½‘IPéƒ½èƒ½è®¿é—®ï¼Œä¸å¤ªå®‰å…¨ï¼Œä½†æ€»å¾—æ¥è¯´åªé™åˆ¶åœ¨è½¬å‘çš„ç«¯å£èŒƒå›´å†…ã€‚\nè€ŒIPv6ä¸å­˜åœ¨ç«¯å£è½¬å‘çš„æ¦‚å¿µï¼Œåªè¦åœ¨çˆ±å¿«ç³»ç»Ÿä¸­å¯ç”¨äº†IPv6ï¼Œé‚£ä¹ˆå†…ç½‘çš„è®¾å¤‡éƒ½æœ‰å…¨çƒå”¯ä¸€çš„IPv6åœ°å€ï¼Œä¸éœ€è¦ä»€ä¹ˆè®¾ç½®å°±èƒ½ä»å…¬ç½‘è®¿é—®ã€‚è€Œçˆ±å¿«é»˜è®¤å°±æ²¡æœ‰å¯ç”¨IPv6é˜²ç«å¢™ï¼Œæ„æ€å°±æ˜¯æœ‰IPv6åœ°å€çš„è®¾å¤‡æ˜¯å‡ ä¹å®Œå…¨æš´éœ²åœ¨å…¬ç½‘ç¯å¢ƒä¸­çš„ï¼Œæä¸å®‰å…¨ã€‚\nå½“ç„¶ï¼ŒISPå¤§æ¦‚ç‡å°æ‰äº†ä¸€äº›å¸¸è§çš„ç«¯å£ã€‚\nIPv4çš„ACL/é˜²ç«å¢™è®¾ç½® IPv4è¦è®¾ç½®ACL/é˜²ç«å¢™ï¼Œç”±äºNATçš„å­˜åœ¨ï¼Œåªéœ€è¦é’ˆå¯¹è®¾ç½®äº†ç«¯å£è½¬å‘/UPNP/DMZçš„ç«¯å£/è®¾å¤‡æ¥è®¾ç½®ã€‚å¯ä»¥å‚è€ƒè¿™ç¯‡æ•™ç¨‹ ï¼Œå¯ä»¥é™åˆ¶SSH/WEBUI/RDPçš„è®¿é—®æ¥æºIPï¼Œæé«˜å®‰å…¨æ€§ã€‚\næ³¨æ„ï¼Œå¦‚è¦è®¾ç½®ACLï¼Œè¦å…ˆè®¾ç½®å¥½ç«¯å£è½¬å‘ï¼Œç„¶ååªé’ˆå¯¹éœ€è¦æé«˜å®‰å…¨æ€§çš„è½¬å‘ç«¯å£æ¥è®¾ç½®ACLï¼ˆBT/PTè½¯ä»¶IPv4çš„ç›‘å¬ç«¯å£åªè½¬å‘ä¸è®¾ç½®ACLï¼‰ã€‚\nIPv6çš„ACL/é˜²ç«å¢™è®¾ç½® ACLä¸­å…è®¸çš„ä¼˜å…ˆçº§é«˜äºé˜»æ–­ã€‚\nçˆ±å¿«åœ¨3.7.0æ–°å¢äº†IPv6 ACL/é˜²ç«å¢™çš„åŠŸèƒ½ï¼Œç”±æ­¤ç»ˆäºå¯ä»¥æ”¾å¿ƒçš„å¼€å¯IPv6äº†ã€‚ç”±äºé»˜è®¤IPv6ç¯å¢ƒæ˜¯å‡ ä¹å®Œå…¨æš´éœ²åœ¨å…¬ç½‘çš„ã€‚æ‰€ä»¥å¼€å¯IPv6åï¼Œå…ˆåŠ å…¥ä¸¤æ¡è§„åˆ™ï¼Œä¸å…è®¸å…¬ç½‘é€šè¿‡IPv6è®¿é—®æœ¬åœ°ï¼Œä½†å…è®¸æœ¬åœ°é€šè¿‡IPv6è®¿é—®å…¬ç½‘ï¼š\næ³¨ï¼šç¬¬ä¸€æ¡é˜»æ–­è§„åˆ™çš„è¿æ¥æ–¹å‘ä¸ºåŸå§‹æ–¹å‘ï¼Œç¬¬äºŒæ¡å…è®¸è§„åˆ™çš„è¿æ¥æ–¹å‘ä¸ºå…³é—­ã€‚å¹¶ä¸”ç”±äºç›®å‰çˆ±å¿«çš„IPv6 ACLè¿˜æ— æ³•é’ˆå¯¹æ€§çš„æ‰“å¼€æŒ‡å®šæœ¬åœ°è®¾å¤‡çš„ICMPåè®®ï¼Œæ‰€ä»¥è¿™æ ·æ“ä½œä»¥åä¼šé»˜è®¤ç¦æ­¢ä»å…¬ç½‘pingæœ¬åœ°çš„IPv6åœ°å€ã€‚çˆ±å¿«é»˜è®¤å…è®¸ï¼Œæ‰€ä»¥ä¸Šå›¾ä¸­ç¬¬äºŒæ¡è§„åˆ™ä¸è®¾ç½®ä¹Ÿå¯ä»¥ã€‚\nç„¶åå†å¯¹æœ‰å®‰å…¨æ€§è¦æ±‚çš„ç«¯å£/IPæ¥é’ˆå¯¹æ€§çš„å¼€æ”¾æƒé™ã€‚ä»¥ä¸‹ä¸¾å‡ ç§æƒ…å†µï¼š\nWEBUI/HTTPS/HTTP/SSH/RDPç­‰\nå‡å¦‚8080,20000,30000-30004è¿™å‡ ä¸ªç«¯å£éƒ½æ˜¯WEBUI/SSH/RDPæ§åˆ¶ç«¯å£ï¼Œåªå…è®¸å›½å†…IPv6åœ°å€è®¿é—®ã€‚å¯¹åº”æœ¬åœ°è®¾å¤‡æœ‰ä¸¤ä¸ªIPv6åœ°å€ï¼Œåˆ†åˆ«ä¸ºï¼š\n1 2 2400:d0a0:38ba:abde:abbb:c1f:fea5:6c4c/64 2400:d0a0:38ba:abde::add/64 é‚£ä¹ˆå¯ä»¥è¿™æ ·è®¾ç½®ï¼š\nè¿æ¥æ–¹å‘åŒ¹é…ï¼šåŸå§‹æ–¹å‘ã€‚\næºåœ°å€ï¼šå…¨å›½çš„æ•°æ®å¯ä»¥ä»è¿™é‡Œè·å–ï¼šclangï¼Œå¦‚æœéœ€è¦é™åˆ¶åˆ°çœçº§çš„å…·ä½“è¿è¥å•†ï¼Œå¯ä»¥åœ¨è¿™é‡Œè·å–ï¼šzxipv6wryï¼ˆä»ä¸­å›½.txtä¸­ä½ ä¹Ÿå¯ä»¥æ‰¾åˆ°å¸‚çº§/åŒºçº§çš„ä¿¡æ¯ï¼‰ã€‚\nç›®çš„åœ°å€ï¼šæ˜¯IPv6ç‰¹æœ‰çš„åç¼€å¼/è´Ÿæ©ç å†™æ³•ï¼ˆè´Ÿæ©ç æ˜¯ä¸€ä¸ªå…¨0çš„ä½ä¸²ï¼Œåé¢è·Ÿç€ä¸€ä¸ªå…¨1çš„ä½ä¸²ï¼Œè¡¨ç¤ºåœ°å€ä¸­ä¸å˜çš„éƒ¨åˆ†ã€‚ï¼‰ï¼Œå‰ç¼€å˜åŒ–åäº¦å¯ç”Ÿæ•ˆï¼š\n1 2 ::abbb:c1f:fea5:6c4c/::ffff:ffff:ffff:ffff ::add/::ffff:ffff:ffff:ffff ä¸ºäº†é˜²æ­¢ACLè§„åˆ™ä¸å¤±æ•ˆï¼Œå»ºè®®éœ€è¦æ­¤è§„åˆ™çš„è®¾å¤‡é€šè¿‡DHCPv6/EUI-64æ–¹å¼è·å–IPv6ï¼Œé˜²æ­¢åç¼€å˜åŒ–ã€‚\nBT/PTçš„ç›‘å¬ç«¯å£\nå‡å¦‚33333,44444è¿™ä¸¤ä¸ªç«¯å£æ˜¯BT/PTä¸‹è½½è½¯ä»¶çš„ä¸‹è½½ç›‘å¬ç«¯å£ï¼Œç”±äºä¸Šé¢æœ€å¼€å§‹æ·»åŠ çš„é»˜è®¤è§„åˆ™é˜»æ–­äº†å…¶ä»–å…¬ç½‘IPv6è®¿é—®æœ¬åœ°ï¼Œç°åœ¨éœ€è¦å°†33333,44444åœ¨IPv6ä¸Šæš´éœ²å‡ºå»ã€‚å‡å¦‚ä¸‹è½½è½¯ä»¶çš„IPv6åœ°å€æ˜¯ï¼š\n1 2400:d0a0:38ba:abde:42:aff:fe00:fc/64 å¯ä»¥å¦‚ä¸‹è®¾ç½®ï¼š\nåŒä¸Šæ‰€è¿°ï¼Œç›®çš„åœ°å€æ˜¯åç¼€å¼::42:aff:fe00:fc/::ffff:ffff:ffff:ffffï¼Œæºåœ°å€ç•™ç©ºè¡¨ç¤ºå…è®¸ä»»ä½•IPv6ï¼Œè¿æ¥æ–¹å‘åŒ¹é…å¯ä»¥é€‰æ‹©å…³é—­ã€‚ä¸€æ¡æ˜¯tcpï¼Œä¸€æ¡æ˜¯udpï¼Œç›®å‰çˆ±å¿«IPv6çš„ACLæ— æ³•è®¾ç½®tcp+udpï¼Œåªèƒ½åˆ†æˆä¸¤æ¡ã€‚\nå®Œå…¨æš´éœ²æŸå°è®¾å¤‡\nå› ä¸ºæŸäº›åŸå› ï¼ˆæ¯”å¦‚PCDNï¼‰ï¼Œå‡å¦‚éœ€è¦å°†æŸäº›IPv6å®Œå…¨æš´éœ²åœ¨å…¬ç½‘ä¸­ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·è®¾ç½®ï¼š\nå…¶ä¸­çš„è¿æ¥æ–¹å‘å¯ä»¥é€‰æ‹©åŸå§‹æ–¹å‘ï¼Œç›®çš„åœ°å€ï¼Œå‚ç…§ä¸Šè¿°å†™æ³•å†™æˆè´Ÿæ©ç å½¢å¼ï¼Œæºåœ°å€ã€ç›®çš„ç«¯å£å‡ç•™ç©ºï¼Œè¡¨ç¤ºå…¨éƒ¨å…è®¸ã€‚\nè§„åˆ™éªŒè¯ å¦å¤–æ‰¾å°å…¬ç½‘æœºå™¨ï¼ˆä¸åœ¨æœ¬åœ°ç½‘ç»œä¸­çš„ï¼Œç”¨æ‰‹æœºèœ‚çªç½‘ä¸´æ—¶å¼€ä¸ªçƒ­ç‚¹ä¹Ÿè¡Œï¼‰ï¼Œå®‰è£…å¥½nmapï¼ˆlinuxç›´æ¥ä»ä»“åº“ä¸­å®‰è£…ï¼Œwindowsçš„åœ¨ è¿™é‡Œï¼‰ï¼Œæ¯”å¦‚æ£€æµ‹IPv6çš„æŸç«¯å£å¼€æ”¾æƒ…å†µè¿è¡Œä¸‹é¢å‘½ä»¤å³å¯ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 ## æ£€æµ‹IPv6æŸç«¯å£çš„å¼€æ”¾æƒ…å†µ nmap -6 \u0026lt;IPv6åœ°å€æˆ–èƒ½è§£æIPv6çš„åŸŸå\u0026gt; -p \u0026lt;ç«¯å£\u0026gt; -Pn ## ä¸¾ä¾‹ nmap -6 2400:d0a0:38ba:abde:abbb:c1f:fea5:6c4c -p 8080,20000,30000-30004 -Pn ## è¾“å‡º Starting Nmap 7.93 ( https://nmap.org ) at 2023-04-08 20:40 CST Nmap scan report for 2400:d0a0:38ba:abde:abbb:c1f:fea5:6c4c Host is up (0.016s latency). PORT STATE SERVICE 8080/tcp open unknown 20000/tcp filtered unknown 30000/tcp filtered unknown 30001/tcp filtered unknown 30002/tcp open unknown 30003/tcp open unknown 30004/tcp open unknown å‡å¦‚è¦æ£€æµ‹IPv4çš„ç«¯å£å¼€æ”¾æƒ…å†µï¼ŒæŠŠå‘½ä»¤ä¸­çš„-6æ›´æ¢ä¸º-4å³å¯ã€‚\nstateçŠ¶æ€è¯´æ˜ï¼š\nopen: ç›®æ ‡å¯è¾¾å¹¶ä¸”ç«¯å£å·²å¼€æ”¾ï¼› closed: ç›®æ ‡å¯è¾¾ä½†ç«¯å£æ²¡æœ‰æ‰“å¼€ï¼Œä¸€èˆ¬æ˜¯æ²¡æœ‰æœåŠ¡è¿è¡Œåœ¨è¿™ä¸ªç«¯å£ä¸Šï¼› fitered: ç›®æ ‡ä¸å¯è¾¾ï¼Œä¹Ÿå°±æ˜¯è¢«ACL/é˜²ç«å¢™é˜»æ–­äº†ã€‚ ä½ å¯ä»¥å¯ç”¨/åœç”¨çˆ±å¿«ç³»ç»Ÿä¸­å¯¹åº”çš„ACLè§„åˆ™åï¼Œè¿è¡Œå‘½ä»¤æ£€æµ‹ç«¯å£æ˜¯å¦å¯è¿æ¥ã€‚\n","date":"2023-04-08T00:00:00+08:00","image":"https://evine.win/p/ikuai-set-ipv6-acl/pic1_hucc47260a9bbf21ba621002cdab8a4a01_35548_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/ikuai-set-ipv6-acl/","title":"çˆ±å¿« IPv4ï¼IPv6 ACLï¼é˜²ç«å¢™è®¾ç½®"},{"content":"æ•ˆæœå›¾ æµç¨‹ é€šè¿‡æ‰‹æœºç‰ˆé’‰é’‰-\u0026gt;é¢å¯¹é¢å»ºç¾¤ï¼Œå»ºç«‹ä¸€ä¸ªä¸€äººç¾¤ã€‚\né€šè¿‡PCç‰ˆé’‰é’‰åœ¨ç¾¤ä¸­åˆ›å»ºä¸€ä¸ªâ€œè‡ªå®šä¹‰â€çš„Webhookæœºå™¨äººï¼Œåå­—éšæ„ï¼Œå®‰å…¨è®¾ç½®å‹¾é€‰â€œè‡ªå®šä¹‰å…³é”®è¯â€ï¼Œå¹¶æ–°å¢ä¸¤ä¸ªè¯ï¼šæ’­æ”¾å’Œæ·»åŠ ï¼ŒåŒæ—¶æŠŠWebhooké“¾æ¥è®°å½•ä¸‹æ¥ï¼Œé“¾æ¥å½¢å¦‚https://oapi.dingtalk.com/robot/send?access_token=1234567890abcdef1234567890abcdefã€‚\nJellyfiné€šè¿‡å®˜æ–¹æ’ä»¶åº“å®‰è£…å¥½â€œWebhookâ€æ’ä»¶ï¼Œå¹¶é‡å¯Jellyfinã€‚\nåœ¨Jellyfinçš„â€œWebhookâ€æ’ä»¶çš„è®¾ç½®ç•Œé¢ä¸­ï¼Œç‚¹å‡» Add General Destination æŒ‰é’®æ–°å¢ä¸€ä¸ªHookï¼Œè®¾ç½®ä»¥ä¸‹ä¿¡æ¯ï¼š\nServer Urlï¼šä½ çš„Jellyfinè®¿é—®åœ°å€ï¼Œå½¢å¦‚http://example.com:8096 Webhook Nameï¼šå–ä¸ªåï¼Œæ¯”å¦‚DingTalk Webhook Urlï¼šç¬¬2æ­¥ä¸­æ·»åŠ çš„â€œè‡ªå®šä¹‰â€æœºå™¨äººçš„Webhooké“¾æ¥ Notification Typeï¼šå‹¾é€‰Item Addedã€Playback Startã€Playback Stop User Filterï¼šå‹¾é€‰ä½ æƒ³è§¦å‘é€šçŸ¥çš„ç”¨æˆ· Item Typeï¼šå‹¾é€‰ä½ æƒ³ç›‘æ§çš„åª’ä½“ç±»å‹ï¼Œä¸èƒ½å‹¾é€‰å…¶ä¸­çš„Send All Properties (ignores template) Templateï¼šå¡«å…¥ä»¥ä¸‹å†…å®¹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 { \u0026#34;msgtype\u0026#34;: \u0026#34;markdown\u0026#34;, \u0026#34;markdown\u0026#34;: { {{#if_equals NotificationType \u0026#39;ItemAdded\u0026#39;}} {{#if_equals ItemType \u0026#39;Season\u0026#39;}} \u0026#34;title\u0026#34;: \u0026#34;{{{SeriesName}}} {{{Name}}} å·²æ·»åŠ åˆ° {{{ServerName}}}\u0026#34;, {{else}} {{#if_equals ItemType \u0026#39;Episode\u0026#39;}} \u0026#34;title\u0026#34;: \u0026#34;{{{SeriesName}}} S{{SeasonNumber00}}E{{EpisodeNumber00}} {{{Name}}} å·²æ·»åŠ åˆ° {{{ServerName}}}\u0026#34;, {{else}} \u0026#34;title\u0026#34;: \u0026#34;{{{Name}}} ({{Year}}) å·²æ·»åŠ åˆ° {{{ServerName}}}\u0026#34;, {{/if_equals}} {{/if_equals}} \u0026#34;text\u0026#34;: \u0026#34;**åª’ä½“æ·»åŠ é€šçŸ¥** \\n\\n {{#if_equals ItemType \u0026#39;Season\u0026#39;}} åç§°ï¼š{{{SeriesName}}} S{{SeasonNumber00}} {{{Name}}}\\n {{else}} {{#if_equals ItemType \u0026#39;Episode\u0026#39;}} åç§°ï¼š{{{SeriesName}}} S{{SeasonNumber00}}E{{EpisodeNumber00}} {{{Name}}}\\n {{else}} åç§°ï¼š{{{Name}}} ({{Year}})\\n {{/if_equals}} {{/if_equals}} é“¾æ¥ï¼š {{~#if_exist Provider_imdb~}} [IMDb](https://www.imdb.com/title/{{Provider_imdb}}/)\\n {{~/if_exist~}} {{~#if_exist Provider_tmdb~}} {{~#if_equals ItemType \u0026#39;Movie\u0026#39;~}} [TMDb](https://www.themoviedb.org/movie/{{Provider_tmdb}})\\n {{~else~}} [TMDb](https://www.themoviedb.org/tv/{{Provider_tmdb}})\\n {{~/if_equals~}} {{~/if_exist~}} {{~#if_exist Provider_opendouban~}} [è±†ç“£](https://movie.douban.com/subject/{{Provider_opendouban}}/)\\n {{~/if_exist~}} [Jellyfin]({{ServerUrl}}/web/index.html#!/details?id={{ItemId}}\u0026amp;serverId={{ServerId}})\\n\\n {{#if_equals ItemType \u0026#39;Episode\u0026#39;}} æ—¶é•¿ï¼š{{RunTime}}\\n\\n {{else}} {{#if_equals ItemType \u0026#39;Movie\u0026#39;}} æ—¶é•¿ï¼š{{RunTime}}\\n\\n {{/if_equals}} {{/if_equals}} {{~#if_exist Overview~}} ç®€ä»‹ï¼š{{Overview}} {{~else~}} ç®€ä»‹ï¼š(æ— ) {{~/if_exist~}}\u0026#34; {{/if_equals}} {{#if_equals NotificationType \u0026#39;PlaybackStart\u0026#39;}} \u0026#34;title\u0026#34;: \u0026#34;{{{NotificationUsername}}} å¼€å§‹æ’­æ”¾\u0026#34;, \u0026#34;text\u0026#34;: \u0026#34;**å¼€å§‹æ’­æ”¾é€šçŸ¥** \\n\\n ç”¨æˆ·ï¼š{{{NotificationUsername}}}\\n {{#if_equals ItemType \u0026#39;Episode\u0026#39;}} å‰§é›†ï¼š{{{SeriesName}}} ({{Year}}) S{{SeasonNumber00}}E{{EpisodeNumber00}} - {{{Name}}}\\n {{else}} ç”µå½±ï¼š{{{Name}}} ({{Year}})\\n {{/if_equals}} èµ·ç‚¹ï¼š{{PlaybackPosition}}\\n è®¾å¤‡ï¼š{{DeviceName}}\\n ç»ˆç«¯ï¼š{{ClientName}}\\n\\n {{~#if_exist Overview~}} ç®€ä»‹ï¼š{{Overview}} {{~/if_exist~}}\u0026#34; {{/if_equals}} {{#if_equals NotificationType \u0026#39;PlaybackStop\u0026#39;}} \u0026#34;title\u0026#34;: \u0026#34;{{{NotificationUsername}}} åœæ­¢æ’­æ”¾\u0026#34;, \u0026#34;text\u0026#34;: \u0026#34;**åœæ­¢æ’­æ”¾é€šçŸ¥** \\n\\n ç”¨æˆ·ï¼š{{{NotificationUsername}}}\\n {{#if_equals ItemType \u0026#39;Episode\u0026#39;}} å‰§é›†ï¼š{{{SeriesName}}} ({{Year}}) S{{SeasonNumber00}}E{{EpisodeNumber00}} - {{{Name}}}\\n {{else}} ç”µå½±ï¼š{{{Name}}} ({{Year}})\\n {{/if_equals}} è®¾å¤‡ï¼š{{DeviceName}}\\n ç»ˆç«¯ï¼š{{ClientName}}\u0026#34; {{/if_equals}} } } ç‚¹å‡»Add Request Headerï¼Œå¹¶æ–°å¢ä¸€ç»„ï¼šKey: Content-Type, Value: application/json ä¿å­˜å¥½é…ç½®ï¼Œæ¥ä¸‹æ¥ï¼Œåªè¦Jellyfinä¸­æœ‰æ–°çš„åª’ä½“æ·»åŠ è¿›æ¥ï¼Œæˆ–è€…é€‰å®šç”¨æˆ·å¼€å§‹/åœæ­¢æ’­æ”¾åª’ä½“ï¼Œä½ åˆ™ä¼šæ”¶åˆ°é€šçŸ¥ã€‚ å‚è€ƒèµ„æ–™ jellyfin-plugin-webhook, templates, handlebars.\n","date":"2022-12-28T00:00:00+08:00","image":"https://evine.win/p/jellyfin-webhook-to-dingtalk/pic1_hu66fd9635c5b2da7615826da8eb0960a8_113494_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/jellyfin-webhook-to-dingtalk/","title":"Jellyfinä½¿ç”¨Webhookå‘é€é€šçŸ¥åˆ°é’‰é’‰"},{"content":" æœ¬æ–‡ä¸ºã€ŠPVEå®‰è£…Kodiã€‹ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚\nPVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodi ä¸ºKodié€‚é…é¥æ§å™¨ ä¿®æ”¹Kodiå­—å¹•å­—ä½“ ä¿®æ”¹Kodiçš®è‚¤å­—ä½“ å±è”½Kodiçš„å…³æœºã€é‡å¯æŒ‰é’® è®¾ç½®Kodiå¯åŠ¨çš„å‰ç½®æ¡ä»¶ åƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœ kodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜ è½¬æ¢é¥æ§å™¨çš„é€€å‡ºé”®ä¸ºè¿”å›é”® è¯´æ˜ kodi-sendå‘½ä»¤æ˜¯Kodiè‡ªå¸¦å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥å®‰å…¨çš„æ“æ§Kodiï¼Œé™¤äº†ä¸‹æ–‡ä½¿ç”¨çš„QuitæŒ‡ä»¤ï¼Œè¿˜æœ‰å¾ˆå¤šæŒ‡ä»¤å¯ä»¥ä½¿ç”¨ï¼Œæ–¹ä¾¿æƒ³è¦è‡ªåŠ¨åŒ–æ“ä½œçš„äººæ¥ä½¿ç”¨ï¼Œå…·ä½“å¯ç”¨çš„æŒ‡ä»¤è§ï¼šAction_IDs åŠ List_of_built-in_functions ã€‚\nå®‰è£… è¯·å…ˆæŒ‰ç…§ PVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodi æ•™ç¨‹æ·»åŠ å¥½deb-multimediaè½¯ä»¶æºã€‚\nkodi-sendå‘½ä»¤éœ€è¦å®‰è£…kodi-eventclients-commonï¼ˆå¦‚æœæœªå¯ç”¨deb-multimediaæºï¼Œåˆ™éœ€è¦å®‰è£…debianå®˜æ–¹æºä¸­çš„kodi-eventclients-kodi-sendï¼‰ï¼š\n1 apt install kodi-eventclients-common å¦‚æœæ˜¯ä»backportsæºä¸­å®‰è£…çš„Kodiï¼Œé‚£ä¹ˆä¹Ÿè¦ä»backportsæºä¸­å®‰è£…kodi-eventclients-commonï¼ˆå‡å¦‚æ˜¯PVE 7ï¼Œå¯¹åº”debiançš„bullseysç‰ˆæœ¬ï¼‰ï¼š\n1 apt install -t bullseye-backports kodi-eventclients-common è®¾ç½® å¦‚éœ€è¦ä½¿ç”¨kodi-sendå‘½ä»¤ï¼Œéœ€è¦åœ¨â€œKodiè®¾ç½®-\u0026gt;æœåŠ¡-\u0026gt;æ§åˆ¶â€å¤„å‹¾é€‰â€œå…è®¸é€šè¿‡æœ¬æœºåº”ç”¨è¿œç¨‹æ§åˆ¶â€ã€‚\nä½¿ç”¨ è¾“å…¥kodi-send --helpå³å¯æŸ¥çœ‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 Usage kodi-send [OPTION] --action=ACTION kodi-send [OPTION] --button=BUTTON Example kodi-send --host=192.168.0.1 --port=9777 --action=\u0026#34;Quit\u0026#34; Options -?, --help Will bring up this message --host=HOST Choose what HOST to connect to (default=localhost) --port=PORT Choose what PORT to connect to (default=9777) --keymap=KEYMAP Choose which KEYMAP to use for key presses (default=KB) --button=BUTTON Sends a key press event to Kodi, this option can be added multiple times to create a macro -a ACTION, --action=ACTION Sends an action to XBMC, this option can be added multiple times to create a macro -d T, --delay=T Waits for T ms, this option can be added multiple times to create a macro å¦‚éœ€å¯¹æœ¬æœºå®‰è£…çš„Kodiæ‰§è¡Œé€€å‡ºï¼Œå¦‚æœKodiæ˜¯é»˜è®¤çš„çŠ¶æ€ï¼Œç›´æ¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯ï¼ˆ-a/--actionäºŒè€…éƒ½å¯ä»¥ï¼Œå¸¦ä¸å¸¦=éƒ½è¡Œï¼‰ï¼š\n1 2 kodi-send -a \u0026#34;Quit\u0026#34; kodi-send --action=\u0026#34;Quit\u0026#34; æˆ–è€…åªæ˜¯è°ƒå‡ºé€€å‡ºèœå•ï¼Œè€Œä¸æ˜¯ç›´æ¥é€€å‡ºï¼ˆå¦‚æœé¥æ§å™¨çš„ç”µæºé”®æ²¡æœ‰è¢«evsieveåŠ«æŒçš„è¯ï¼Œç”µæºé”®åœ¨Kodiä¸­å€’æ˜¯åŸæœ¬å°±æ˜¯è°ƒå‡ºé€€å‡ºèœå•ï¼Œä¸è¿‡è¢«evsieveåŠ«æŒä¹‹åå°±å¾—å°±è¿™ç§æ–¹å¼æ›²çº¿è¿˜åŸäº†ï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 # ç›´æ¥è°ƒå‡ºé€€å‡ºèœå•ï¼Œåªèƒ½è°ƒå‡ºï¼Œæ— æ³•åˆ‡å‡º kodi-send -a \u0026#34;ActivateWindow(shutdownmenu)\u0026#34; # ç”¨å‘½ä»¤æ¨¡æ‹ŸæŒ‰ä¸‹sleep/poweræŒ‰é”®ï¼Œä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤ä½œç”¨åŒä¸Šï¼Œåªèƒ½è°ƒå‡ºï¼Œæ— æ³•åˆ‡å‡º kodi-send --button=\u0026#34;sleep\u0026#34; kodi-send --button=\u0026#34;power\u0026#34; # ç”¨å‘½ä»¤æ¨¡æ‹ŸæŒ‰ä¸‹é”®ç›˜çš„sé”®ï¼Œé”®ç›˜çš„sé”®ä½œç”¨ä¹Ÿæ˜¯è°ƒå‡ºé€€å‡ºèœå• # ç›¸æ¯”ä¸Šé¢çš„å‡ ä¸ªå‘½ä»¤ï¼Œå½“é€€å‡ºèœå•å·²ç»è°ƒå‡ºæ—¶å†æ¬¡è¿è¡Œæœ¬å‘½ä»¤å¯ä»¥åˆ‡å‡ºé€€å‡ºèœå• # è€Œè‹¥æ˜¯Kodiæ­£å¤„äºè¾“å…¥æ–‡å­—çš„ç•Œé¢æ—¶ï¼Œæ­¤å‘½ä»¤åªä¼šçœŸçš„æ‰“å‡ºâ€œsâ€ï¼Œè°ƒä¸å‡ºé€€å‡ºèœå• kodi-send --button=\u0026#34;s\u0026#34; æ³¨ï¼šä»¥ä¸Šå‘½ä»¤å‡åœ¨Kodiçš„keymapsæœªä½œä»»ä½•è°ƒæ•´çš„æƒ…å†µä¸‹è¿è¡Œçš„ã€‚å…¶ä»–æŒ‡ä»¤è¯·è§ï¼šAction_IDs åŠ List_of_built-in_functionsï¼Œå…¨éƒ¨æŒ‰é”®è§ï¼šKeyboard_controls ã€‚\nå…¶ä»–åº”ç”¨åœºæ™¯ é’ˆå¯¹ã€ŠPVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodiã€‹ä¸­çš„/etc/systemd/system/kodi.serviceæœåŠ¡ï¼Œå¯ä»¥ä¿®æ”¹ExecStopè¿™ä¸€è¡Œä¸ºï¼š\n1 ExecStop = /usr/bin/kodi-send --action=\u0026#34;Quit\u0026#34; é’ˆå¯¹ã€Šåƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœã€‹ä¸€æ–‡ä¸­çš„/usr/local/bin/kodi-power.shè„šæœ¬ï¼Œå¯ä»¥ä¿®æ”¹systemctl stop kodi.serviceï¼ˆå°±æ˜¯åŸæœ¬çš„å…³é—­Kodiçš„æŒ‡ä»¤ï¼‰è¿™ä¸€è¡Œä¸ºä¸‹é¢ä»»ä½•ä¸€å¥å‘½ä»¤ï¼Œè¿™æ ·ä¹Ÿç®—æ˜¯åœ¨ç”µæºé”®è¢«evsieveåŠ«æŒä¹‹åæ›²çº¿è¿˜åŸäº†ã€‚\n1 2 3 4 5 6 7 8 9 # ç›´æ¥é€€å‡º kodi-send --action=\u0026#34;Quit\u0026#34; # æˆ–è€…åªæ˜¯è°ƒå‡ºé€€å‡ºèœå•ï¼Œè€Œä¸æ˜¯ç›´æ¥é€€å‡ºï¼ˆæ ¹æ®ä¸Šä¸€èŠ‚çš„è¯´æ˜é€‰å…¶ä¸€å³å¯ï¼‰ kodi-send -a \u0026#34;ActivateWindow(shutdownmenu)\u0026#34; kodi-send --action=\u0026#34;ActivateWindow(shutdownmenu)\u0026#34; kodi-send --button=\u0026#34;sleep\u0026#34; kodi-send --button=\u0026#34;power\u0026#34; kodi-send --button=\u0026#34;s\u0026#34; ","date":"2022-12-21T00:00:00+08:00","image":"https://evine.win/p/kodi-send-help/pic1_hu475cd8f935c8a52cdb5f675d449a382e_76470_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/kodi-send-help/","title":"kodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜"},{"content":"å®˜æ–¹æ•™ç¨‹ä¸­æä¾›äº†ä¸€ç§åšæ³•ï¼Œä¹Ÿå°±æ˜¯æä¾›buildkitdçš„é…ç½®æ–‡ä»¶åå†åˆ›å»ºbuilderï¼š\n1 2 3 # å®¿ä¸»ä¸Šæ–°å»º`$HOME/.docker/buildx/buildkitd.default.toml`ï¼Œæ¯”å¦‚é™åˆ¶åŒæ—¶æœ€å¤š4ä¸ªè¿›ç¨‹ [worker.oci] max-parallelism = 4 ç„¶ååˆ›å»ºbuilderï¼š\n1 2 3 $ docker buildx create --use \\ --name mybuilder \\ --driver docker-container ä½†è¿™ç§æ–¹å¼å¯¹äºåŒæ—¶æ„å»ºå¤šä¸ªå¹³å°çš„é•œåƒèµ·ä¸åˆ°é™åˆ¶çš„ä½œç”¨ï¼Œæ‰€ä»¥è¿™é‡Œå†æä¾›ä¸€ç§ä¸ä¾é dockeræœ¬èº«ï¼Œè€Œæ˜¯ä½¿ç”¨cgroup2çš„åŠŸèƒ½æ¥å®ç°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 ## åˆ›å»ºbuilder docker run --privileged --rm tonistiigi/binfmt --install all \u0026amp;\u0026gt;/dev/null docker buildx create --name builder --use 2\u0026gt;/dev/null || docker buildx use builder docker buildx inspect --bootstrap ## é™åˆ¶ docker buildx CPUä½¿ç”¨ç‡ ## CPUæ¯çº¿ç¨‹ä¸Šé™ä¸º100%ï¼ŒCPUå¤šä¸ªçº¿ç¨‹çš„ä¸Šé™å°±æ˜¯çº¿ç¨‹æ•°ä¹˜ä»¥100%ï¼Œæ¯”å¦‚16çº¿ç¨‹çš„ä¸Šé™å°±æ˜¯1600% ## å¦‚æœæœ‰16ä¸ªæ ¸å¿ƒï¼Œé‚£ä¹ˆè®¾ç½®800%å°±æ˜¯16ä¸ªæ ¸å¿ƒçš„ä¸€åŠä½¿ç”¨ç‡ï¼Œæ•´ä½“ä¸Šå°±æ˜¯50%ï¼ˆ800%/1600%=8/16=50%ï¼‰ ## è€Œå¦‚æœæœ‰32ä¸ªæ ¸å¿ƒï¼Œé‚£ä¹ˆè®¾ç½®800%ç›¸å¯¹äºå…¨éƒ¨æ ¸å¿ƒï¼Œæ•´ä½“ä¸Šå°±æ˜¯é™åˆ¶åœ¨25%ï¼ˆ800%/3200%=8/32=25%ï¼‰ ## éœ€è¦è‡ªè¡Œå…ˆå®‰è£…å¥½ jq systemctl set-property docker-$(docker inspect buildx_buildkit_builder0 | jq -r .[0].Id).scope CPUQuota=800% ","date":"2022-11-26T00:00:00+08:00","image":"https://evine.win/p/docker-buildx-limit-cpu-usage/docker-poster_hu6b60afdf246d478211143ca08b6c21f4_93451_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/docker-buildx-limit-cpu-usage/","title":"docker buildx è·¨å¹³å°æ„å»ºé•œåƒæ—¶é™åˆ¶CPUä½¿ç”¨ç‡"},{"content":" æœ¬æ–‡ä¸ºã€ŠPVEå®‰è£…Kodiã€‹ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚\nPVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodi ä¸ºKodié€‚é…é¥æ§å™¨ ä¿®æ”¹Kodiå­—å¹•å­—ä½“ ä¿®æ”¹Kodiçš®è‚¤å­—ä½“ å±è”½Kodiçš„å…³æœºã€é‡å¯æŒ‰é’® è®¾ç½®Kodiå¯åŠ¨çš„å‰ç½®æ¡ä»¶ åƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœ kodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜ è½¬æ¢é¥æ§å™¨çš„é€€å‡ºé”®ä¸ºè¿”å›é”® å¦‚æœKodiä¾èµ–å…¶ä»–æœåŠ¡ï¼Œæ¯”å¦‚éœ€è¦è®¿é—®smbå…±äº«ç­‰ç­‰ï¼Œå¯ä»¥åœ¨å‰æ–‡è®¾ç½®çš„/etc/systemd/system/kodi.serviceä¸­ExecStartè¿™ä¸€è¡Œå‰é¢æ·»åŠ ä¸€è¡Œï¼š\n1 ExecStartPre = /usr/local/bin/kodi-pre.sh /usr/local/bin/kodi-pre.shéœ€è¦å¯æ‰§è¡Œæƒé™ï¼Œå†…å®¹æä¾›ä¸€ä¸ªå‚è€ƒï¼ˆä¸‹é¢çš„ç¤ºä¾‹æ˜¯å…ˆåˆ¤æ–­å’ŒKodiå¤„äºåŒä¸€ä¸»æœºä¸‹çš„Jellyfinå®¹å™¨æ˜¯å¦å·²ç»å¤„äºrunningçŠ¶æ€ã€å¥åº·çŠ¶æ€æ˜¯å¦æ˜¯healthyï¼Œå¹¶ä¸”è¿œç«¯10.0.0.13çš„åä¸ºmultimediaçš„sambaå…±äº«æ˜¯å¦å·²ç»å¯ä»¥æŒ‚è½½äº†ï¼‰ï¼Œè¯·æ ¹æ®ä½ æ‰€éœ€è¦çš„å‰ç½®æ¡ä»¶è¿›è¡Œä¿®æ”¹ï¼ˆè¯·ç›´æ¥åœ¨Linuxç¯å¢ƒä¸­åˆ›å»ºnano /usr/local/bin/kodi-pre.shï¼Œä¸è¦åœ¨Windowsç¯å¢ƒä¸­åˆ›å»ºï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #!/usr/bin/env bash while :; do jellyfin_state=$(/usr/bin/docker inspect jellyfin | /usr/bin/jq .[].State) jellyfin_status=$(echo \u0026#34;$jellyfin_state\u0026#34; | /usr/bin/jq -r .Status) jellyfin_health=$(echo \u0026#34;$jellyfin_state\u0026#34; | /usr/bin/jq -r .Health.Status) smb_status=$(/usr/bin/smbclient -N -L //10.0.0.13 | /usr/bin/grep \u0026#39;multimedia\u0026#39;) if [[ $jellyfin_status == running \u0026amp;\u0026amp; $jellyfin_health == healthy \u0026amp;\u0026amp; -n $smb_status ]]; then echo \u0026#34;Jellyfin is ready, samba is ready.\u0026#34; break else echo \u0026#34;Jellyfin or samba is not ready, wait 30 second.\u0026#34; /usr/bin/sleep 30 fi done ","date":"2022-11-24T00:00:00+08:00","image":"https://evine.win/p/kodi-set-pre-condition/kodi-poster_hu6a9a6c2102fadf339a8899f5319f0c51_430270_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/kodi-set-pre-condition/","title":"è®¾ç½®Kodiå¯åŠ¨çš„å‰ç½®æ¡ä»¶"},{"content":" æœ¬æ–‡ä¸ºã€ŠPVEå®‰è£…Kodiã€‹ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚\nPVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodi ä¸ºKodié€‚é…é¥æ§å™¨ ä¿®æ”¹Kodiå­—å¹•å­—ä½“ ä¿®æ”¹Kodiçš®è‚¤å­—ä½“ å±è”½Kodiçš„å…³æœºã€é‡å¯æŒ‰é’® è®¾ç½®Kodiå¯åŠ¨çš„å‰ç½®æ¡ä»¶ åƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœ kodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜ è½¬æ¢é¥æ§å™¨çš„é€€å‡ºé”®ä¸ºè¿”å›é”® å‰è¨€ åœ¨ã€ŠPVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodiã€‹ä¸€æ–‡çš„è¯„è®ºä¸­ï¼Œæœ‰ç½‘å‹æå‡ºèƒ½ä¸èƒ½åƒæ“æ§ç”µè§†ç›’å­/LibreELEC/CoreELCEä¸€æ ·ç”¨é¥æ§å™¨æ“æ§PVEä¸­ç›´è£…çš„Kodiï¼Œå®ç°æ‰“å¼€å’Œå…³é—­Kodiï¼Œè¿™æ˜¯ä¸ªå¥½æƒ³æ³•ï¼Œæˆ‘ä¹Ÿè®¤ä¸ºè¿™æ ·ä¼šå¤§æ–¹ä¾¿PVEä¸­ç›´è£…çš„Kodiçš„ä½¿ç”¨ï¼Œæ‰€ä»¥å­¦ä¹ äº†ç›¸å…³udevã€udevadmã€evtestã€inputã€input remapç›¸å…³çŸ¥è¯†ï¼Œç»ˆäºå®ç°äº†è¿™ä¸ªéå¸¸ä¾¿äºä½¿ç”¨çš„åŠŸèƒ½ã€‚\nå‚è€ƒèµ„æ–™ udev, udevadm, evtest, input_remap_utilities, evsieve\næ€è·¯ ç”¨é¥æ§å™¨æ“æ§PVEä¸­ç›´è£…çš„Kodiï¼Œå®ç°æ‰“å¼€å’Œå…³é—­Kodiï¼Œè¿™ä¸ªåœºæ™¯éœ€è¦åœ¨æ— æ¡Œé¢ç¯å¢ƒä¸‹ï¼ŒèƒæŒé¥æ§å™¨çš„ç”µæºé”®ï¼Œè®©å®ƒçš„ä½œç”¨å˜æ›´ä¸ºæ‰“å¼€/å…³é—­Kodiï¼Œæ‰€ä»¥åªæ˜¯å°†ç”µæºé”®æ˜ å°„ä¸ºå…¶ä»–é”®æ˜¯ä¸è¡Œçš„ï¼Œè€Œæ˜¯éœ€è¦èƒæŒé¥æ§å™¨çš„ç”µæºé”®ï¼Œè®©å®ƒå˜æ›´ä¸ºè¿è¡ŒæŸä¸ªè„šæœ¬ï¼Œç„¶åç”±è„šæœ¬å®ç°æ‰“å¼€/å…³é—­Kodiã€‚\næ ¹æ® input_remap_utilities åˆ—å‡ºçš„å‡ ä¸ªæŒ‰é”®æ˜ å°„å·¥å…·ï¼Œåªæœ‰ evsieve å¯ä»¥åœ¨æ— æ¡Œé¢ç¯å¢ƒä¸‹èƒæŒæŒ‰é”®å¹¶è¿è¡ŒæŒ‡å®šè„šæœ¬ï¼Œå®ç°ä¸Šè¿°åœºæ™¯ã€‚\nå‡†å¤‡å·¥ä½œ ä»¥ä¸‹ç›¸å…³å‘½ä»¤å‡ä¸ºrootç”¨æˆ·æ‰§è¡Œçš„ã€‚\nå¦‚æœéœ€è¦æ–°å»ºæ–‡ä»¶ï¼Œè¯·ç›´æ¥åœ¨Linuxç¯å¢ƒä¸­ä½¿ç”¨nano XXXXåˆ›å»ºï¼Œè¯·ä¸è¦åœ¨Windowsç¯å¢ƒä¸­åˆ›å»ºåå†ä¸Šä¼ ã€‚\næ‰€æœ‰çš„è¾“å…¥è®¾å¤‡éƒ½ç”±udevç¨‹åºè¯†åˆ«å¹¶ä¿å­˜åœ¨/dev/inputä¸‹ï¼Œé€šè¿‡è¾“å…¥ls -l /dev/inputå¯ä»¥æŸ¥çœ‹åˆ°è®¸å¤ševentXçš„è®¾å¤‡ã€‚è®¾å¤‡çš„ç¼–å·ä¼šéšç€å¤–è®¾çš„æ’å…¥æˆ–å¸è½½ä»¥åŠå¼€å…³æœºçš„å˜åŒ–è€Œå˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´ç”µæºé”®æ‰€åœ¨çš„è¾“å…¥è®¾å¤‡çš„eventXä¸­Xè¿™ä¸ªç¼–å·ä¸æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨/dev/input/eventXæ¥ä½œä¸ºåç»­è¦èƒæŒçš„è¾“å…¥è®¾å¤‡ã€‚è¿è¡Œls -l /dev/input/by-idï¼Œudevä¼šåœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºæ˜“äºè¯†åˆ«çš„ã€å”¯ä¸€çš„ã€ä¸éšå¤–è®¾çš„æ’å…¥å¸è½½æˆ–å¼€å…³æœºè€Œå˜åŒ–çš„è½¯è¿æ¥ï¼Œæ— è®ºXå¦‚ä½•å˜åŒ–ï¼Œå®ƒä»¬éƒ½å°†æŒ‡å‘æ­£ç¡®çš„è®¾å¤‡ã€‚\næˆ‘çš„é¥æ§å™¨æ˜¯è‡ªå¸¦æ¥æ”¶å™¨çš„2.4Gæ— çº¿é¥æ§å™¨ï¼Œæ’ä¸Šæ¥æ”¶å™¨ï¼Œé€šè¿‡evtestç¨‹åºå…ˆæ‰¾å‡ºé¥æ§å™¨ç”µæºé”®åœ¨ä»€ä¹ˆè®¾å¤‡ä¸Šã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 # å®‰è£…evtest apt install evtest # è¿è¡Œevtest evtest --grab # evtestä¼šåˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„è¾“å…¥è®¾å¤‡ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘çš„é¥æ§å™¨æœ‰event5-event8å…±4ä¸ªè®¾å¤‡ # ä½ å¯ä»¥é€‰æ‹©å…·ä½“çš„ç¼–å·æ¥è¿›è¡Œæµ‹è¯•ï¼Œæ‰¾åˆ°æ¯ä¸ªè®¾å¤‡åˆ†åˆ«èƒ½æ§åˆ¶å“ªäº›æŒ‰é”® # ç»è¿‡æµ‹è¯•ï¼Œæˆ‘å‘ç°æˆ‘é¥æ§å™¨çš„ç”µæºé”®åœ¨event8ï¼Œä¹Ÿå°±æ˜¯2.4G Composite Devic System Controlè¿™ä¸ªè®¾å¤‡ No device specified, trying to scan all of /dev/input/event* Available devices: /dev/input/event0: Power Button /dev/input/event1: AT Translated Set 2 keyboard /dev/input/event2: VirtualPS/2 VMware VMMouse /dev/input/event3: VirtualPS/2 VMware VMMouse /dev/input/event4: QEMU QEMU USB Tablet /dev/input/event5: 2.4G Composite Devic /dev/input/event6: 2.4G Composite Devic Mouse /dev/input/event7: 2.4G Composite Devic Consumer Control /dev/input/event8: 2.4G Composite Devic System Control /dev/input/event9: PC Speaker Select the device event number [0-9]:8 # æ‰‹åŠ¨è¾“å…¥è¦æµ‹è¯•çš„è®¾å¤‡ç¼–å·ï¼Œå¦‚æœä¸æ¸…æ¥šç”µæºé”®åœ¨ä»€ä¹ˆè®¾å¤‡ä¸Šï¼Œä½ å¯ä»¥ä¸€ä¸ªä¸€ä¸ªè¯•å‡ºæ¥ Input device ID: bus 0x3 vendor 0x627 product 0x697d version 0x110 Input device name: \u0026#34;2.4G Composite Devic System Control\u0026#34; Supported events: Event type 0 (EV_SYN) Event type 1 (EV_KEY) Event code 116 (KEY_POWER) Event code 142 (KEY_SLEEP) Event code 143 (KEY_WAKEUP) Event type 4 (EV_MSC) Event code 4 (MSC_SCAN) Properties: Testing ... (interrupt to exit) # æŒ‰ä¸‹ç”µæºé”®ï¼Œevtestè¾“å‡ºä»¥ä¸‹ç»“æœï¼Œæ²¡æœ‰ååº”è¡¨ç¤ºè®¾å¤‡æ‹©å–ä¸å¯¹ Event: time 1669209045.421999, type 4 (EV_MSC), code 4 (MSC_SCAN), value 10081 Event: time 1669209045.421999, type 1 (EV_KEY), code 116 (KEY_POWER), value 1 Event: time 1669209045.421999, -------------- SYN_REPORT ------------ Event: time 1669209045.422021, type 1 (EV_KEY), code 116 (KEY_POWER), value 0 Event: time 1669209045.422021, -------------- SYN_REPORT ------------ # Ctrl+Cé€€å‡º é€šè¿‡æµ‹è¯•ï¼Œæˆ‘çŸ¥é“äº†æˆ‘é¥æ§å™¨çš„ç”µæºé”®çš„é”®ç ä¸º116ï¼Œé”®åä¸ºKEY_POWERï¼Œå»æ‰KEY_ï¼Œé”®å€¼è½¬æ¢ä¸ºå°å†™powerè¿™ä¸ªå€¼åœ¨åé¢ä¼šç”¨åˆ°ã€‚ä¸å‡ºæ„å¤–ï¼Œä¸€èˆ¬é¥æ§å™¨çš„ç”µæºé”®çš„é”®å€¼éƒ½æ˜¯powerã€‚\nç°åœ¨æ¥æ‰¾ä¸€ä¸‹event8è¿™ä¸ªè®¾å¤‡åœ¨/dev/input/by-idä¸‹çš„è½¯è¿æ¥å«ä»€ä¹ˆï¼Œè¿è¡Œls -l /dev/input/by-id/ï¼š\n1 2 3 4 5 6 7 total 0 lrwxrwxrwx 1 root root 9 Nov 23 22:40 usb-0627_2.4G_Composite_Devic-event-if01 -\u0026gt; ../event7 lrwxrwxrwx 1 root root 9 Nov 23 22:40 usb-0627_2.4G_Composite_Devic-event-kbd -\u0026gt; ../event5 lrwxrwxrwx 1 root root 9 Nov 23 22:40 usb-0627_2.4G_Composite_Devic-if01-event-mouse -\u0026gt; ../event6 lrwxrwxrwx 1 root root 9 Nov 23 22:40 usb-0627_2.4G_Composite_Devic-if01-mouse -\u0026gt; ../mouse3 lrwxrwxrwx 1 root root 9 Nov 23 22:40 usb-QEMU_QEMU_USB_Tablet_28754-0000:00:01.2-1-event-mouse -\u0026gt; ../event4 lrwxrwxrwx 1 root root 9 Nov 23 22:40 usb-QEMU_QEMU_USB_Tablet_28754-0000:00:01.2-1-mouse -\u0026gt; ../mouse2 è¿™\u0026hellip;\u0026hellip;udevæ²¡æœ‰è¯†åˆ«å‡ºæ¥\u0026hellip;\u0026hellip;å‡†ç¡®çš„è®²ï¼Œæ˜¯å› ä¸ºudevçš„é»˜è®¤è§„åˆ™/usr/lib/udev/rules.d/60-persistent-input.rulesæ— æ³•åŒºåˆ†2.4G Composite Devic Consumer Controlå’Œ2.4G Composite Devic System Controlè¿™ä¸¤ä¸ªè®¾å¤‡ï¼Œç°è±¡æ˜¯æ¯æ¬¡å…³æœºå†å¼€æœºæˆ–æ¯æ¬¡å¸è½½å†æ’å…¥æ¥æ”¶å™¨åï¼Œusb-0627_2.4G_Composite_Devic-event-if01è¿™ä¸ªè®¾å¤‡ä¸€ä¼šå„¿æŒ‡å‘2.4G Composite Devic Consumer Controlï¼Œä¸€ä¼šå„¿æŒ‡å‘2.4G Composite Devic System Controlï¼Œæ‰€ä»¥æˆ‘éœ€è¦ä¿®æ”¹ä¸€ä¸‹udevçš„è§„åˆ™ï¼Œè®©å®ƒèƒ½å¤Ÿå‡†ç¡®è¯†åˆ«å‡º2.4G Composite Devic System Controlã€‚å¯èƒ½å…¶ä»–é¥æ§å™¨ä¸å­˜åœ¨æ­¤é—®é¢˜ï¼Œéœ€è¦ä½ è‡ªè¡Œæµ‹è¯•ä¸€ä¸‹æ­¤é—®é¢˜å­˜åœ¨ä¸å­˜åœ¨ã€‚\nç°åœ¨æ¥è®©udevèƒ½å‡†ç¡®è¯†åˆ«2.4G Composite Devic System Controlï¼Œè¿è¡Œudevadm info --attribute-walk --name=/dev/input/event8ï¼ˆå…¶ä¸­event8æ˜¯æ ¹æ®ä¸Šé¢evtestæµ‹è¯•åçŸ¥é“çš„ï¼‰ï¼Œè¾“å‡ºå†…å®¹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 Udevadm info starts with the device specified by the devpath and then walks up the chain of parent devices. It prints for every device found, all possible attributes in the udev rules key format. A rule to match, can be composed by the attributes of the device and the attributes from one single parent device. looking at device \u0026#39;/devices/pci0000:00/0000:00:1e.0/0000:01:1b.0/usb2/2-1/2-1:1.1/0003:0627:697D.0003/input/input9/event8\u0026#39;: KERNEL==\u0026#34;event8\u0026#34; SUBSYSTEM==\u0026#34;input\u0026#34; DRIVER==\u0026#34;\u0026#34; ATTR{power/async}==\u0026#34;disabled\u0026#34; ATTR{power/control}==\u0026#34;auto\u0026#34; ATTR{power/runtime_active_kids}==\u0026#34;0\u0026#34; ATTR{power/runtime_active_time}==\u0026#34;0\u0026#34; ATTR{power/runtime_enabled}==\u0026#34;disabled\u0026#34; ATTR{power/runtime_status}==\u0026#34;unsupported\u0026#34; ATTR{power/runtime_suspended_time}==\u0026#34;0\u0026#34; ATTR{power/runtime_usage}==\u0026#34;0\u0026#34; looking at parent device \u0026#39;/devices/pci0000:00/0000:00:1e.0/0000:01:1b.0/usb2/2-1/2-1:1.1/0003:0627:697D.0003/input/input9\u0026#39;: KERNELS==\u0026#34;input9\u0026#34; SUBSYSTEMS==\u0026#34;input\u0026#34; DRIVERS==\u0026#34;\u0026#34; ATTRS{capabilities/abs}==\u0026#34;0\u0026#34; ATTRS{capabilities/ev}==\u0026#34;13\u0026#34; ATTRS{capabilities/ff}==\u0026#34;0\u0026#34; ATTRS{capabilities/key}==\u0026#34;c000 10000000000000 0\u0026#34; ATTRS{capabilities/led}==\u0026#34;0\u0026#34; ATTRS{capabilities/msc}==\u0026#34;10\u0026#34; ATTRS{capabilities/rel}==\u0026#34;0\u0026#34; ATTRS{capabilities/snd}==\u0026#34;0\u0026#34; ATTRS{capabilities/sw}==\u0026#34;0\u0026#34; ATTRS{id/bustype}==\u0026#34;0003\u0026#34; ATTRS{id/product}==\u0026#34;697d\u0026#34; ATTRS{id/vendor}==\u0026#34;0627\u0026#34; ATTRS{id/version}==\u0026#34;0110\u0026#34; ATTRS{inhibited}==\u0026#34;0\u0026#34; ATTRS{name}==\u0026#34;2.4G Composite Devic System Control\u0026#34; ATTRS{phys}==\u0026#34;usb-0000:01:1b.0-1/input1\u0026#34; ATTRS{power/async}==\u0026#34;disabled\u0026#34; ATTRS{power/control}==\u0026#34;auto\u0026#34; ATTRS{power/runtime_active_kids}==\u0026#34;0\u0026#34; ATTRS{power/runtime_active_time}==\u0026#34;0\u0026#34; ATTRS{power/runtime_enabled}==\u0026#34;disabled\u0026#34; ATTRS{power/runtime_status}==\u0026#34;unsupported\u0026#34; ATTRS{power/runtime_suspended_time}==\u0026#34;0\u0026#34; ATTRS{power/runtime_usage}==\u0026#34;0\u0026#34; ATTRS{properties}==\u0026#34;0\u0026#34; ATTRS{uniq}==\u0026#34;\u0026#34; ...ä¸‹é¢å…¶ä»–ä¿¡æ¯æ­¤å¤„ç•¥å» é€šè¿‡å¤šæ¬¡è¿è¡Œudevadm info --attribute-walk --name=/dev/input/eventXï¼ˆXæ›´æ¢ä¸ºä¸åŒçš„è®¾å¤‡ç¼–å·ï¼‰å¯çŸ¥ï¼Œæˆ‘çš„è®¾å¤‡2.4G Composite Devic System Controlå¯ä»¥é€šè¿‡ATTRS{name}è¿™ä¸ªå±æ€§å³å¯ä»¥è¿›è¡Œå”¯ä¸€è¯†åˆ«ã€‚å‚è€ƒ udev è¿™ä¸ªé“¾æ¥ï¼Œæ–°å»º/etc/udev/rules.d/01-system-control.rulesï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n1 ATTRS{name}==\u0026#34;2.4G Composite Devic System Control\u0026#34;, SYMLINK+=\u0026#34;input/by-id/usb-0627_2.4G_Composite_Devic-System-Control\u0026#34; è¿™ç§æ–¹å¼æ˜¯å†™æ­»çš„ï¼Œåªé’ˆå¯¹è¿™ä¸€ä¸ªé¥æ§å™¨æœ‰æ•ˆï¼Œå¤æ‚çš„è§„åˆ™å’±ä¹Ÿå†™ä¸æ¥\u0026hellip;å½“ç„¶å¦‚æœä½ æƒ³é‡‡ç”¨æ›´æ™ºèƒ½çš„è¯†åˆ«æ–¹å¼ï¼Œå¯ä»¥å‚è€ƒ Writing udev rules å’Œ ç¼–å†™udevè§„åˆ™ã€‚\nå…¶ä¸­SYMLINK+=\u0026quot;input/by-id/usb-0627_2.4G_Composite_Devic-System-Control\u0026quot;æ˜¯æŒ‡è®©udevåœ¨/dev/input/by-idä¸‹è‡ªåŠ¨åˆ›å»ºusb-0627_2.4G_Composite_Devic-System-Controlï¼Œå…¶æŒ‡å‘2.4G Composite Devic System Controlè¿™ä¸ªè®¾å¤‡ã€‚è½¯è¿æ¥åç§°ä½ å¯ä»¥è‡ªè¡Œå®šä¹‰ã€‚\nç°åœ¨é‡å¯ä¸‹æˆ–è€…é‡æ’ä¸€ä¸‹æ¥æ”¶å™¨ï¼Œç»ˆäºå¯ä»¥è¯†åˆ«å‡ºæ¥äº†ï¼š\n1 2 3 4 5 6 7 8 9 10 11 ls -l /dev/input/by-id ## ç”Ÿæˆäº†`usb-0627_2.4G_Composite_Devic-System-Control`è¿™ä¸ªè½¯è¿æ¥ total 0 lrwxrwxrwx 1 root root 9 Nov 23 22:40 usb-0627_2.4G_Composite_Devic-event-if01 -\u0026gt; ../event7 lrwxrwxrwx 1 root root 9 Nov 23 22:40 usb-0627_2.4G_Composite_Devic-event-kbd -\u0026gt; ../event5 lrwxrwxrwx 1 root root 9 Nov 23 22:40 usb-0627_2.4G_Composite_Devic-System-Control -\u0026gt; ../event8 lrwxrwxrwx 1 root root 9 Nov 23 22:40 usb-0627_2.4G_Composite_Devic-if01-event-mouse -\u0026gt; ../event6 lrwxrwxrwx 1 root root 9 Nov 23 22:40 usb-0627_2.4G_Composite_Devic-if01-mouse -\u0026gt; ../mouse3 lrwxrwxrwx 1 root root 9 Nov 23 22:40 usb-QEMU_QEMU_USB_Tablet_28754-0000:00:01.2-1-event-mouse -\u0026gt; ../event4 lrwxrwxrwx 1 root root 9 Nov 23 22:40 usb-QEMU_QEMU_USB_Tablet_28754-0000:00:01.2-1-mouse -\u0026gt; ../mouse2 è®¾ç½®æŒ‰é”®èƒæŒ ä»¥ä¸‹ç›¸å…³å‘½ä»¤å‡ä¸ºrootç”¨æˆ·æ‰§è¡Œçš„ã€‚\nå¦‚æœéœ€è¦æ–°å»ºæ–‡ä»¶ï¼Œè¯·ç›´æ¥åœ¨Linuxç¯å¢ƒä¸­ä½¿ç”¨nano XXXXåˆ›å»ºï¼Œè¯·ä¸è¦åœ¨Windowsç¯å¢ƒä¸­åˆ›å»ºåå†ä¸Šä¼ ã€‚\nä¸‹è½½æˆ‘ä¸ºPVE 7.Xé¢„ç¼–è¯‘å¥½çš„ evsieveï¼Œå…¶ä»–ç‰ˆæœ¬ä¸ä¿è¯å¯ç”¨ï¼Œå¦‚æœä¸‹è½½ä¸äº†ï¼Œå¯ä»¥æŒ‰ç…§å®˜æ–¹æ•™ç¨‹è‡ªå·±ç¼–è¯‘ã€‚æˆ‘ä¼šéšç€Debianå’Œevsieveç‰ˆæœ¬çš„å‡çº§ä¸€ç›´æ›´æ–°è¯¥æ–‡ä»¶ï¼Œè¯·åŠæ—¶åœ¨è¿™ä¸ªä»“åº“æŸ¥çœ‹æ›´æ–°æƒ…å†µï¼šdevome/files@github\n1 2 3 4 5 wget https://raw.githubusercontent.com/devome/files/master/evsieve/evsieve -O /usr/local/bin/evsieve chmod +x /usr/local/bin/evsieve ## å®‰è£…evsieveçš„è¿è¡Œä¾èµ– apt install libevdev2 æŒ‰ç…§ã€ŠPVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodiã€‹å®‰è£…å¥½Kodiï¼Œå»ºè®®æŒ‰érootç”¨æˆ·è®¾ç½®å¥½/etc/systemd/system/kodi.serviceï¼Œæ³¨æ„å«æœ‰ExecStartå’ŒExecStopè¿™ä¸¤è¡Œã€‚å¦‚æœä½ ä¸éœ€è¦Kodiå¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼Œé‚£ä¹ˆåˆ›å»ºå¥½è¿™ä¸ªæ–‡ä»¶å°±å¥½äº†ï¼Œä¸éœ€è¦è¿è¡Œsystemctl enable --now kodi.serviceã€‚\næ–°å»ºä¸€ä¸ªç”¨æ¥è‡ªåŠ¨åˆ¤æ–­æ˜¯å¯åŠ¨Kodiè¿˜æ˜¯å…³é—­Kodiçš„è„šæœ¬/usr/local/bin/kodi-power.shï¼Œåç»­ç”±evsieveæ¥ä½¿ç”¨ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 #!/usr/bin/env bash export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin if [[ -z $(ps -ef | grep \u0026#34;kodi.bin\u0026#34; | grep -v \u0026#34;grep\u0026#34;) ]]; then ## å¦‚æœkodiè¿˜æ²¡æœ‰å¯åŠ¨ï¼Œé‚£ä¹ˆå°±å¯åŠ¨å®ƒ systemctl start kodi.service else ## å¦‚æœkodiå·²ç»å¯åŠ¨äº†ï¼Œé‚£ä¹ˆå°±åœæ­¢å®ƒ systemctl stop kodi.service fi æ³¨ï¼šåœæ­¢Kodiè¿™ä¸€è¡Œï¼Œç›¸æ¯”ä½¿ç”¨systemctl stop kodi.serviceï¼Œæ›´æ¨èä½¿ç”¨kodi-sendï¼Œè¯¦è§ï¼škodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜ã€‚\næ³¨æ„å¢åŠ å¯æ‰§è¡Œæƒé™ï¼šchmod +x /usr/local/bin/kodi-power.shã€‚\næ ¹æ® evsieve çš„è¯´æ˜ï¼Œåœ¨è¿è¡Œevsieveæ—¶ï¼Œå®ƒæ‰€è¦èƒæŒçš„è®¾å¤‡å¿…é¡»å·²ç»æ’å…¥äº†ï¼Œä½†æ˜¯æˆ‘åˆå¸Œæœ›evsieveèƒ½å¤Ÿå¼€æœºè‡ªåŠ¨è¿è¡Œï¼Œæ‰€ä»¥æˆ‘éœ€è¦åœ¨æ­£å¼è¿è¡Œå‰å…ˆç¡®ä¿2.4G Composite Devic System Controlè¿™ä¸ªè®¾å¤‡å·²ç»æ’å…¥ã€‚è¿™é¡¹å·¥ä½œå°±äº¤ç»™è„šæœ¬æ¥åˆ¤æ–­å§ï¼Œæ–°å»º/usr/local/bin/evsieve.shï¼Œå†…å®¹å¦‚ä¸‹ï¼ˆæ³¨æ„æŒ‰ç…§æ³¨é‡Šä¿®æ”¹target_hijack_input_deviceå’Œtarget_hijack_buttonï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #!/usr/bin/env bash export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin ## è¦èƒæŒçš„ç›®æ ‡è®¾å¤‡çš„ç»å¯¹è·¯å¾„ï¼Œè¯·æ³¨æ„ä¿®æ”¹æˆè‡ªå·±çš„ ## ä¸è¦ç›´æ¥å†™/dev/input/eventXï¼Œè€Œè¦å†™/dev/input/by-idä¸‹çš„è®¾å¤‡ target_hijack_input_device=\u0026#34;/dev/input/by-id/usb-0627_2.4G_Composite_Devic-System-Control\u0026#34; ## è¦èƒæŒçš„æŒ‰é”®çš„é”®åï¼Œè¯·æ³¨æ„ä¿®æ”¹æˆä½ è·å–åˆ°çš„ï¼Œä¸å‡ºæ„å¤–ï¼Œä¸€èˆ¬é¥æ§å™¨çš„ç”µæºé”®çš„é”®å€¼éƒ½æ˜¯power target_hijack_button=\u0026#34;power\u0026#34; ###### ä»¥ä¸‹æ— éœ€ä¿®æ”¹ ###### ## å…ˆæ£€æµ‹ target_hijack_input_device æ˜¯å¦å·²ç»å­˜åœ¨ while :; do if [[ -L \u0026#34;$target_hijack_input_device\u0026#34; ]]; then break else echo \u0026#34;The \u0026#39;$target_hijack_input_device\u0026#39; is not inserted, wait 2 seconds...\u0026#34; sleep 2 fi done ## æ‰§è¡Œç”µæºé”®èƒæŒï¼Œå½“æŒ‰ä¸‹æŒ‡å®šé”®æ—¶ï¼Œè½¬æ¢ä¸ºè¿è¡Œè„šæœ¬/usr/local/bin/kodi-power.shï¼Œè¯¦ç»†ç”¨æ³•è¯·è§ï¼šhttps://github.com/KarsMulder/evsieve exec evsieve \\ --input \u0026#34;$target_hijack_input_device\u0026#34; grab persist=reopen \\ --hook key:$target_hijack_button exec-shell=\u0026#34;/usr/local/bin/kodi-power.sh\u0026#34; \\ --block key:$target_hijack_button è¯¥è„šæœ¬åŒæ ·éœ€è¦å¯æ‰§è¡Œæƒé™ï¼šchmod +x /usr/local/bin/evsieve.shã€‚\næ³¨æ„ï¼šå¦‚æœåœ¨è¿›è¡Œ evtest æ—¶ï¼Œç”µæºé”®æ‰€åœ¨çš„è®¾å¤‡ç»„åœ¨ Event type 1 ä¸‹æ”¯æŒçš„ Event code ä¸ä»…ä»…åªæœ‰ KEY_POWER KEY_SLEEP KEY_WAKEUPè¿™ä¸‰ä¸ªï¼Œé‚£ä¹ˆä¸€èˆ¬æƒ…å†µä¸‹è¿™ä¸ªè®¾å¤‡ç»„è¿˜æœ‰å…¶ä»–æŒ‰é”®ï¼Œè¿™æ—¶ä¸èƒ½å®Œå…¨å±è”½æ‰æ•´ä¸ªè®¾å¤‡ï¼Œéœ€è¦å°†ä¸Šè¿°è„šæœ¬ä¸­æœ€åå››è¡Œæ”¹æˆä¸‹é¢è¿™æ ·ã€‚è¿™ç§æƒ…å†µä¸€èˆ¬å‡ºç°åœ¨è“ç‰™é¥æ§å™¨ä¸Šé¢ã€‚\n1 2 3 4 5 exec evsieve \\ --input \u0026#34;$target_hijack_input_device\u0026#34; grab persist=reopen \\ --hook key:$target_hijack_button exec-shell=\u0026#34;/usr/local/bin/kodi-power.sh\u0026#34; \\ --block key:$target_hijack_button \\ --output æ–°å»º/etc/systemd/system/evsieve.serviceï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 [Unit] Description = Run evsieve Requires = systemd-udevd.service After = systemd-udevd.service Wants = systemd-udevd.service [Service] User = root Group = root ExecStart = /usr/local/bin/evsieve.sh ExecStop = /usr/bin/killall --user root --exact --wait evsieve TimeoutStartSec = infinity Restart = on-abort [Install] WantedBy = multi-user.target è®©evsieve.serviceå¼€æœºå¯åŠ¨å¯åŠ¨ã€‚è¿™ä¸ªå¿…é¡»å¾—å¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼Œè¦ä¸ç„¶èƒæŒä¸äº†ã€‚è¿è¡Œå¹¶ç¡®ä¿evsieve.serviceå·²ç»è¿è¡Œå¥½åï¼ŒæŒ‰ä¸€ä¸‹é¥æ§å™¨çš„ç”µæºé”®æ¥è¯•ä¸€è¯•æ•ˆæœå§ã€‚\næ³¨æ„ï¼šå› ä¸ºKodiç¨‹åºæ¯”è¾ƒå¤§ï¼Œæ— è®ºæ˜¯å¯åŠ¨Kodiï¼Œè¿˜æ˜¯å…³é—­Kodiï¼Œç³»ç»Ÿéƒ½éœ€è¦ä¸€å®šæ—¶é—´æ¥å¤„ç†ï¼Œæ‰€ä»¥ä¸è¦è¿ç»­æŒ‰ç”µæºé”®ï¼Œè¿™æ ·åªä¼šè®©ç³»ç»Ÿæ··ä¹±ã€‚\næ³¨æ„ï¼šå¦‚æœevsieve.serviceæ²¡æœ‰æ­£å¸¸å¯åŠ¨ï¼Œå¯èƒ½æŒ‰ä¸‹ç”µæºé”®ä¼šè®©PVEå…³æœºã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ## è®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼Œå¹¶ç«‹å³è¿è¡Œèµ·æ¥ systemctl enable --now evsieve.service ## å†çœ‹çœ‹æ˜¯ä¸æ˜¯evsieve.serviceæ˜¯ä¸æ˜¯å¯åŠ¨å¥½äº† systemctl status evsieve.service ## å¦‚æœåƒè¿™æ ·å°±è¡¨ç¤ºå¯åŠ¨å¥½å•¦ evsieve.service - Run evsieve Loaded: loaded (/etc/systemd/system/evsieve.service; enabled; vendor preset: enabled) Active: active (running) since Thu 2022-11-24 18:11:27 CST; 36min ago Main PID: 1249 (evsieve) Tasks: 2 (limit: 72123) Memory: 1.8M CPU: 59ms CGroup: /system.slice/evsieve.service â””â”€1249 evsieve --input /dev/input/by-id/usb-0627_2.4G_Composite_Devic-System-Control grab persist=reopen --hook key:power exec-shell=/usr/local/bin/kodi-power.sh --block key:power 11æœˆ 24 18:11:27 pve systemd[1]: Started Run evsieve. æœ‰äº›é¥æ§å™¨çš„è¿”å›é”®ä¸æ˜¯çœŸæ­£çš„è¿”å›é”®ï¼Œè€Œæ˜¯é€€å‡ºé”®ï¼Œä¼šç›´æ¥é€€å‡ºåˆ°ä¸»èœå•ï¼Œè€Œä¸æ˜¯è¿”å›åˆ°ä¸Šä¸€å±‚ã€‚å¦‚æœä¸ä¹ æƒ¯è¿™æ ·çš„æ“ä½œæ–¹å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä»ç„¶å€ŸåŠ©evsieveè¿™ä¸ªå·¥å…·æ¥å®ç°æŒ‰é”®çš„è½¬æ¢ã€‚è¯¦è§ è½¬æ¢é¥æ§å™¨çš„é€€å‡ºé”®ä¸ºè¿”å›é”®ã€‚\næ€»ç»“ é€šè¿‡æœ¬æ•™ç¨‹ï¼ŒPVEç›´æ¥å®‰è£…Kodiä¹Ÿå˜å¾—å¾ˆå¥½ç”¨äº†ï¼Œå°±åƒä½¿ç”¨ç”µè§†ç›’å­/LibreELEC/CoreELECä¸€æ ·ï¼Œå®ç°é¥æ§å™¨å¯åŠ¨/åœæ­¢ã€‚\n","date":"2022-11-24T00:00:00+08:00","image":"https://evine.win/p/kodi-start-stop-by-remote-controller/kodi-poster_hu6a9a6c2102fadf339a8899f5319f0c51_430270_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/kodi-start-stop-by-remote-controller/","title":"åƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœ"},{"content":" å…³é”®è¯ï¼šPVE | Proxmox VE | RAID | RAID0 | LVM | LVM-thin | ç¼“å­˜ | cache | HDD | SSD\nå‰è¨€ æœ€è¿‘åœ¨æŸ¥é˜…èµ„æ–™å„ç§èµ„æ–™ï¼Œçœ‹çœ‹PVEå•æœåŠ¡å™¨ç³»ç»Ÿä¸­ï¼Œèƒ½ç”¨ä»€ä¹ˆæ ·çš„æ–¹å¼ï¼Œæå‡LVM-thinå­˜å‚¨çš„IOæ€§èƒ½ã€‚æœ‰å¤šæœåŠ¡å™¨æ¡ä»¶çš„å½“ç„¶æ˜¯ä¸ŠCEPHäº†ï¼Œæ²¡æœ‰å¤šæœåŠ¡å™¨çš„æ¡ä»¶è€Œå†…å­˜åˆæ¯”è¾ƒå……è¶³çš„æƒ…å†µä¸‹ä½¿ç”¨ZFSä¹Ÿä¸é”™ã€‚ä½†æˆ‘ä¸¤ç§æ¡ä»¶éƒ½ä¸å…·å¤‡ã€‚\nä½œä¸ºåƒåœ¾ä½¬ï¼Œæ€ä¹ˆèˆå¾—å†é¢å¤–è´­ç½®ç¡¬ä»¶å¤šèŠ±é’±å‘¢ã€‚åƒåœ¾ä½¬å½“ç„¶ä¸æ„¿æ„å†è´­ä¹°æ–°ç¡¬ç›˜äº†ï¼Œæå‡ºå¤šå¹´å‰ç»™å°å¼æœºè£…ç³»ç»Ÿçš„ä¸¤å—SATAæ¥å£çš„å›ºæ€ç¡¬ç›˜ï¼Œä»¥åŠä»¥å‰å°å¼æœºç”¨çš„ä¸¤å—æœºæ¢°ç¡¬ç›˜ï¼Œå‡†å¤‡å°†ä¸¤å—SSDç»„raid0åä½œä¸ºç¼“å­˜æ± ï¼Œä¸ºä¸¤å—HDDä»¥raid0ç»„ååˆ›å»ºçš„LVM-thinæä¾›è¯»å†™ç¼“å­˜æœåŠ¡ã€‚\nç¡¬ç›˜ç±»å‹ å‹å· ç¡¬ç›˜å¤§å° é€šç”µæ—¶é•¿ å‡ºå‚æ—¶é—´ SSD Samsung 840 EVO 120G 28744h 2014å¹´3æœˆ SSD Samsung 850 EVO 120G 22981h 2015å¹´5æœˆ HDD WD20EZRX 2T 55700h 2013å¹´2æœˆ HDD HGST HUA723020ALA640 2T 19267h 2013å¹´12æœˆ å’Œæˆ‘çš„ä½¿ç”¨åœºæ™¯ã€ç¡¬ä»¶æ¡ä»¶ä¸€æ¨¡ä¸€æ ·å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ï¼Œä¹Ÿå°±å‡ ä¹ä¸å¯èƒ½æœ‰äººèƒ½å¤Ÿå®Œå…¨ç…§æ¬æˆ‘çš„æ“ä½œè¿‡ç¨‹ï¼Œæ‰€ä»¥æœ¬æ–‡ä¹Ÿä»…æ˜¯æä¾›ä¸€ç§æ€è·¯ï¼ŒLVMä¾é å®ƒå·²ç»æä¾›çš„å„ç§åŠŸèƒ½ï¼Œå¯ä»¥å®ç°å„ç§ä½ æƒ³å¾—åˆ°æƒ³ä¸åˆ°çš„ç©æ³•ã€‚è¿™é‡Œä¸¾ä¸‰ä¸ªä¾‹å­ï¼š\n2å—2Tçš„HDDã€1å—3Tçš„HDDï¼Œ3å—HDDåˆ†åˆ«åˆ›å»ºä¸€ä¸ª2Tçš„åˆ†åŒºï¼Œå…±3ä¸ª2TiBçš„åˆ†åŒºç»„å»º6Tå¤§å°3ä¸ªPVçš„raid0çš„LVMæˆ–LVM-thinï¼›å†å°†3Tç›˜æ²¡æœ‰ç”¨åˆ°çš„1Tç©ºé—´å•ç‹¬å†åˆ›å»ºä¸ªdirå­˜å‚¨ï¼Œç”¨äºä¿å­˜å¤‡ä»½æ–‡ä»¶ã€é•œåƒæ–‡ä»¶ç­‰ã€‚\n1å—256Gçš„nvmeç£ç›˜ï¼Œå®‰è£…ç³»ç»Ÿå·²ç»å ç”¨äº†50Gï¼Œä½™ä¸‹çš„ç©ºé—´å¤§åˆä¸å¤§ï¼Œå°åˆä¸å°ï¼Œå•ç‹¬ç”¨å¥½åƒä¹Ÿå¹²ä¸äº†ä»€ä¹ˆå¤ªå¤šçš„äº‹ã€‚ç³»ç»Ÿå·²ç»é»˜è®¤åˆ›å»ºäº†local-lvmï¼Œä½†æ˜¯å¯ä»¥å°†local-lvmåˆ é™¤ï¼Œç„¶åå°†äº§ç”Ÿçš„çº¦200Gç©ºé—´ä½œä¸ºå…¶ä»–HDDç£ç›˜çš„ç¼“å­˜æ± ï¼Œæå‡IOæ€§èƒ½ã€‚\n4å—4Tçš„HDDç»„raid5åå†è½¬æ¢ä¸ºLVMï¼Œç„¶åä¸€å—256Gçš„nvmeç£ç›˜ä½œä¸ºå…¶ç¼“å­˜æ± ã€‚\næœ‰å…³æ¦‚å¿µ PV(physical volume)ï¼šç‰©ç†å·ï¼Œåœ¨é€»è¾‘å·ç®¡ç†ç³»ç»Ÿæœ€åº•å±‚ï¼Œå¯ä¸ºæ•´ä¸ªç‰©ç†ç¡¬ç›˜æˆ–å®é™…ç‰©ç†ç¡¬ç›˜ä¸Šçš„åˆ†åŒºã€‚\nVG(volume group)ï¼šå·ç»„ï¼Œå»ºç«‹åœ¨ç‰©ç†å·ä¸Šï¼Œä¸€å·ç»„ä¸­è‡³å°‘è¦åŒ…æ‹¬ä¸€ç‰©ç†å·ï¼Œå·ç»„å»ºç«‹åå¯åŠ¨æ€çš„æ·»åŠ å·åˆ°å·ç»„ä¸­ï¼Œä¸€ä¸ªé€»è¾‘å·ç®¡ç†ç³»ç»Ÿå·¥ç¨‹ä¸­å¯æœ‰å¤šä¸ªå·ç»„ã€‚\nLV(logical volume)ï¼šé€»è¾‘å·ï¼Œå»ºç«‹åœ¨å·ç»„åŸºç¡€ä¸Šï¼Œå·ç»„ä¸­æœªåˆ†é…ç©ºé—´å¯ç”¨äºå»ºç«‹æ–°çš„é€»è¾‘å·ï¼Œé€»è¾‘å·å»ºç«‹åå¯ä»¥åŠ¨æ€æ‰©å±•å’Œç¼©å°ç©ºé—´ã€‚\nPE(physical extent)ï¼šç‰©ç†åŒºåŸŸï¼Œæ˜¯ç‰©ç†å·ä¸­å¯ç”¨äºåˆ†é…çš„æœ€å°å­˜å‚¨å•å…ƒï¼ˆæœ¬æ–‡é‡‡ç”¨é»˜è®¤å€¼4MiBï¼‰ï¼Œç‰©ç†åŒºåŸŸå¤§å°åœ¨å»ºç«‹å·ç»„æ—¶æŒ‡å®šï¼Œä¸€æ—¦ç¡®å®šä¸èƒ½æ›´æ”¹ï¼ŒåŒä¸€å·ç»„æ‰€æœ‰ç‰©ç†å·çš„ç‰©ç†åŒºåŸŸå¤§å°éœ€ä¸€è‡´ï¼Œæ–°çš„PVåŠ å…¥åˆ°VGåï¼ŒPEçš„å¤§å°è‡ªåŠ¨æ›´æ”¹ä¸ºVGä¸­å®šä¹‰çš„PEå¤§å°ã€‚\nLE(logical extent)ï¼šé€»è¾‘åŒºåŸŸï¼Œæ˜¯é€»è¾‘å·ä¸­å¯ç”¨äºåˆ†é…çš„æœ€å°å­˜å‚¨å•å…ƒï¼Œé€»è¾‘åŒºåŸŸçš„å¤§å°å–å†³äºé€»è¾‘å·æ‰€åœ¨å·ç»„ä¸­çš„ç‰©ç†åŒºåŸŸçš„å¤§å°ã€‚\nç½‘ä¸Šæœ‰å¾ˆå¤šæœ‰å…³æ¦‚å¿µçš„è¯¦ç»†ä»‹ç»ï¼Œè¿™é‡Œä¸å†å¤šè¯´ã€‚\nåˆ›å»ºå…·æœ‰ç¼“å­˜æ± çš„LVM-thinå­˜å‚¨ è¿™é‡Œéœ€è¦å¤§è‡´å…ˆè¯´æ˜ä¸€ä¸‹æˆ‘çš„æ€è·¯ï¼Œæˆ‘æ‰“ç®—å°†HDDå…¨éƒ¨ç©ºé—´ç»„raid0ï¼Œç„¶åç”¨ä½œæ•°æ®LVï¼›å°†SSDå…¨éƒ¨ç©ºé—´ç»„raid0ï¼Œç„¶åç”¨ä½œå…ƒæ•°æ®LVå’Œç¼“å­˜æ± LVï¼Œæœ€ç»ˆçš„å­˜å‚¨ç±»å‹æ˜¯LVM-thinã€‚åˆ†åˆ«å¦‚ä¸‹ï¼š\næ•°æ®LVï¼šä¹Ÿå°±æ˜¯å­˜å‚¨LVM-thinåŸå§‹æ•°æ®çš„LVï¼Œæ‰€æœ‰æ•°æ®æœ€ç»ˆéœ€è¦å†™å…¥çš„åœ°æ–¹ï¼Œæˆ‘å°†åœ¨HDDä¸Šåˆ›å»ºå®ƒã€‚\nå…ƒæ•°æ®LVï¼šLVM-thinçš„ç‰¹è‰²ï¼Œç›¸æ¯”LVMç›´æ¥æŒ‰å·å¤§å°é¢„å…ˆåˆ†é…æ‰€éœ€ç©ºé—´ï¼ŒLVM-thinåˆ™æ˜¯éœ€è¦å‘å·å†…å†™å…¥æ•°æ®æ—¶æ‰æŒ‰å®é™…å†™å…¥æ•°æ®é‡å¤§å°åˆ†é…æ‰€éœ€ç©ºé—´ã€‚LVM-thinéœ€è¦ç”¨æ¥ç´¢å¼•å®é™…æ•°æ®çš„å…ƒæ•°æ®metadataç©ºé—´ï¼Œå°±æ˜¯å…ƒæ•°æ®LVã€‚ä¸ºäº†æå‡æ•°æ®ç´¢å¼•é€Ÿåº¦ï¼Œæˆ‘å°†åœ¨SSDä¸Šåˆ›å»ºå®ƒã€‚\nç¼“å­˜æ± LVï¼šä¸ºäº†æå‡è®¿é—®æ•°æ®LVä¸­æ•°æ®çš„IOé€Ÿåº¦ï¼Œä½¿ç”¨SSDä¸ºå®ƒåˆ›å»ºç¼“å­˜æ± ï¼Œè¿™æ ·å¯ä»¥å°†ç»å¸¸è¯»å–çš„æ•°æ®åŠ è½½åˆ°ç¼“å­˜æ± ä¸­ï¼Œåç»­å†è¯»å–è¿™äº›æ•°æ®ä¼šæå‡IOï¼›åŒæ—¶è¦å†™å…¥æ•°æ®æ—¶ä¹Ÿå…ˆå†™å…¥ç¼“å­˜æ± ï¼Œå†™å…¥ä¹Ÿå¯ä»¥æ›´å¿«ã€‚ç¼“å­˜æ± LVä¹Ÿåˆ†ä¸ºæ•°æ®LVå’Œå…ƒæ•°æ®LVä¸¤éƒ¨åˆ†ã€‚\nç¼“å­˜æ± æ•°æ®LVï¼šä¸´æ—¶å­˜å‚¨ç¼“å­˜æ•°æ®çš„åœ°æ–¹ï¼Œæˆ‘å°†åœ¨SSDä¸Šåˆ›å»ºå®ƒã€‚\nç¼“å­˜æ± å…ƒæ•°æ®LVï¼šç´¢å¼•ç¼“å­˜æ•°æ®çš„å…ƒæ•°æ®å­˜å‚¨çš„åœ°æ–¹ï¼Œæˆ‘ä¹Ÿå°†åœ¨SSDä¸Šåˆ›å»ºå®ƒã€‚\nè¿˜æœ‰é¢å¤–çš„å¤‡ç”¨æ± å…ƒæ•°æ®LVï¼Œåæ–‡é‡åˆ°æ—¶å†ä½œä»‹ç»ã€‚\nå¦‚æœç›´æ¥åœ¨PVEçš„WEBUIä¸­æ¥åˆ›å»ºï¼Œæ— æ³•å®ç°æˆ‘æ‰€è®¾æƒ³çš„æ€è·¯ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡å‘½ä»¤è¡Œæ¥åˆ›å»ºï¼Œç„¶åå†ç»è¿‡å¤šæ¬¡è½¬æ¢ï¼Œæ¥è½¬æ¢ä¸ºæˆ‘æ‰€éœ€è¦çš„LVM-thinã€‚\nå…ˆçœ‹çœ‹ç£ç›˜çš„è¯†åˆ«æƒ…å†µ 1 lsblk ä»è¾“å‡ºå¯è§ï¼Œ/dev/sdbå’Œ/dev/sdcæ˜¯ä¸¤å—HDDï¼Œ/dev/sddå’Œ/dev/sdeæ˜¯ä¸¤å—SSDï¼š\n1 2 3 4 5 6 7 8 9 10 sda 8:0 0 32G 0 disk â”œâ”€sda1 8:1 0 1007K 0 part â”œâ”€sda2 8:2 0 512M 0 part â””â”€sda3 8:3 0 31.5G 0 part â”œâ”€pve-swap 253:0 0 2G 0 lvm [SWAP] â””â”€pve-root 253:1 0 29.5G 0 lvm / sdb 8:16 0 1.8T 0 disk sdc 8:32 0 1.8T 0 disk sdd 8:48 0 111.8G 0 disk sde 8:64 0 111.8G 0 disk å¯¹ç£ç›˜åˆå§‹åŒ– ç»™2å—SSDã€2å—HDDç£ç›˜å…¨éƒ¨ä»¥GPTè¿›è¡Œåˆå§‹åŒ–ï¼Œæ¯ä¸ªç£ç›˜åªåˆ†ä¸€ä¸ªåŒºï¼Œä»¥ä¸‹ä»¥/dev/sdbä¸ºä¾‹ï¼ˆä¸åˆ†åŒºç›´æ¥åˆ›å»ºæ•´ç›˜PVä¹Ÿå¯ä»¥ï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 ## è¿›å…¥fdiskå‘½ä»¤è¡Œ fdisk /dev/sdb ## åˆ†åˆ«æŒ‰gã€nï¼Œsectoré‡‡ç”¨é»˜è®¤çš„å€¼ç›´æ¥å›è½¦ï¼Œæœ€å wq ä¿å­˜å¹¶é€€å‡º Command (m for help): g Created a new GPT disklabel (GUID: 798FC3B9-A99E-B245-9A2E-C02B9A2D0836). Command (m for help): n Partition number (1-128, default 1): First sector (2048-41943006, default 2048): Last sector, +/-sectors or +/-size{K,M,G,T,P} (2048-41943006, default 41943006): Created a new partition 1 of type \u0026#39;Linux filesystem\u0026#39; and of size 20 GiB. Command (m for help): wq The partition table has been altered. Calling ioctl() to re-read partition table. Syncing disks. å…¨éƒ¨åˆ†å¥½åŒºå†è¾“å…¥lsblkæ£€æŸ¥ä¸€ä¸‹ï¼š 1 lsblk è¾“å‡ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sda 8:0 0 32G 0 disk â”œâ”€sda1 8:1 0 1007K 0 part â”œâ”€sda2 8:2 0 512M 0 part â””â”€sda3 8:3 0 31.5G 0 part â”œâ”€pve-swap 253:0 0 2G 0 lvm [SWAP] â””â”€pve-root 253:1 0 29.5G 0 lvm / sdb 8:16 0 1.8T 0 disk â””â”€sdb1 8:17 0 1.8T 0 part sdc 8:32 0 1.8T 0 disk â””â”€sdc1 8:33 0 1.8T 0 part sdd 8:48 0 111.8G 0 disk â””â”€sdd1 8:49 0 111.8G 0 part sde 8:64 0 111.8G 0 disk â””â”€sde1 8:65 0 111.8G 0 part åˆ›å»ºPV 1 pvcreate /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1 è¾“å‡ºï¼š\n1 2 3 4 Physical volume \u0026#34;/dev/sdb1\u0026#34; successfully created. Physical volume \u0026#34;/dev/sdc1\u0026#34; successfully created. Physical volume \u0026#34;/dev/sdd1\u0026#34; successfully created. Physical volume \u0026#34;/dev/sde1\u0026#34; successfully created. åˆ›å»ºVG é‡‡ç”¨é»˜è®¤çš„4Må¤§å°çš„PEï¼Œåˆ›å»ºåå«hybridçš„VGï¼š\n1 vgcreate hybrid /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1 è¾“å‡ºï¼š\n1 Volume group \u0026#34;hybrid\u0026#34; successfully created åˆ›å»ºæ•°æ®LV ç»™ä¸¤å—HDDç»„raid0ï¼Œç”¨å®Œå®ƒä»¬çš„å…¨éƒ¨ç©ºé—´åˆ›å»ºåå«dataçš„æ•°æ®LVï¼š\n1 lvcreate --type raid0 --name data --extents 100%FREE --stripesize 256k hybrid /dev/sdb1 /dev/sdc1 è¾“å‡ºï¼š\n1 Logical volume \u0026#34;data\u0026#34; created. RAIDçš„Stripe Sizeå¤§å°å¯ä»¥è®¾ç½®ä¸º8KiBã€16KiBã€32KiBã€64KiBã€128KiBå’Œ256KiBï¼Œå¦‚ä¸è®¾ç½®æ­¤å‚æ•°åˆ™é»˜è®¤é‡‡ç”¨64KiBã€‚\nå¯¹äºæ•°æ®åº“åº”ç”¨ï¼ŒStripe Sizeåœ¨4-16KiBä¹‹é—´è¢«è¯æ˜æ•ˆæœæ¯”è¾ƒå¥½ï¼›å¯¹äºWebæœåŠ¡å™¨ä»¥åŠæ–‡ä»¶æ‰“å°æœåŠ¡å™¨ï¼Œå»ºè®®Stripe Sizeè®¾ç½®ä¸º16-64KiBï¼›å¯¹äºå¤§æ–‡ä»¶ç¯å¢ƒï¼Œæ¯”å¦‚æµåª’ä½“ï¼Œå»ºè®®Stripe Sizeè®¾ç½®ä¸º128KiBä»¥ä¸Šã€‚\næˆ‘çš„ä¸»è¦æ˜¯å¤§æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘è®¾ç½®Stripe Sizeä¸º256KiBã€‚å¹¶ä¸”æˆ‘çš„ä½¿ç”¨åœºæ™¯ä¸‹ï¼Œä¸»è¦ç›®çš„æ˜¯æå‡IOï¼Œåè€Œå¯¹æ•°æ®æŸåè¿™ä¸ªæƒ…å†µä¸å…³å¿ƒï¼Œåäº†å°±åäº†ï¼Œæ‰€ä»¥æˆ‘é‡‡ç”¨çš„æ˜¯raid0ï¼Œå’Œæˆ‘ä½¿ç”¨åœºæ™¯ä¸ä¸€è‡´çš„ä¸è¦é‡‡ç”¨raid0ä»¥åŠ256KiBçš„Stripe Sizeã€‚\nåˆ›å»ºå…ƒæ•°æ®LVå’Œç¼“å­˜æ± å…ƒæ•°æ®LV æˆ‘æœ€ç»ˆè¦åˆ›å»ºçš„å­˜å‚¨ç±»å‹æ˜¯LVM-thinï¼Œè¿™ç§è–„å­˜å‚¨ç±»å‹éœ€è¦å¦å¤–çš„ç©ºé—´å­˜å‚¨å…ƒæ•°æ®metadataï¼Œå¦‚æœç›´æ¥åœ¨HDDä¸Šåˆ›å»ºLVM-thinï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨HDDä¸Šåˆ›å»ºå…¶å¯¹åº”çš„å…ƒæ•°æ®LVã€‚ä½†æˆ‘ä»¬ç°åœ¨åˆ›å»ºçš„æ˜¯raid0ç±»å‹çš„LVMï¼Œé»˜è®¤ä¸å¸¦å…ƒæ•°æ®LVï¼Œå¹¶ä¸”å¦ä¸€æ–¹é¢ï¼Œæˆ‘å¸Œæœ›èƒ½åœ¨SSDä¸Šåˆ›å»ºå…ƒæ•°æ®æ‰€éœ€è¦çš„LVï¼Œè¿™æ ·è¿˜å¯ä»¥æå‡æ•°æ®ç´¢å¼•é€Ÿåº¦ï¼Œæ‰€ä»¥æˆ‘éœ€è¦æ‰‹åŠ¨åœ¨SSDä¸Šåˆ›å»ºæœ€ç»ˆçš„LVM-thinå­˜å‚¨æ‰€éœ€è¦çš„å…ƒæ•°æ®LVã€‚\nå¹¶ä¸”ï¼Œæˆ‘ä»¬åé¢å°†SSDä½œä¸ºç¼“å­˜æ± cachepoolæ—¶ï¼Œç¼“å­˜æ± å®ƒæœ¬èº«ä¹Ÿéœ€è¦å­˜å‚¨å…ƒæ•°æ®ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿéœ€è¦ä¸ºç¼“å­˜æ± åˆ›å»ºç¼“å­˜æ± å…ƒæ•°æ®LVã€‚\nå¦å¤–ï¼Œæˆ‘æœ‰ä¸¤å—SSDï¼Œæˆ‘å¸Œæœ›èƒ½æœ€å¤§åŒ–çš„æå‡IOï¼Œæ‰€ä»¥è¿™ä¸¤å—SSDä¹‹é—´ä¹Ÿéœ€è¦ç»„raid0ã€‚\né¦–å…ˆä¸ºæœ€ç»ˆè¦åˆ›å»ºçš„LVM-thinå­˜å‚¨åˆ›å»ºåå«meta_thinpoolçš„å…ƒæ•°æ®LVï¼Œåˆ›å»ºæ—¶å®ƒé»˜è®¤æ˜¯æ•°æ®LVå¤§å°çš„0.1%ï¼Œæˆ‘å–çº¦0.3%ï¼Œåˆ›å»º11.5GiBçš„å…ƒæ•°æ®LVï¼ˆä¸èƒ½è¶…è¿‡15.81GiBï¼‰ã€‚\nå­˜å‚¨å…ƒæ•°æ®çš„raid0ç»„Stripe Sizeæˆ‘å°±ä¿æŒé»˜è®¤çš„64KiBå§ï¼ˆä¸æ·»åŠ \u0026ndash;stripesizeå³ä½¿ç”¨é»˜è®¤å€¼ï¼‰ã€‚\n1 lvcreate --type raid0 --name meta_thinpool --size 11.5G hybrid /dev/sdd1 /dev/sde1 è¾“å‡º\n1 2 Using default stripesize 64.00 KiB. Logical volume \u0026#34;meta_thinpool\u0026#34; created. å†ä¸ºåé¢é©¬ä¸Šè¦åˆ›å»ºçš„çš„ç¼“å­˜æ± LVåˆ›å»ºåå«meta_cachepoolçš„ç¼“å­˜æ± å…ƒæ•°æ®LVï¼Œraid0ç»„ä¹Ÿä½¿ç”¨é»˜è®¤çš„Stripe Sizeï¼Œå¤§å°å°±å–528Mï¼ˆå¤§çº¦ä¹Ÿæ˜¯ç¼“å­˜æ± LVçš„0.3%ï¼‰å§ã€‚\n1 lvcreate --type raid0 --name meta_cachepool --size 528M hybrid /dev/sdd1 /dev/sde1 æœ‰å…³å…ƒæ•°æ®LVå¤§å°åº”è¯¥è®¾ç½®å¤šå¤§ï¼Œå¯ä»¥æŸ¥çœ‹å®˜æ–¹å»ºè®®ï¼šlvmthin.7.en#Size_of_pool_metadata_LV\nè¾“å‡º\n1 2 Using default stripesize 64.00 KiB. Logical volume \u0026#34;meta_cachepool\u0026#34; created. åˆ›å»ºç¼“å­˜æ± æ•°æ®LV åœ¨SSDä¸Šå·²ç»åˆ›å»ºå¥½äº†ä¸¤ä¸ªmetadataçš„LVï¼Œå äº†ä¸€ç‚¹ç©ºé—´ï¼Œä¸ºäº†æœ€å¤§åŒ–åˆ©ç”¨ç£ç›˜ç©ºé—´ï¼Œå…ˆæŠŠä¸¤å—SSDä½™ä¸‹çš„ç©ºé—´å…¨éƒ¨åˆ†é…ç»™ç¼“å­˜æ± æ•°æ®LVã€‚ä¸è¿‡å¦‚æœåç»­è¿›è¡Œlvconvertè½¬æ¢å­˜å‚¨ç±»å‹æ“ä½œæ—¶ï¼Œå¦‚æœªè®¾ç½®å…³é—­è‡ªåŠ¨åˆ›å»ºå¤‡ç”¨æ± å…ƒæ•°æ®LVï¼ˆå³å‘½ä»¤ä¸­æ·»åŠ --poolmetadataspare nï¼Œåœ¨PVEçš„WEBUIä¸­åˆ›å»ºLVM-thinï¼Œç³»ç»Ÿä¹Ÿä¼šé»˜è®¤åˆ›å»ºå¤‡ç”¨æ± å…ƒæ•°æ®LVï¼‰ï¼Œåœ¨è¿›è¡Œè½¬æ¢æ“ä½œæ—¶å°±éœ€è¦é¢å¤–çš„ç­‰åŒäºhybrid/meta_thinpoolå¤§å°ï¼ˆæˆ‘è¿™é‡Œå°±æ˜¯11.5GiBï¼‰çš„ç©ºé—´ã€‚æˆ‘æ‰“ç®—è®©å…¶è‡ªåŠ¨åˆ›å»ºå¤‡ç”¨æ± å…ƒæ•°æ®LVï¼Œæ‰€ä»¥æˆ‘éœ€è¦é¢„ç•™11.5GiBï¼ˆå³2944ä¸ªPEï¼‰ã€‚\nå¦‚æœå·²ç»åœ¨LVM-thinåˆ›å»ºäº†è™šæ‹Ÿç£ç›˜ï¼Œæ²¡æœ‰ä»»ä½•å‰©ä½™ç©ºé—´çš„è¯ï¼Œåç»­å†è°ƒæ•´å°±ä¸å¤ªå¥½è°ƒæ•´äº†ï¼Œæ‰€ä»¥å¦‚æœä¸å¤ªæ”¾å¿ƒçš„è¯ï¼Œä½ å¤šä¿ç•™ä¸€äº›ç©ºé—´ä¸å®Œå…¨åˆ›å»ºLVä¹Ÿæ˜¯å¯ä»¥çš„ã€‚\nä¸ºäº†æœ€å¤§åŒ–çš„æå‡IOæ€§èƒ½ï¼Œç¼“å­˜æ± ä¹Ÿé‡‡ç”¨raid0ã€‚åŒæ ·é‡‡ç”¨é»˜è®¤çš„Stripe Sizeã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 ## å…ˆæ£€æŸ¥ä¸€ä¸‹hybridè¿™ä¸ªVGè¿˜å‰©ä¸‹å¤šå°‘ä¸ªPE vgdisplay hybrid ## ä»è¾“å‡ºå¯ä»¥çœ‹å‡ºè¿˜å‰©ä¸‹54144ä¸ªPE --- Volume group --- VG Name hybrid System ID Format lvm2 Metadata Areas 4 Metadata Sequence No 4 VG Access read/write VG Status resizable MAX LV 0 Cur LV 3 Open LV 0 Max PV 0 Cur PV 4 Act PV 4 VG Size \u0026lt;3.86 TiB PE Size 4.00 MiB Total PE 1010894 Alloc PE / Size 956750 / \u0026lt;3.65 TiB Free PE / Size 54144 / 211.50 GiB VG UUID 13c6EC-n2E4-nQvh-hD5J-q8F1-Hl73-77pkji ## ä¸ºåé¢çš„è½¬æ¢é¢„ç•™2944ä¸ªPEå³11.5GiBç”¨ä½œå¤‡ç”¨æ± å…ƒæ•°æ®LVï¼Œå…¶ä»–çš„å…±51200ä¸ªPEåˆ›å»ºç¼“å­˜æ± æ•°æ®LV lvcreate --type raid0 --name cache --extents 51200 hybrid /dev/sdd1 /dev/sde1 ## è¾“å‡º Using default stripesize 64.00 KiB. Logical volume \u0026#34;cache\u0026#34; created. è½¬æ¢å­˜å‚¨ç±»å‹ è½¬æ¢hybrid/cacheè¿™ä¸ªLVçš„ç±»å‹ä¸ºç¼“å­˜æ± cache-poolï¼Œè®¾ç½®chunksizeä¸º256KiBï¼ŒæŒ‡å®šç¼“å­˜æ± å…ƒæ•°æ®LVä¸ºä¹‹å‰å·²ç»åœ¨SSDä¸Šä»¥raid0åˆ›å»ºçš„hybrid/meta_cachepoolï¼š 1 lvconvert --type cache-pool --poolmetadata hybrid/meta_cachepool --chunksize 256 hybrid/cache è¿™ä¸€æ­¥æ“ä½œä¸­chunksizeçš„å€¼åº”è¯¥å‚è€ƒä¸‹æ–¹è¯´æ˜ä¸­lvmcacheæœ‰å…³çš„è¯´æ˜è¿›è¡Œè®¾ç½®ã€‚è¾“å‡ºå¦‚ä¸‹ï¼Œè¿™æ ·ï¼Œç¼“å­˜æ± å…ƒæ•°æ®LVhybrid/meta_cachepoolå’Œç¼“å­˜æ± æ•°æ®LVhybrid/cacheå°±åˆå¹¶æˆæ–°çš„ç¼“å­˜æ± LVäº†ã€‚\n1 2 3 4 WARNING: Converting hybrid/cache and hybrid/meta_cachepool to cache pool\u0026#39;s data and metadata volumes with metadata wiping. THIS WILL DESTROY CONTENT OF LOGICAL VOLUME (filesystem etc.) Do you really want to convert hybrid/cache and hybrid/meta_cachepool? [y/n]: y Converted hybrid/cache and hybrid/meta_cachepool to cache pool. æœ‰å…³chunksizeçš„è¯´æ˜\nThe size of chunks in a snapshot, cache pool or thin pool. For snapshots, the value must be a power of 2 between 4KiB and 512KiB and the default value is 4. For a cache pool the value must be between 32KiB and 1GiB and the default value is 64. For a thin pool the value must be between 64KiB and 1GiB and the default value starts with 64 and scales up to fit the pool metadata size within 128MiB, if the pool metadata size is not specified. The value must be a multiple of 64KiB. See lvmthin(7) and lvmcache(7) for more information. æœºç¿»ï¼šå¿«ç…§ã€ç¼“å­˜æ± æˆ–ç²¾ç®€æ± ä¸­çš„å—å¤§å°ã€‚å¯¹äºå¿«ç…§ï¼Œè¯¥å€¼å¿…é¡»æ˜¯2çš„å¹‚ï¼Œä»‹äº4KBå’Œ512KBä¹‹é—´ï¼Œé»˜è®¤å€¼ä¸º4ã€‚å¯¹äºç¼“å­˜æ± ï¼Œè¯¥å€¼é¡»ä»‹äº32KiBå’Œ1GiBä¹‹é—´ï¼Œå¹¶ä¸”é»˜è®¤å€¼ä¸º64ã€‚å¯¹äºç²¾ç®€æ± ï¼Œè¯¥æ•°å€¼å¿…é¡»ä»‹äº64KiBå’Œ1GiBä¹‹é—´ï¼Œå¦‚æœæœªæŒ‡å®šæ± å…ƒæ•°æ®å¤§å°ï¼Œåˆ™é»˜è®¤å€¼ä»64å¼€å§‹ï¼Œå¹¶æŒ‰æ¯”ä¾‹æ”¾å¤§ä»¥é€‚åº”128MiBå†…çš„æ± å…ƒæ•°æ®å¤§å°ã€‚è¯¥å€¼å¿…é¡»æ˜¯64KiBçš„å€æ•°ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§lvmthinå’Œlvmcacheã€‚\nlvmthinï¼š\nWhen a thin pool is used primarily for the thin provisioning feature, a larger value is optimal. To optimize for many snapshots, a smaller value reduces copying time and consumes less space. æœºç¿»ï¼šå½“ç²¾ç®€æ± ä¸»è¦ç”¨äºç²¾ç®€èµ„æºè°ƒé…åŠŸèƒ½æ—¶ï¼Œæœ€å¥½ä½¿ç”¨è¾ƒå¤§çš„å€¼ã€‚è¦ä¼˜åŒ–å¤šä¸ªå¿«ç…§ï¼Œè¾ƒå°çš„å€¼å¯ä»¥å‡å°‘å¤åˆ¶æ—¶é—´å¹¶æ¶ˆè€—æ›´å°‘çš„ç©ºé—´ã€‚\nlvmcacheï¼š\nUsing a chunk size that is too large can result in wasteful use of the cache, in which small reads and writes cause large sections of an LV to be stored in the cache. It can also require increasing migration threshold which defaults to 2048 sectors (1 MiB). Lvm2 ensures migration threshold is at least 8 chunks in size. This may in some cases result in very high bandwidth load of transfering data between the cache LV and its cache origin LV. However, choosing a chunk size that is too small can result in more overhead trying to manage the numerous chunks that become mapped into the cache. Overhead can include both excessive CPU time searching for chunks, and excessive memory tracking chunks. æœºç¿»ï¼šä½¿ç”¨è¿‡å¤§çš„å—å¤§å°å¯èƒ½ä¼šå¯¼è‡´ç¼“å­˜çš„æµªè´¹ä½¿ç”¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾ƒå°çš„è¯»å–å’Œå†™å…¥ä¼šå¯¼è‡´LVçš„è¾ƒå¤§éƒ¨åˆ†å­˜å‚¨åœ¨ç¼“å­˜ä¸­ã€‚å®ƒè¿˜å¯èƒ½éœ€è¦å¢åŠ è¿ç§»é˜ˆå€¼ï¼Œé»˜è®¤ä¸º2048ä¸ªæ‰‡åŒºï¼ˆ1ä¸ªMiBï¼‰ã€‚Lvm2ç¡®ä¿è¿ç§»é˜ˆå€¼çš„å¤§å°è‡³å°‘ä¸º8ä¸ªå—ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½å¯¼è‡´åœ¨é«˜é€Ÿç¼“å­˜LVä¸å…¶é«˜é€Ÿç¼“å­˜æºLVä¹‹é—´ä¼ è¾“æ•°æ®çš„éå¸¸é«˜çš„å¸¦å®½è´Ÿè½½ã€‚ç„¶è€Œï¼Œé€‰æ‹©å¤ªå°çš„å—å¤§å°å¯èƒ½ä¼šå¯¼è‡´ç®¡ç†æ˜ å°„åˆ°ç¼“å­˜ä¸­çš„å¤§é‡å—çš„æ›´å¤šå¼€é”€ã€‚å¼€é”€å¯èƒ½åŒ…æ‹¬è¿‡å¤šçš„CPUæ—¶é—´æœç´¢å—ï¼Œä»¥åŠè¿‡å¤šçš„å†…å­˜è·Ÿè¸ªå—ã€‚\næŠŠä¹‹å‰åœ¨HDDä¸Šåˆ›å»ºçš„hybrid/dataè¿™ä¸ªLVçš„ç±»å‹è½¬æ¢ä¸ºå¸¦ç¼“å­˜æ± LVï¼ˆhybrid/cacheï¼‰çš„å­˜å‚¨ç±»å‹ï¼ŒæŒ‡å®šç¼“å­˜æ± ä¸ºåˆšåˆšåˆå¹¶åçš„ç¼“å­˜æ± LVhybrid/cacheï¼Œè®¾ç½®ç¼“å­˜æ¨¡å¼ä¸ºwritebackï¼š 1 lvconvert --type cache --cachepool hybrid/cache --cachemode writeback hybrid/data è¾“å‡ºå¦‚ä¸‹ï¼Œè¿™æ ·ï¼Œæ•°æ®LVhybrid/dataå°±å’Œç¼“å­˜æ± LVhybrid/cacheåˆå¹¶æˆæ–°çš„å¸¦ç¼“å­˜æ± çš„LVMå­˜å‚¨hybrid/dataäº†ï¼Œè¿™ä¸ªæ—¶å€™å®ƒè¿˜ä¸æ˜¯LVM-thinå­˜å‚¨ã€‚\n1 2 3 Do you want wipe existing metadata of cache pool hybrid/cache? [y/n]: y WARNING: Data redundancy could be lost with writeback caching of raid logical volume! Logical volume hybrid/data is now cached. ç¼“å­˜æ¨¡å¼å¯é€‰æ‹©å¦‚ä¸‹ï¼Œæˆ‘éƒ½raid0äº†ï¼Œå·²ç»æ— æ‰€ç•æƒ§äº†ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©writebackï¼Œæ•°æ®ä¸¢äº†å°±ä¸¢äº†å§ï¼š\nwriteback: writeback considers a write complete as soon as it is stored in the cache pool.\nwritethough: writethough considers a write complete only when it has been stored in both the cache pool and on the origin LV. While writethrough may be slower for writes, it is more resilient if something should happen to a device associated with the cache pool LV.\npassthrough: With passthrough, all reads are served from the origin LV (all reads miss the cache) and all writes are forwarded to the origin LV; additionally, write hits cause cache block invalidates. See lvmcache(7) for more information.\nå†æŠŠåˆšåˆšåˆå¹¶çš„å¸¦ç¼“å­˜æ± çš„LVMå­˜å‚¨hybrid/dataä¸ä¹‹å‰åˆ›å»ºçš„å…ƒæ•°æ®LVhybrid/meta_thinpoolåˆå¹¶è½¬æ¢ä¸ºæœ€ç»ˆéœ€è¦çš„LVM-thinå­˜å‚¨ï¼š 1 lvconvert --type thin-pool --poolmetadata hybrid/meta_thinpool hybrid/data æœ‰å…³chunksizeçš„å…·ä½“è¯´æ˜è§ä¸Šæ–¹ï¼Œè¿™ä¸€æ­¥æ“ä½œä¸­chunksizeçš„å€¼åº”è¯¥å‚è€ƒä¸Šæ–¹è¯´æ˜ä¸­lvmthinæœ‰å…³çš„è¯´æ˜è¿›è¡Œè®¾ç½®ã€‚å¦‚é‡‡ç”¨é»˜è®¤64KiBçš„chunksizeï¼Œæœ€å¤§å¯æ”¯æŒ15.81TiBçš„LVM-thinã€‚æˆ‘çš„è¾“å‡ºå¦‚ä¸‹ï¼š\n1 2 3 4 5 Thin pool volume with chunk size 64.00 KiB can address at most 15.81 TiB of data. WARNING: Converting hybrid/data and hybrid/meta_thinpool to thin pool\u0026#39;s data and metadata volumes with metadata wiping. THIS WILL DESTROY CONTENT OF LOGICAL VOLUME (filesystem etc.) Do you really want to convert hybrid/data and hybrid/meta_thinpool? [y/n]: y Converted hybrid/data and hybrid/meta_thinpool to thin pool. æ£€æŸ¥ æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹LVå’Œç‰©ç†ç£ç›˜çš„æƒ…å†µ\n1 lvs -a -o lv_full_name,parent,lv_size,modules,devices è¾“å‡ºå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 LV Parent LSize Modules Devices hybrid/cache_cpool 200.00g cache,raid cache_cpool_cdata(0) hybrid/cache_cpool_cdata [cache_cpool] 200.00g raid cache_cpool_cdata_rimage_0(0),cache_cpool_cdata_rimage_1(0) hybrid/cache_cpool_cdata_rimage_0 [cache_cpool_cdata] 100.00g /dev/sdd1(1538) hybrid/cache_cpool_cdata_rimage_1 [cache_cpool_cdata] 100.00g /dev/sde1(1538) hybrid/cache_cpool_cmeta [cache_cpool] 528.00m raid cache_cpool_cmeta_rimage_0(0),cache_cpool_cmeta_rimage_1(0) hybrid/cache_cpool_cmeta_rimage_0 [cache_cpool_cmeta] 264.00m /dev/sdd1(0) hybrid/cache_cpool_cmeta_rimage_1 [cache_cpool_cmeta] 264.00m /dev/sde1(0) hybrid/data \u0026lt;3.64t cache,raid,thin-pool data_tdata(0) hybrid/data_tdata data \u0026lt;3.64t cache,raid data_tdata_corig(0) hybrid/data_tdata_corig \u0026lt;3.64t raid data_tdata_corig_rimage_0(0),data_tdata_corig_rimage_1(0) hybrid/data_tdata_corig_rimage_0 [data_tdata_corig] \u0026lt;1.82t /dev/sdb1(0) hybrid/data_tdata_corig_rimage_1 [data_tdata_corig] \u0026lt;1.82t /dev/sdc1(0) hybrid/data_tmeta data 11.50g raid data_tmeta_rimage_0(0),data_tmeta_rimage_1(0) hybrid/data_tmeta_rimage_0 [data_tmeta] 5.75g /dev/sdd1(66) hybrid/data_tmeta_rimage_1 [data_tmeta] 5.75g /dev/sde1(66) hybrid/lvol0_pmspare 11.50g /dev/sdd1(27138) hybrid/lvol0_pmspare 11.50g /dev/sde1(27138) pve/root \u0026lt;29.50g /dev/sda3(512) pve/swap 2.00g /dev/sda3(0) ä»è¾“å‡ºä¸­çš„Layoutå’ŒDeviceså­—æ®µå¯ä»¥çœ‹å‡ºï¼Œhybrid/dataè¿™ä¸ªç»¼åˆäº†raid0ã€ç¼“å­˜æ± å’Œå…·æœ‰thinåŠŸèƒ½çš„LVM-thinï¼Œå†…éƒ¨çš„å„ä¸ªä¸‹çº§LVï¼š\nå®ƒçš„æ•°æ®LVdata_tdataå¤§å°æ˜¯3.64TiBï¼Œå…¶å®å°±æ˜¯ä¸¤å—HDDå¤§å°ä¹‹å’Œï¼ˆ2Tç›˜çš„å®é™…å¤§å°æ˜¯1.82TiBï¼‰ï¼Œå®ƒçš„åŸå§‹ï¼ˆorigï¼‰æ•°æ®LVæ˜¯data_tdata_corigï¼Œè€Œdata_tdata_corigæ˜¯ç”±ä¸¤å—HDDçš„/dev/sdb1å’Œ/dev/sdc1åˆ†åŒºç»„çš„raid0ï¼ˆdata_tdata_corig_rimage_0å’Œdata_tdata_corig_rimage_1ï¼‰ï¼›\nå®ƒæ‰€éœ€è¦çš„å…ƒæ•°æ®LVï¼ˆå³data_tmetaï¼‰å¤§å°æ˜¯11.5GiBï¼Œä¹Ÿæ˜¯raid0ç»„ï¼Œè¿™ä¸ªraid0ç»„ä½äºä¸¤å—SSDä¸Šï¼Œå³data_tmeta_rimage_0å’Œdata_tmeta_rimage_1ï¼›\nå®ƒæœ‰ä¸€ä¸ªç¼“å­˜æ± LVcache_cpoolï¼Œè€Œç¼“å­˜æ± LVcache_cpoolæœ¬èº«åˆåˆ†ä¸ºæ•°æ®å’Œå…ƒæ•°æ®ä¸¤éƒ¨åˆ†ï¼š\nç¼“å­˜æ± æ•°æ®LVæ˜¯cache_cpool_cdataï¼Œæ€»å¤§å°200GiBï¼Œæ˜¯ä½äºä¸¤å—SSDä¸Šçš„cache_cpool_cdata_rimage_0å’Œcache_cpool_cdata_rimage_1ç»„æˆçš„raid0ï¼›\nç¼“å­˜æ± å…ƒæ•°æ®LVæ˜¯cache_cpool_cmetaï¼Œæ€»å¤§å°528MiBï¼Œä¹Ÿæ˜¯ç”±ä½äºä¸¤å—SSDä¸Šçš„cache_cpool_cmeta_rimage_0å’Œcache_cpool_cmeta_rimage_1ç»„æˆçš„raid0ã€‚\nè½¬æ¢å­˜å‚¨ç±»å‹è¿˜ç”Ÿæˆäº†lvol0_pmspareï¼Œè¿™ä¸ªæ˜¯è‡ªåŠ¨åˆ›å»ºçš„å¤‡ç”¨æ± å…ƒæ•°æ®LVï¼Œå¤‡ç”¨æ± å…ƒæ•°æ®LVæ˜¯åœ¨ä¿®å¤æ± æ—¶å¯ä»¥ä½¿ç”¨çš„ä¿ç•™ç©ºé—´ã€‚å®ƒçš„å¤§å°ç­‰åŒäºæœ€å¤§çš„å…ƒæ•°æ®LVå¤§å°ï¼ˆæˆ‘åˆ›å»ºçš„ä¸¤ä¸ªå…ƒæ•°æ®LVä¸­è¾ƒå¤§çš„æ˜¯11.5GiBï¼‰ã€‚å¦‚æƒ³å…³é—­è‡ªåŠ¨åˆ›å»ºè¿™ç§ç±»å‹çš„LVï¼Œéœ€è¦åœ¨ä¸å…ƒæ•°æ®LVæœ‰å…³çš„ä¸¤æ¬¡è½¬æ¢å‘½ä»¤lvconvertä¸­æ·»åŠ --poolmetadataspare nã€‚å¦‚æœè®¾ç½®äº†ä¸è‡ªåŠ¨åˆ›å»ºï¼Œé‚£ä¹ˆå‰é¢çš„å­˜å‚¨ç±»å‹è½¬æ¢æ—¶ä¹Ÿå°±ä¸éœ€è¦æå‰é¢„ç•™ç©ºé—´ã€‚è™½ç„¶çœ‹èµ·æ¥æœ‰ä¸¤ä¸ªï¼ˆå› ä¸ºæˆ‘è¿›è¡Œäº†ä¸¤æ¬¡ä¸å…ƒæ•°æ®æœ‰å…³çš„è½¬æ¢lvconvertï¼‰ï¼Œä½†å®é™…ä¸Šæ˜¯åœ¨ä¸¤å—SSDä¸Šæ€»å…±å ç”¨11.5GiBï¼Œæ¯å—SSDå„5.75GiBã€‚ æ¯å—SSDä¸Šçš„LVæœ‰ï¼šç¼“å­˜æ± æ•°æ®LVï¼ˆcache_cpool_cdataï¼‰100GiBï¼Œç¼“å­˜æ± å…ƒæ•°æ®LVï¼ˆcache_cpool_cmetaï¼‰264MiBï¼Œå…ƒæ•°æ®LVï¼ˆdata_tmetaï¼‰5.75GiBï¼Œå¤‡ç”¨æ± å…ƒæ•°æ®LVï¼ˆlvol0_pmspareï¼‰5.75GiBã€‚ä»¥ä¸Šæ€»è®¡111.76GiBï¼Œè¿™å°±æ˜¯120Gçš„SSDçš„çœŸå®å¤§å°ã€‚\nè¿™æ ·ï¼Œå°†å…ƒæ•°æ®LVã€ç¼“å­˜æ± æ•°æ®LVã€ç¼“å­˜æ± å…ƒæ•°æ®LVå…¨éƒ¨æ”¾åœ¨SSDä¸Šä»¥æå‡IOæ€§èƒ½ï¼Œä¸¤å—HDDç»„æˆæ•°æ®LVä»¥ä¿å­˜åŸå§‹æ•°æ®ï¼Œé‚£ä¹ˆHDDå¤§å°ä¹‹å’Œ3.64TiBå°±æ˜¯è¿™ä¸ªLVM-thinå­˜å‚¨çš„æœ€ç»ˆå¤§å°ã€‚\nå†ä»¥å¦å¤–ä¸€ä¸ªè§’åº¦æ¥çœ‹ï¼š\n1 lsblk ä»è¾“å‡ºä¹Ÿå¯ä»¥çœ‹åˆ°HDDä¸Šåªæœ‰dataï¼Œä¸¤ä¸ªmetadataå’Œcacheå…¨éƒ¨ä½äºSSDï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sda 8:0 0 32G 0 disk â”œâ”€sda1 8:1 0 1007K 0 part â”œâ”€sda2 8:2 0 512M 0 part â””â”€sda3 8:3 0 31.5G 0 part â”œâ”€pve-swap 253:0 0 2G 0 lvm [SWAP] â””â”€pve-root 253:1 0 29.5G 0 lvm / sdb 8:16 0 1.8T 0 disk â””â”€sdb1 8:17 0 1.8T 0 part â””â”€hybrid-data_tdata_corig_rimage_0 253:11 0 1.8T 0 lvm â””â”€hybrid-data_tdata_corig 253:13 0 3.6T 0 lvm â””â”€hybrid-data_tdata 253:14 0 3.6T 0 lvm â””â”€hybrid-data 253:15 0 3.6T 0 lvm sdc 8:32 0 1.8T 0 disk â””â”€sdc1 8:33 0 1.8T 0 part â””â”€hybrid-data_tdata_corig_rimage_1 253:12 0 1.8T 0 lvm â””â”€hybrid-data_tdata_corig 253:13 0 3.6T 0 lvm â””â”€hybrid-data_tdata 253:14 0 3.6T 0 lvm â””â”€hybrid-data 253:15 0 3.6T 0 lvm sdd 8:48 0 111.8G 0 disk â””â”€sdd1 8:49 0 111.8G 0 part â”œâ”€hybrid-data_tmeta_rimage_0 253:2 0 5.8G 0 lvm â”‚ â””â”€hybrid-data_tmeta 253:4 0 11.5G 0 lvm â”‚ â””â”€hybrid-data 253:15 0 3.6T 0 lvm â”œâ”€hybrid-cache_cpool_cdata_rimage_0 253:5 0 100G 0 lvm â”‚ â””â”€hybrid-cache_cpool_cdata 253:7 0 200G 0 lvm â”‚ â””â”€hybrid-data_tdata 253:14 0 3.6T 0 lvm â”‚ â””â”€hybrid-data 253:15 0 3.6T 0 lvm â””â”€hybrid-cache_cpool_cmeta_rimage_0 253:8 0 264M 0 lvm â””â”€hybrid-cache_cpool_cmeta 253:10 0 528M 0 lvm â””â”€hybrid-data_tdata 253:14 0 3.6T 0 lvm â””â”€hybrid-data 253:15 0 3.6T 0 lvm sde 8:64 0 111.8G 0 disk â””â”€sde1 8:65 0 111.8G 0 part â”œâ”€hybrid-data_tmeta_rimage_1 253:3 0 5.8G 0 lvm â”‚ â””â”€hybrid-data_tmeta 253:4 0 11.5G 0 lvm â”‚ â””â”€hybrid-data 253:15 0 3.6T 0 lvm â”œâ”€hybrid-cache_cpool_cdata_rimage_1 253:6 0 100G 0 lvm â”‚ â””â”€hybrid-cache_cpool_cdata 253:7 0 200G 0 lvm â”‚ â””â”€hybrid-data_tdata 253:14 0 3.6T 0 lvm â”‚ â””â”€hybrid-data 253:15 0 3.6T 0 lvm â””â”€hybrid-cache_cpool_cmeta_rimage_1 253:9 0 264M 0 lvm â””â”€hybrid-cache_cpool_cmeta 253:10 0 528M 0 lvm â””â”€hybrid-data_tdata 253:14 0 3.6T 0 lvm â””â”€hybrid-data 253:15 0 3.6T 0 lvm æ·»åŠ å­˜å‚¨ æŠŠåˆ›å»ºå¥½çš„LVM-thinå­˜å‚¨æ·»åŠ åˆ°PVEï¼Œå°±å¤§åŠŸå‘Šæˆäº†ï¼š\né¡ºä¾¿å†çœ‹çœ‹ç£ç›˜ç©ºé—´æœ‰æ²¡æœ‰100%åˆ©ç”¨å®Œå…¨ï¼š\nå‚è€ƒèµ„æ–™ lvm, pvcreate, vgcreate, lvcreate, lvconvert, lvreduce, lvremove, lvs, lvmraid, lvmthin, lvmcache\nåœ¨ä¸Šè¿°å‚è€ƒèµ„æ–™é“¾æ¥ä¸‹æ–¹å¯ä»¥çœ‹è§å…¨éƒ¨å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç›´æ¥åœ¨PVEå‘½ä»¤è¡Œä¸­è¾“å…¥man \u0026lt;cmd\u0026gt;æ¥æŸ¥é˜…ä¸Šè¿°æ–‡æ¡£ã€‚\n","date":"2022-09-01T00:00:00+08:00","image":"https://evine.win/p/pve-create-lvm-thin-with-cachepool/pic3_hua4ffbedaca548353bb2e9ae9cbb3a1ca_32006_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/pve-create-lvm-thin-with-cachepool/","title":"PVEåŸºäºraid0åˆ›å»ºLVM-thinå¹¶æ·»åŠ å›ºæ€ç£ç›˜ä½œä¸ºç¼“å­˜æ± "},{"content":" æœ¬æ–‡ä¸ºã€ŠPVEå®‰è£…Kodiã€‹ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚\nPVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodi ä¸ºKodié€‚é…é¥æ§å™¨ ä¿®æ”¹Kodiå­—å¹•å­—ä½“ ä¿®æ”¹Kodiçš®è‚¤å­—ä½“ å±è”½Kodiçš„å…³æœºã€é‡å¯æŒ‰é’® è®¾ç½®Kodiå¯åŠ¨çš„å‰ç½®æ¡ä»¶ åƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœ kodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜ è½¬æ¢é¥æ§å™¨çš„é€€å‡ºé”®ä¸ºè¿”å›é”® å¦‚æœåœ¨PVEç³»ç»Ÿä¸­å®‰è£…Kodiï¼Œå¹¶ä¸”æ˜¯ä»¥rootç”¨æˆ·å¯åŠ¨Kodiï¼ˆå¦‚æœæ˜¯érootç”¨æˆ·ï¼Œé‚£ä¹ˆå¯ä»¥æ— è§†æœ¬ç¯‡æ–‡ç« ï¼‰ï¼Œé‚£ä¹ˆKodiå…·æœ‰å¾ˆé«˜çš„æƒé™ï¼Œå¯ä»¥å…³æœºã€é‡å¯ä¸»æœºç­‰ç­‰ï¼Œè¿™å°±éœ€è¦é˜²æ­¢ä¸å°å¿ƒç”¨é¥æ§å™¨æˆ–è€…é”®ç›˜æŠŠPVEç³»ç»Ÿç»™å…³é—­äº†ã€‚ä¿®æ”¹ä¹‹å¤„ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š\n1. å±è”½é”®ç›˜çš„sé”®ã€å±è”½é¥æ§å™¨çš„ç”µæºé”® æ³¨æ„ï¼Œä¸‹é¢çš„æ–¹æ³•åªæ˜¯å±è”½æ‰é”®ç›˜çš„sé”®ï¼ˆå¯ä»¥å‘¼å‡ºå…³æœºèœå•ï¼‰ï¼Œä»¥åŠé¥æ§å™¨çš„ç”µæºé”®çš„åŠŸèƒ½ï¼Œä½†å®é™…ä¸ŠKodiè¿˜æœ‰å…·æœ‰å…³é—­ä¸»æœºçš„æƒé™çš„ï¼Œé€šè¿‡Yatseã€Koreç­‰æ‰‹æœºè½¯ä»¶ç›´æ¥å‘¼å‡ºå…³æœºèœå•ä»ç„¶å¯ä»¥å®ç°å…³æœºæˆ–é‡å¯ã€‚\næ³¨æ„ï¼Œä¸‹é¢çš„æ–¹æ³•åªæ˜¯å±è”½æ‰é”®ç›˜çš„sé”®ï¼ˆå¯ä»¥å‘¼å‡ºå…³æœºèœå•ï¼‰ï¼Œä»¥åŠé¥æ§å™¨çš„ç”µæºé”®çš„åŠŸèƒ½ï¼Œä½†å®é™…ä¸ŠKodiè¿˜æœ‰å…·æœ‰å…³é—­ä¸»æœºçš„æƒé™çš„ï¼Œé€šè¿‡Yatseã€Koreç­‰æ‰‹æœºè½¯ä»¶ç›´æ¥å‘¼å‡ºå…³æœºèœå•ä»ç„¶å¯ä»¥å®ç°å…³æœºæˆ–é‡å¯ã€‚\næ³¨æ„ï¼Œä¸‹é¢çš„æ–¹æ³•åªæ˜¯å±è”½æ‰é”®ç›˜çš„sé”®ï¼ˆå¯ä»¥å‘¼å‡ºå…³æœºèœå•ï¼‰ï¼Œä»¥åŠé¥æ§å™¨çš„ç”µæºé”®çš„åŠŸèƒ½ï¼Œä½†å®é™…ä¸ŠKodiè¿˜æœ‰å…·æœ‰å…³é—­ä¸»æœºçš„æƒé™çš„ï¼Œé€šè¿‡Yatseã€Koreç­‰æ‰‹æœºè½¯ä»¶ç›´æ¥å‘¼å‡ºå…³æœºèœå•ä»ç„¶å¯ä»¥å®ç°å…³æœºæˆ–é‡å¯ã€‚\nkeymapsçš„WIKIè§ï¼šhttps://kodi.wiki/view/Keymap ï¼Œkeymapsé»˜è®¤æ–‡ä»¶ä½äºï¼š/usr/share/kodi/system/keymapsï¼Œè¿™é‡Œçš„æ–‡ä»¶å¯ä»¥è¢«ä½ è‡ªå·±çš„é…ç½®è¦†ç›–æ‰å¯¹åº”æŒ‰é”®çš„ä½œç”¨ã€‚æ–°å»º~/.kodi/userdata/keymaps/disable_keyboard_shutdown.xmlå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 \u0026lt;keymap\u0026gt; \u0026lt;global\u0026gt; \u0026lt;keyboard\u0026gt; \u0026lt;s\u0026gt;\u0026lt;/s\u0026gt; \u0026lt;power\u0026gt;\u0026lt;/power\u0026gt; \u0026lt;sleep\u0026gt;\u0026lt;/sleep\u0026gt; \u0026lt;/keyboard\u0026gt; \u0026lt;/global\u0026gt; \u0026lt;LoginScreen\u0026gt; \u0026lt;keyboard\u0026gt; \u0026lt;end mod=\u0026#34;ctrl\u0026#34;\u0026gt;\u0026lt;/end\u0026gt; \u0026lt;/keyboard\u0026gt; \u0026lt;/LoginScreen\u0026gt; \u0026lt;Home\u0026gt; \u0026lt;keyboard\u0026gt; \u0026lt;end mod=\u0026#34;ctrl\u0026#34;\u0026gt;\u0026lt;/end\u0026gt; \u0026lt;backspace mod=\u0026#34;longpress\u0026#34;\u0026gt;\u0026lt;/backspace\u0026gt; \u0026lt;/keyboard\u0026gt; \u0026lt;/Home\u0026gt; \u0026lt;/keymap\u0026gt; 2. åœ¨Kodiç•Œé¢ä¸­éšè—å…³æœºã€é‡å¯ç­‰æŒ‰é’® æœ€åï¼Œä¸ºäº†ä¿è¯åœ¨Kodiç•Œé¢ä¸­ä¹Ÿåªèƒ½çœ‹è§é€€å‡ºï¼Œå¹¶ä¸”çœ‹ä¸åˆ°å…³æœºã€é‡å¯ç­‰æŒ‰é’®ï¼ˆæ³¨æ„ï¼šè¿™åªæ˜¯åœ¨ç•Œé¢ä¸­éšè—æ‰è€Œå·²ï¼ŒKodiæœ¬èº«è¿˜æ˜¯æœ‰å…³æœºã€é‡å¯çš„æƒé™çš„ï¼‰ï¼Œå¯ä»¥åœ¨çš®è‚¤è®¾ç½®ä¸­å°†ç›¸å…³æŒ‰é’®éšè—æ‰ï¼Œæ¯”å¦‚ä½¿ç”¨çš„Aeon Nox: SiLVOçš®è‚¤çš„è¯ï¼Œå¯ä»¥åœ¨è¿›å…¥ç³»ç»Ÿè®¾ç½® -\u0026gt; çš®è‚¤è®¾ç½® -\u0026gt; ä¸»èœå•è®¾ç½®åè¿™æ ·æ“ä½œï¼š\nåœ¨ä¸Šå›¾ä¸­çš„â€œç®¡ç†å­èœå•â€æŒ‰é’®ä¸‹ï¼Œä»¥åŠåœ¨ä¸»èœå•â€œç³»ç»Ÿâ€çš„â€œç®¡ç†å­èœå•â€ä¸‹ï¼Œä¹Ÿè¦å°†â€œå…³é—­ç³»ç»Ÿç”µæºâ€â€œé‡å¯â€â€œå¾…æœºâ€â€œä¼‘çœ â€â€œæ³¨é”€â€ç»™ç¦ç”¨äº†ï¼Œè¿™é‡Œæœ¬æ–‡å°±ä¸æˆªå›¾äº†ã€‚\næœ€åçš„æ•ˆæœï¼Œä¸»èœå•ä¸­ä¹Ÿåªæœ‰é€€å‡ºæŒ‰é’®äº†ã€‚\n","date":"2022-07-23T00:00:00+08:00","image":"https://evine.win/p/kodi-disable-shutdown/pic5_hua2d2cf3653e3bfece8e4b3ac085b5f51_190480_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/kodi-disable-shutdown/","title":"å±è”½Kodiçš„å…³æœºã€é‡å¯æŒ‰é’®"},{"content":" æœ¬æ–‡ä¸ºã€ŠPVEå®‰è£…Kodiã€‹ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚\nPVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodi ä¸ºKodié€‚é…é¥æ§å™¨ ä¿®æ”¹Kodiå­—å¹•å­—ä½“ ä¿®æ”¹Kodiçš®è‚¤å­—ä½“ å±è”½Kodiçš„å…³æœºã€é‡å¯æŒ‰é’® è®¾ç½®Kodiå¯åŠ¨çš„å‰ç½®æ¡ä»¶ åƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœ kodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜ è½¬æ¢é¥æ§å™¨çš„é€€å‡ºé”®ä¸ºè¿”å›é”® æ“ä½œæµç¨‹ å°†ttfå­—ä½“æ–‡ä»¶æ”¾åœ¨ä¸‹é¢åˆ—å‡ºçš„å¯¹åº”çš„çš®è‚¤ç›®å½•ä¸‹çš„fontså­æ–‡ä»¶å¤¹ä¸­ï¼š\n~/.kodi/addons/skin.XXXXï¼ˆç”¨æˆ·è‡ªå·±å®‰è£…çš„çš®è‚¤ï¼‰ /usr/share/kodi/addons/skin.XXXXï¼ˆç³»ç»Ÿè‡ªå¸¦çš„çš®è‚¤ï¼‰ å¹¶åœ¨çš®è‚¤çš„é…ç½®å­ç›®å½•ï¼ˆä¸åŒçš®è‚¤çš„é…ç½®å­ç›®å½•ä¸ä¸€æ ·ï¼Œæ¯”å¦‚skin.estuaryåœ¨xmlå­ç›®å½•ä¸‹ï¼Œskin.aeon.nox.silvoåœ¨16x9æˆ–å…¶ä»–æ¯”ä¾‹çš„ç›®å½•ä¸‹ï¼‰ä¸­æ‰¾åˆ°Font.xmlï¼Œå¤åˆ¶ä¸€ç»„å®Œæ•´çš„fontsetï¼ˆä»\u0026lt;fontset\u0026gt;åˆ°\u0026lt;/fontset\u0026gt;ï¼‰ï¼Œç„¶åå°†æ–°å¢åŠ çš„è¿™ç»„fontsetçš„å­—ä½“æ–‡ä»¶åæ”¹æˆä½ æ”¾è¿›å»çš„å­—ä½“æ–‡ä»¶åï¼Œå¹¶ä¿å­˜å³å¯ï¼ˆè‡ªè¡Œåšå¥½åŸå§‹æ–‡ä»¶å¤‡ä»½ï¼‰ã€‚\n1 2 3 4 5 6 7 8 9 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;fonts\u0026gt; \u0026lt;fontset id=\u0026#34;Default\u0026#34; idloc=\u0026#34;31390\u0026#34;\u0026gt; ...åŸæœ‰çš„fontsetï¼Œåº”è¯¥æœ‰å¤šç»„... \u0026lt;/fontset\u0026gt; \u0026lt;fontset id=\u0026#34;FZZYJT\u0026#34;\u0026gt; ...æ–°å¢åŠ çš„fontset... \u0026lt;/fontset\u0026gt; \u0026lt;/fonts\u0026gt; ç¼–è¾‘ä¿å­˜å¥½åé‡å¯Kodiå³å¯åœ¨çš®è‚¤è®¾ç½®ä¸­é€‰æ‹©æ–°å¢åŠ çš„å­—ä½“ã€‚ æ³¨ï¼šæ¯æ¬¡æ›´æ–°Kodiåéœ€è¦å†æ¬¡è®¾ç½®ã€‚\n","date":"2022-07-23T00:00:00+08:00","image":"https://evine.win/p/kodi-change-interface-font/kodi-poster_hu6a9a6c2102fadf339a8899f5319f0c51_430270_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/kodi-change-interface-font/","title":"ä¿®æ”¹Kodiçš®è‚¤å­—ä½“"},{"content":" æœ¬æ–‡ä¸ºã€ŠPVEå®‰è£…Kodiã€‹ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚\nPVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodi ä¸ºKodié€‚é…é¥æ§å™¨ ä¿®æ”¹Kodiå­—å¹•å­—ä½“ ä¿®æ”¹Kodiçš®è‚¤å­—ä½“ å±è”½Kodiçš„å…³æœºã€é‡å¯æŒ‰é’® è®¾ç½®Kodiå¯åŠ¨çš„å‰ç½®æ¡ä»¶ åƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœ kodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜ è½¬æ¢é¥æ§å™¨çš„é€€å‡ºé”®ä¸ºè¿”å›é”® å¦‚éœ€è¦ä¿®æ”¹å­—å¹•å­—ä½“ï¼Œå°†ä½ çš„ttfå­—ä½“æ–‡ä»¶æ”¾åœ¨~/.kodi/media/Fontsä¹‹ä¸‹ï¼ˆå¦‚æœæ˜¯érootç”¨æˆ·ï¼Œæ³¨æ„ä¿®æ”¹å­—ä½“æ–‡ä»¶æ‰€æœ‰è€…ï¼‰ï¼Œç„¶ååœ¨Kodiè®¾ç½®ä¸­ æ’­æ”¾å™¨ -\u0026gt; è¯­è¨€ -\u0026gt; æ–‡æœ¬å­—å¹•å­—ä½“ ä¸­é€‰æ‹©å³å¯ï¼Œæ³¨æ„è¯¥å­—ä½“ä»…å¯¹æ–‡æœ¬ç±»å­—å¹•æœ‰æ•ˆï¼Œå³ass/ssa/srtåç¼€ï¼Œå…¶ä»–å­—å¹•æ ¼å¼æ˜¯æ— æ•ˆçš„ã€‚\n","date":"2022-07-18T00:00:00+08:00","image":"https://evine.win/p/kodi-change-subtitle-font/kodi-poster_hu6a9a6c2102fadf339a8899f5319f0c51_430270_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/kodi-change-subtitle-font/","title":"ä¿®æ”¹Kodiå­—å¹•å­—ä½“"},{"content":" æœ¬æ–‡ä¸ºã€ŠPVEå®‰è£…Kodiã€‹ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚\nPVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodi ä¸ºKodié€‚é…é¥æ§å™¨ ä¿®æ”¹Kodiå­—å¹•å­—ä½“ ä¿®æ”¹Kodiçš®è‚¤å­—ä½“ å±è”½Kodiçš„å…³æœºã€é‡å¯æŒ‰é’® è®¾ç½®Kodiå¯åŠ¨çš„å‰ç½®æ¡ä»¶ åƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœ kodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜ è½¬æ¢é¥æ§å™¨çš„é€€å‡ºé”®ä¸ºè¿”å›é”® å‰è¨€ è™½ç„¶å®‰è£…å¥½Kodiåï¼Œå¯ä»¥åœ¨æ‰‹æœºä¸Šä½¿ç”¨Yatseã€Koreç­‰è½¯ä»¶æ¥é¥æ§Kodiï¼ˆå½“ç„¶è¿™éœ€è¦åœ¨Kodiè®¾ç½®ä¸­å¯ç”¨â€œå…è®¸é€šè¿‡ HTTP è¿œç¨‹æ§åˆ¶â€ï¼‰ï¼Œä½†å®¶äººã€æœ‹å‹æ€ä¹ˆåŠï¼Œéš¾é“ä¸ºæ¯ä¸ªäººéƒ½è£…ä¸€ä¸‹ï¼Ÿæ‰€ä»¥è¿˜æ˜¯éœ€è¦æœ‰ä¸€ä¸ªå®ä½“é¥æ§å™¨æ¥æ§åˆ¶Kodiã€‚\næ³¨æ„äº‹é¡¹ å¦‚æœæ²¡æœ‰æ‰“å¼€Kodiï¼Œé¥æ§å™¨çš„ç”µæºé”®æŒ‰ä¸‹ä¼šå…³é—­PVEç³»ç»Ÿï¼Œæ¨èé€‚é…é¥æ§å™¨ä¹‹åæŒ‰ç…§ã€Šåƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœã€‹ä¸€æ–‡è¿›è¡ŒæŒ‰é”®åŠ«æŒï¼Œå¹¶å¯ä»¥å®ç°é¥æ§å™¨æ¥å¯åŠ¨/å…³é—­Kodiã€‚\né€‚é…é¥æ§å™¨ å½“ç„¶ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼ˆå¦å¤–è¿˜æœ‰çº¢å¤–é¥æ§å™¨ï¼Œè¿™ä¸ªä¸å¥½ç”¨ï¼Œå°±ä¸å†™äº†ï¼‰ï¼Œä¸€æ˜¯2.4Gæ— çº¿é¥æ§å™¨ï¼Œä¸€æ˜¯è“ç‰™é¥æ§å™¨ï¼Œç»è¿‡æœ¬äººè¸©å‘ï¼Œæˆ‘æ›´æ¨è2.4Gæ— çº¿é¥æ§å™¨ï¼ˆ2023å¹´8æœˆè¡¥å……è¯´æ˜ï¼šLinuxå†…æ ¸æ”¯æŒå…³é—­USBè®¾å¤‡è¿›å…¥suspendçŠ¶æ€çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥å®ç°è“ç‰™é¥æ§å™¨æ°¸ä¸æ–­è¿ï¼‰ã€‚æ€»å¾—è¯´æ¥ï¼ŒäºŒè€…éƒ½å¯ä»¥éå¸¸èˆ’æœåœ°ä½¿ç”¨ï¼Œå¯¹æ¯”å¦‚ä¸‹ï¼š\nè“ç‰™é¥æ§å™¨å³ä½¿è®¾ç½®å¥½äº†æ°¸è¿œä¿æŒè¿æ¥ï¼Œä½†æ¯•ç«Ÿéœ€è¦è“ç‰™é€‚é…å™¨å’Œè“ç‰™é¥æ§å™¨ä¸¤ä¸ªé…åˆï¼Œäº‹å®ä¸Šåœ¨æˆ‘çš„ç¯å¢ƒä¸­5åˆ†é’Ÿå·¦å³é¥æ§å™¨æ²¡æœ‰åŠ¨ä½œäºŒè€…å°±å¤±è”äº†ï¼Œæ€»æ˜¯éœ€è¦å¤šæŒ‰å‡ æ¬¡é¥æ§å™¨æ‰ä¼šæœ‰ååº”ã€‚2.4Gæ— çº¿é¥æ§å™¨è‡ªå¸¦æ¥æ”¶å™¨ï¼Œä¸å­˜åœ¨æ–­è¿é—®é¢˜ã€‚\n2.4Gæ— çº¿é£é¼ é¥æ§å™¨ç‚¹å‡ºé¼ æ ‡ã€‚\n2.4Gé£é¼ é¥æ§å™¨æˆæœ¬25å—å·¦å³ï¼Œè€Œè“ç‰™é€‚é…å™¨åŠ è“ç‰™é¥æ§å™¨åŠ èµ·æ¥è¦50å—å·¦å³ï¼Œå‰è€…æ›´åˆ’ç®—ä¸€ç‚¹ã€‚\nè“ç‰™å¯ä»¥è¿æ¥å¤šä¸ªè®¾å¤‡ï¼Œè€Œ2.4Gæ— çº¿é¥æ§å™¨å’Œæ¥æ”¶å™¨å°±åªèƒ½ä¸€å¯¹ä¸€ã€‚\nè“ç‰™è®¾å¤‡å¯ä»¥è®¾ç½®æ°¸ä¸æ–­è¿ï¼Œä½†ä¼¼ä¹ä¸èƒ½åŠ«æŒç”µæºé”®ï¼Œ2.4Gæ— çº¿é¥æ§å™¨å¯ä»¥æ­£å¸¸åŠ«æŒã€‚\næ— çº¿é¥æ§å™¨ è°ˆä¸ä¸Šé€‚é…ï¼Œå¦‚æœæ˜¯ç›´æ¥åœ¨PVEä¸­å®‰è£…Kodiï¼Œæ’ä¸ŠUSBæ¥æ”¶å™¨å°±èƒ½ç”¨äº†ã€‚å¦‚æœæ˜¯ç›´é€šæ˜¾å¡å’Œå£°å¡ç»™ LibreELEC/CoreELEC è™šæ‹Ÿæœºçš„è¯ï¼Œå°±è®¾ç½®ä¸‹USBæ¥å£ç›´é€šã€‚å…¶ä»–æ–¹å¼å®‰è£…çš„Kodi/LibreELEC/CoreELECï¼Œåªè¦è¯¥ç³»ç»Ÿèƒ½è®¿é—®USBæ¥å£ï¼Œå°±å¯ä»¥ç”¨è¿™ç§æ–¹å¼ã€‚\nè´­ä¹°å…³é”®è¯ï¼šé¥æ§å™¨ 2.4G é£é¼  ç©ºä¸­é¼ æ ‡ ç©ºä¸­é”®é¼  Air Mouse é”®é¼ ï¼Œæ³¨æ„è¦è‡ªå¸¦æ¥æ”¶å™¨çš„ã€‚\nè“ç‰™é¥æ§å™¨ æ³¨ï¼šæˆ‘è´­ä¹°çš„æ˜¯èƒœä¸ºè“ç‰™é€‚é…å™¨5.0å’Œå°ç±³è“ç‰™è¯­éŸ³é¥æ§å™¨è¿™ä¸¤æ ·ä¸œè¥¿ã€‚ä½†æˆ‘ç°åœ¨ä¸æ¨èç”¨è¿™ç§æ–¹å¼ï¼Œé™¤éä½ éœ€è¦è¿æ¥å¤šä¸ªè“ç‰™è®¾å¤‡æ‰è€ƒè™‘ã€‚ï¼ˆ2023å¹´8æœˆè¡¥å……è¯´æ˜ï¼šLinuxå†…æ ¸æ”¯æŒå…³é—­USBè®¾å¤‡è¿›å…¥suspendçŠ¶æ€çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥å®ç°è“ç‰™é¥æ§å™¨æ°¸ä¸æ–­è¿ã€‚ï¼‰\nä»¥ä¸‹ä¸ºè“ç‰™é¥æ§å™¨é€‚é…æµç¨‹ï¼š\nä»¥ä¸‹ç›¸å…³å‘½ä»¤å‡ä¸ºrootç”¨æˆ·æ‰§è¡Œçš„ã€‚ å¦‚æœéœ€è¦æ–°å»ºæ–‡ä»¶ï¼Œè¯·ç›´æ¥åœ¨Linuxç¯å¢ƒä¸­ä½¿ç”¨nano XXXXåˆ›å»ºï¼Œè¯·ä¸è¦åœ¨Windowsç¯å¢ƒä¸­åˆ›å»ºåå†ä¸Šä¼ ã€‚\nåœ¨USBæ¥å£ä¸Šæ’å…¥è“ç‰™é€‚é…å™¨ï¼Œå¯ä»¥åœ¨PVEæ‰“å¼€çš„æƒ…å†µä¸‹æ’å…¥ã€‚æ’å…¥åå¯ä»¥å‘½ä»¤æ£€æµ‹ä¸€ä¸‹ï¼š\n1 2 lsusb | grep bluetooth -i Bus 003 Device 003: ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode) å®‰è£…è“ç‰™ç®¡ç†å™¨ï¼š\n1 apt install -y bluetooth é€‚é…é¥æ§å™¨ï¼Œè¯·è‡ªè¡Œå°†ä»¥ä¸‹çš„macåœ°å€æ›´æ”¹ä½ çš„è®¾å¤‡çš„macåœ°å€ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 ## è¿›å…¥è“ç‰™ç®¡ç†å™¨ $ bluetoothctl [NEW] Controller 00:10:20:30:40:50 hostname [default] ## è®¾ç½®agent [bluetooth]# default-agent Default agent request successful ## å¼€å¯è“ç‰™é€‚é…å™¨ [bluetooth]# power on Changing power on succeeded [CHG] Controller 00:10:20:30:40:50 Powered: yes ## ä½¿è“ç‰™é¥æ§å™¨è¿›å…¥å¾…é…å¯¹çŠ¶æ€ï¼Œæ¯”å¦‚æˆ‘è´­ä¹°çš„å°ç±³è“ç‰™è¯­éŸ³é¥æ§å™¨æ˜¯åŒæ—¶æŒ‰ä½é¥æ§å™¨ä¸Šçš„ä¸»é¡µé”®å’Œèœå•é”®ä¸æ”¾ï¼Œå…¶ä»–é¥æ§å™¨æ ¹æ®å…¶è¯´æ˜æ“ä½œ ## ç„¶åå†è®©è“ç‰™é€‚é…å™¨å¼€å§‹æ‰«æï¼Œè¦é…å¯¹å¥½åå†æ¾å¼€é¥æ§å™¨ [bluetooth]# scan on Discovery started [CHG] Controller 00:10:20:30:40:50 Discovering: yes [NEW] Device 00:12:34:56:78:90 device name [CHG] Device 00:12:34:56:78:90 LegacyPairing: yes ## æ‰«æåˆ°ä½ çš„è“ç‰™é¥æ§å™¨åï¼Œå¼€å§‹é…å¯¹ï¼Œé…å¯¹å®Œæˆå°±å¯ä»¥æ¾å¼€é¥æ§å™¨äº† [bluetooth]# pair 00:12:34:56:78:90 Attempting to pair with 00:12:34:56:78:90 [CHG] Device 00:12:34:56:78:90 Connected: yes [CHG] Device 00:12:34:56:78:90 Paired: yes Pairing successful ## é…å¯¹å¹¶è¿æ¥æˆåŠŸåæç¤ºç¬¦ä¼šå˜æˆè¿™æ · [å°ç±³è“ç‰™è¯­éŸ³é¥æ§å™¨]# ## å¯ä»¥ä¿¡ä»»è¯¥é¥æ§å™¨ [å°ç±³è“ç‰™è¯­éŸ³é¥æ§å™¨]# trust 00:12:34:56:78:90 # å¦‚æƒ³äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è‡ªè¡ŒæŸ¥çœ‹å¸®åŠ© [å°ç±³è“ç‰™è¯­éŸ³é¥æ§å™¨]# help ## é€€å‡ºè“ç‰™ç®¡ç†å™¨ [å°ç±³è“ç‰™è¯­éŸ³é¥æ§å™¨]# exit ~~è®©é¥æ§å™¨ä¸€ç›´ä¿æŒè¿æ¥ä¸æ–­å¼€ï¼Œä¿®æ”¹/etc/bluetooth/main.confï¼Œæ‰¾åˆ°å¯¹åº”çš„è¡Œå–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼š~~è®©é¥æ§å™¨ä¸æ–­è¿ï¼Œå®é™…ä¸Šæ˜¯ä¸è®©USBè®¾å¤‡è¿›å…¥suspendçŠ¶æ€ï¼ˆé¥æ§å™¨å¹¶æ²¡æœ‰çœŸæ­£çš„æ–­å¼€è“ç‰™é€‚é…å™¨ï¼‰ï¼Œé¦–å…ˆä¿®æ”¹/etc/bluetooth/input.confï¼Œè®¾ç½®IdleTimeoutä¸º0ï¼š\n1 2 [General] IdleTimeout=0 ç„¶åæ ¹æ®å†…æ ¸å¸®åŠ©æ–‡æ¡£ Power Management for USBï¼Œä¿®æ”¹Linuxå¯åŠ¨å‚æ•°ã€‚\næ–¹å¼ä¸€ï¼Œé‡å¯åç”Ÿæ•ˆã€‚ä¿®æ”¹å†…æ ¸å¯åŠ¨å‚æ•°ï¼Œå¦‚æœæ˜¯ä¼ ç»Ÿæ–¹å¼å®‰è£…çš„PVE/Linuxï¼Œä¿®æ”¹/etc/default/grubçš„GRUB_CMDLINE_LINUX_DEFAULTè¡Œï¼Œå¦‚æœæ˜¯ZFSå®‰è£…çš„PVE/Linuxï¼Œä¿®æ”¹/etc/kernel/cmdlineçš„rootè¡Œï¼Œå¢åŠ ä¸€ä¸ªå‚æ•°usbcore.autosuspend=-1ï¼Œç„¶åè¿è¡Œä¸‹åˆ—å‘½ä»¤æ›´æ–°å†…æ ¸ï¼š 1 update-grub \u0026amp;\u0026amp; update-initramfs -u -k all æ–¹å¼äºŒï¼Œé‡å¯åç”Ÿæ•ˆã€‚æ–°å»º/etc/modprobe.d/disable_usbcore_autosuspend.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š 1 options usbcore autosuspend=-1 æ–¹å¼ä¸‰ï¼Œä»…æœ¬æ¬¡å¯åŠ¨æœ‰æ•ˆï¼Œå¹¶ä¸”éœ€è¦åœ¨è¿è¡Œä¸‹é¢å‘½ä»¤ä¹‹åæ’å…¥çš„è®¾å¤‡æ‰ä¼šç”Ÿæ•ˆã€‚ 1 echo -1 \u0026gt;/sys/module/usbcore/parameters/autosuspend ä¸Šè¿°ä¿®æ”¹æ˜¯ç¦ç”¨æ‰€æœ‰USBè®¾å¤‡è‡ªåŠ¨æŒ‚èµ·ï¼ˆæ¯•ç«Ÿæ˜¯æœåŠ¡å™¨ï¼Œä¸éœ€è¦æŒ‚èµ·ï¼‰ï¼Œä½†å¦‚æœä½ ç¡®å®éœ€è¦é’ˆå¯¹æŸäº›è®¾å¤‡ä¿ç•™è‡ªåŠ¨æŒ‚èµ·ï¼Œè€Œåªé’ˆå¯¹é¥æ§å™¨ç¦ç”¨è‡ªåŠ¨æŒ‚èµ·ï¼Œè¯·å‚è€ƒ USBè‡ªåŠ¨æŒ‚èµ· è¿›è¡Œé’ˆå¯¹æ€§çš„è®¾ç½®ã€‚\nåœ¨è¿™é‡Œä¹Ÿç®€å•çš„æä¸€ä¸‹ LibreELEC/CoreELEC å¦‚ä½•é€‚é…è“ç‰™é¥æ§å™¨ï¼Œå®‰è£…å¥½é€‚é…å™¨åï¼Œè¿›å…¥LibreELEC/CoreELECç³»ç»Ÿè®¾ç½®èœå•çš„è“ç‰™å­èœå•åï¼Œæ ¹æ®é¥æ§å™¨è¯´æ˜ä¹¦ä½¿é¥æ§å™¨è¿›å…¥å¾…é…å¯¹çŠ¶æ€ï¼Œç„¶ååœ¨LibreELEC/CoreELECä¸­å¼€å§‹æ‰«æï¼Œæ‰«æåˆ°åç‚¹å‡»é…å¯¹å³å¯ã€‚\nçº¢å¤–é¥æ§å™¨ ä¸å¥½ç”¨ï¼Œæ•™ç¨‹å°±ä¸å†™äº†ã€‚\nå†æ¬¡æé†’ å¦‚æœæ²¡æœ‰æ‰“å¼€Kodiï¼Œé¥æ§å™¨çš„ç”µæºé”®æŒ‰ä¸‹ä¼šå…³é—­PVEç³»ç»Ÿï¼Œæ¨èé€‚é…é¥æ§å™¨ä¹‹åæŒ‰ç…§ã€Šåƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœã€‹ä¸€æ–‡è¿›è¡ŒæŒ‰é”®åŠ«æŒï¼Œå¹¶å¯ä»¥å®ç°é¥æ§å™¨æ¥å¯åŠ¨/å…³é—­Kodiã€‚\n","date":"2022-07-13T00:00:00+08:00","image":"https://evine.win/p/kodi-use-remote-controller/kodi-poster_hu6a9a6c2102fadf339a8899f5319f0c51_430270_120x120_fill_q75_box_smart1.jpg","permalink":"https://evine.win/p/kodi-use-remote-controller/","title":"ä¸ºKodié€‚é…é¥æ§å™¨"},{"content":" æœ¬æ–‡ä¸ºåŸåˆ›æ•™ç¨‹ï¼Œè½¬è½½è¯·æ³¨æ˜æ¥æºåŠä½œè€…ã€‚ æ›´æ–°äº2023å¹´8æœˆ4æ—¥ï¼Œä»¥å½“å‰æœ€æ–°çš„PVE 8ä¸ºç¤ºä¾‹ã€‚\næŒ‰ç…§æœ¬æ•™ç¨‹ï¼Œå¯ä»¥ä¿æŒPVEå…¨éƒ¨å¥—ä»¶ç¨³å®šçš„åŒæ—¶ï¼Œåˆèƒ½å¤Ÿä½¿ç”¨æœ€æ–°ç‰ˆKodiï¼› æ²¡æœ‰å®‰è£…ä»»ä½•æ¡Œé¢ç³»ç»Ÿæˆ–å…¶ä»–ä»€ä¹ˆè½¯ä»¶åŒ…ï¼Œå¯¹PVEç¯å¢ƒçš„å½±å“å¯ä»¥å¿½ç•¥ä¸è®¡ï¼› ä¸ç”¨ç›´é€šæ˜¾å¡ï¼Œé€€å‡ºKodiå°±æ˜¯PVEçš„æ§åˆ¶å°ï¼Œåœ¨å‡ºç°æ•…éšœæ—¶æ’æ•…æ›´å®¹æ˜“ï¼Œè¦æ˜¯æŠŠæ˜¾å¡ç»™ç›´é€šç»™è™šæ‹Ÿæœºäº†ï¼ŒPVEæ§åˆ¶å°ä¸Šå•¥ä¹Ÿçœ‹ä¸åˆ°ï¼Œå¦‚æœè¿™æ—¶sshè¿˜å‡ºé—®é¢˜äº†çš„è¯ï¼Œä½ æ ¹æœ¬å°±æ— æ³•æ’æ•…ï¼› å°‘äº†è™šæ‹Ÿæœºè¿™ä¸€å±‚ï¼Œå‡å°‘äº†èµ„æºæŸè€—ï¼ŒKodiåœ¨PVEä¸­è¿è¡Œåˆå§‹åªéœ€è¦200Må·¦å³å†…å­˜ï¼› éŸ³é¢‘å¯ä»¥åœ¨Kodiä¸­è®¾ç½®é€šè¿‡HDMIç›´é€šï¼Œæ”¯æŒ7.1å£°é“æ— å‹åŠ›ï¼Œè€Œå¦‚æœé‡‡ç”¨ç›´é€šæ ¸æ˜¾åŠå£°å¡ç»™LibreELECè™šæ‹Ÿæœºçš„è¯ï¼Œåœ¨LibreELECä¸­éŸ³é¢‘å¯èƒ½å°±æ— æ³•é€šè¿‡HDMIç›´é€šï¼Œåªèƒ½å§”å±ˆå·´å·´çš„ç”¨2.0å£°é“ï¼› å¦å¤–ï¼Œå¦‚æœä½¿ç”¨è“ç‰™é¥æ§å™¨çš„è¯ï¼Œååº”é€Ÿåº¦æ¯”åœ¨è™šæ‹Ÿæœºä¸­ç›´é€šè“ç‰™é€‚é…å™¨è¦å¿«ï¼Œä½“éªŒè¦å¥½å¾ˆå¤šã€‚ å®‰è£…æœ€æ–°ç‰ˆKodi æ³¨ï¼šæœ¬æ–‡æ˜¯ä»¥GBMæ¨¡å¼å®‰è£…çš„Kodiï¼Œè¿™ç§æ¨¡å¼ç›®å‰ä¹Ÿå·²æ”¯æŒHDRã€‚\nä¸éœ€è¦å¦‚åŒç½‘ä¸Šå…¶ä»–æ•™ç¨‹ä¸€èˆ¬ï¼Œå®‰è£…xinitã€xfceã€lightdmã€gnomeç­‰ç­‰ä¸€ç³»åˆ—æ¡Œé¢ç³»ç»Ÿæ‰éœ€è¦çš„è½¯ä»¶åŒ…ï¼Œç›´æ¥å®‰è£…Kodiå°±å¥½äº†ã€‚å°½é‡ä¸è£…æ— å…³çš„åŒ…ï¼Œè¿™å¯¹PVEç³»ç»Ÿæ¯”è¾ƒé‡è¦ã€‚\nå¹¶ä¸”ç½‘ä¸Šçš„æ•™ç¨‹å…¨æ˜¯å®‰è£…Debianå®˜æ–¹ä»“åº“è‡ªå¸¦çš„Kodiï¼Œä½†å› ä¸ºDebiançš„ç‰¹è‰²ï¼Œå®˜æ–¹ç¨³å®šä»“åº“ä¸­çš„Kodiç‰ˆæœ¬æ¯”è¾ƒè€ã€‚æ‰€ä»¥æœ‰çš„åšä¸»è‡ªä½œä¸»å¼ å¯ç”¨äº†Debiançš„sidä¸ç¨³å®šä»“åº“ï¼Œä»¥ä¾¿ä½¿ç”¨æ–°ç‰ˆKodiï¼Œè¿™å¯¹PVEç¯å¢ƒæ¥è¯´æ˜¯ä¸å¯å–çš„ï¼Œä¸å»ºè®®è¿™ä¹ˆåšã€‚\näº‹å®ä¸Šåœ¨Debianç¨³å®šç‰ˆæœ¬ä¸Šä¹Ÿæ˜¯å¯ä»¥å®‰è£…æœ€æ–°ç‰ˆçš„Kodiçš„ï¼Œä¸»è¦æ¥è‡ªä¸€ä¸ªä¸“é—¨è´Ÿè´£ç»´æŠ¤å¤šåª’ä½“è½¯ä»¶çš„ä»“åº“ï¼šhttps://www.deb-multimedia.orgï¼Œå›½å†…è¿æ¥è¾ƒå·®ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œæœ‰ä¸€å †é•œåƒç«™å¯ä»¥ä½¿ç”¨ã€‚ä»¥ä¸‹åŸºäºPVE 8.xï¼ˆDebian bookwormï¼‰å¹¶ä»¥åŒ—å¤–é•œåƒç«™ä¸ºä¾‹ï¼ˆå…¶ä»–ç‰ˆæœ¬è¯·ä¿®æ”¹bookwormä¸ºå¯¹åº”çš„ç‰ˆæœ¬å·ï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 # ä¿¡ä»»keyring cd ~ wget https://mirrors.bfsu.edu.cn/debian-multimedia/pool/main/d/deb-multimedia-keyring/deb-multimedia-keyring_2016.8.1_all.deb dpkg -i deb-multimedia-keyring_2016.8.1_all.deb # æ·»åŠ ä»“åº“ echo \u0026#34;deb https://mirrors.bfsu.edu.cn/debian-multimedia bookworm main non-free\u0026#34; \u0026gt; /etc/apt/sources.list.d/multimedia.list echo \u0026#34;deb https://mirrors.bfsu.edu.cn/debian-multimedia bookworm-backports main\u0026#34; \u0026gt;\u0026gt; /etc/apt/sources.list.d/multimedia.list # å®‰è£…æœ€æ–°ç¨³å®šç‰ˆKodi apt update apt install -y va-driver-all pipewire-audio kodi # va-driver-allæ˜¯ç¡¬è§£éœ€è¦çš„ï¼ŒKodi 20è¿˜éœ€è¦é¢å¤–å®‰è£…pipewireï¼ŒKodi 19åŠä»¥ä¸‹ç‰ˆæœ¬åº”è¯¥ä¸éœ€è¦ æ³¨ï¼šå„PVEå¯¹åº”çš„Debianç‰ˆæœ¬å·å¦‚ä¸‹ï¼š\nPVE 5 -\u0026gt; Debian 9 -\u0026gt; stretch PVE 6 -\u0026gt; Debian 10 -\u0026gt; buster PVE 7 -\u0026gt; Debian 11 -\u0026gt; bullseye PVE 8 -\u0026gt; Debian 12 -\u0026gt; bookworm PVE 9 -\u0026gt; Debian 13 -\u0026gt; trixieï¼ˆæœªæ¥çš„ç‰ˆæœ¬å·ï¼‰ æœ‰çš„æ—¶å€™ï¼Œåœ¨å½“å‰debiançš„ç‰ˆæœ¬ä¸­ï¼Œdeb-multimediaä¼šå°†å¤§ç‰ˆæœ¬å‡çº§åçš„Kodiæ”¾åœ¨backportsæºä¸­ï¼Œå¦‚æœä½ å‘ç°ä½ å®‰è£…çš„Kodiä¸æ˜¯å½“å‰æœ€æ–°ç‰ˆï¼ˆè§ å®˜æ–¹ï¼Œå¯ä»¥å…ˆæŸ¥è¯¢ä¸€ä¸‹çœ‹çœ‹æ˜¯ä¸æ˜¯åœ¨backportsæºä¸­ï¼Œå†æ¥æŒ‡å®šbackportsæºå®‰è£…ã€‚\nå› ä¸ºPVE 8å¯ä»¥ç›´æ¥å®‰è£…åˆ°Kodi 20ï¼Œæ‰€ä»¥ä»¥ä¸‹å†…å®¹ä»¥PVE 7ä»backportsæºå®‰è£…æœ€æ–°ç‰ˆæœ¬ä¸ºä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 # æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬ apt update apt policy kodi # è¾“å‡º kodi: Installed: 5:19.5-dmo0+deb11u2 Candidate: 5:19.5-dmo0+deb11u2 Version table: 5:20.2-dmo~bpo11+1 100 100 https://mirrors.bfsu.edu.cn/debian-multimedia bullseye-backports/main amd64 Packages *** 5:19.5-dmo0+deb11u2 500 500 https://mirrors.bfsu.edu.cn/debian-multimedia bullseye/main amd64 Packages 100 /var/lib/dpkg/status 5:18.9-dmo0+deb10u1 500 500 https://mirrors.bfsu.edu.cn/debian-multimedia bullseye/main amd64 Packages 2:19.1+dfsg2-2+deb11u1 500 500 https://mirrors.bfsu.edu.cn/debian bullseye/main amd64 Packages # ä¸Šé¢çš„è¾“å‡ºå†…å®¹æ˜¾ç¤ºæœ€æ–°çš„ç‰ˆæœ¬ä½äºbullseye-backportsä¸­ï¼Œæ‰€ä»¥è¿™æ—¶è¦å®‰è£…æœ€æ–°ç‰ˆæœ¬éœ€è¦æŒ‡å®šbackportsæºï¼Œå¦‚ä¸‹ apt install -t bullseye-backports -y kodi å›½å†…å…¶ä»–é•œåƒç«™å¦‚æ¸…åTUNAã€ä¸­ç§‘å¤§USTCã€è…¾è®¯äº‘ã€å›½å®¶äº’è”ç½‘ç»œä¿¡æ¯ä¸­å¿ƒã€åŒ—äº¤ã€å—å¤§ç­‰ç«™ç‚¹éƒ½æ˜¯æœ‰deb-multimediaä»“åº“çš„ï¼Œæ”¹æˆä½ ä¸‹è½½æœ€å¿«çš„é•œåƒç«™ç‚¹å³å¯ã€‚\nè®¾ç½®å¼€æœºå¯åŠ¨ æ–°å»º/etc/systemd/system/kodi.serviceï¼Œå†…å®¹å¦‚ä¸‹ï¼ˆè¯·ç›´æ¥åœ¨Linuxç¯å¢ƒä¸­åˆ›å»ºï¼Œä¸è¦åœ¨Windowsç¯å¢ƒä¸­åˆ›å»ºï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [Unit] Description = Kodi Media Center After = network-online.target polkit.service evsieve.service remote-fs.target systemd-user-sessions.service nss-lookup.target sound.target bluetooth.target upower.service mysqld.service lircd.service Wants = network-online.target polkit.service evsieve.service [Service] User = root Group = root ExecStart = /usr/bin/kodi ExecStop = /usr/bin/killall --user root --exact --wait kodi.bin TimeoutStartSec = infinity Restart = on-abort [Install] WantedBy = multi-user.target æ³¨ï¼šExecStopè¿™ä¸€è¡Œï¼Œç›¸æ¯”ä½¿ç”¨killallï¼Œæ›´æ¨èä½¿ç”¨kodi-sendï¼Œè¯¦è§ï¼škodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜ã€‚\nä¸Šé¢å†…å®¹ä¸­æ˜¯ä»¥rootç”¨æˆ·å¯åŠ¨Kodiçš„ï¼Œç„¶åå¯ç”¨å¼€æœºè‡ªåŠ¨å¯åŠ¨å³å¯ï¼ˆæ— éœ€é‡å¯PVEç³»ç»Ÿï¼Œå¦‚ä¸å¯ç”¨åˆ™éœ€è¦å¼€æœºåæ‰‹åŠ¨å¯åŠ¨ï¼‰ï¼ŒKodiå°†åœ¨PVEé€šè¿‡HDMI/DPæ¥å£è¿æ¥çš„æ˜¾ç¤ºå™¨/ç”µè§†æœºä¸Šæ˜¾ç¤ºå‡ºæ¥ï¼š\n1 systemctl enable --now kodi.service ä»ç³»ç»Ÿä¿¡æ¯ä¸­å¯ä»¥çœ‹åˆ°å†…æ ¸ã€åˆ†è¾¨ç‡ã€GPUã€OPENGLã€è§†çª—ç³»ç»Ÿç­‰ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°è§†çª—ç³»ç»Ÿç›´æ¥ä½¿ç”¨GBMï¼Œè€ŒéX11ï¼ˆä¸‹å›¾æ˜¯åœ¨PVE 8ä¸Šå®‰è£…çš„Kodi 20.2çš„æˆªå›¾ï¼Œå·²ç»æ˜ç¡®æ”¯æŒHDRäº†ï¼‰ï¼š\nå¦‚ä½•ä»¥érootç”¨æˆ·è¿è¡ŒKodi å¦‚æœä»¥rootç”¨æˆ·å¯åŠ¨Kodiï¼Œé‚£ä¹ˆKodiå…·æœ‰å¾ˆé«˜çš„æƒé™ï¼Œå¯ä»¥å…³æœºã€é‡å¯ä¸»æœºç­‰ç­‰ï¼Œè€Œå¦‚æœä¸èµ‹äºˆæ™®é€šç”¨æˆ·è¿™äº›æƒé™çš„è¯ï¼Œæ™®é€šç”¨æˆ·å°±ä¸èƒ½è¿›è¡Œè¿™äº›å…³æœºã€é‡å¯ç³»ç»Ÿçš„æ“ä½œï¼Œæ‰€ä»¥ä»¥érootç”¨æˆ·å¯åŠ¨Kodiè¿˜æ˜¯æœ‰å¿…è¦çš„ã€‚\nä¸‹æ–‡å‡ä»¥ç”¨æˆ·åevineä¸¾ä¾‹ã€‚ä½ å¯ä»¥ç›´æ¥å»ºç«‹ä¸€ä¸ªkodiä¸“ç”¨è´¦æˆ·ï¼Œç”¨æˆ·åå¯ä»¥å°±å«kodiã€‚\nå¦‚æœè¿˜æ²¡æœ‰è¿™ä¸ªç”¨æˆ·çš„è¯å°±æ·»åŠ ç”¨æˆ·ï¼Œæ³¨æ„å®¶ç›®å½•ä¸èƒ½å°‘\n1 2 3 4 5 # å¸¸è§„ç”¨æˆ·evine useradd -m -d /home/evine -U -s /usr/bin/bash evine # å¦‚æœæƒ³å»ºç«‹çš„æ˜¯kodiä¸“ç”¨è´¦æˆ·ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨/varï¼Œå¹¶ç¦æ­¢ç™»é™† useradd -m -d /var/lib/kodi -U -s /usr/sbin/nologin kodi ä¸ºæ™®é€šç”¨æˆ·è®¾ç½®å¯†ç ï¼Œ\n1 passwd evine # æ›¿æ¢ä¸ºä½ è‡ªå·±åˆ›å»ºçš„ç”¨æˆ·åï¼Œå¦‚æœè®¾ç½®çš„shellæ˜¯/usr/sbin/nologinå¯ä»¥å¿½ç•¥è¿™ä¸€æ­¥ ä¸ºç”¨æˆ·æ·»åŠ video render audioå’Œinputçš„ç»„æƒé™\næ³¨ï¼šå¦‚æœè¿˜éœ€è¦ä½¿ç”¨å…¶ä»–ç±»å‹çš„è®¾å¤‡ï¼Œåˆ™è¿›ä¸€æ­¥æ·»åŠ å…¶å¯¹åº”çš„ç»„æƒé™ï¼Œè¯¦è§ï¼šHOW-TO:Install Kodi for Linuxã€‚\n1 usermod -a -G video,render,audio,input evine # æ›¿æ¢ä¸ºä½ è‡ªå·±åˆ›å»ºçš„ç”¨æˆ·å æœ‰å…³ç”¨æˆ·ç»„ï¼Œå¯ä»¥å‚è§ï¼šhttps://wiki.debian.org/SystemGroups ï¼Œè§£é‡Šä¸€ä¸‹æ·»åŠ çš„å„ç”¨æˆ·ç»„çš„ç”¨é€”ï¼š\nvideoï¼šå…è®¸è¯¥æ™®é€šç”¨æˆ·ä½¿ç”¨æ˜¾ç¤ºå™¨ï¼› renderï¼šå…è®¸è¯¥æ™®é€šç”¨æˆ·ä½¿ç”¨æ˜¾å¡ç¡¬è§£ï¼› audioï¼šå…è®¸è¯¥æ™®é€šç”¨æˆ·ä½¿ç”¨éŸ³é¢‘è®¾å¤‡ï¼› inputï¼šå…è®¸è¯¥æ™®é€šç”¨æˆ·ä½¿ç”¨è¾“å…¥è®¾å¤‡ï¼Œå¦‚é”®ç›˜ã€é¼ æ ‡ã€2.4Gæ— çº¿é¥æ§å™¨ç­‰ã€‚ å¦‚æœå·²ç»è®¾ç½®äº†rootç”¨æˆ·çš„å¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼Œéœ€è¦å…ˆç¦ç”¨å®ƒ\n1 systemctl disable --now kodi.service æ–°å»ºæˆ–ä¿®æ”¹/etc/systemd/system/kodi.serviceï¼Œå†…å®¹å¦‚ä¸‹ï¼ˆè¯·ç›´æ¥åœ¨Linuxç¯å¢ƒä¸­åˆ›å»ºï¼Œä¸è¦åœ¨Windowsç¯å¢ƒä¸­åˆ›å»ºï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [Unit] Description = Kodi Media Center After = network-online.target polkit.service evsieve.service remote-fs.target systemd-user- sessions.service nss-lookup.target sound.target bluetooth.target upower.service mysqld.service lircd.service Wants = network-online.target polkit.service evsieve.service [Service] User = evine # ä¾æ®ä½ è‡ªå·±å»ºç«‹çš„è´¦æˆ·ä¿®æ”¹ Group = evine # ä¾æ®ä½ è‡ªå·±å»ºç«‹çš„è´¦æˆ·ä¿®æ”¹ ExecStart = /usr/bin/kodi ExecStop = /usr/bin/killall --user evine --exact --wait kodi.bin # ä¾æ®ä½ è‡ªå·±å»ºç«‹çš„è´¦æˆ·ä¿®æ”¹ TimeoutStartSec = infinity Restart = on-abort [Install] WantedBy = multi-user.target æ³¨ï¼šExecStopè¿™ä¸€è¡Œï¼Œç›¸æ¯”ä½¿ç”¨killallï¼Œæ›´æ¨èä½¿ç”¨kodi-sendï¼Œè¯¦è§ï¼škodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜ã€‚\nå¯ç”¨å¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼ˆå¦‚ä¸å¯ç”¨åˆ™éœ€è¦å¼€æœºåæ‰‹åŠ¨å¯åŠ¨ï¼‰\n1 systemctl enable --now kodi.service æ³¨ï¼šå¦‚Kodiä½¿ç”¨smbå…±äº«æ¥è®¿é—®åª’ä½“èµ„æºï¼Œæˆ–è€…æ˜¯å…¶ä»–æœåŠ¡ï¼Œå¯ä»¥åœ¨å¯åŠ¨Koidå‰åˆ¤æ–­å¯åŠ¨æ¡ä»¶æ˜¯å¦å…·å¤‡ï¼Œè¯¦è§æœ¬æ–‡æœ€ä¸Šæ–¹çš„ç›¸å…³æ•™ç¨‹ã€‚\nç›¸å…³å‘½ä»¤ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # å¯åŠ¨Kodi systemctl start kodi.service # é‡å¯Kodi systemctl restart kodi.service # å…³é—­Kodiï¼Œå¯ä»¥ç›´æ¥åœ¨Kodiç•Œé¢ä¸­ç‚¹å‡»é€€å‡ºæŒ‰é’®ï¼Œä¹Ÿå¯å‘½ä»¤è¡Œå…³é—­ï¼Œå…³é—­åå°±æ˜¯PVEçš„æ§åˆ¶å° systemctl stop kodi.service # æŸ¥çœ‹Kodiçš„è¿è¡ŒçŠ¶æ€ systemctl status kodi.service # ç¦ç”¨Kodiå¼€æœºè‡ªåŠ¨å¯åŠ¨ systemctl disable kodi.service # æœªæ¥å‡çº§Kodiï¼Œå°±ç›´æ¥è¿è¡Œaptå‘½ä»¤å°±å¥½äº†ï¼Œç®€å•æ–¹ä¾¿ apt update \u0026amp;\u0026amp; apt upgrade å…³äºéŸ³é¢‘ç›´é€š å¦‚æœä½ çš„HDMI/DPæ¥æ”¶æ–¹æ”¯æŒç›´æ¥è§£ç æŸäº›éŸ³é¢‘ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨Kodiç³»ç»Ÿè®¾ç½®ç³»ç»Ÿ -\u0026gt; éŸ³é¢‘ä¸­ï¼Œå‹¾é€‰â€œå…è®¸ç›´é€šè¾“å‡ºâ€åï¼Œå¹¶åœ¨å…¶ä¸‹æ–¹ç»§ç»­å‹¾é€‰ä½ çš„HDMI/DPæ¥æ”¶æ–¹æ”¯æŒçš„éŸ³é¢‘æ ¼å¼ï¼ˆå¦‚æœæŸä¸ªæ ¼å¼å‹¾é€‰åè¯¥æ ¼å¼çš„è§†é¢‘æ’­æ”¾æ²¡æœ‰å£°éŸ³ï¼Œé‚£ä¹ˆå°±æ˜¯ä½ çš„æ¥æ”¶æ–¹ä¸æ”¯æŒç›´æ¥è§£ç è¯¥éŸ³é¢‘æ ¼å¼ï¼Œå°±ä¸è¦å‹¾é€‰è¯¥æ ¼å¼ï¼‰ã€‚\néŸ³é¢‘ç›´é€šæœ€é«˜å¯ä»¥æ”¯æŒ7.1å…¨æ™¯å£°ï¼Œè€Œå¦‚æœä½ ç”¨Kodiè§£ç åå†ä¼ é€’ç»™HDMI/DPï¼Œæœ‰å¯èƒ½åªèƒ½æ”¯æŒ2.0æˆ–2.1å£°é“ï¼ˆå¯¹ï¼Œç®¡ä½ å‡ å£°é“é€šé€šè½¬æˆäºŒå£°é“ï¼‰ï¼Œè¿™å¤§å¤§é™ä½äº†è§†å¬æ„Ÿå—ã€‚ç›´é€šæ˜¾å¡å’Œå£°å¡ç»™è™šæ‹ŸæœºLibreELECçš„ï¼Œæˆ‘ä¸ç¡®å®šæ˜¯å¦å¯ä»¥å®ç°éŸ³é¢‘ç›´é€šï¼Œè¿™è‡³å°‘åœ¨æˆ‘çš„ç¯å¢ƒä¸­æ— æ³•å®ç°ã€‚\né€šè¿‡HDMI/DPç›´é€šçš„éŸ³é¢‘ï¼Œåœ¨æ’­æ”¾æ—¶æ— æ³•åœ¨Kodiä¸­æ§åˆ¶éŸ³é‡ï¼Œåªèƒ½é€šè¿‡æ¥æ”¶æ–¹æ§åˆ¶ã€‚è€ŒæŸäº›ä¸æ”¯æŒç›´é€šçš„éŸ³é¢‘ï¼Œåˆ™æ˜¯é€šè¿‡Kodiè§£ç çš„ï¼Œæ—¢å¯ä»¥é€šè¿‡Kodiæ§åˆ¶éŸ³é‡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ¥æ”¶æ–¹æ§åˆ¶éŸ³é‡ã€‚\né€šè¿‡HDMI/DPç›´é€šçš„éŸ³é¢‘ï¼Œåœ¨è§£ç ä¿¡æ¯ï¼ˆæŒ‰é”®ç›˜çš„oé”®ï¼Œå¦‚æƒ³åœ¨é¥æ§å™¨ä¸ŠæŒ‰å‡ºæ¥ï¼Œéœ€è¦åœ¨Kodiä¸­å®‰è£…Keymap Editoræ’ä»¶æ¥å°†æŸä¸ªæŒ‰é’®æ˜ å°„ä¸ºæ­¤åŠŸèƒ½ï¼‰ä¸Šæ‰€æœ‰éŸ³é¢‘é¢‘é“å°†æ˜¾ç¤ºRAWï¼Œè€Œæœªç›´é€šçš„éŸ³é¢‘å°†æ˜¾ç¤ºæ­£å¸¸çš„è½¨é“ä¿¡æ¯ã€‚å¦‚ä¸‹é¢å›¾ç‰‡æ‰€ç¤ºï¼š\nå…³äºç¡¬è§£ å¦‚æœä½ æ˜¯æŒ‰ç…§ä¸Šè¿°æ–¹å¼å®‰è£…çš„Kodiï¼Œé‚£ä¹ˆå®ƒå°†è‡ªåŠ¨æ£€æµ‹å¯ä»¥ç¡¬è§£çš„è§†é¢‘ç¼–ç å¹¶è‡ªåŠ¨è®¾ç½®å¥½ï¼Œå¦‚æœä½ æƒ³è¦äº†è§£ä½ çš„æ ¸æ˜¾åˆ°åº•å¯ä»¥ç¡¬è§£ä»€ä¹ˆç¼–ç ï¼Œå¯ä»¥è¿™æ ·ï¼š\n1 2 3 4 5 ## å®‰è£… apt install -y vainfo ## æ£€æµ‹ vainfo æˆåŠŸç¡¬è§£çš„è§†é¢‘ï¼Œåœ¨è§£ç ä¿¡æ¯ä¸Šçš„ç¡¬ä»¶è§£ç å°†æ˜¾ç¤ºæ´»åŠ¨ï¼Œå¹¶ä¸”è§£ç å™¨ä½¿ç”¨çš„æ˜¯vaapiç³»åˆ—è§£ç å™¨ï¼Œå¦‚ä¸‹é¢å›¾ç‰‡æ‰€ç¤ºï¼š\nã€ŠPVEå®‰è£…Kodiã€‹ç³»åˆ—æ–‡ç«  å¦‚æœä½ éœ€è¦ä¸ºKodié…ç½®æ‘‡æ§å™¨ï¼Œå¹¶è®©é¥æ§å™¨å¯ä»¥æ§åˆ¶Kodiå¯åŠ¨å’Œåœæ­¢ï¼Œé‚£ä¹ˆè¯·å‚è€ƒä¸‹åˆ—æ•™ç¨‹ã€‚\nPVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodi ä¸ºKodié€‚é…é¥æ§å™¨ ä¿®æ”¹Kodiå­—å¹•å­—ä½“ ä¿®æ”¹Kodiçš®è‚¤å­—ä½“ å±è”½Kodiçš„å…³æœºã€é‡å¯æŒ‰é’® è®¾ç½®Kodiå¯åŠ¨çš„å‰ç½®æ¡ä»¶ åƒä½¿ç”¨ç›’å­ï¼LibreELECä¸€æ ·ä½¿ç”¨PVEç›´è£…çš„Kodiï¼Œå®ç°é¥æ§å™¨å¯åœ kodi-sendä½¿ç”¨ç›¸å…³è¯´æ˜ è½¬æ¢é¥æ§å™¨çš„é€€å‡ºé”®ä¸ºè¿”å›é”® æ€»ç»“ æŒ‰ä¸Šè¿°æµç¨‹ï¼Œåªä¸»åŠ¨å®‰è£…äº†å¾ˆå°‘çš„è½¯ä»¶åŒ…ï¼Œæ ¹æ®dpkg-query -L kodiçš„è¾“å‡ºå¯çŸ¥ï¼Œé™¤å»Kodiçš„å¯æ‰§è¡Œç¨‹åºå¤–ï¼ŒKodiå®‰è£…çš„æ–‡ä»¶ä¸»è¦é›†ä¸­åœ¨è¿™å‡ ä¸ªæ–‡ä»¶å¤¹ï¼š\n1 2 3 4 5 6 /usr/lib/x86_64-linux-gnu/kodi /usr/share/applications/ /usr/share/doc/kodi /usr/share/man/man1/ /usr/share/metainfo/ /usr/share/xsessions åŒæ—¶ï¼ŒKodiçš„é…ç½®æ–‡ä»¶ä¸»è¦å­˜æ”¾åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š\n1 2 /usr/share/kodi # ç³»ç»Ÿçº§é…ç½® ~/.kodi # ç”¨æˆ·çº§é…ç½® è¿™äº›æ–‡ä»¶å¯¹ç³»ç»Ÿéƒ½è°ˆä¸ä¸Šæœ‰ä»€ä¹ˆæ±¡æŸ“ï¼Œå¯¹PVEå¥—ä»¶æœ¬èº«ä¸€ç‚¹å½±å“éƒ½æ²¡æœ‰ï¼Œæ•´ä½“ä¸Šå¯¹PVEç¯å¢ƒçš„å½±å“æ˜¯å®Œå…¨å¯æ§çš„ã€‚\nåœ¨æœ€åï¼Œæé†’ä¸€ä¸‹ï¼Œå¦‚æœæ˜¯ä»¥rootç”¨æˆ·å¯åŠ¨çš„ï¼Œåƒä¸‡è¦æ³¨æ„åœ¨Kodiä¸­å°†å…³æœºã€é‡å¯ç­‰å½±å“PVEä¸»æœºçš„å‘½ä»¤éƒ½æŒ‰ç…§ä¸Šé¢çš„æ•™ç¨‹å±è”½æ‰ï¼Œè¦ä¸ç„¶ä½ æ‡‚çš„\u0026hellip;\n","date":"2022-07-12T00:00:00+08:00","image":"https://evine.win/p/kodi-install-in-pve/pic5_hu8370a00dfa88e5eac6888add903e6475_78260_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/kodi-install-in-pve/","title":"PVE ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ Kodi"},{"content":" æœ¬æ•™ç¨‹ä¸ºåŸåˆ›æ•™ç¨‹ï¼Œè½¬è½½éœ€æ³¨æ˜æ¥æºåŠä½œè€…ã€‚\nå…³é”®è¯ çˆ±å¿« IKUAI é˜²ç«å¢™ ACL å°ç¦ æ¶æ„IP é™åˆ¶ æ¥æºIP è®¿é—®IP SSH WEBUI è¿œç¨‹æ§åˆ¶ RDP Fail2BAN\nèƒŒæ™¯ æˆ‘ä»¬è½¬å‘äº†ç«¯å£åˆ°å…¬ç½‘çš„äººéƒ½ä¼šé¢ä¸´ä¸€ä¸ªéš¾é¢˜ï¼Œæ¯”å¦‚è½¬å‘Windowsçš„è¿œç¨‹æ§åˆ¶RDPï¼Œæ¯”å¦‚NASçš„SSHæœåŠ¡æˆ–è€…å…¶ä»–WEBUIæœåŠ¡ï¼Œè€æ˜¯æœ‰è®¸å¤šæ¶æ„IPæ¥æ¢æµ‹å¹¶å°è¯•çˆ†ç ´ã€‚è¯šç„¶ï¼Œæ¯”å¦‚ç¾¤æ™–ä¼šè‡ªå¸¦é˜²ç«å¢™ï¼ŒLinuxä¹Ÿå¯ä»¥ä½¿ç”¨fail2banæˆ–è€…å…¶ä»–é˜²ç«å¢™æ¥å®ç°è‡ªåŠ¨å°ç¦æ¶æ„IPï¼Œè¿™äº›éƒ½æ˜¯æœ‰æ•ˆçš„æ‰‹æ®µã€‚\nä¹‹å‰ï¼Œæˆ‘ä½¿ç”¨fail2banæ¥å®ç°è‡ªåŠ¨å°ç¦æ¶æ„IPï¼Œåæ¥å‘ç°æ¯å¤©éƒ½ä¼šåœ¨å‡ åä¸ªIPè¢«å°ç¦ï¼Œä¸€æ®µæ—¶é—´ä»¥åï¼Œå½“fail2bançš„å°ç¦æ•°é‡ä¸Šåƒåï¼Œç”±äºæœºå™¨æ€§èƒ½å·®ï¼Œfail2banç«Ÿç„¶å ç”¨äº†å¥½å¤šèµ„æºã€‚åæ¥æ¢çˆ±å¿«æŒ‰ä¸‹è½½æµç¨‹è®¾ç½®åï¼Œfail2banæ¸…é™äº†å¥½å¤šï¼Œæœºå™¨æ€§èƒ½ä¹Ÿæ¢å¤äº†ã€‚è€ŒåƒæŠŠWindowsçš„è¿œç¨‹æ¡Œé¢ç«¯å£è½¬å‘å‡ºå»ï¼Œæ— è®ºä½ æ˜¯ä¸æ˜¯ç”¨çš„3389ç«¯å£ï¼Œå¯èƒ½æ¯å¤©éƒ½ä¼šæœ‰IPè¿›è¡Œå‡ ä¸‡æ¬¡çˆ†ç ´å°è¯•ã€‚\nä¸è¿‡è¿™é‡Œæƒ³è¦è¯´æ˜çš„æ˜¯ï¼Œä»¥çˆ±å¿«ä½œä¸ºä¸»è·¯ç”±æ—¶ä¸€ä¸ªæ›´å¥½çš„ä¿æŠ¤æ–¹å¼ï¼Œå°±æ˜¯å……åˆ†åˆ©ç”¨çˆ±å¿«çš„IPåˆ†ç»„ï¼Œç»“åˆç«¯å£è½¬å‘åŠŸèƒ½æˆ–ACLåŠŸèƒ½æ¥å®ç°ã€‚å½“ç„¶ï¼Œè¿™åªæ˜¯ä¿æŠ¤æªæ–½çš„ä¸€ç§ï¼Œæœ€é‡è¦çš„ï¼Œä¸è¦ä½¿ç”¨å¼±å¯†ç ï¼Œä¸è¦ä½¿ç”¨é»˜è®¤å¯†ç ï¼ŒSSHä½¿ç”¨ç§é’¥è€Œéå¯†ç ç­‰ç­‰ã€‚\næµç¨‹ ä¸‹è½½ï¼ˆæˆ–è€…ç‚¹å‡»æ–‡ä»¶å³ä¸Šè§’çš„Copy raw contentæŒ‰é’®å¤åˆ¶ä¸‹æ¥ä¿å­˜ä¸ºcsvæ–‡ä»¶ï¼‰ è¿™ä¸ª æ–‡ä»¶ï¼ˆä¸å®šæœŸæ›´æ–°ï¼‰ï¼Œåœ¨çˆ±å¿«è®¾ç½®ä¸­ ç½‘ç»œè®¾ç½® -\u0026gt; ç»ˆç«¯åˆ†ç»„è®¾ç½® -\u0026gt; IPåˆ†ç»„å¤„å¯¼å…¥ã€‚\né™åˆ¶è®¿é—®æ¥æº\næ–¹å¼1ï¼šä½¿ç”¨å®‰å…¨è®¾ç½® -\u0026gt; ACLè§„åˆ™ï¼ˆéœ€è¦å…ˆè®¾ç½®å¥½ç«¯å£è½¬å‘ï¼Œä½¿ç”¨ACLæ—¶ï¼Œç«¯å£è½¬å‘å¯ä»¥ä¸é™åˆ¶ä»»ä½•æ¥æºï¼‰ï¼Œå‚è€ƒä¸‹é¢çš„æ–¹å¼ï¼Œå…è®¸ä½ æ‰€åœ¨åœ°åŒºçš„å¯¹åº”çš„è¿è¥å•†çš„IPè½¬å‘åˆ°ä½ æ‰€ä½¿ç”¨çš„ç«¯å£ï¼ˆç›®çš„åœ°å€å¯ä»¥ä¸å¡«ï¼Œå¦‚æœè¦å¡«å¯ä»¥å¡«ç«¯å£è½¬å‘å¯¹åº”çš„ç›®æ ‡è®¾å¤‡IPï¼Œä¹Ÿå¯ä»¥å¡«æ•´ä¸ªæœ¬åœ°ç½‘ç»œï¼Œå¦‚10.0.0.0/8ã€172.16.0.0/16æˆ–192.168.0.0/24ï¼Œè¿æ¥æ–¹å‘åŒ¹é…ä¸ºåŸå§‹æ–¹å‘ï¼‰ï¼Œè€Œé˜»æ–­å…¶ä»–æ‰€æœ‰IPè®¿é—®å¯¹åº”çš„ç«¯å£ã€‚\næ–¹å¼2ï¼šæŸäº›æ—§ç‰ˆæœ¬çˆ±å¿«çš„ACLåŠŸèƒ½å¯èƒ½æ˜¯å¤±æ•ˆçš„ï¼ˆä½ å¯ä»¥è‡ªè¡Œæµ‹è¯•ï¼Œæ¯”å¦‚é˜»æ–­ä½ æ‰€åœ¨çœä»½åæ‰‹æœºä½¿ç”¨èœ‚çªç½‘è®¿é—®ï¼‰ï¼Œè¿™æ—¶åªèƒ½åœ¨ç½‘ç»œè®¾ç½® -\u0026gt; ç«¯å£æ˜ å°„ -\u0026gt; ç«¯å£æ˜ å°„å¤„ï¼Œç»™æ¯ä¸€æ¡éœ€è¦é™åˆ¶è®¿é—®æ¥æºIPçš„æ¡ç›®é€‰æ‹©å¯¹åº”çš„IPåˆ†ç»„ã€‚\nè¯´æ˜ ACLåŠŸèƒ½å¤±æ•ˆçš„æ—¶å€™ï¼Œä½¿ç”¨ç«¯å£æ˜ å°„åŠŸèƒ½æ¥é™åˆ¶æ—¶ï¼Œæ¯ä¸€æ¡éœ€è¦é™åˆ¶è®¿é—®æ¥æºçš„æ¡ç›®éœ€è¦åˆ†åˆ«è®¾ç½®ï¼Œæ‰€ä»¥éœ€è¦é™åˆ¶çš„ç«¯å£å’Œä¸éœ€è¦é™åˆ¶çš„ç«¯å£éœ€è¦åˆ†æˆä¸¤æ¡ï¼› éœ€è¦é™åˆ¶è®¿é—®æ¥æºçš„æœåŠ¡ä¸€èˆ¬æ˜¯WEBUIã€RDPã€SSHç­‰ï¼ˆåŸºæœ¬ä¸Šéƒ½æ˜¯tcpåè®®ï¼‰ï¼ŒåƒBT/PTè½¯ä»¶ï¼ˆuTorrent, qBittorrent, transmission, delugeç­‰ç­‰ï¼‰ç­‰P2Pçš„ç›‘å¬ç«¯å£ï¼ˆtcp+udpåè®®ï¼‰å°±ä¸è¦é™åˆ¶è®¿é—®æ¥æºIPï¼› çˆ±å¿«è·¯ç”±å™¨è‡ªå·±çš„WEBUIç«¯å£ä¸è¦é™åˆ¶ï¼Œè¦ä¸ç„¶ä¸‡ä¸€ä½ IPä¸åœ¨å…è®¸èŒƒå›´å†…ï¼Œæ”¹éƒ½éƒ½ä¸äº†ï¼› å»ºè®®å…è®¸è®¿é—®çš„æ¥æºIPéƒ½é€‰ä¸ŠæœªçŸ¥çš„IPåˆ†ç»„ï¼Œå°¤å…¶æ˜¯ä¸­å›½ç§»åŠ¨ï¼Œé™¤äº†é€‰æ‹©ä½ æ‰€åœ¨çœä»½ï¼Œä¸€å®šè¦é€‰ä¸ŠæœªçŸ¥ç§»åŠ¨ã€‚ IPv6 IPv6çš„ACLè®¾ç½®è¯·åœ¨ è¿™é‡Œ æŸ¥çœ‹ã€‚\n","date":"2022-07-08T00:00:00+08:00","image":"https://evine.win/p/ikuai-set-ipv4-acl/pic1_huc8d9904e0468058665f9639c498c48d6_43079_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/ikuai-set-ipv4-acl/","title":"ä½¿ç”¨çˆ±å¿«æ¥é™åˆ¶SSHï¼WEBUIï¼RDPçš„è®¿é—®æ¥æºIPï¼Œä¿æŠ¤å†…ç½‘è®¾å¤‡ä¸è¢«æ”»å‡»"},{"content":"ä»¥ä¸‹å†…å®¹ä»¥4.3.7ä¸ºä¾‹ã€‚\nå¯ç”¨çš„UIä¸»é¢˜æ¸…å•ï¼šList-of-known-qBittorrent-themes\næœ¬äººåˆ¶ä½œçš„dockeré•œåƒï¼šnevinee/qbittorrent\nå¯å®ç°ä¸‹è½½å®Œæˆé€šçŸ¥ã€å®•æœºé€šçŸ¥ã€trackerå‡ºé”™è¶…å‡ºé˜ˆå€¼é€šçŸ¥ã€è‡ªåŠ¨åˆ†ç±»ã€trackerå‡ºé”™æ‰“æ ‡ç­¾ã€æ‰¹é‡ä¿®æ”¹trackerã€æ£€æµ‹æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹æœªåœ¨qbittorrentå®¢æˆ·ç«¯ä¸­åšç§çš„æ–‡ä»¶å¤¹/æ–‡ä»¶ã€é…åˆIYUUAutoReseedå®ç°è‡ªåŠ¨é‡æ–°æ ¡éªŒå’Œè‡ªåŠ¨æ¢å¤åšç§ã€æŒ‡å®šè®¾å¤‡ä¸Šçº¿æ—¶è‡ªåŠ¨é™é€Ÿã€å¤šæ—¶æ®µé™é€Ÿã€å¯¼å‡ºåšç§æ–‡ä»¶æ¸…å•ã€å¯¼å‡ºæœªåšç§æ–‡ä»¶æ¸…å•ç­‰ç­‰ç­‰ç­‰ï¼Œæ•™ç¨‹è§è¿™é‡Œ\nåŒ¿åæ¨¡å¼è¯´æ˜ï¼šAnonymous-Mode\nRSSæ­£åˆ™è¡¨è¾¾å¼æ•™ç¨‹ï¼šhttps://www.jianshu.com/p/54e6137ea4e3\nå¯ç”¨çš„å¤‡ç”¨WebUIæ¸…å•è§ï¼šList-of-known-alternate-WebUIs\n","date":"2021-08-07T00:00:00+08:00","image":"https://evine.win/p/qbittorrent-settings/1%E8%A1%8C%E4%B8%BA_huc57fee344677a40084e50468e69505e3_58748_120x120_fill_box_smart1_3.png","permalink":"https://evine.win/p/qbittorrent-settings/","title":"qBittorrent è®¾ç½®æ•™ç¨‹"}]